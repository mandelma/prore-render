"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[963,524],{8797:function(e,i){const t=(e,i)=>{const t=new Date(e.y,e.m,e.d,e.hour,e.min),s=new Date(i.y,i.m,i.d,i.hour,i.min);return s>=t},s=(e,i,t)=>{const s=new Date(i.y,i.m,i.d,i.hour,i.min),a=new Date(t.y,t.m,t.d,t.hour,t.min);return e>=s&&e<a};i.Z={compare:t,providerMatchingForClient:s}},1840:function(e,i,t){var s=t(3396);let a="";const o=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),i=new google.maps.LatLng(60.2767265,24.8575089),t=new google.maps.DistanceMatrixService;t.getDistanceMatrix({origins:[e],destinations:[i],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,durationInTraffic:!0,avoidHighways:!1,avoidTolls:!1},l)},l=(e,i)=>{if(i===google.maps.DistanceMatrixStatus.OK&&"OK"===i)return console.log("Distance "+e.rows[0].elements[0].distance.text),a=e.rows[0].elements[0].distance.text,"aaaaaaaaaaaaa";console.log("Error:",i),alert(i)},n=()=>(console.log("Is it working??"+a),(0,s.Wm)("div",null,[(0,s.Uk)("Hiiii")])),r=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),i=new google.maps.LatLng(60.2767265,24.8575089);return(google.maps.geometry.spherical.computeDistanceBetween(e,i)/1e3).toFixed(2)};i.Z={distance:o,test:n,theDist:r}},8579:function(e,i,t){const s=t(7218),a="/api/upload",o=async()=>{const e=await s.get(a);return e.data},l=async e=>{const i=await s.post(a,e,{});return i.data},n=async(e,i)=>{const t=await s.post(`${a}/${e}/avatar`,i);return t.data},r=async(e,i)=>{const t=await s.post(`${a}/${e}/update_avatar`,i);return t.data},d=async(e,i)=>{const t=await s.put(`${a}/${e}`,i);return t.data},u=async(e,i)=>{await s.delete(`${a}/${e}/${i}`)};i.Z={getAll:o,create:l,createProfileImage:n,newAvatar:r,updateImage:d,remove:u}},6524:function(e,i,t){t.r(i),t.d(i,{default:function(){return C}});var s=t(3396),a=t(7139);const o={key:0};function l(e,i,t,l,n,r){const d=(0,s.up)("MDBIcon"),u=(0,s.up)("MDBBadge"),c=(0,s.up)("PositiveFeedback"),g=(0,s.up)("MDBCol"),m=(0,s.up)("NegativeFeedback"),p=(0,s.up)("MDBRow"),h=(0,s.up)("MDBTable"),k=(0,s.up)("live-chat"),f=(0,s.up)("MDBBtn");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,"- "+(0,a.zw)(t.provider.yritys)+" -",1),(0,s.Wm)(h,{style:{"font-size":"18px","text-align":"center"}},{default:(0,s.w5)((()=>[(0,s._)("tbody",null,[(0,s._)("tr",null,[(0,s._)("td",null,[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{style:{padding:"10px",cursor:"pointer"},i:"",class:"far fa-thumbs-up",size:"2x",onClick:r.getPositiveFeedback},null,8,["onClick"]),(0,s.Wm)(u,{color:"success",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(t.provider.rating.positive),1)])),_:1}),n.isPositive?((0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(c,{feedback:t.provider.feedback,"onClose:comments":r.closeComments},null,8,["feedback","onClose:comments"])])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{style:{padding:"10px",cursor:"pointer"},i:"",class:"far fa-thumbs-down",size:"2x",onClick:r.getNegativeFeedback},null,8,["onClick"]),(0,s.Wm)(u,{color:"danger",class:"translate-middle p-1",pill:"",size:"lg",notification:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(t.provider.rating.negative),1)])),_:1}),n.isNegative?((0,s.wg)(),(0,s.j4)(m,{key:0,feedback:t.provider.feedback,"onClose:comments":r.closeComments},null,8,["feedback","onClose:comments"])):(0,s.kq)("",!0)])),_:1})])),_:1})])])])])),_:1}),(0,s.Wm)(k,{chatusers:t.chatusers,messages:t.messages,selecteduser:t.selecteduser,"onSelect:user":r.selectUser,"onOn:message":r.onMessage},null,8,["chatusers","messages","selecteduser","onSelect:user","onOn:message"]),(0,s.Wm)(f,{outline:"info",block:"",size:"lg",onClick:i[0]||(i[0]=e=>r.handleOrder(t.provider.id))},{default:(0,s.w5)((()=>[(0,s.Uk)(" Tilaa yritys ")])),_:1}),(0,s.Wm)(f,{outline:"secondary",block:"",size:"lg",onClick:r.canselRecipientFinal},{default:(0,s.w5)((()=>[(0,s.Uk)(" Poistu ")])),_:1},8,["onClick"])])}var n=t(4313);function r(e,i,t,o,l,n){const r=(0,s.up)("MDBListGroupItem"),d=(0,s.up)("MDBListGroup"),u=(0,s.up)("MDBBtn");return(0,s.wg)(),(0,s.iD)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.feedback,(e=>((0,s.wg)(),(0,s.j4)(d,{light:"",small:"",style:{"text-align":"left"},key:e.id},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.pos),1)])),_:2},1024)])),_:2},1024)))),128)),(0,s.Wm)(u,{block:"",outline:"secondary",size:"lg",onClick:n.closeFeedback},{default:(0,s.w5)((()=>[(0,s.Uk)("Poistu kommenteistä")])),_:1},8,["onClick"])])}var d={name:"positive-feedback",props:{feedback:Array},components:{MDBListGroup:n.d8,MDBListGroupItem:n.FQ,MDBBtn:n.$v},data(){return{}},methods:{closeFeedback(){this.$emit("close:comments",!1)}}},u=t(89);const c=(0,u.Z)(d,[["render",r]]);var g=c;function m(e,i,t,o,l,n){const r=(0,s.up)("MDBListGroupItem"),d=(0,s.up)("MDBListGroup"),u=(0,s.up)("MDBBtn");return(0,s.wg)(),(0,s.iD)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.feedback,(e=>((0,s.wg)(),(0,s.j4)(d,{light:"",small:"",style:{"text-align":"left"},key:e.id},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.neg),1)])),_:2},1024)])),_:2},1024)))),128)),(0,s.Wm)(u,{block:"",outline:"secondary",size:"lg",onClick:n.closeFeedback},{default:(0,s.w5)((()=>[(0,s.Uk)("Poistu kommenteistä")])),_:1},8,["onClick"])])}var p={name:"negative-feedback",props:{feedback:Array},components:{MDBListGroup:n.d8,MDBListGroupItem:n.FQ,MDBBtn:n.$v},data(){return{}},methods:{closeFeedback(){this.$emit("close:comments",!1)}}};const h=(0,u.Z)(p,[["render",m]]);var k=h,f=t(686),w=t(4058),v=t(7957),y=t(2343),b={name:"recipient-final",props:{chatusers:Array,selecteduser:null,messages:Array,provider:Object,room:String,roomUserCount:Number,available:String,booking:Array},components:{User:v.Z,MessagePanel:y.Z,PositiveFeedback:g,NegativeFeedback:k,liveChat:f["default"],MDBBtn:n.$v,MDBTable:n.re,MDBRow:n.uZ,MDBCol:n.TK,MDBIcon:n.vm,MDBBadge:n.m_},data(){return{selectedUser:null,isPositive:!1,isNegative:!1,isChat:!1,isPressedOpenChat:!1,isPressedContactToUser:!1,isConnection:!1,isTwoUsers:!1,feedback:this.provider.feedback,isPressedFinal:!1,count:0,userCount:0}},mounted(){},methods:{chatCredentials(){},sendToApp(){console.log("Pressed"),this.$emit("finalinfo","Tere siit finaalist")},selectUser(e){this.$emit("select",e)},onMessage(e,i){this.$emit("message",e,i)},test(e){console.log("From chat: "+e)},openChat(){this.isChat=!0,this.count++,console.log("this room is "+this.room)},contactToUser(){this.isPressedContactToUser=!0,w.Z.emit("updateRoom",this.room),w.Z.on("get updated room users",(e=>{console.log("New users update "+e.users.length),e.users.length>1?this.isConnection=!0:this.isConnection=!1})),this.isPressedFinal=!0,this.isChat=!0},handleOrder(e){this.$emit("provider:ordered",e)},getPositiveFeedback(){this.isPositive=!0,this.isNegative=!1},getNegativeFeedback(){this.isNegative=!0,this.isPositive=!1},closeComments(e){this.isPositive=this.isNegative=e,console.log("result "+e)},canselRecipientFinal(){this.isChat=!1,this.$emit("cansel:final",!1)}}};const I=(0,u.Z)(b,[["render",l]]);var C=I},1963:function(e,i,t){t.r(i),t.d(i,{default:function(){return ae}});var s=t(3396),a=t(7139),o=t(9242);const l=e=>((0,s.dD)("data-v-342e11b3"),e=e(),(0,s.Cn)(),e),n={key:0},r={key:1},d={key:0},u={key:1},c={key:1,for:"file-upload",class:"custom-file-upload"},g={key:0},m={key:1},p=["src"],h=["src"],k={key:1,style:{border:"1px solid grey",padding:"10px"}},f={for:"file-upload",class:"custom-file-upload"},w={key:0},v={key:1},y=["src"],b={key:0},I={key:1,for:"file-upload",class:"custom-file-upload"},C={key:0},D={key:1},_=["src"],M=l((()=>(0,s._)("h2",null,"Ordered",-1))),U={key:0},B={class:"ui large form"},x={class:"field"},F=l((()=>(0,s._)("option",{disabled:"",value:""},"Suodatin...",-1))),P=l((()=>(0,s._)("option",{value:"distance"},"Etäisyyden mukaan",-1))),z=l((()=>(0,s._)("option",{value:"rating"},"positiivisen palauteen mukaan",-1))),S=[F,P,z],W=l((()=>(0,s._)("br",null,null,-1))),$={key:0},Z=l((()=>(0,s._)("h4",null,"Saatavilla sen aikaan",-1))),T={key:1},A=l((()=>(0,s._)("br",null,null,-1))),E={style:{"font-size":"14px"}},L=l((()=>(0,s._)("h4",null,"Sovittaessa",-1))),j=l((()=>(0,s._)("tr",null,null,-1))),R={key:1},O=l((()=>(0,s._)("h2",null,"Yrityksiä hetkellä ei löytyy",-1))),q=[O];function N(e,i,l,F,P,z){const O=(0,s.up)("recipientFinal"),N=(0,s.up)("MDBContainer"),G=(0,s.up)("successMessage"),K=(0,s.up)("MDBTextarea"),V=(0,s.up)("MDBBtn"),H=(0,s.up)("MDBTable"),Y=(0,s.up)("MDBCol"),Q=(0,s.up)("MDBRow"),J=(0,s.up)("MDBBtnClose"),X=(0,s.up)("MDBBadge");return P.isProviderSelected?((0,s.wg)(),(0,s.j4)(N,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(O,{"onCansel:final":z.handleCanselFinal,"onProvider:ordered":z.orderSuccess,provider:P.selectedProvider,room:P.room,available:P.availability,booking:l.booking,chatusers:l.chatusers,selecteduser:l.selecteduser,messages:l.messages,onMessage:z.onMessage,onSelect:z.selectUser,onFinalinfo:z.finalinfo},null,8,["onCansel:final","onProvider:ordered","provider","room","available","booking","chatusers","selecteduser","messages","onMessage","onSelect","onFinalinfo"])])),_:1})):((0,s.wg)(),(0,s.j4)(N,{key:1},{default:(0,s.w5)((()=>[(0,s._)("h3",null,"Päivämäärä: "+(0,a.zw)(l.booking[0].date),1),(0,s._)("h2",null,"Tarvin tässä osaaja - "+(0,a.zw)(l.line),1),(0,s.Wm)(G,{message:P.orderMessage},null,8,["message"]),(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(H,{border:"primary",style:{"font-size":"18px","text-align":"left"}},{default:(0,s.w5)((()=>[(0,s._)("tbody",null,[(0,s._)("tr",null,[P.isEditDescription?((0,s.wg)(),(0,s.iD)("td",r,[(0,s.Wm)(K,{label:"Uusi kuvaus",rows:"4",modelValue:P.description,"onUpdate:modelValue":i[0]||(i[0]=e=>P.description=e)},null,8,["modelValue"])])):((0,s.wg)(),(0,s.iD)("td",n,(0,a.zw)(l.booking[0].description),1))]),(0,s._)("tr",null,[P.isEditDescription?((0,s.wg)(),(0,s.iD)("td",u,[(0,s.Wm)(V,{outline:"info",block:"",size:"lg",onClick:z.saveEditedDescription},{default:(0,s.w5)((()=>[(0,s.Uk)("Tallenna tehtävän kuvaus")])),_:1},8,["onClick"])])):((0,s.wg)(),(0,s.iD)("td",d,[(0,s.Wm)(V,{outline:"info",block:"",size:"lg",onClick:i[1]||(i[1]=e=>P.isEditDescription=!0)},{default:(0,s.w5)((()=>[(0,s.Uk)("Muokkaa tehtävän kuvausta")])),_:1})]))])])])),_:1}),null===l.booking[0].image||0===l.booking[0].image.length?((0,s.wg)(),(0,s.j4)(Q,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(Y,null,{default:(0,s.w5)((()=>[P.isAddImage?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(V,{key:0,block:"",color:"primary",onClick:z.pressAddFirstImage},{default:(0,s.w5)((()=>[(0,s.Uk)("Add image")])),_:1},8,["onClick"])),P.isAddImage?((0,s.wg)(),(0,s.iD)("label",c,[P.value?((0,s.wg)(),(0,s.iD)("span",g," Muokkaa kuva: "+(0,a.zw)(P.value.name),1)):((0,s.wg)(),(0,s.iD)("span",m,"Valitse kuva tehtävästä"))])):(0,s.kq)("",!0),(0,s._)("input",{id:"file-upload",type:"file",onChange:i[2]||(i[2]=(...e)=>z.handleFileChange&&z.handleFileChange(...e))},null,32),P.showImage&&!P.isUploaded?((0,s.wg)(),(0,s.iD)("img",{key:2,src:P.showImage,style:{width:"200px","margin-bottom":"20px"},alt:"..."},null,8,p)):(0,s.kq)("",!0),P.isImageSelected?((0,s.wg)(),(0,s.j4)(V,{key:3,block:"",size:"lg",onClick:i[3]||(i[3]=i=>z.uploadFirstImage(e.i))},{default:(0,s.w5)((()=>[(0,s.Uk)("Upload image")])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.images,((e,o)=>((0,s.wg)(),(0,s.j4)(Q,{class:"imageSection",key:o},{default:(0,s.w5)((()=>[e.name?((0,s.wg)(),(0,s.j4)(Y,{key:0},{default:(0,s.w5)((()=>[(0,s._)("img",{src:P.showImage&&P.isUploaded&&P.imageIndex===o?P.showImage:t(3866)(`./${e.name}`),class:"loading",style:{width:"100%","margin-bottom":"20px"},alt:"kuva"},null,8,h),(0,s._)("div",null,[P.isEditImage&&P.imageIndex===o?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(V,{key:0,outline:"info",block:"",size:"lg",onClick:e=>z.pressEditImage(o)},{default:(0,s.w5)((()=>[(0,s.Uk)(" Muokkaa kuva tehtävästä ")])),_:2},1032,["onClick"])),P.imageIndex===o?((0,s.wg)(),(0,s.iD)("div",k,[(0,s.Wm)(J,{style:{float:"right"},onClick:z.closeEditImage},null,8,["onClick"]),(0,s._)("label",f,[P.value?((0,s.wg)(),(0,s.iD)("span",w," Muokkaa kuva: "+(0,a.zw)(P.value.name),1)):((0,s.wg)(),(0,s.iD)("span",v,"Valitse uusi kuva tehtävästä"))]),(0,s._)("input",{id:"file-upload",type:"file",onChange:i[4]||(i[4]=(...e)=>z.handleFileChange&&z.handleFileChange(...e))},null,32),P.isImageSelected?((0,s.wg)(),(0,s.j4)(V,{key:0,block:"",size:"lg",onClick:i=>z.uploadEditedImage(e,o)},{default:(0,s.w5)((()=>[(0,s.Uk)("Change image")])),_:2},1032,["onClick"])):(0,s.kq)("",!0),(0,s.Wm)(V,{block:"",color:"danger",size:"lg",onClick:i=>z.removeImg(e._id)},{default:(0,s.w5)((()=>[(0,s.Uk)("Remove image")])),_:2},1032,["onClick"]),(0,s.Uk)("' "),P.showImage&&!P.isImageCreated?((0,s.wg)(),(0,s.iD)("img",{key:1,src:P.showImage,style:{width:"200px","margin-bottom":"20px"},alt:"..."},null,8,y)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])])),_:2},1024)):(0,s.kq)("",!0)])),_:2},1024)))),128)),null!==l.booking[0].image?((0,s.wg)(),(0,s.iD)("div",b,[l.booking[0].image.length>0?((0,s.wg)(),(0,s.j4)(V,{key:0,style:{"margin-bottom":"20px"},block:"",size:"lg",outline:"success",onClick:z.pressAdditionalImage},{default:(0,s.w5)((()=>[(0,s.Uk)(" Lataa uusi kuva ")])),_:1},8,["onClick"])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),P.isAddImage?((0,s.wg)(),(0,s.iD)("label",I,[P.value?((0,s.wg)(),(0,s.iD)("span",C," Muokkaa kuva: "+(0,a.zw)(P.value.name),1)):((0,s.wg)(),(0,s.iD)("span",D,"Valitse kuva tehtävästä"))])):(0,s.kq)("",!0),(0,s._)("input",{id:"file-upload",type:"file",onChange:i[5]||(i[5]=(...e)=>z.handleFileChange&&z.handleFileChange(...e))},null,32),P.isImageSelected?((0,s.wg)(),(0,s.j4)(V,{key:2,block:"",size:"lg",onClick:z.uploadAdditionalImage},{default:(0,s.w5)((()=>[(0,s.Uk)("Lataa uusi kuva tehtävästä")])),_:1},8,["onClick"])):(0,s.kq)("",!0),P.showImage&&!P.isImageCreated?((0,s.wg)(),(0,s.iD)("img",{key:3,src:P.showImage,style:{width:"200px","margin-bottom":"20px"},alt:"..."},null,8,_)):(0,s.kq)("",!0)]),(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Y)])),_:1})])),_:1}),P.isOrdered?((0,s.wg)(),(0,s.j4)(Y,{key:0},{default:(0,s.w5)((()=>[M])),_:1})):((0,s.wg)(),(0,s.j4)(Y,{key:1},{default:(0,s.w5)((()=>[l.providers.length>0?((0,s.wg)(),(0,s.iD)("div",U,[(0,s._)("div",B,[(0,s._)("div",x,[(0,s.wy)((0,s._)("select",{id:"listOfProviders","onUpdate:modelValue":i[6]||(i[6]=e=>P.filterResult=e),onClick:i[7]||(i[7]=(...e)=>z.addFilter&&z.addFilter(...e))},S,512),[[o.bM,P.filterResult]])])]),W,(0,s.Wm)(H,{style:{"font-size":"18px","text-align":"center"}},{default:(0,s.w5)((()=>[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.providers,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[e.timeoffer.map((e=>P.datetime.providerMatchingForClient(l.bookingTime,{y:e.yearFrom,m:e.monthFrom,d:e.dayFrom,hour:e.hoursFrom,min:e.minutesFrom},{y:e.yearTo,m:e.monthTo,d:e.dayTo,hour:e.hoursTo,min:e.minutesTo}))).includes(!0)?((0,s.wg)(),(0,s.iD)("td",$,[(0,s.Wm)(V,{style:{width:"200px",padding:"20px","background-color":"grey",border:"solid #4c4949",color:"#f0eeee","font-size":"150%"},outline:"info",size:"lg",onClick:i=>z.getProviderInfo(e,"green")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.yritys),1)])),_:2},1032,["onClick"]),(0,s.Wm)(X,{color:"success",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.w5)((()=>[Z])),_:1})])):((0,s.wg)(),(0,s.iD)("td",T,[(0,s.Wm)(V,{style:{width:"200px",padding:"20px","background-color":"#827f7f",border:"solid #5f5d5d",color:"#f0eeee","font-size":"150%"},size:"lg",onClick:i=>z.getProviderInfo(e,"orange")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.yritys)+" ",1),A,(0,s._)("span",E,"Etäisyys: "+(0,a.zw)(e.distance)+" km",1)])),_:2},1032,["onClick"]),(0,s.Wm)(X,{color:"info",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.w5)((()=>[L])),_:1})]))])))),128)),j])])),_:1})])):((0,s.wg)(),(0,s.iD)("div",R,q))])),_:1})),(0,s.Wm)(V,{block:"",outline:"danger",size:"lg",onClick:z.canselResult},{default:(0,s.w5)((()=>[(0,s.Uk)("Takaisin")])),_:1},8,["onClick"])])),_:1})])),_:1}))}t(2062),t(7658);var G=t(4313),K=t(8797),V=t(6524),H=t(8033),Y=t(1840),Q=t(9398),J=t(8579),X=t(5800),ee=t(4058),ie={name:"recipient-panel-result",props:{chatusers:Array,selecteduser:null,messages:Array,loggedInUser:Object,booking:null,images:Array,bookingTime:null,providers:Array,confirmedBookings:Array,line:String},data(){return{chatUser:{},count:0,datetime:K.Z,distance:Y.Z,selectedProvider:null,isProviderSelected:!1,availability:"",orderMessage:null,isOrdered:!1,isEditDescription:!1,description:this.booking[0].description,isAddImage:!1,isEditImage:!1,isUploadImage:!1,isUploaded:!1,isImageCreated:!1,isAddNewImage:!1,value:null,imageIndex:null,file:null,isImageSelected:!1,showImage:null,tempImages:[],imagesx:[],imagesxxx:[],room:"",roomUserCount:0,filterResult:""}},components:{successMessage:H.Z,dist:Y.Z,recipientFinal:V["default"],MDBBtn:G.$v,MDBBtnClose:G.Ok,MDBContainer:G.L5,MDBTable:G.re,MDBRow:G.uZ,MDBCol:G.TK,MDBTextarea:G.uj,MDBBadge:G.m_},methods:{getDistance(){console.log("sss "+Y.Z.test())},selectUser(e){this.$emit("select",e)},onMessage(e,i){this.$emit("message",e,i)},finalinfo(e){console.log("Final info in result pressed "),this.$emit("finalinfo",e)},getChatCredentials(){},async pressAddFirstImage(){this.isAddImage=!0,this.imageIndex=0},pressEditImage(e){this.isImageSelected=!1,this.imageIndex=e,this.isEditImage=!0,this.isImageCreated=!1,this.isUploaded=!1,this.showImage=null,this.value=null},pressAdditionalImage(e){this.imageIndex=this.images.length,this.isAddNewImage=!0,console.log("Images index = "+this.imageIndex),this.isAddImage=!0},closeEditImage(){this.imageIndex=null},handleFileChange(e){try{const i=e.target.files[0];if(console.log("event target client ",e.target.files[0]),i){const t=URL.createObjectURL(i);this.tempImages.push(t),this.showImage=URL.createObjectURL(i),this.file=e.target.files[0]}}catch(i){console.log("Error:",i)}this.value=e.target.files[0],e.target.files[0]?this.isImageSelected=!0:this.isImageSelected=!1},async removeImg(e){this.$emit("removeImage",e),await X.Z.removeImage(this.booking[0].id,e),await J.Z.remove(e,this.booking[0].id),this.isImageSelected=!1,this.showImage=null},async uploadFirstImage(e){const i=new FormData;this.isUploadImage=!0,i.append("file",this.file,this.file.name);const t=await J.Z.create(i);if(await X.Z.addImage(this.booking[0].id,t.imgCreated._id),t){this.file=null;const e={_id:t.imgCreated._id,image:t.imgCreated.image,name:t.imgCreated.name};this.$emit("addImage",e),this.isImageSelected=!1,this.isUploaded=!0,this.imageIndex=null}},async uploadAdditionalImage(){console.log("Image index index "+this.imageIndex);const e=new FormData;this.isUploadImage=!0,this.isUploaded=!0,e.append("file",this.file,this.file.name);const i=await J.Z.create(e);if(await X.Z.addImage(this.booking[0].id,i.imgCreated._id),i){this.file=null;const e={_id:i.imgCreated._id,image:i.imgCreated.image,name:i.imgCreated.name};this.$emit("addImage",e),this.isImageSelected=!1,this.isUploaded=!0}},async uploadEditedImage(e,i){console.log("Edited image index is: "+i),this.isUploaded=!0,this.isImageCreated=!0;const t=new FormData;t.append("file",this.file,this.file.name);const s=await J.Z.updateImage(e._id,t);s&&(this.file=null,this.$emit("editImage",e,s),setTimeout((async()=>{}),2e3),this.isImageSelected=!1,this.isEditImage=!1,this.isUploaded=!0,this.imageIndex=null)},saveEditedDescription(){this.isEditDescription=!1;const e={description:this.description};this.$emit("editDescription",this.description),X.Z.editDescription(this.booking[0].id,e),this.description=""},async orderSuccess(e){this.isProviderSelected=!1,console.log("Provider id "+e),console.log("Recpient id: "+this.booking[0].id);this.selectedProvider.id;await X.Z.addProviderData(this.booking[0].id,this.selectedProvider.id);const i=await X.Z.updateRecipient(this.booking[0].id,{status:"notSeen"});console.log("Is status updated: "+i.status),this.$emit("remove:confirmed:provider",e),this.$emit("set:order:to:send",this.booking[0].id);const t=this.booking[0].id,s=await Q.Z.addProviderBooking(e,t);"Recipient is added!"===s?(this.orderMessage="Tilaus on lähetetty vahvistettavaksi! Kiitos!",console.log("Booking made - id: "+s.id),this.isOrdered=!0,setTimeout((()=>{this.orderMessage=null}),3e3)):(this.orderMessage="Olet lähetänyt tilauksen!",setTimeout((()=>{this.orderMessage=null}),3e3))},getProviderInfo(e,i){this.selectedProvider=e,this.availability=i,this.isProviderSelected=!0,this.room=e.yritys+this.booking[0].user.username,ee.Z.emit("room users count"),ee.Z.on("get room users count",(e=>{console.log("Can we get users data from backend in recipient final??? "+e.users.length),this.roomUserCount=e.users.length}));const t=this.booking[0].user.username,s=e.yritys+this.booking[0].user.username,a={room:s,userID:this.chatUser.id,username:t},o={userID:e.user.id,username:e.user.username,room:s};this.$emit("provider",o);e.user.id,e.user.username;this.$emit("chatCredentials",a),ee.Z.emit("online",s),ee.Z.emit("create room users",{room:s,username:t,providerUsername:e.user.username,providerID:e.user.id})},addFilter(){const e=document.getElementById("listOfProviders");e.addEventListener("change",(e=>{console.log("Filtered provider: "+e.target.value),this.$emit("filter_provider",e.target.value)}))},handleCanselFinal(e){this.isProviderSelected=e},canselResult(){this.$emit("cansel:result",!1)}},async mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const i=JSON.parse(e);this.chatUser=i}}},te=t(89);const se=(0,te.Z)(ie,[["render",N],["__scopeId","data-v-342e11b3"]]);var ae=se}}]);
//# sourceMappingURL=963.e4cdb535.js.map