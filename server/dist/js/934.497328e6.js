"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[934],{1840:function(e,t,o){var a=o(3396);let s="";const i=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),t=new google.maps.LatLng(60.2767265,24.8575089),o=new google.maps.DistanceMatrixService;o.getDistanceMatrix({origins:[e],destinations:[t],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,durationInTraffic:!0,avoidHighways:!1,avoidTolls:!1},l)},l=(e,t)=>{if(t===google.maps.DistanceMatrixStatus.OK&&"OK"===t)return console.log("Distance "+e.rows[0].elements[0].distance.text),s=e.rows[0].elements[0].distance.text,"aaaaaaaaaaaaa";console.log("Error:",t),alert(t)},n=()=>(console.log("Is it working??"+s),(0,a.Wm)("div",null,[(0,a.Uk)("Hiiii")])),r=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),t=new google.maps.LatLng(60.2767265,24.8575089);return(google.maps.geometry.spherical.computeDistanceBetween(e,t)/1e3).toFixed(2)};t.Z={distance:i,test:n,theDist:r}},2283:function(e,t,o){o(4161)},3998:function(e,t){const o=[{label:"Hitsaaja",value:"1"},{label:"Putkimies",value:"2"},{label:"Sähkömies",value:"3"}],a=[{label:"Siivooja",value:"4"}],s=[{group:"Rakennus",options:o},{group:"Kiinteistöala",options:a}];t.Z=s},9934:function(e,t,o){o.r(t),o.d(t,{default:function(){return U}});o(7658);var a=o(3396),s=o(7139),i=o(9242);const l={id:"test",style:{"background-color":"white"}},n={class:"ui large segment form"},r={class:"field"},g=(0,a._)("option",{value:""},"Valitse ammattilainen",-1),c=["label"],p=["value"],d=["value"],m=(0,a._)("option",{disabled:"",value:"1"},"1 kilometriä ympärilläsi",-1),u=(0,a._)("option",{value:"10"},"10 km ympärilläsi",-1),h=(0,a._)("option",{value:"20"},"20 km ympärilläsi",-1),v=(0,a._)("option",{value:"30"},"30 km ympärilläsi",-1),y=(0,a._)("option",{value:"40"},"40 km ympärilläsi",-1),f=(0,a._)("option",{value:"50"},"50 km ympärilläsi",-1),w=(0,a._)("option",{value:"60"},"60 km ympärilläsi",-1),L=(0,a._)("option",{value:"70"},"70 km ympärilläsi",-1),k=(0,a._)("option",{value:"80"},"80 km ympärilläsi",-1),_=(0,a._)("option",{value:"90"},"90 km ympärilläsi",-1),D=(0,a._)("option",{value:"100"},"100 km ympärilläsi",-1),M=[m,u,h,v,y,f,w,L,k,_,D],P=(0,a._)("h3",{style:{"margin-top":"50px"}},"Kartta ladataan...",-1),B=(0,a._)("div",{class:"spinner-border",role:"status"},[(0,a._)("span",{class:"visually-hidden"},"Loading...")],-1),C=(0,a._)("section",{id:"map"},null,-1);function b(e,t,o,m,u,h){const v=(0,a.up)("MDBInput"),y=(0,a.up)("MDBBtn"),f=(0,a.up)("MDBContainer");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(f,{style:{position:"relative","z-index":"1",opacity:"0.8","padding-top":"150px"}},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a.Wm)(v,{label:"Anna osoitteesi",modelValue:u.address,"onUpdate:modelValue":t[0]||(t[0]=e=>u.address=e),id:"autocomplite",size:"lg",wrapperClass:"mb-4"},null,8,["modelValue"])]),(0,a._)("div",n,[(0,a._)("div",r,[(0,a.wy)((0,a._)("select",{id:"listOfProfessionals","onUpdate:modelValue":t[1]||(t[1]=e=>u.prof=e)},[g,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.prodata,(e=>((0,a.wg)(),(0,a.iD)(a.HY,null,[e.group?((0,a.wg)(),(0,a.iD)("optgroup",{label:e.group,key:e.group},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,(e=>((0,a.wg)(),(0,a.iD)("option",{value:e.label,key:e.label},(0,s.zw)(e.label),9,p)))),128))],8,c)):((0,a.wg)(),(0,a.iD)("option",{value:e,key:e.value},(0,s.zw)(e.label),9,d))],64)))),256))],512),[[i.bM,u.prof]])]),(0,a._)("div",{class:(0,s.C_)({hideDistSelectPanel:!u.isDistSelection})},[(0,a.wy)((0,a._)("select",{id:"distance","onUpdate:modelValue":t[2]||(t[2]=e=>u.distBtw=e),onClick:t[3]||(t[3]=(...t)=>e.filterByDistance&&e.filterByDistance(...t))},M,512),[[i.bM,u.distBtw]])],2),(0,a.Uk)(" "+(0,s.zw)(e.isSelection)+" ",1),(0,a._)("h3",{class:(0,s.C_)({activeClients:!u.isActiveProffs})},(0,s.zw)(u.countOfSelectedProfessional+" "+u.professional)+" tarjoaa palvelua ",3),u.prof?((0,a.wg)(),(0,a.iD)("h3",{key:0,class:(0,s.C_)({noClients:u.isActiveProffs})}," Ei ammattilaisia vielä! ",2)):(0,a.kq)("",!0)]),(0,a.Wm)(y,{color:"dark",size:"lg",block:"",onClick:h.receive,style:{position:"relative","z-index":"1",opacity:"1.2"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" Tee uusi tilaus ")])),_:1},8,["onClick"]),(0,a.Wm)(y,{color:"danger",size:"lg",block:"",onClick:t[4]||(t[4]=t=>e.$router.push("/received")),style:{position:"relative","z-index":"1",opacity:"1.0"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" Poistu ")])),_:1})])),_:1}),P,B,C])}var I=o(4161),O=(o(5800),o(9398)),S=o(4313),T=(o(1840),o(2283),o(3998)),x={name:"recipient-public",props:{userIsProvider:Object,isProviderLoggedIn:Boolean},components:{MDBContainer:S.L5,MDBInput:S.u2,MDBBtn:S.$v},data(){return{prof:"",userId:null,providerId:null,address:null,myLat:null,mylng:null,countOfSelectedProfessional:0,isActiveProffs:!1,isDistSelection:!1,professional:"",currentProfession:"",distBtw:1,prodata:T.Z}},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.userId=t.id}new google.maps.Marker({icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"});this.userCurrentLocation();const t=document.getElementById("listOfProfessionals");t.addEventListener("change",(e=>{this.isDistSelection=!0,this.currentProfession=e.target.value,this.showClientLocationOnTheMap(e.target.value,this.distBtw)}));const o=document.getElementById("distance");o.addEventListener("change",(e=>{this.distBtw=parseFloat(e.target.value),this.showClientLocationOnTheMap(this.currentProfession,this.distBtw)}));const a=document.getElementById("autocomplite"),s={lat:50.064192,lng:-130.605469},i={north:s.lat+.1,south:s.lat-.1,east:s.lng+.1,west:s.lng-.1},l={bounds:i,componentRestrictions:{country:"fi"},fields:["address_components","geometry","icon","name","formatted_address"],strictBounds:!1},n=new google.maps.places.Autocomplete(a,l);n.addListener("place_changed",(()=>{let e=n.getPlace();this.myLat=e.geometry.location.lat(),this.myLng=e.geometry.location.lng(),this.getAddressFrom(e.geometry.location.lat(),e.geometry.location.lng()),this.address=e.formatted_address,console.log(e)}))},methods:{receive(){this.$router.push("/rf")},userCurrentLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:o}=e.coords;this.myLat=t,this.myLng=o,this.showUserLocationOnTheMap(t,o)}))},pinSymbol(e){return{path:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z",fillColor:e,fillOpacity:1,strokeColor:"#000",strokeWeight:2,scale:1}},showUserLocationOnTheMap(e,t){new google.maps.Map(document.getElementById("map"),{zoom:13,center:new google.maps.LatLng(e,t),mapTypeId:google.maps.MapTypeId.ROADMAP,accuracy:50})},getAddressFrom(e,t){I.Z.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&key=AIzaSyAQPLmTMlmSTp4spxPwvaJLnzYnkLmZ9zc").then((o=>{if(o.data.error_message)this.error=o.data.error_message,console.log(o.data.error_message);else{new google.maps.Map(document.getElementById("map"),{zoom:13,center:new google.maps.LatLng(e,t),mapTypeId:google.maps.MapTypeId.ROADMAP});console.log(o.data.results.results[0].formatted_address)}})).catch((e=>{this.error=e.message,console.log(e.message)}))},distanceBtw(e,t,o,a){var s=new google.maps.LatLng(e,t),i=new google.maps.LatLng(o,a);return(google.maps.geometry.spherical.computeDistanceBetween(s,i)/1e3).toFixed(2)},otherUserLocations(e,t,o){let a=new google.maps.Map(document.getElementById("map"),{zoom:9,center:new google.maps.LatLng(this.myLat,this.myLng),mapTypeId:google.maps.MapTypeId.ROADMAP});console.log("Users count: "+e.length),console.log("Current distance "+o);let s=0;if(e.length>0){for(let i=0;i<e.length;i++){this.myLat,this.myLng;e[i].profession.forEach((l=>{if(l===t){console.log("Pro "+l.yritys);e[i].latitude,e[i].longitude;console.log("Distance btw "+this.distanceBtw(this.myLat,this.myLng,e[i].latitude,e[i].longitude)),this.isActiveProffs=!0,this.distanceBtw(this.myLat,this.myLng,e[i].latitude,e[i].longitude)<=o&&(s++,new google.maps.Marker({position:new google.maps.LatLng(e[i].latitude,e[i].longitude),map:a}))}}))}this.isActiveProffs=s>0,this.countOfSelectedProfessional=s,console.log("countxx "+s),this.identifyProfText()}},renderClients(e){console.log("Event value "+e.target.value),e.target.value&&this.showClientLocationOnTheMap(e.target.value),this.prof=e.target.value,e.target.value=""},async showClientLocationOnTheMap(e,t){console.log("Current distance herexx  "+t);const o=await O.Z.getProviders();null!==o&&this.otherUserLocations(o,e,t)},identifyProfText(){this.countOfSelectedProfessional>1?this.professional="ammattilaista":this.professional="ammattilainen"}}},A=o(89);const z=(0,A.Z)(x,[["render",b]]);var U=z}}]);
//# sourceMappingURL=934.497328e6.js.map