"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[630],{5800:function(o,e,t){const n=t(7218),a="/api/recipients",i=async()=>{const o=await n.get(a);return o.data},l=async(o,e)=>{const t=await n.post(`${a}/${o}`,e);return t.data};e["Z"]={getRecipients:i,addRecipient:l}},2630:function(o,e,t){t.r(e),t.d(e,{default:function(){return _}});t(7658);var n=t(3396),a=t(9242),i=t(7139);const l={class:"ui large segment form"},s={class:"field"},r=(0,n._)("option",{disabled:"",value:""},"Valitse ammattisi",-1),c=(0,n._)("option",{value:"Putkimies"},"Putkimies",-1),g=(0,n._)("option",null,"Sähkömies",-1),u=(0,n._)("option",{value:"Siivooja"},"Siivooja",-1),p=[r,c,g,u],d=(0,n._)("section",{id:"map"},null,-1);function m(o,e,t,r,c,g){const u=(0,n.up)("MDBBtn"),m=(0,n.up)("MDBContainer");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(m,{style:{position:"relative","z-index":"1",opacity:"0.8","margin-top":"60px"}},{default:(0,n.w5)((()=>[(0,n._)("div",l,[(0,n._)("div",s,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>c.prof=o),onClick:e[1]||(e[1]=o=>g.renderClients(o))},p,512),[[a.bM,c.prof]])])]),(0,n._)("h3",null,(0,i.zw)(c.prof)+" Count: "+(0,i.zw)(c.countOfActiveClients),1),(0,n.Wm)(u,{color:"danger",size:"lg",id:"test"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Style test button ")])),_:1}),(0,n.Wm)(u,{color:"info",size:"lg",block:"",style:{position:"relative","z-index":"1",opacity:"0.8"}},{default:(0,n.w5)((()=>[(0,n.Uk)(" Tarjoa omaa palvelua ")])),_:1}),(0,n.Wm)(u,{color:"success",size:"lg",block:"",onClick:g.showClientLocationOnTheMap,style:{position:"relative","z-index":"1",opacity:"0.8"}},{default:(0,n.w5)((()=>[(0,n.Uk)(" Recipients test ")])),_:1},8,["onClick"]),(0,n.Wm)(u,{color:"danger",size:"lg",block:"",onClick:e[2]||(e[2]=e=>o.$router.push("/")),style:{position:"relative","z-index":"1",opacity:"0.8"}},{default:(0,n.w5)((()=>[(0,n.Uk)(" Poistu ")])),_:1})])),_:1}),d])}var h=t(5800),w=t(4313);let v,C,y=0;var f={clientCount:y,showUserLocationOnTheMap(o,e,t){let n=new google.maps.Map(document.getElementById(t),{zoom:13,center:new google.maps.LatLng(o,e),mapTypeId:google.maps.MapTypeId.ROADMAP,accuracy:0});new google.maps.Marker({position:new google.maps.LatLng(o,e),accuracy:0,map:n})},userCurrentCoords(){navigator.geolocation.getCurrentPosition((o=>{const{latitude:e,longitude:t}=o.coords;v=e,C=t,console.log("Lat now "+e),console.log("Lng now "+t)}))},userCurrentLocation(o){navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:n}=e.coords;v=t,C=n,console.log("Lat now "+v),console.log("Lng now "+C),this.showUserLocationOnTheMap(t,n,o)})):console.log("Loading... or error?")},otherUserLocations(o,e,t){let n=new google.maps.Map(document.getElementById(t),{zoom:10,center:new google.maps.LatLng(v,C),mapTypeId:google.maps.MapTypeId.ROADMAP});if(console.log("Users count: "+o.length),o.length>0){for(let t=0;t<o.length;t++)o[t].professional.forEach((a=>{a===e&&(y+=1,new google.maps.Marker({position:new google.maps.LatLng(o[t].latitude,o[t].longitude),map:n}))}));console.log("Client count: "+y)}}},L={name:"provider-public",components:{MDBContainer:w.L5,MDBInput:w.u2,MDBBtn:w.$v},data(){return{prof:"",countOfActiveClients:null,myLat:null,mylng:null,la:null,ln:null}},mounted(){this.getCurrentPosition()},methods:{renderClients(o){console.log("Event value "+o.target.value),o.target.value&&this.showClientLocationOnTheMap(o.target.value),this.countOfActiveClients=f.clientCount,console.log("Clients here: "+this.countOfActiveClients),o.target.value=""},geolocationSuccess(o){console.log("Geo latitude- "+o.coords.latitude),console.log("Geo longitude- "+o.coords.longitude),this.la=o.coords.latitude,this.lg=o.coords.longitude;let e=new google.maps.Map(document.getElementById("map"),{zoom:13,center:new google.maps.LatLng(o.coords.latitude,o.coords.longitude),mapTypeId:google.maps.MapTypeId.ROADMAP});new google.maps.Marker({position:new google.maps.LatLng(o.coords.latitude,o.coords.longitude),map:e})},geolocationError(o){console.log("Error here: "+o)},getCurrentPosition(){navigator.geolocation.getCurrentPosition(this.geolocationSuccess,this.geolocationError,{timeout:0,enableHighAccuracy:!0,maximumAge:1/0,accuracy:10})},async showClientLocationOnTheMap(o){const e=await h.Z.getRecipients();e&&f.otherUserLocations(e,o,"map")}}},M=t(89);const k=(0,M.Z)(L,[["render",m]]);var _=k}}]);
//# sourceMappingURL=630.e306b2b2.js.map