{"version":3,"file":"js/923.b1fdd9e7.js","mappings":"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","sources":["webpack://prore-mongo/./src/components/notifications/errorMessage.js","webpack://prore-mongo/./src/service/pwAuth.js","webpack://prore-mongo/./src/components/Reset.vue","webpack://prore-mongo/./src/components/Reset.vue?7327"],"sourcesContent":["const ErrorMessage = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n\n    return (\n\n        <div className=\"error\">\n            {message}\n\n        </div>\n\n    )\n}\n\nexport default ErrorMessage","const axios = require('axios');\r\nconst baseUrl = '/api/reset_pw'\r\n\r\nconst forgot = async (email) => {\r\n    const result = await axios.post(`${baseUrl}/forgot_auth`, email);\r\n    return result.data;\r\n}\r\n\r\nconst reset = async (token) => {\r\n    const result = await axios.get(`${baseUrl}/reset_auth/${token}`);\r\n    return result.data;\r\n}\r\n\r\n// Reset password\r\nconst resetAuth = async (auth_data) => {\r\n    const pw = await axios.post(`${baseUrl}/reset_auth`, auth_data);\r\n    return pw.data;\r\n}\r\n\r\nexport default { forgot, reset, resetAuth };","<template>\r\n  <MDBContainer>\r\n    <MDBBtn v-if=\"!isToken \" block outline=\"warning\" @click=\"handleOpenForm\">Vaihtaa salasana</MDBBtn>\r\n    <form v-else style=\"margin-top: 100px;\" @submit.prevent=\"handleSubmitReset\">\r\n      <h3> Reset password</h3>\r\n      <div class=\"form-group\">\r\n        <label>Uusi salasana</label>\r\n        <input type=\"password\" class=\"form-control\" placeholder=\"Uusi salasana\" v-model=\"newPw\"/>\r\n\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Toista salasana</label>\r\n        <input type=\"password\" class=\"form-control\" placeholder=\"Toista salasana\" v-model=\"confirmNewPw\"/>\r\n\r\n        <button type=\"submit\" class=\"btn btn-primary btn-block\">Submit</button>\r\n      </div>\r\n    </form>\r\n    <success-message\r\n        :message = successInfo\r\n    />\r\n\r\n    <error-message\r\n        :message = errorInfo\r\n    />\r\n    <p style=\"color: white;\">Token {{token}}</p>\r\n  </MDBContainer>\r\n\r\n</template>\r\n\r\n<script>\r\nimport authService from '../service/pwAuth'\r\nimport successMessage from '../components/notifications/successMessage'\r\nimport errorMessage from '../components/notifications/errorMessage'\r\nimport {\r\n  MDBContainer,\r\n    MDBBtn\r\n} from 'mdb-vue-ui-kit'\r\nexport default {\r\n  name: \"Reset\",\r\n  components: {\r\n    successMessage,\r\n    errorMessage,\r\n    MDBContainer,\r\n    MDBBtn\r\n  },\r\n  data () {\r\n    return {\r\n      newPw: \"\",\r\n      confirmNewPw: \"\",\r\n      isToken: false,\r\n      token: this.$route.params.token,\r\n      successInfo: null,\r\n      errorInfo: null\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    async handleOpenForm () {\r\n      const result = await authService.reset(this.token)\r\n      if (result === \"valid\") {\r\n        console.log(\"Token \" + result)\r\n        this.isToken = true;\r\n      } else {\r\n        console.log(\"Token \" + result )\r\n        this.errorInfo = result;\r\n        setTimeout(() => {\r\n          this.errorInfo = null\r\n          this.$router.push('/forgot_auth')\r\n        }, 3000)\r\n\r\n      }\r\n\r\n    },\r\n    async handleSubmitReset () {\r\n      const auth = await authService.resetAuth({\r\n        token: this.token,\r\n        password: this.newPw\r\n      })\r\n      console.log(\"Auth--- \" + auth);\r\n      if (auth) {\r\n        this.successInfo = \"Salasanan luonti onnistui!\"\r\n        setTimeout(() => {\r\n          this.successInfo = null\r\n          this.$router.push('/login')\r\n        }, 3000)\r\n\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.error {\r\n  color: white;\r\n  background: #f5839c;\r\n  font-size: 20px;\r\n  border: solid #f75959;\r\n  border-radius: 5px;\r\n  padding: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n</style>","import { render } from \"./Reset.vue?vue&type=template&id=4c93314f&scoped=true\"\nimport script from \"./Reset.vue?vue&type=script&lang=js\"\nexport * from \"./Reset.vue?vue&type=script&lang=js\"\n\nimport \"./Reset.vue?vue&type=style&index=0&id=4c93314f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4c93314f\"]])\n\nexport default __exports__"],"names":["ErrorMessage","message","_createVNode","axios","require","baseUrl","forgot","async","result","post","email","data","reset","get","token","resetAuth","pw","auth_data","_createElementVNode","class","type","style","_createBlock","_component_MDBContainer","$data","isToken","_createElementBlock","onSubmit","_cache","_withModifiers","args","$options","handleSubmitReset","_hoisted_1","_hoisted_2","_hoisted_3","placeholder","newPw","$event","_hoisted_4","_hoisted_5","confirmNewPw","_hoisted_6","_component_MDBBtn","block","outline","onClick","handleOpenForm","_component_success_message","successInfo","_component_error_message","errorInfo","_hoisted_7","_toDisplayString","name","components","successMessage","errorMessage","MDBContainer","MDBBtn","this","$route","params","methods","authService","console","log","setTimeout","$router","push","auth","password","__exports__","render"],"sourceRoot":""}