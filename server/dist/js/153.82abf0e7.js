"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[153],{2782:function(e,t,o){var n=o(4915);const i=o(6425),a=`${n.A}/offers`,r=async()=>{const e=await i.get(a);return e.data},s=async e=>{const t=await i.post(`${a}`,e);return t.data},l=async(e,t)=>{const o=await i.post(`${a}/${e}`,t);return o.data},d=async(e,t)=>{const o=await i.delete(`${a}/${e}/timeoffer/${t}`);return o.data},u=async(e,t)=>{const o=await i.put(`${a}/${e}`,t);return o.data};t.A={getOffers:r,addFirstOffer:s,addAdditionalOffer:l,removeTimeOffer:d,updateOffer:u}},4044:function(e,t,o){o.d(t,{A:function(){return O}});var n=o(6768),i=o(4232);const a={key:0},r={class:"waiting-info"},s={style:{display:"flex","justify-content":"right"}},l=["src"],d={key:0},u={key:0},c={key:1},h={key:1},m={key:0},k={key:1},y={key:1},g={class:"pro-info"},p={style:{float:"right"}},f={key:0},v={key:1},D={key:2},T={key:0},C={key:1},M={key:3},_={key:0,colspan:"2"},F={key:1,colspan:"2"},x={key:4},b={key:0,colspan:"2"},E={key:1,colspan:"2"};function I(e,t,I,w,L,X){const A=(0,n.g2)("monthConverter"),B=(0,n.g2)("MDBBtn"),O=(0,n.g2)("MDBTable");return"for-recipient"===I.status?((0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",r,[(0,n.Lk)("div",s,[(0,n.Lk)("img",{style:{width:"50px"},src:o(6674),alt:"okay"},null,8,l)]),t[2]||(t[2]=(0,n.eW)(" ( ")),(0,n.Lk)("b",null,(0,i.v_)(I.content.ordered[0].yritys),1),(0,n.eW)(" ) - "+(0,i.v_)(I.content.header),1),t[3]||(t[3]=(0,n.Lk)("br",null,null,-1)),(0,n.bF)(A,{num:I.content.onTime[0].month},null,8,["num"]),(0,n.eW)(" "+(0,i.v_)(I.content.onTime[0].day)+" / "+(0,i.v_)(I.content.onTime[0].year),1),t[4]||(t[4]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" klo "+(0,i.v_)(I.content.onTime[0].hours)+" : "+(0,i.v_)(I.content.onTime[0].minutes),1),t[5]||(t[5]=(0,n.Lk)("br",null,null,-1)),L.isMoving?((0,n.uX)(),(0,n.CE)("div",d,["here"===L.isMoving?((0,n.uX)(),(0,n.CE)("p",u,(0,i.v_)(I.content.ordered[0].yritys)+" odottaa sinua osoitteseen: "+(0,i.v_)(I.content.ordered[0].address),1)):"go"===L.isMoving?((0,n.uX)(),(0,n.CE)("p",c,(0,i.v_)(I.content.ordered[0].yritys)+" tulossa sovittuun osoitteeseen!",1)):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("div",h,[0===I.content.ordered[0].range?((0,n.uX)(),(0,n.CE)("p",m,(0,i.v_)(I.content.ordered[0].yritys)+" odottaa sinua osoitteseen: "+(0,i.v_)(I.content.ordered[0].address),1)):I.content.ordered[0].range>0?((0,n.uX)(),(0,n.CE)("p",k,(0,i.v_)(I.content.ordered[0].yritys)+" tulossa sovittuun osoitteeseen!",1)):(0,n.Q3)("",!0)])),(0,n.bF)(B,{block:"",outline:"warning",onClick:t[0]||(t[0]=e=>X.removeComplitedBookingPanel(I.content))},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)(" (Kustub muidu kui aeg läbi saab) - Saab eemaldada kohe (ajutine lahendus) ")]))),_:1})])])):((0,n.uX)(),(0,n.CE)("div",y,[(0,n.Lk)("div",g,[(0,n.Lk)("div",p,[(0,n.bF)(A,{num:I.content.onTime[0].month},null,8,["num"]),(0,n.eW)(" "+(0,i.v_)(I.content.onTime[0].day)+" / "+(0,i.v_)(I.content.onTime[0].year),1),t[6]||(t[6]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" klo "+(0,i.v_)(I.content.onTime[0].hours>=10?I.content.onTime[0].hours:"0"+I.content.onTime[0].hours)+" : "+(0,i.v_)(I.content.onTime[0].minutes>=10?I.content.onTime[0].minutes:"0"+I.content.onTime[0].minutes),1)]),"for-provider"===I.status?((0,n.uX)(),(0,n.Wv)(O,{key:0,borderless:"",style:{"font-size":"18px",color:"#ddd","text-align":"left",padding:"10px",width:"100%"}},{default:(0,n.k6)((()=>[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[t[7]||(t[7]=(0,n.Lk)("td",null," Sovittu: ",-1)),(0,n.Lk)("td",null,(0,i.v_)(I.content.header),1)]),L.offer?((0,n.uX)(),(0,n.CE)("tr",f,[t[8]||(t[8]=(0,n.Lk)("td",null," Hinnalla: ",-1)),(0,n.Lk)("td",null,(0,i.v_)(L.offer.price)+" Eur. ",1)])):(0,n.Q3)("",!0),L.offer&&I.provider.range>0?((0,n.uX)(),(0,n.CE)("tr",v,[t[9]||(t[9]=(0,n.Lk)("td",null," Etäisyys: ",-1)),(0,n.Lk)("td",null,(0,i.v_)(L.offer.distance)+" km. ",1)])):(0,n.Q3)("",!0),L.offer&&I.provider.range>0?((0,n.uX)(),(0,n.CE)("tr",D,[t[10]||(t[10]=(0,n.Lk)("td",null," Matkaiaka: ",-1)),(0,n.Lk)("td",null," noin "+(0,i.v_)(L.offer.duration)+". ",1)])):(0,n.Q3)("",!0),(0,n.Lk)("tr",null,[t[11]||(t[11]=(0,n.Lk)("td",null," Paikka: ",-1)),0===I.provider.range?((0,n.uX)(),(0,n.CE)("td",T,(0,i.v_)(I.provider.address),1)):((0,n.uX)(),(0,n.CE)("td",C,(0,i.v_)(I.content.address),1))]),L.isMoving?((0,n.uX)(),(0,n.CE)("tr",M,["here"===L.isMoving?((0,n.uX)(),(0,n.CE)("td",_,t[12]||(t[12]=[(0,n.Lk)("p",{style:{color:"deepskyblue"}}," Asiakas tulossa! ",-1)]))):"go"===L.isMoving?((0,n.uX)(),(0,n.CE)("td",F,t[13]||(t[13]=[(0,n.Lk)("p",{style:{color:"deepskyblue"}}," Meno asiakkaan luonna! ",-1)]))):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("tr",x,[0===I.provider.range?((0,n.uX)(),(0,n.CE)("td",b,t[14]||(t[14]=[(0,n.Lk)("p",{style:{color:"deepskyblue"}}," Asiakas tulossa! ",-1)]))):I.provider.range>0?((0,n.uX)(),(0,n.CE)("td",E,t[15]||(t[15]=[(0,n.Lk)("p",{style:{color:"deepskyblue"}}," Meno asiakkaan luonna! ",-1)]))):(0,n.Q3)("",!0)]))])])),_:1})):(0,n.Q3)("",!0)])]))}o(8111),o(116);var w=o(5846),L=o(6765),X={name:"Info",props:{index:Number,content:Object,status:String,provider:Object},components:{MDBBtn:w.al,MDBTable:w.EU,monthConverter:L.A},data(){return{offer:this.content.isIncludeOffers?this.content.offers.find((e=>e.provider===this.content.ordered[0])):null,isMoving:this.content.isIncludeOffers?this.content.offers[0].place:null}},methods:{removeCompletedBookingPro(e){this.$emit("remove:proConfirmed",e)},removeComplitedBookingPanel(e){this.$emit("remove:complitedBookingPanel",e)}}},A=o(1241);const B=(0,A.A)(X,[["render",I],["__scopeId","data-v-9f40f3e4"]]);var O=B},6674:function(e,t,o){e.exports=o.p+"img/ok.c97d8292.png"},7153:function(e,t,o){o.r(t),o.d(t,{default:function(){return B}});var n=o(6768),i=o(4232);const a={style:{"padding-top":"25px"}},r={key:0},s={key:1},l={class:"calendar-info"},d={key:0},u={key:1,style:{"padding-bottom":"20px","padding-top":"20px","margin-bottom":"10px"}},c={key:0,style:{"border-left":"4px solid orange"}},h={style:{}},m={key:1,class:"table-dark"},k={style:{"border-left":"4px solid #35BBC7FF",color:"cadetblue"}},y={colspan:"4"},g={key:2,class:"table-dark"},p={colspan:"5  "},f={class:"flex flex-wrap align-items-center justify-content-center"},v={class:"scalein animation-duration-3000 animation-iteration flex align-items-center justify-content-center font-bold w-full"},D={key:0},T={key:1},C={key:2};function M(e,t,o,M,_,F){const x=(0,n.g2)("VueDatePicker"),b=(0,n.g2)("vue-date-picker"),E=(0,n.g2)("MDBCol"),I=(0,n.g2)("MDBIcon"),w=(0,n.g2)("MDBBtnClose"),L=(0,n.g2)("MDBBtn"),X=(0,n.g2)("info"),A=(0,n.g2)("MDBTable"),B=(0,n.g2)("MDBRow"),O=(0,n.g2)("MDBContainer");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.bF)(O,null,{default:(0,n.k6)((()=>[(0,n.bF)(B,null,{default:(0,n.k6)((()=>[(0,n.bF)(E,{style:{},md:"6"},{default:(0,n.k6)((()=>[o.userIsProvider?((0,n.uX)(),(0,n.CE)("div",r,[((0,n.uX)(),(0,n.Wv)(x,{dark:"",style:{width:"100%","justify-content":"center"},onInternalModelChange:F.handleInternal,onOverlayToggle:F.onOverlayToggle,range:"","auto-range":"0",modelValue:_.date,"onUpdate:modelValue":[t[0]||(t[0]=e=>_.date=e),F.handleDate],inline:"",locale:"fi",selectText:"Valitse","min-date":new Date,markers:_.markers,highlight:o.filled.concat(o.client_filled),teleport:!0,"month-change-on-scroll":!1,ref:"datepicker",key:_.pickerKey},null,8,["onInternalModelChange","onOverlayToggle","modelValue","onUpdate:modelValue","min-date","markers","highlight"]))])):((0,n.uX)(),(0,n.CE)("div",s,[((0,n.uX)(),(0,n.Wv)(b,{dark:"",inline:"","auto-apply":"",locale:"fi",highlight:o.filled.concat(o.client_filled),teleport:!0,"month-change-on-scroll":!1,range:"","auto-range":"0","min-date":new Date,ref:"datepicker",key:_.pickerKey,modelValue:_.date,"onUpdate:modelValue":t[1]||(t[1]=e=>_.date=e),onInternalModelChange:F.handleInternal,"enable-time-picker":!1},null,8,["highlight","min-date","modelValue","onInternalModelChange"]))]))])),_:1}),(0,n.bF)(E,{md:"6",style:{position:"relative"}},{default:(0,n.k6)((()=>[(0,n.Lk)("div",l,[_.dateToDisplay?((0,n.uX)(),(0,n.CE)("h4",d,(0,i.v_)(_.dateToDisplay),1)):(0,n.Q3)("",!0),_.calendarContents.length>0?((0,n.uX)(),(0,n.CE)("div",u,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(_.calendarContents,((o,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a},[(0,n.bF)(A,{dark:"",striped:"",borderless:"",style:{"margin-right":"2px","font-size":"14px",color:"#ddd","text-align":"left"}},{default:(0,n.k6)((()=>[(0,n.Lk)("tbody",null,["marker"===o.type?((0,n.uX)(),(0,n.CE)("tr",c,[(0,n.Lk)("td",null,(0,i.v_)(o.content_time),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",h,[(0,n.bF)(x,{dark:"","teleport-center":"",modelValue:_.times[o.content_index],"onUpdate:modelValue":[e=>_.times[o.content_index]=e,F.handleTime],"time-picker":"",range:""},{trigger:(0,n.k6)((()=>[(0,n.bF)(I,{class:"clickable-text",onClick:e=>F.onEdit(o.content_timeId,o.content_index)},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.Lk)("i",{class:"fas fa-edit",size:"lg",style:{cursor:"pointer"}},null,-1)]))),_:2},1032,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])]),(0,n.Lk)("td",null,[(0,n.bF)(w,{white:"",onClick:e=>F.delTimeRange(o.content_timeId,o.content_index)},null,8,["onClick"])])])):(0,n.Q3)("",!0),"highlight"===o.type?((0,n.uX)(),(0,n.CE)("tr",m,[(0,n.Lk)("td",k,(0,i.v_)(o.hours>=10?o.hours:"0"+o.hours)+" : "+(0,i.v_)(o.minutes>=10?o.minutes:"0"+o.minutes),1),(0,n.Lk)("td",y,[null===_.dayPanelIndex||_.dayPanelIndex!==o.index?((0,n.uX)(),(0,n.Wv)(L,{key:0,block:"",color:"dark",onClick:e=>F.openTask(o.index)},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)(" Ava ")]))),_:2},1032,["onClick"])):((0,n.uX)(),(0,n.Wv)(L,{key:1,block:"",color:"dark",onClick:e=>F.closeTask(o.index)},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)(" Sulje ")]))),_:2},1032,["onClick"]))])])):(0,n.Q3)("",!0),"highlight"===o.type&&_.dayPanelIndex===o.index?((0,n.uX)(),(0,n.CE)("tr",g,[(0,n.Lk)("td",p,[(0,n.Lk)("div",f,[(0,n.Lk)("div",v,["pro"===o.state?((0,n.uX)(),(0,n.CE)("div",D,[o.booking.onTime[0].day===o.day?((0,n.uX)(),(0,n.Wv)(X,{key:0,style:{width:"100%"},index:o.index,status:"for-provider",msg:o.booking,content:o.booking,provider:_.provider,"onRemove:proConfirmed":e.handleRemoveProConfirmed},null,8,["index","msg","content","provider","onRemove:proConfirmed"])):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("div",T,[o.booking.onTime[0].day===o.day?((0,n.uX)(),(0,n.Wv)(X,{key:0,style:{width:"100%"},index:o.index,status:"for-recipient",msg:o.booking,content:o.booking,provider:_.provider,"onRemove:proConfirmed":e.handleRemoveProConfirmed},null,8,["index","msg","content","provider","onRemove:proConfirmed"])):(0,n.Q3)("",!0)]))])])])])):(0,n.Q3)("",!0)])])),_:2},1024)])))),128))])):((0,n.uX)(),(0,n.CE)("div",C,t[5]||(t[5]=[(0,n.Lk)("h4",{class:"middle"},"EI MERKINTOJA",-1)])))])])),_:1})])),_:1})])),_:1})])}o(4114),o(8111),o(2489),o(7588),o(1701),o(3579);var _=o(5846),F=o(8068),x=o(4044),b=o(144),E=o(7533),I=o(2782),w=o(1769),L={name:"Calendar",props:{userIsProvider:Object,bookings:Array,filled_days:Array,filled:Array,bookingsConfirmed:Array,client_filled_days:Array,client_filled:Array,confirmedBookingsByProvider:Array},components:{VueDatePicker:F.A,info:x.A,MDBContainer:_.Dj,MDBRow:_.gU,MDBCol:_.m6,MDBTable:_.EU,MDBIcon:_.$u,MDBBtn:_.al,MDBBtnClose:_.uR,MDBListGroup:_.lC,MDBListGroupItem:_._N},data(){const e=(0,b.KR)(),t=(0,b.KR)(null),o=(0,b.KR)(null),n=()=>{t.value.toggleMenu()};return{open:!1,unitedFilledDays:this.filled.concat(this.client_filled),date:e,datepicker:t,pickerKey:o,openCalendar:n,provider:{},providerTimes:[],times:[],dayMarkerData:[],calendarContents:[],editedMarkerID:null,editedMarkerIndex:null,dayPanelIndex:null,userId:null,dateToDisplay:null,markers:[],isHandleInternal:!1,clientFilledContainer:[],proFilledContainer:[]}},beforeMount(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.userId=t.id,console.log("User token in provider: "+t.token),this.providerData()}else this.$router.push("/")},mounted(){this.datepicker&&(console.log("Yes it is datepicker instance..."),this.datepicker.openMenu())},methods:{onOverlayToggle(e){console.log(`Overlay ${e.overlay} is ${e.open?"opened":"closed"}`)},fDateString(e){const t=[];t[0]="Tammikuu",t[1]="Helmikuu",t[2]="Maaliskuu",t[3]="Huhtikuu",t[4]="Toukokuu",t[5]="Kesäkuu",t[6]="Heinäkuu",t[7]="Elokuu",t[8]="Syyskuu",t[9]="Lokakuu",t[10]="Marraskuu",t[11]="Joulukuu";const o=new Date(e);return t[new Date(e).getMonth()]+" "+o.getDate()+" / "+o.getFullYear()},checkClientFilled(e){this.clientFilledContainer=[],this.client_filled_days?this.client_filled_days.forEach(((t,o)=>{e===t.day?(console.log("On see päev "+e),this.clientFilledContainer.push({type:"highlight",state:"client",day:e,content_date:new Date(t.year,t.month,t.day,t.hours,t.minutes),hours:t.hours,minutes:t.minutes,index:o,booking:this.confirmedBookingsByProvider[o]})):console.log("Ei ole client day")})):console.log("Client filled days array is empty!")},checkProFilled(e){this.proFilledContainer=[],this.filled_days?this.filled_days.forEach(((t,o)=>{e===t.day?(console.log("On see päev "+e),this.proFilledContainer.push({type:"highlight",state:"pro",day:e,content_date:new Date(t.year,t.month,t.day,t.hours,t.minutes),hours:t.hours,minutes:t.minutes,index:o,booking:this.bookingsConfirmed[o]})):console.log("Ei ole pro day")})):console.log("Client filled days array is empty!")},handleInternal(e){console.log("Pickerkey ---- "+this.pickerKey),this.dayMarkerData=[];let t=[],o=[];if(e){this.isHandleInternal=!0,this.dateToDisplay=this.fDateString(e[0]);const n=e.toString().substring(0,3),i=e[0].getDate();e[0].getMonth();let a={};console.log("length xxxxxxxx "+this.markers.length),this.filled_days.forEach((e=>{i===e.day?(console.log("On see päev "+i),t.push({type:"highlight",state:"pro",day:i,weekDay:n,hours:e.hours,minutes:e.minutes,booking:this.bookingsConfirmed.filter((e=>e.onTime[0].day===i))})):console.log("Ei ole")})),this.checkClientFilled(i),this.checkProFilled(i);let r=!1;let s=[];const l=[];this.markers.forEach((e=>{e.date.getDate()===i&&(r=!0,console.log("IS COMPARED "+r),a={type:"marker",day:i,weekDay:n,time:e.content},l.push(e.content),o.push(a),s=[...s,{type:"marker",day:i,content_time:e.content.text,content_index:e.content.index,content_timeId:e.content.timeId,content_date:e.content.date}])})),r&&(this.dayMarkerData=this.dayMarkerData.concat({type:"marker",day:i,weekday:n,time:l})),this.calendarContents=s.concat(this.clientFilledContainer).concat(this.proFilledContainer),this.calendarContents.sort(((e,t)=>e.content_date-t.content_date)),this.calendarContents.forEach(((e,t)=>{this.calendarContents[t].ide=t})),this.times=[],this.providerTimes&&this.providerTimes.forEach((e=>{this.initializeTime(e)})),this.dayMarkerData=this.dayMarkerData.concat(t).concat(this.clientFilledContainer)}},initializeTime(e){let t=[];const o=new Date(e.yearFrom,e.monthFrom,e.dayFrom,e.hoursFrom,e.minutesFrom);t.push({day:e.dayFrom,hours:e.hoursFrom,minutes:e.minutesFrom},{day:e.dayTo,hours:e.hoursTo,minutes:e.minutesTo}),o>=new Date&&this.times.push(t)},async setTimeMarkers(e,t){console.log("KERTA "+e.id);let o=null;this.contents=[],o=e.monthFrom===(new Date).getMonth()?(0,E.A)(new Date,e.dayFrom-(new Date).getDate()):(0,E.A)(new Date(e.yearFrom,e.monthFrom,0),e.dayFrom),console.log("MAKKED DAY "+o.getDate()),console.log("Test markers: "+new Date(e.yearFrom,e.monthFrom,e.dayFrom,e.hoursFrom,e.minutesFrom));const n=new Date(e.yearFrom,e.monthFrom,e.dayFrom,e.hoursFrom,e.minutesFrom),i=new Date(e.yearTo,e.monthTo,e.dayTo,e.hoursTo,e.minutesTo),a=e.hoursFrom>=10?e.hoursFrom:"0"+e.hoursFrom,r=e.hoursTo>=10?e.hoursTo:"0"+e.hoursTo,s=e.minutesFrom>=10?e.minutesFrom:"0"+e.minutesFrom,l=e.minutesTo>=10?e.minutesTo:"0"+e.minutesTo;let d=a+" : "+s+" - "+r+" : "+l,u={text:d,index:t,timeId:e.id,date:n,color:"red"};this.contents.push({text:d,index:t,timeId:e.id,color:"red"});e.id;console.log("Marker added "+e.id),this.markers&&(i>=new Date?this.markers=this.markers.concat({dFrom:e.dayFrom,date:o,type:"line",color:"orange",content:u}):await I.A.removeTimeOffer(this.provider.id,e.id)),console.log("Time pikkus "+this.times.length)},async handleDate(e){console.log("Date handled! "+e),this.clientFilledContainer=[],e&&this.pickerKey++,console.log("Pickerkey ---- "+this.pickerKey);const t={yearFrom:this.date[0].getFullYear(),monthFrom:this.date[0].getMonth(),dayFrom:this.date[0].getDate(),hoursFrom:this.date[0].getHours(),minutesFrom:this.date[0].getMinutes(),yearTo:this.date[1].getFullYear(),monthTo:this.date[1].getMonth(),dayTo:this.date[1].getDate(),hoursTo:this.date[1].getHours(),minutesTo:this.date[1].getMinutes()},o=await I.A.addAdditionalOffer(this.provider.id,t);o&&(this.providerTimes=this.providerTimes.concat(o)),this.times=[],this.markers=[],this.providerTimes.forEach(((e,t)=>{this.setTimeMarkers(e,t),this.initializeTime(e)}));let n=[],i={};this.editArr=[],this.dayMarkerData=[],console.log("------------- PT -------- "+this.providerTimes.length),console.log("------------- ML  --------- "+this.markers.length),this.filled_days.forEach((e=>{this.date[0].getDate()===e.day?(console.log("On"),this.isTimeToEdit=!0,n.push({type:"highlight",state:"pro",day:this.date[0].getDate(),weekDay:"Laupäev",hours:e.hours,minutes:e.minutes,booking:this.bookingsConfirmed.filter((e=>e.onTime[0].day===this.date[0].getDate()))})):console.log("Ei ole")})),this.checkClientFilled(this.date[0].getDate(),"week");const a=[];let r=[];this.markers.forEach((e=>{e.date.getDate()===o.dayFrom&&(this.isTimeToEdit=!0,i={day:o.dayFrom,weekDay:"Laupäev",time:e.content},a.push(e.content),r=[...r,{type:"marker",day:o.dayFrom,content_time:e.content.text,content_index:e.content.index,content_timeId:e.content.timeId,content_date:e.content.date}])})),this.calendarContents=r.concat(this.clientFilledContainer),this.calendarContents.sort(((e,t)=>e.content_date-t.content_date)),this.dayMarkerData=this.dayMarkerData.concat({type:"marker",day:o.dayFrom,weekday:this.weekDay,time:a}),this.dayMarkerData=this.dayMarkerData.concat(n).concat(this.clientFilledContainer),this.dayMarkerData.sort(((e,t)=>{})),console.log("Value ----------  "+e[0].getHours())},handleDateUpdate(e){console.log("Value ----------  "+e[0].getHours()),this.$nextTick((()=>{console.log("NextTick...."),this.date=new Date(e)})),e&&"object"===typeof e&&void 0!==e[0].getHours()&&(console.log("Value xxx "+e),this.$nextTick((()=>{this.date=new Date(e)})))},onEdit(e,t){console.log("Editing time id "+e),console.log("Index on "+t),this.editedMarkerID=e,this.editedMarkerIndex=t},async handleTime(e){this.xxx=e,console.log("Time is handled "+e[0].hours+" "+e[1].hours),console.log("ID NOW HERE"+this.editedMarkerID);const t={hoursFrom:e[0].hours,minutesFrom:e[0].minutes,hoursTo:e[1].hours,minutesTo:e[1].minutes};this.times[this.editedMarkerIndex]=[{hours:e[0].hours,minutes:e[0].minutes},{hours:e[1].hours,minutes:e[1].minutes}];const o=await I.A.updateOffer(this.editedMarkerID,t);console.log("Offer edited: "+o),this.timeEditSuccessMessage="Aika muokattu onnistuneesti!",setTimeout((()=>{this.timeEditSuccessMessage=null}),2e3),this.isTimeToEdit=!1,this.providerTimes=this.providerTimes.filter((e=>e.id!==this.editedMarkerID?e:o));const n=e[0].hours>=10?e[0].hours:"0"+e[0].hours,i=e[1].hours>=10?e[1].hours:"0"+e[1].hours,a=e[0].minutes>=10?e[0].minutes:"0"+e[0].minutes,r=e[1].minutes>=10?e[1].minutes:"0"+e[1].minutes;let s=n+" : "+a+" - "+i+" : "+r;this.calendarContents.map((e=>e.content_timeId===this.editedMarkerID?e.content_time=s:e))},async delTimeRange(e,t){await I.A.removeTimeOffer(this.provider.id,e),console.log("Id argumendina? "+e),this.times.splice(t,1),this.providerTimes=this.providerTimes.filter((t=>t.id!==e)),this.markers=this.markers.filter((t=>t.content.timeId!==e)),console.log("MARKERS LEN "+this.markers.length);const o=this.dayMarkerData.filter((e=>"highlight"===e.type));this.dayMarkerData=this.dayMarkerData.filter((e=>"marker"===e.type)),this.calendarContents=this.calendarContents.filter((t=>t.content_timeId!==e)),this.dayMarkerData.length>1?this.dayMarkerData=this.dayMarkerData.filter((t=>t.time.some((t=>t.timeId!==e)))):(console.log("Something else!!"),this.dayMarkerData[0].time=this.dayMarkerData[0].time.filter((t=>t.timeId!==e))),this.dayMarkerData=this.dayMarkerData.concat(o),0===this.dayMarkerData[0].time.length&&console.log("No times to display!!")},openTask(e){this.dayPanelIndex=e,console.log("Index in open - "+e)},closeTask(e){this.dayPanelIndex=null,console.log("Index in close - "+e)},async providerData(){const e=await w.A.getProvider(this.userId);e&&(this.provider=e,this.providerTimes=e.timeoffer),this.times=[],this.providerTimes&&(this.providerTimes.forEach((e=>{this.initializeTime(e)})),this.providerTimes.forEach(((e,t)=>{this.setTimeMarkers(e,t)}))),console.log("Provider times pikkus "+this.providerTimes.length),console.log("Markerite pikkus "+this.markers.length)}}},X=o(1241);const A=(0,X.A)(L,[["render",M]]);var B=A}}]);
//# sourceMappingURL=153.82abf0e7.js.map