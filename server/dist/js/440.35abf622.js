"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[440],{8797:function(e,i){const t=(e,i)=>{const t=new Date(e.y,e.m,e.d,e.hour,e.min),s=new Date(i.y,i.m,i.d,i.hour,i.min);return s>=t},s=(e,i,t)=>{const s=new Date(i.y,i.m,i.d,i.hour,i.min),a=new Date(t.y,t.m,t.d,t.hour,t.min);return e>=s&&e<a};i.Z={compare:t,providerMatchingForClient:s}},1840:function(e,i,t){var s=t(3396);let a="";const o=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),i=new google.maps.LatLng(60.2767265,24.8575089),t=new google.maps.DistanceMatrixService;t.getDistanceMatrix({origins:[e],destinations:[i],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,durationInTraffic:!0,avoidHighways:!1,avoidTolls:!1},l)},l=(e,i)=>{if(i===google.maps.DistanceMatrixStatus.OK&&"OK"===i)return console.log("Distance "+e.rows[0].elements[0].distance.text),a=e.rows[0].elements[0].distance.text,"aaaaaaaaaaaaa";console.log("Error:",i),alert(i)},n=()=>(console.log("Is it working??"+a),(0,s.Wm)("div",null,[(0,s.Uk)("Hiiii")])),d=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),i=new google.maps.LatLng(60.2767265,24.8575089);return(google.maps.geometry.spherical.computeDistanceBetween(e,i)/1e3).toFixed(2)};i.Z={distance:o,test:n,theDist:d}},5440:function(e,i,t){t.r(i),t.d(i,{default:function(){return je}});var s=t(3396),a=t(7139),o=t(9242);const l=e=>((0,s.dD)("data-v-c4fcec8c"),e=e(),(0,s.Cn)(),e),n={style:{display:"flex","justify-content":"right",padding:"20px"}},d={key:0,class:"expired_date"},r={key:0},g={key:1},c={key:0},m={key:0},u={key:1},h={key:0},p={key:1},k=["src","alt"],f={key:1,class:"edit-panel"},y=["onChange"],w={for:"file-upload",class:"custom-file-upload"},v={key:0},D={key:1},_=["src"],b={key:1,class:"add-panel"},I={for:"file-upload-x",class:"custom-file-upload"},C={key:0},x={key:1},P=["src"],z={key:0},E={class:"ui large form"},M={class:"field"},U=l((()=>(0,s._)("h3",{style:{"margin-bottom":"20px"}},"Palveluntarjoajat",-1))),A=l((()=>(0,s._)("option",{value:""},"Suodata...",-1))),S=l((()=>(0,s._)("option",{value:"distance"},"Etäisyyden mukaan - lähin ensin",-1))),T=l((()=>(0,s._)("option",{value:"rating"},"positiivisen palauteen mukaan",-1))),F=[A,S,T],B=l((()=>(0,s._)("br",null,null,-1))),W={key:0},R=l((()=>(0,s._)("br",null,null,-1))),Z={style:{"font-size":"14px"}},j=l((()=>(0,s._)("br",null,null,-1))),$={style:{"font-size":"14px"}},L={style:{"font-size":"14px"}},O=["src"],q={key:1},V=l((()=>(0,s._)("br",null,null,-1))),H={style:{"font-size":"14px"}},Y=l((()=>(0,s._)("br",null,null,-1))),K={style:{"font-size":"14px"}},N=l((()=>(0,s._)("span",{style:{"font-size":"14px"}},"Sovittaessa",-1))),G=l((()=>(0,s._)("tr",null,null,-1))),J={key:1},Q=l((()=>(0,s._)("h2",{style:{width:"100%"}},"Yrityksiä hetkellä ei löytyy",-1))),X=[Q],ee={key:0},ie={class:"ui large form"},te={class:"field"},se=l((()=>(0,s._)("h3",{style:{"margin-bottom":"20px"}},"Tarjoukset",-1))),ae=l((()=>(0,s._)("option",{value:""},"Suodata...",-1))),oe=l((()=>(0,s._)("option",{value:"distance"},"Etäisyyden mukaan - lähin ensin",-1))),le=l((()=>(0,s._)("option",{value:"rating"},"positiivisen palauteen mukaan",-1))),ne=[ae,oe,le],de=l((()=>(0,s._)("br",null,null,-1))),re={key:0},ge=l((()=>(0,s._)("br",null,null,-1))),ce={style:{"font-size":"14px"}},me=l((()=>(0,s._)("br",null,null,-1))),ue={style:{"font-size":"14px"}},he={style:{"font-size":"14px"}},pe=["src"],ke={key:1},fe=l((()=>(0,s._)("br",null,null,-1))),ye={style:{"font-size":"14px"}},we=l((()=>(0,s._)("br",null,null,-1))),ve={style:{"font-size":"14px"}},De={style:{"font-size":"14px"}},_e=l((()=>(0,s._)("tr",null,null,-1))),be={key:1},Ie=l((()=>(0,s._)("h2",{style:{width:"100%"}},"Tarjouksia hetkellä ei löytyy",-1))),Ce=[Ie];function xe(e,i,l,A,S,T){const Q=(0,s.up)("recipientFinal"),ae=(0,s.up)("MDBContainer"),oe=(0,s.up)("MDBBtnClose"),le=(0,s.up)("successMessage"),Ie=(0,s.up)("MDBTextarea"),xe=(0,s.up)("MDBCol"),Pe=(0,s.up)("MDBRow"),ze=(0,s.up)("MDBBtn"),Ee=(0,s.up)("VueDatePicker"),Me=(0,s.up)("MDBTable"),Ue=(0,s.up)("MDBBadge");return S.isProviderSelected?((0,s.wg)(),(0,s.j4)(ae,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(Q,{"onCansel:final":T.handleCanselFinal,"onProvider:ordered":T.orderSuccess,test:l.test,provider:S.selectedProvider,proSlides:S.proSlides,room:S.room,available:S.availability,booking:l.booking,chatusers:l.chatusers,initialize_chat:e.handleInitializeChat,selecteduser:l.selecteduser,messages:l.messages,onMessage:T.onMessage,onSelect:T.selectUser,onNoSelect:T.noSelectUser,onCreate_chat_panel:T.handleCreateChatPanel},null,8,["onCansel:final","onProvider:ordered","test","provider","proSlides","room","available","booking","chatusers","initialize_chat","selecteduser","messages","onMessage","onSelect","onNoSelect","onCreate_chat_panel"])])),_:1})):((0,s.wg)(),(0,s.j4)(ae,{key:1},{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s.Wm)(oe,{white:"",style:{cursor:"pointer"},onClick:T.canselResult},null,8,["onClick"])]),(0,s._)("h2",null,"Tarvin tässä osaaja - "+(0,a.zw)(l.line),1),l.booking.created_ms-(new Date).getTime()<=0&&l.booking.offers.length<1?((0,s.wg)(),(0,s.iD)("h5",d," Päivämäärä on vanhentunut. Muokkaa päivämäärä tai poista tilaus! ")):(0,s.kq)("",!0),(0,s.Wm)(le,{message:S.orderMessage},null,8,["message"]),(0,s.Wm)(Pe,{style:{"margin-top":"50px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(xe,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Me,{border:"primary",style:{"font-size":"18px",color:"#dddddd","text-align":"left"}},{default:(0,s.w5)((()=>[(0,s._)("tbody",null,[(0,s._)("tr",null,[S.isEditDescription?((0,s.wg)(),(0,s.iD)("td",g,[(0,s.Wm)(Pe,null,{default:(0,s.w5)((()=>[(0,s.Wm)(xe,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Ie,{label:"Muokkaa tehtävän kuvausta...",white:"",rows:"4",modelValue:S.description,"onUpdate:modelValue":i[0]||(i[0]=e=>S.description=e),style:{"font-size":"14px",padding:"20px"}},null,8,["modelValue"])])),_:1}),(0,s.Wm)(xe,{col:"1"},{default:(0,s.w5)((()=>[(0,s.Wm)(oe,{white:"",onClick:i[1]||(i[1]=e=>S.isEditDescription=!1),style:{float:"right",cursor:"pointer"}})])),_:1})])),_:1})])):((0,s.wg)(),(0,s.iD)("td",r,(0,a.zw)(l.booking.description),1))]),l.booking.offers.length<1?((0,s.wg)(),(0,s.iD)("tr",c,[S.isEditDescription?((0,s.wg)(),(0,s.iD)("td",u,[(0,s.Wm)(ze,{outline:"info",block:"",size:"lg",onClick:T.saveEditedDescription},{default:(0,s.w5)((()=>[(0,s.Uk)("Tallenna tehtävän kuvaus")])),_:1},8,["onClick"])])):((0,s.wg)(),(0,s.iD)("td",m,[(0,s.Wm)(ze,{outline:"info",block:"",size:"lg",onClick:T.pressedEditDescription},{default:(0,s.w5)((()=>[(0,s.Uk)("Muokkaa tehtävän kuvausta")])),_:1},8,["onClick"])]))])):(0,s.kq)("",!0),(0,s._)("tr",null,[S.isEditDate?((0,s.wg)(),(0,s.iD)("td",p,[(0,s.Wm)(Pe,null,{default:(0,s.w5)((()=>[(0,s.Wm)(xe,{col:"8"},{default:(0,s.w5)((()=>[(0,s._)("h3",{class:(0,a.C_)({expired_date:l.booking.created_ms-(new Date).getTime()<=0})},(0,a.zw)(S.bookingDateToDisplay),3),(0,s.Wm)(Ee,{style:{"margin-bottom":"20px"},dark:"",modelValue:S.bookingDate,"onUpdate:modelValue":i[2]||(i[2]=e=>S.bookingDate=e),"min-date":new Date,placeholder:"Valitse sopivaa aika...",onInternalModelChange:T.handleInternalDate,state:!e.isNoDate&&null},null,8,["modelValue","min-date","onInternalModelChange","state"])])),_:1}),(0,s.Wm)(xe,{col:"4"},{default:(0,s.w5)((()=>[(0,s.Wm)(oe,{white:"",onClick:i[3]||(i[3]=e=>S.isEditDate=!1),style:{float:"right",cursor:"pointer"}})])),_:1})])),_:1})])):((0,s.wg)(),(0,s.iD)("td",h,[(0,s._)("h3",{class:(0,a.C_)({expired_date:l.booking.created_ms-(new Date).getTime()<=0&&l.booking.offers.length<1})},(0,a.zw)(S.bookingDateToDisplay),3),l.booking.offers.length<1?((0,s.wg)(),(0,s.j4)(ze,{key:0,block:"",size:"lg",outline:"info",onClick:T.editDate},{default:(0,s.w5)((()=>[(0,s._)("span",{class:(0,a.C_)({expired_warning:l.booking.created_ms-(new Date).getTime()<=0})},"Muokkaa päivämäärä",2)])),_:1},8,["onClick"])):(0,s.kq)("",!0)]))])])])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.images,((e,i)=>((0,s.wg)(),(0,s.iD)("div",{key:i},[(0,s._)("img",{class:"loading",style:{width:"100%"},src:e.blob?e.blob:t(7752)(`./${e.name}`),alt:e.name},null,8,k),S.isEditPanel?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(ze,{key:0,block:"",outline:"success",onClick:e=>T.pressEditPanel(i)},{default:(0,s.w5)((()=>[(0,s.Uk)("Muokkaa kuva")])),_:2},1032,["onClick"])),S.isEditPanel&&S.imageIndex===i?((0,s.wg)(),(0,s.iD)("div",f,[l.booking.offers.length<1?((0,s.wg)(),(0,s.j4)(Pe,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(xe,null,{default:(0,s.w5)((()=>[S.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(oe,{key:0,white:"",class:"close-btn",style:{float:"right"},onClick:T.closeEditPanel},null,8,["onClick"])),(0,s._)("input",{id:"file-upload",type:"file",onChange:e=>T.handleFileChange(e,i)},null,40,y),(0,s._)("label",w,[S.value?((0,s.wg)(),(0,s.iD)("span",v," Muokka tehtävän kuvausta: "+(0,a.zw)(S.value.name),1)):((0,s.wg)(),(0,s.iD)("span",D,"Valitse uusi kuva tehtävästä"))]),S.isEditImage?((0,s.wg)(),(0,s.j4)(ze,{key:1,block:"",color:"success",onClick:e=>T.uploadEditedImage(i)},{default:(0,s.w5)((()=>[(0,s.Uk)("Upload edited image")])),_:2},1032,["onClick"])):(0,s.kq)("",!0),(0,s.Wm)(ze,{class:"btn",block:"",size:"lg",color:"danger",onClick:e=>T.removeImg(i)},{default:(0,s.w5)((()=>[(0,s.Uk)("Poista kuva")])),_:2},1032,["onClick"])])),_:2},1024),S.value?((0,s.wg)(),(0,s.j4)(xe,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(oe,{white:"",class:"close-btn",style:{float:"right"},onClick:T.closeEditPanel},null,8,["onClick"]),(0,s._)("img",{style:{width:"100px","padding-top":"20px"},src:this.showImage,alt:"addEdit"},null,8,_)])),_:1})):(0,s.kq)("",!0)])),_:2},1024)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])))),128)),!S.isPressedAddlmage&l.booking.offers.length<1?((0,s.wg)(),(0,s.j4)(ze,{key:0,block:"",color:"primary",onClick:T.pressedAddImage},{default:(0,s.w5)((()=>[(0,s.Uk)("Lisää uusi kuva tehtävästä")])),_:1},8,["onClick"])):(0,s.kq)("",!0),S.isPressedAddlmage&&S.isAddImagePanel?((0,s.wg)(),(0,s.iD)("div",b,[(0,s.Wm)(Pe,null,{default:(0,s.w5)((()=>[(0,s.Wm)(xe,null,{default:(0,s.w5)((()=>[S.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(oe,{key:0,white:"",class:"close-btn",onClick:T.closeAddPanel},null,8,["onClick"])),(0,s._)("input",{id:"file-upload-x",type:"file",onChange:i[4]||(i[4]=i=>T.handleFileChange(i,e.i))},null,32),(0,s._)("label",I,[S.value?((0,s.wg)(),(0,s.iD)("span",C," Muokka tehtävän kuvausta: "+(0,a.zw)(S.value.name)+" + ",1)):((0,s.wg)(),(0,s.iD)("span",x,"Valitse lisää kuva tehtävästä"))]),S.isAddImage?((0,s.wg)(),(0,s.j4)(ze,{key:1,block:"",outline:"primary",onClick:T.addAdditionalImage},{default:(0,s.w5)((()=>[(0,s.Uk)("Tallenna kuva")])),_:1},8,["onClick"])):(0,s.kq)("",!0)])),_:1}),S.value?((0,s.wg)(),(0,s.j4)(xe,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(oe,{class:"close-btn",white:"",onClick:T.closeAddPanel},null,8,["onClick"]),(0,s._)("img",{style:{width:"100px"},src:this.showImage,alt:"addShow"},null,8,P)])),_:1})):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0)])),_:1}),l.booking.isIncludeOffers?((0,s.wg)(),(0,s.j4)(xe,{key:1,lg:"6"},{default:(0,s.w5)((()=>[l.booking.offers.length>0?((0,s.wg)(),(0,s.iD)("div",ee,[(0,s._)("div",ie,[(0,s._)("div",te,[se,(0,s.wy)((0,s._)("select",{style:{padding:"20px","background-color":"#3c3535",color:"lightgrey","font-size":"18px"},id:"listOfProviders","onUpdate:modelValue":i[7]||(i[7]=e=>S.filterResult=e),onClick:i[8]||(i[8]=(...e)=>T.addFilter&&T.addFilter(...e))},ne,512),[[o.bM,S.filterResult]])])]),de,(0,s.Wm)(Me,{style:{"font-size":"18px","text-align":"center",position:"relative"}},{default:(0,s.w5)((()=>[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.booking.offers,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[e.provider.timeoffer.map((e=>S.datetime.providerMatchingForClient(l.bookingTime,{y:e.yearFrom,m:e.monthFrom,d:e.dayFrom,hour:e.hoursFrom,min:e.minutesFrom},{y:e.yearTo,m:e.monthTo,d:e.dayTo,hour:e.hoursTo,min:e.minutesTo}))).includes(!0)?((0,s.wg)(),(0,s.iD)("td",re,[(0,s.Wm)(ze,{class:"provider-selection",outline:"success",size:"lg",onClick:i=>T.getProviderInfo(e.provider,"green")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.provider.yritys),1),ge,(0,s._)("span",ce,"Etäisyys: "+(0,a.zw)(e.provider.distance)+" km",1),me,(0,s._)("span",ue,(0,a.zw)(e.price)+" eur",1)])),_:2},1032,["onClick"]),(0,s.Wm)(Ue,{color:"success",class:"translate-middle p-4",pill:"",notification:""},{default:(0,s.w5)((()=>[(0,s._)("span",he,[(0,s.Uk)(" Saatavilla   "),(0,s._)("img",{style:{width:"20px"},src:t(6080),alt:"ok"},null,8,pe)])])),_:1})])):((0,s.wg)(),(0,s.iD)("td",ke,[(0,s.Wm)(ze,{class:"provider-selection",outline:"info",size:"lg",onClick:i=>T.getProviderInfo(e.provider,"orange")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.provider.yritys)+" ",1),fe,(0,s._)("span",ye,"Etäisyys: "+(0,a.zw)(e.distance)+" km",1),we,(0,s._)("span",ve,(0,a.zw)(e.price)+" eur",1)])),_:2},1032,["onClick"]),(0,s.Wm)(Ue,{color:"info",class:"translate-middle p-4",pill:"",notification:""},{default:(0,s.w5)((()=>[(0,s._)("span",De,(0,a.zw)(e.price)+" eur",1)])),_:2},1024)]))])))),128)),_e])])),_:1})])):((0,s.wg)(),(0,s.iD)("div",be,Ce))])),_:1})):((0,s.wg)(),(0,s.j4)(xe,{key:0},{default:(0,s.w5)((()=>[(0,s.Uk)(" Not offers here! "),l.providers.length>0?((0,s.wg)(),(0,s.iD)("div",z,[(0,s._)("div",E,[(0,s._)("div",M,[U,(0,s.wy)((0,s._)("select",{style:{padding:"20px","background-color":"#3c3535",color:"lightgrey","font-size":"18px"},id:"listOfProviders","onUpdate:modelValue":i[5]||(i[5]=e=>S.filterResult=e),onClick:i[6]||(i[6]=(...e)=>T.addFilter&&T.addFilter(...e))},F,512),[[o.bM,S.filterResult]])])]),B,(0,s.Wm)(Me,{style:{"font-size":"18px","text-align":"center",position:"relative"}},{default:(0,s.w5)((()=>[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.providers,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[e.timeoffer.map((e=>S.datetime.providerMatchingForClient(l.bookingTime,{y:e.yearFrom,m:e.monthFrom,d:e.dayFrom,hour:e.hoursFrom,min:e.minutesFrom},{y:e.yearTo,m:e.monthTo,d:e.dayTo,hour:e.hoursTo,min:e.minutesTo}))).includes(!0)?((0,s.wg)(),(0,s.iD)("td",W,[(0,s.Wm)(ze,{class:"provider-selection",outline:"success",size:"lg",onClick:i=>T.getProviderInfo(e,"green")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.yritys),1),R,(0,s._)("span",Z,"Etäisyys: "+(0,a.zw)(e.distance)+" km",1),j,(0,s._)("span",$,(0,a.zw)(e.priceByHour?e.priceByHour+" eur / tunti":"Urakkahinta"),1)])),_:2},1032,["onClick"]),(0,s.Wm)(Ue,{color:"success",class:"translate-middle p-4",pill:"",notification:""},{default:(0,s.w5)((()=>[(0,s._)("span",L,[(0,s.Uk)(" Saatavilla   "),(0,s._)("img",{style:{width:"20px"},src:t(6080),alt:"ok"},null,8,O)])])),_:1})])):((0,s.wg)(),(0,s.iD)("td",q,[(0,s.Wm)(ze,{class:"provider-selection",outline:"info",size:"lg",onClick:i=>T.getProviderInfo(e,"orange")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.yritys)+" ",1),V,(0,s._)("span",H,"Etäisyys: "+(0,a.zw)(e.distance)+" km",1),Y,(0,s._)("span",K,(0,a.zw)(e.priceByHour?e.priceByHour+" eur / tunti":"Urakkahinta"),1)])),_:2},1032,["onClick"]),(0,s.Wm)(Ue,{color:"info",class:"translate-middle p-4",pill:"",notification:""},{default:(0,s.w5)((()=>[N])),_:1})]))])))),128)),G])])),_:1})])):((0,s.wg)(),(0,s.iD)("div",J,X))])),_:1})),(0,s.Wm)(ze,{block:"",outline:"danger",size:"lg",onClick:T.removeBooking},{default:(0,s.w5)((()=>[(0,s.Uk)("Poista tilaus")])),_:1},8,["onClick"])])),_:1})])),_:1}))}t(2062),t(7658);var Pe=t(4313),ze=t(8797),Ee=t(4892),Me=t(8033),Ue=t(1840),Ae=t(9398),Se=t(8579),Te=t(4912),Fe=t(5800),Be=t(4058),We={name:"recipient-panel-result",props:{test:Boolean,chatusers:Array,selecteduser:null,messages:Array,loggedInUser:Object,booking:null,images:Array,bookingTime:null,providers:Array,confirmedBookings:Array,line:String},data(){return{chatUser:null,initializeChatRoom:{},chatRoomData:{},count:0,datetime:ze.Z,distance:Ue.Z,selectedProvider:null,proSlides:[],isProviderSelected:!1,availability:"",orderMessage:null,isOrdered:!1,isEditDescription:!1,description:this.booking.description,isEditDate:!1,bookingDate:null,bookingDateToDisplay:this.booking.date,isAddFirstImage:!1,isPressedAddlmage:!1,isAddImage:!1,isAddImagePanel:!1,isEditImage:!1,isUploadImage:!1,isUploaded:!1,isImageCreated:!1,isAddNewImage:!1,isEditPanel:!1,value:null,imageIndex:0,file:null,isImageSelected:!1,isAdditionalImageSelected:!1,showImage:null,tempImages:[],imagesx:[],imagesxxx:[],room:"",roomUserCount:0,filterResult:""}},components:{successMessage:Me.Z,VueDatePicker:Te.Z,dist:Ue.Z,recipientFinal:Ee["default"],MDBBtn:Pe.$v,MDBBtnClose:Pe.Ok,MDBContainer:Pe.L5,MDBTable:Pe.re,MDBRow:Pe.uZ,MDBCol:Pe.TK,MDBTextarea:Pe.uj,MDBIcon:Pe.vm,MDBBadge:Pe.m_},methods:{editDate(){this.isEditDate=!0},async handleInternalDate(){if(this.bookingDate){console.log("new date: "+new Date(this.bookingDate).getTime()),this.bookingDateToDisplay=this.bookingDate.getMonth()+1+"/"+this.bookingDate.getDate()+"/"+this.bookingDate.getFullYear(),console.log("eeeeee "+(this.bookingDate.getMonth()+1)+"/"+this.bookingDate.getDate()+"/"+this.bookingDate.getFullYear());const e=new Date(this.bookingDate).getTime();await Fe.Z.newDate(this.booking.id,{year:this.bookingDate.getFullYear(),month:this.bookingDate.getMonth(),day:this.bookingDate.getDate(),hours:this.bookingDate.getHours(),minutes:this.bookingDate.getMinutes(),date_ms:e});const i={year:this.bookingDate.getFullYear(),month:this.bookingDate.getMonth(),day:this.bookingDate.getDate(),hours:this.bookingDate.getHours(),minutes:this.bookingDate.getMinutes()};this.$emit("updateBookingDate",this.booking,i)}console.log("Date is handled")},handleFileChange(e,i){console.log("i in file change "+i),this.imageIndex=i;try{const i=e.target.files[0];if(console.log("event target client ",e.target.files[0]),i){const t=URL.createObjectURL(i);this.tempImages.push(t),this.showImage=URL.createObjectURL(i),this.file=e.target.files[0],this.isAddImage=!0,this.isEditImage=!0}}catch(t){console.log("Error:",t)}this.value=e.target.files[0]},pressedAddImage(){this.isAddImage=!1,this.isEditImage=!1,this.isEditPanel=!1,this.isPressedAddlmage=!0,this.isAddImagePanel=!0},async addImage(){},pressEditPanel(e){this.isEditImage=!1,this.value=null,this.imageIndex=e,this.isEditPanel=!0,this.isAddImagePanel=!1},closeEditPanel(){this.isAddImagePanel=!1,this.isEditPanel=!1,this.isEditImage=!1,this.value=null},closeAddPanel(){this.isAddImagePanel=!1,this.isPressedAddlmage=!1,this.value=null},async uploadEditedImage(e,i){console.log("Edited image index is: "+e),this.isEditPanel=!1,this.isEditImage=!1;const t=new FormData;t.append("file",this.file,this.file.name),console.log("Image id "+this.images[e]._id);const s=await Se.Z.updateImage(this.images[e]._id,t);s&&(this.images[this.imageIndex]={_id:this.images[e]._id,blob:this.showImage},this.images.forEach((e=>{console.log("Image name "+e._id)})),console.log("New image id is "+s._id),this.imgId=s._id,this.file=null,this.isEditPanel=!1)},async addAdditionalImage(){this.value=null,this.isAddImagePanel=!1,this.isAddImage=!1,this.isPressedAddlmage=!1;const e=new FormData;e.append("file",this.file,this.file.name);const i=await Se.Z.create(e);if(await Fe.Z.addImage(this.booking.id,i.imgCreated._id),i){const e={_id:i.imgCreated._id,blob:this.showImage};this.$emit("addImage",e,this.booking.id)}},async removeImg(e){this.images[e].blob||console.log("removed image is blob"),console.log("removable image id is "+this.images[e]._id),await Fe.Z.removeImage(this.booking.id,this.images[e]._id),await Se.Z.remove(this.images[e]._id,this.booking.id),this.$emit("removeImage",e),this.isEditPanel=!1},getDistance(){console.log("sss "+Ue.Z.test())},selectUser(e){this.$emit("select",e)},noSelectUser(){this.$emit("noSelect")},onMessage(e,i){this.$emit("message",e,i)},initializeChat(){this.$emit("initializeChat",{initChatRoom:this.initializeChatRoom,chatData:this.chatRoomData})},handleCreateChatPanel(){console.log("Final info in result pressed "),console.log("recipient result xxxxx "+this.chatRoomData.username),this.initializeChat()},async pressAddFirstImage(){this.isAddFirstImage=!0,this.imageIndex=0},pressAdditionalImage(e){this.isAddImage=!0,this.imageIndex=this.images.length,console.log("Images index = "+this.imageIndex),this.isAddImage=!0},async uploadFirstImage(e){const i=new FormData;this.isUploadImage=!0,this.imageIndex=0,i.append("file",this.file,this.file.name);const t=await Se.Z.create(i);if(await Fe.Z.addImage(this.booking.id,t.imgCreated._id),t){this.file=null;const e={_id:t.imgCreated._id,image:t.imgCreated.image,name:t.imgCreated.name};this.$emit("addImage",e),this.imageIndex=0,this.isImageSelected=!1,this.isUploaded=!0}},async uploadAdditionalImage(){this.isAdditionalImageSelected=!1,this.isAddImage=!1,this.value=null,console.log("Image index index "+this.imageIndex);const e=new FormData;this.isUploadImage=!0,this.isUploaded=!0,e.append("file",this.file,this.file.name);const i=await Se.Z.create(e);if(await Fe.Z.addImage(this.booking.id,i.imgCreated._id),i){this.file=null;const e={_id:i.imgCreated._id,image:i.imgCreated.image,name:i.imgCreated.name};this.$emit("addImage",e),this.isImageSelected=!1,this.isUploaded=!0}},pressedEditDescription(){this.isEditDescription=!0,console.log("Descripton: "+this.description)},saveEditedDescription(){this.isEditDescription=!1;const e={description:this.description};this.$emit("editDescription",this.description),Fe.Z.editDescription(this.booking.id,e)},cancelEditDescription(){console.log("Is here something happening??")},providerGetBooking(e,i){console.log("Sended to user id... "+e),Be.Z.emit("accept provider",{id:e,booking:i})},async orderSuccess(e){this.isProviderSelected=!1,console.log("Provider id "+e.id),console.log("Recpient id: "+this.booking.id);this.selectedProvider.id;await Fe.Z.addProviderData(this.booking.id,this.selectedProvider.id);await Fe.Z.updateRecipient(this.booking.id,{status:"notSeen"});const i=this.booking.id,t=await Ae.Z.addProviderBooking(e.id,i);if("Recipient is added!"===t){const i={status:"",userID:e.user.id,name:e.user.username,room:this.room};this.$emit("client:confirmed_provider",e.id,this.booking,i),this.roomToDb(e.id,{userID:this.booking.user.id,client:this.booking.user.username,room:this.room});const s=e.user.id;Be.Z.emit("accept provider",{id:s,booking:this.booking}),this.orderMessage="Tilaus on lähetetty vahvistettavaksi! Kiitos!",console.log("Booking made - id: "+t.id),this.isOrdered=!0,setTimeout((()=>{this.orderMessage=null}),3e3)}this.initializeChat()},getProviderInfo(e,i){this.proSlides=[],this.selectedProvider=e,e.reference.forEach((e=>{this.proSlides=[...this.proSlides,{id:e.id,size:"1400-933",src:t(7736)(`./${e.name}`),thumb:t(7736)(`./${e.name}`),subHtml:'<div class="lightGallery-captions">\n                <h2>Terve</h2>\n\n            </div>"'}]})),this.availability=i,this.isProviderSelected=!0,this.room=e.yritys+this.chatUser.username;let s="",a="";this.chatUser&&(a=this.chatUser.username,s=e.yritys+a);const o={room:s,proID:e.user.id,pro:e.yritys,userID:e.user.id,username:e.user.username};e.user.id,e.user.username;this.initializeChatRoom={room:s,pro:e.yritys,status:"booking panel",username:a,providerUsername:e.user.username,providerID:e.user.id},this.chatRoomData=o},async roomToDb(e,i){await Ae.Z.addRoom(e,i)},addFilter(){const e=document.getElementById("listOfProviders");e.addEventListener("change",(e=>{console.log("Filtered provider: "+e.target.value),this.$emit("filter_provider",e.target.value)}))},handleCanselFinal(e){this.isProviderSelected=e},canselResult(){this.$emit("cansel:result",!1)},async removeBooking(){console.log("In start booking id "+this.booking.id),!0===confirm("Oletko varmaa, että haluat poistaa tilauksen!?")?(console.log("You pressed OK!"),this.$emit("removeBooking",this.booking.id)):console.log("You canceled!"),this.images.forEach((e=>{console.log("Images ## "+e._id),Se.Z.cleanAllRecipientImages(e._id)}))}},async mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const i=JSON.parse(e);this.chatUser=i}}},Re=t(89);const Ze=(0,Re.Z)(We,[["render",xe],["__scopeId","data-v-c4fcec8c"]]);var je=Ze},6080:function(e,i,t){e.exports=t.p+"img/ok.c97d8292.png"}}]);
//# sourceMappingURL=440.35abf622.js.map