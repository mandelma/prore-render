(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[974],{2451:function(o){o.exports={}},2974:function(o,e,t){"use strict";t.r(e),t.d(e,{default:function(){return k}});var s=t(6768),n=t(4232),a=t(5130);const r={class:"ui two column centered grid",style:{position:"relative","z-index":"1"}},l={class:"column"},i={class:"ui segment large form"},c={class:"ui segment"},d={class:"field"};function g(o,e,t,g,u,p){return(0,s.uX)(),(0,s.CE)("div",null,[e[3]||(e[3]=(0,s.Lk)("h1",null,"User location page",-1)),(0,s.Lk)("section",r,[(0,s.Lk)("div",l,[(0,s.Lk)("form",i,[(0,s.bo)((0,s.Lk)("div",{class:"ui message red"},(0,n.v_)(u.error),513),[[a.aG,u.error]]),(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[(0,s.Lk)("div",{class:(0,n.C4)(["ui right icon input large",{loading:u.spinner}])},[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"Enter your address:","onUpdate:modelValue":e[0]||(e[0]=o=>u.address=o),id:"autocomplete"},null,512),[[a.Jo,u.address]]),(0,s.Lk)("i",{class:"dot circle link icon",onClick:e[1]||(e[1]=(...o)=>p.locatorButtonPressed&&p.locatorButtonPressed(...o))})],2)]),(0,s.Lk)("button",{class:"ui button",onClick:e[2]||(e[2]=(...o)=>p.testPlace&&p.testPlace(...o))},"Go")])])])]),e[4]||(e[4]=(0,s.Lk)("section",{id:"map"},null,-1))])}var u=t(4373);const p=t(2451);var m={name:"user-location",data(){return{address:"",error:"",spinner:!1,lat:"",lng:""}},mounted(){const o={lat:50.064192,lng:-130.605469},e={north:o.lat+.1,south:o.lat-.1,east:o.lng+.1,west:o.lng-.1},t=document.getElementById("autocomplete"),s={bounds:e,componentRestrictions:{country:"fi"},fields:["address_components","geometry","icon","name"],strictBounds:!1},n=new google.maps.places.Autocomplete(t,s);n.addListener("place_changed",(()=>{let o=n.getPlace();this.lat=o.geometry.location.lat(),this.lng=o.geometry.location.lng(),console.log(o),this.showUserLocationOnTheMap(o.geometry.location.lat(),o.geometry.location.lng())}))},methods:{test(){console.log("Key is: "+p.googleMap)},locatorButtonPressed(){this.spinner=!0,console.log("Google maps test"),navigator.geolocation?navigator.geolocation.getCurrentPosition((o=>{this.getAddressFrom(o.coords.latitude,o.coords.longitude),console.log("pos latitude: "+o.coords.latitude),console.log("Pos longitude: "+o.coords.longitude),this.showUserLocationOnTheMap(o.coords.latitude,o.coords.longitude)}),(o=>{this.error="Locator is unable to find your address. Please type your address!",console.log("Error"+o),this.spinner=!1})):console.log("Your Browser does not support geolocation API")},getAddressFrom(o,e){u.A.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+o+","+e+"&key="+p.googleMap).then((o=>{o.data.error_message?(this.error=o.data.error_message,this.spinner=!1,console.log(o.data.error_message)):(this.address=o.data.results[0].formatted_address,console.log(o.data.results.results[0].formatted_address))})).catch((o=>{this.error=o.message,this.spinner=!1,console.log(o.message)}))},showUserLocationOnTheMap(o,e){let t=new google.maps.Map(document.getElementById("map"),{zoom:15,center:new google.maps.LatLng(o,e),mapTypeId:google.maps.MapTypeId.ROADMAP});new google.maps.Marker({position:new google.maps.LatLng(o,e),map:t})},testPlace(){console.log("Lat: "+this.lat),console.log("Lng: "+this.lng)}}},h=t(1241);const L=(0,h.A)(m,[["render",g]]);var k=L}}]);
//# sourceMappingURL=974.2e36e32f.js.map