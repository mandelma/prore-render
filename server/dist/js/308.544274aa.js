"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[308,318],{5594:function(e,i,n){n.r(i),n.d(i,{default:function(){return T}});var o=n(3396),t=n(7139);const s=(0,o._)("h1",{style:{"margin-top":"50px","margin-bottom":"50px"}},"Asiakkaan hallintapaneeli...",-1),a={key:0},l={key:1};function r(e,i,n,r,u,c){const k=(0,o.up)("recipientResult"),g=(0,o.up)("MDBBtn"),p=(0,o.up)("MDBTable"),d=(0,o.up)("MDBContainer");return(0,o.wg)(),(0,o.iD)("div",null,[s,(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[u.isBooking?((0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(k,{booking:u.booking,bookingTime:u.recipientDateTime,providers:u.providerMatchByProfession,line:u.line,"onCansel:result":c.handleCanselResult},null,8,["booking","bookingTime","providers","line","onCansel:result"])])):((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("h3",null,"Sinulla on hetkellä "+(0,t.zw)(n.recipientBookings.length)+" tilausta:",1),(0,o.Wm)(p,{borderless:"",style:{"font-size":"16px","text-align":"left"}},{default:(0,o.w5)((()=>[(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.recipientBookings,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("td",null,(0,t.zw)(e.date),1),(0,o._)("td",null,(0,t.zw)(e.header),1),(0,o._)("td",null,[(0,o.Wm)(g,{outline:"info",block:"",size:"lg",onClick:i=>c.handleRecipientResult(e.id)},{default:(0,o.w5)((()=>[(0,o.Uk)("Tiedot")])),_:2},1032,["onClick"])])])))),128))])])),_:1}),(0,o.Wm)(g,{outline:"info",block:"",size:"lg",onClick:c.newBooking},{default:(0,o.w5)((()=>[(0,o.Uk)("Teen uuden tilauksen")])),_:1},8,["onClick"]),(0,o.Wm)(g,{outline:"black",block:"",size:"lg",onClick:c.openMap},{default:(0,o.w5)((()=>[(0,o.Uk)("Asiantuntijoita ympärilläsi")])),_:1},8,["onClick"])]))])),_:1})])}n(7658);var u=n(4313),c=n(4870),k=n(7281),g=n(9398),p=n(5800);const d=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),i=new google.maps.LatLng(60.2767265,24.8575089),n=new google.maps.DistanceMatrixService;n.getDistanceMatrix({origins:[e],destinations:[i],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,durationInTraffic:!0,avoidHighways:!1,avoidTolls:!1},m)},m=(e,i)=>{i!==google.maps.DistanceMatrixStatus.OK||"OK"!==i?(console.log("Error:",i),alert(i)):alert(e.rows[0].elements[0].distance.text)},h=()=>{console.log("Is it working??")};var b={distance:d,test:h};const w=e=>{let i="";switch(e){case 0:i="Tammikuu";break;case 1:i="Helmikuu";break;case 2:i="Maaliskuu";break;case 3:i="Huhtikuu";break;case 4:i="Toukokuu";break;case 5:i="Kesäkuu";break;case 6:i="Heinäkuu";break;case 7:i="Elokuu";break;case 8:i="Syyskuu";break;case 9:i="Lokakuu";break;case 10:i="Maaliskuu";break;case 11:i="Joulukuu";break}return i};var f={month:w},v={name:"recipient-panel",props:{recipientBookings:Array},data(){return{bookings:null,provider:{},booking:null,isBooking:!1,providerMatchByProfession:null,providerMatchingRequirements:null,line:"",recipientDateTime:null}},setup(){const e=(0,c.iH)(!1);return{isAvailable:e}},components:{recipientResult:k["default"],MDBTable:u.re,MDBBtn:u.$v,MDBContainer:u.L5},async mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const i=JSON.parse(e);this.userId=i.id,this.provider=await g.Z.getProvider(i.id),this.handleRecipientBookings()}},methods:{async handleRecipientBookings(){this.bookings=await p.Z.getOwnBookings(this.userId)},async handleRecipientResult(e){console.log("Provider id is: "+e),this.booking=await p.Z.getBookingById(e),console.log("Profession: "+this.booking.map((e=>e.professional)));let i=[];this.booking.map((e=>{i=e.professional,this.recipientDateTime=new Date(2023,e.onTime[0].month,e.onTime[0].day,e.onTime[0].hours,e.onTime[0].minutes),console.log("Recipient datetime: "+e.onTime[0].day)})),console.log("xxx "+this.recipientDateTime.getTime()),this.line=i[0],this.providerMatchByProfession=await g.Z.getProvidersMatchingByProfession(i[0]),this.isBooking=!0},newBooking(){this.$router.push("/rf")},openMap(){this.$router.push("/recipient-public")},getDistance(){b.distance()},compareTime(){console.log("Month is: "+f.month(4))},handleCanselResult(e){console.log("Canseled: "+e),this.isBooking=e}}},B=n(89);const y=(0,B.Z)(v,[["render",r]]);var T=y}}]);
//# sourceMappingURL=308.544274aa.js.map