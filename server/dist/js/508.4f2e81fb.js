"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[508],{8405:function(e,i){const t=(e,i)=>{const t=new Date(e.y,e.m,e.d,e.hour,e.min),s=new Date(i.y,i.m,i.d,i.hour,i.min);return s>=t},s=(e,i,t)=>{const s=new Date(i.y,i.m,i.d,i.hour,i.min),o=new Date(t.y,t.m,t.d,t.hour,t.min);return e>=s&&e<o};i.A={compare:t,providerMatchingForClient:s}},5607:function(e,i,t){var s=t(6768);let o="";const a=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),i=new google.maps.LatLng(60.2767265,24.8575089),t=new google.maps.DistanceMatrixService;t.getDistanceMatrix({origins:[e],destinations:[i],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,durationInTraffic:!0,avoidHighways:!1,avoidTolls:!1},l)},l=(e,i)=>{if(i===google.maps.DistanceMatrixStatus.OK&&"OK"===i)return console.log("Distance "+e.rows[0].elements[0].distance.text),o=e.rows[0].elements[0].distance.text,"aaaaaaaaaaaaa";console.log("Error:",i),alert(i)},n=()=>(console.log("Is it working??"+o),(0,s.bF)("div",null,[(0,s.eW)("Hiiii")])),d=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),i=new google.maps.LatLng(60.2767265,24.8575089);return(google.maps.geometry.spherical.computeDistanceBetween(e,i)/1e3).toFixed(2)};i.A={distance:a,test:n,theDist:d}},3508:function(e,i,t){t.r(i),t.d(i,{default:function(){return ue}});var s=t(6768),o=t(4232),a=t(5130);const l={style:{display:"flex","justify-content":"right",padding:"20px"}},n={key:0,class:"expired_date"},d={key:0},r={key:1},g={key:0},c={key:0},u={key:1},m={key:0},h={key:1},k=["src","alt"],p={key:1,class:"edit-panel"},f=["onChange"],v={for:"file-upload",class:"custom-file-upload"},b={key:0},y={key:1},C=["src"],D={key:1,class:"add-panel"},I={for:"file-upload-x",class:"custom-file-upload"},_={key:0},E={key:1},F=["src"],w={key:0},x={class:"ui large form"},A={class:"field"},L={key:0},P={style:{"font-size":"14px"}},M={style:{"font-size":"14px"}},S={style:{"font-size":"14px"}},X=["src"],z={key:1},B={style:{"font-size":"14px"}},T={style:{"font-size":"14px"}},R={key:1},U={key:0},W={class:"ui large form"},$={class:"field"},O={key:0},Q={style:{"font-size":"14px"}},V={style:{"font-size":"14px"}},j={style:{"font-size":"14px"}},H=["src"],N={key:1},Y={style:{"font-size":"14px"}},K={style:{"font-size":"14px"}},G={style:{"font-size":"14px"}},J={key:1};function q(e,i,q,Z,ee,ie){const te=(0,s.g2)("recipientFinal"),se=(0,s.g2)("MDBContainer"),oe=(0,s.g2)("MDBBtnClose"),ae=(0,s.g2)("successMessage"),le=(0,s.g2)("MDBTextarea"),ne=(0,s.g2)("MDBCol"),de=(0,s.g2)("MDBRow"),re=(0,s.g2)("MDBBtn"),ge=(0,s.g2)("VueDatePicker"),ce=(0,s.g2)("MDBTable"),ue=(0,s.g2)("MDBBadge");return ee.isProviderSelected?((0,s.uX)(),(0,s.Wv)(se,{key:0},{default:(0,s.k6)((()=>[(0,s.bF)(te,{"onCansel:final":ie.handleCanselFinal,"onProvider:ordered":ie.orderSuccess,test:q.test,provider:ee.selectedProvider,offer:ee.offer,proSlides:ee.proSlides,room:ee.room,available:ee.availability,booking:q.booking,chatusers:q.chatusers,initialize_chat:e.handleInitializeChat,selecteduser:q.selecteduser,messages:q.messages,onMessage:ie.onMessage,onSelect:ie.selectUser,onNoSelect:ie.noSelectUser,onCreate_chat_panel:ie.handleCreateChatPanel},null,8,["onCansel:final","onProvider:ordered","test","provider","offer","proSlides","room","available","booking","chatusers","initialize_chat","selecteduser","messages","onMessage","onSelect","onNoSelect","onCreate_chat_panel"])])),_:1})):((0,s.uX)(),(0,s.Wv)(se,{key:1},{default:(0,s.k6)((()=>[(0,s.Lk)("div",l,[(0,s.bF)(oe,{white:"",style:{cursor:"pointer"},onClick:ie.canselResult},null,8,["onClick"])]),(0,s.Lk)("h2",null,"Tarvin tässä osaaja - "+(0,o.v_)(q.line),1),q.booking.created_ms-(new Date).getTime()<=0&&q.booking.offers.length<1?((0,s.uX)(),(0,s.CE)("h5",n," Päivämäärä on vanhentunut. Muokkaa päivämäärä tai poista tilaus! ")):(0,s.Q3)("",!0),(0,s.bF)(ae,{message:ee.orderMessage},null,8,["message"]),(0,s.bF)(de,{style:{"margin-top":"50px"}},{default:(0,s.k6)((()=>[(0,s.bF)(ne,null,{default:(0,s.k6)((()=>[(0,s.bF)(ce,{border:"primary",style:{"font-size":"18px",color:"#dddddd","text-align":"left"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[ee.isEditDescription?((0,s.uX)(),(0,s.CE)("td",r,[(0,s.bF)(de,null,{default:(0,s.k6)((()=>[(0,s.bF)(ne,null,{default:(0,s.k6)((()=>[(0,s.bF)(le,{label:"Muokkaa tehtävän kuvausta...",white:"",rows:"4",modelValue:ee.description,"onUpdate:modelValue":i[0]||(i[0]=e=>ee.description=e),style:{"font-size":"14px",padding:"20px"}},null,8,["modelValue"])])),_:1}),(0,s.bF)(ne,{col:"1"},{default:(0,s.k6)((()=>[(0,s.bF)(oe,{white:"",onClick:i[1]||(i[1]=e=>ee.isEditDescription=!1),style:{float:"right",cursor:"pointer"}})])),_:1})])),_:1})])):((0,s.uX)(),(0,s.CE)("td",d,(0,o.v_)(q.booking.description),1))]),q.booking.offers.length<1?((0,s.uX)(),(0,s.CE)("tr",g,[ee.isEditDescription?((0,s.uX)(),(0,s.CE)("td",u,[(0,s.bF)(re,{outline:"info",block:"",size:"lg",onClick:ie.saveEditedDescription},{default:(0,s.k6)((()=>i[10]||(i[10]=[(0,s.eW)("Tallenna tehtävän kuvaus")]))),_:1},8,["onClick"])])):((0,s.uX)(),(0,s.CE)("td",c,[(0,s.bF)(re,{outline:"info",block:"",size:"lg",onClick:ie.pressedEditDescription},{default:(0,s.k6)((()=>i[9]||(i[9]=[(0,s.eW)("Muokkaa tehtävän kuvausta")]))),_:1},8,["onClick"])]))])):(0,s.Q3)("",!0),(0,s.Lk)("tr",null,[ee.isEditDate?((0,s.uX)(),(0,s.CE)("td",h,[(0,s.bF)(de,null,{default:(0,s.k6)((()=>[(0,s.bF)(ne,{col:"8"},{default:(0,s.k6)((()=>[(0,s.Lk)("h3",{class:(0,o.C4)({expired_date:q.booking.created_ms-(new Date).getTime()<=0})},(0,o.v_)(ee.bookingDateToDisplay),3),(0,s.bF)(ge,{style:{"margin-bottom":"20px"},dark:"",modelValue:ee.bookingDate,"onUpdate:modelValue":i[2]||(i[2]=e=>ee.bookingDate=e),"min-date":new Date,placeholder:"Valitse sopivaa aika...",onInternalModelChange:ie.handleInternalDate,state:!e.isNoDate&&null},null,8,["modelValue","min-date","onInternalModelChange","state"])])),_:1}),(0,s.bF)(ne,{col:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(oe,{white:"",onClick:i[3]||(i[3]=e=>ee.isEditDate=!1),style:{float:"right",cursor:"pointer"}})])),_:1})])),_:1})])):((0,s.uX)(),(0,s.CE)("td",m,[(0,s.Lk)("h3",{class:(0,o.C4)({expired_date:q.booking.created_ms-(new Date).getTime()<=0&&q.booking.offers.length<1})},(0,o.v_)(ee.bookingDateToDisplay),3),q.booking.offers.length<1?((0,s.uX)(),(0,s.Wv)(re,{key:0,block:"",size:"lg",outline:"info",onClick:ie.editDate},{default:(0,s.k6)((()=>[(0,s.Lk)("span",{class:(0,o.C4)({expired_warning:q.booking.created_ms-(new Date).getTime()<=0})},"Muokkaa päivämäärä",2)])),_:1},8,["onClick"])):(0,s.Q3)("",!0)]))])])])),_:1}),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(q.images,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a},[(0,s.Lk)("img",{class:"loading",style:{width:"100%"},src:e.blob?e.blob:t(9298)(`./${e.name}`),alt:e.name},null,8,k),ee.isEditPanel?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(re,{key:0,block:"",outline:"success",onClick:e=>ie.pressEditPanel(a)},{default:(0,s.k6)((()=>i[11]||(i[11]=[(0,s.eW)("Muokkaa kuva")]))),_:2},1032,["onClick"])),ee.isEditPanel&&ee.imageIndex===a?((0,s.uX)(),(0,s.CE)("div",p,[q.booking.offers.length<1?((0,s.uX)(),(0,s.Wv)(de,{key:0},{default:(0,s.k6)((()=>[(0,s.bF)(ne,null,{default:(0,s.k6)((()=>[ee.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(oe,{key:0,white:"",class:"close-btn",style:{float:"right"},onClick:ie.closeEditPanel},null,8,["onClick"])),(0,s.Lk)("input",{id:"file-upload",type:"file",onChange:e=>ie.handleFileChange(e,a)},null,40,f),(0,s.Lk)("label",v,[ee.value?((0,s.uX)(),(0,s.CE)("span",b," Muokka tehtävän kuvausta: "+(0,o.v_)(ee.value.name),1)):((0,s.uX)(),(0,s.CE)("span",y,"Valitse uusi kuva tehtävästä"))]),ee.isEditImage?((0,s.uX)(),(0,s.Wv)(re,{key:1,block:"",color:"success",onClick:e=>ie.uploadEditedImage(a)},{default:(0,s.k6)((()=>i[12]||(i[12]=[(0,s.eW)("Upload edited image")]))),_:2},1032,["onClick"])):(0,s.Q3)("",!0),(0,s.bF)(re,{class:"btn",block:"",size:"lg",color:"danger",onClick:e=>ie.removeImg(a)},{default:(0,s.k6)((()=>i[13]||(i[13]=[(0,s.eW)("Poista kuva")]))),_:2},1032,["onClick"])])),_:2},1024),ee.value?((0,s.uX)(),(0,s.Wv)(ne,{key:0},{default:(0,s.k6)((()=>[(0,s.bF)(oe,{white:"",class:"close-btn",style:{float:"right"},onClick:ie.closeEditPanel},null,8,["onClick"]),(0,s.Lk)("img",{style:{width:"100px","padding-top":"20px"},src:this.showImage,alt:"addEdit"},null,8,C)])),_:1})):(0,s.Q3)("",!0)])),_:2},1024)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])))),128)),!ee.isPressedAddlmage&q.booking.offers.length<1?((0,s.uX)(),(0,s.Wv)(re,{key:0,block:"",color:"primary",onClick:ie.pressedAddImage},{default:(0,s.k6)((()=>i[14]||(i[14]=[(0,s.eW)("Lisää uusi kuva tehtävästä")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0),ee.isPressedAddlmage&&ee.isAddImagePanel?((0,s.uX)(),(0,s.CE)("div",D,[(0,s.bF)(de,null,{default:(0,s.k6)((()=>[(0,s.bF)(ne,null,{default:(0,s.k6)((()=>[ee.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(oe,{key:0,white:"",class:"close-btn",onClick:ie.closeAddPanel},null,8,["onClick"])),(0,s.Lk)("input",{id:"file-upload-x",type:"file",onChange:i[4]||(i[4]=i=>ie.handleFileChange(i,e.i))},null,32),(0,s.Lk)("label",I,[ee.value?((0,s.uX)(),(0,s.CE)("span",_," Muokka tehtävän kuvausta: "+(0,o.v_)(ee.value.name)+" + ",1)):((0,s.uX)(),(0,s.CE)("span",E,"Valitse lisää kuva tehtävästä"))]),ee.isAddImage?((0,s.uX)(),(0,s.Wv)(re,{key:1,block:"",outline:"primary",onClick:ie.addAdditionalImage},{default:(0,s.k6)((()=>i[15]||(i[15]=[(0,s.eW)("Tallenna kuva")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0)])),_:1}),ee.value?((0,s.uX)(),(0,s.Wv)(ne,{key:0},{default:(0,s.k6)((()=>[(0,s.bF)(oe,{class:"close-btn",white:"",onClick:ie.closeAddPanel},null,8,["onClick"]),(0,s.Lk)("img",{style:{width:"100px"},src:this.showImage,alt:"addShow"},null,8,F)])),_:1})):(0,s.Q3)("",!0)])),_:1})])):(0,s.Q3)("",!0)])),_:1}),q.booking.isIncludeOffers?((0,s.uX)(),(0,s.Wv)(ne,{key:1,lg:"6"},{default:(0,s.k6)((()=>[q.booking.offers.length>0?((0,s.uX)(),(0,s.CE)("div",U,[(0,s.Lk)("div",W,[(0,s.Lk)("div",$,[i[28]||(i[28]=(0,s.Lk)("h3",{style:{"margin-bottom":"20px"}},"Tarjoukset",-1)),(0,s.bo)((0,s.Lk)("select",{style:{padding:"20px","background-color":"#3c3535",color:"lightgrey","font-size":"18px"},id:"listOfProviders","onUpdate:modelValue":i[7]||(i[7]=e=>ee.filterResult=e),onClick:i[8]||(i[8]=(...e)=>ie.addFilter&&ie.addFilter(...e))},i[27]||(i[27]=[(0,s.Lk)("option",{value:""},"Suodata...",-1),(0,s.Lk)("option",{value:"distance"},"Etäisyyden mukaan - lähin ensin",-1),(0,s.Lk)("option",{value:"rating"},"positiivisen palauteen mukaan",-1)]),512),[[a.u1,ee.filterResult]])])]),i[35]||(i[35]=(0,s.Lk)("br",null,null,-1)),(0,s.bF)(ce,{style:{"font-size":"18px","text-align":"center",position:"relative"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(q.booking.offers,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[e.provider.timeoffer.map((e=>ee.datetime.providerMatchingForClient(q.bookingTime,{y:e.yearFrom,m:e.monthFrom,d:e.dayFrom,hour:e.hoursFrom,min:e.minutesFrom},{y:e.yearTo,m:e.monthTo,d:e.dayTo,hour:e.hoursTo,min:e.minutesTo}))).includes(!0)?((0,s.uX)(),(0,s.CE)("td",O,[(0,s.bF)(re,{class:"provider-selection",outline:"success",size:"lg",onClick:i=>ie.getProviderInfo(e.provider,e,"green")},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.provider.yritys),1),i[29]||(i[29]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",Q,"Etäisyys: "+(0,o.v_)(e.provider.distance)+" km",1),i[30]||(i[30]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",V,(0,o.v_)(e.price)+" eur",1)])),_:2},1032,["onClick"]),(0,s.bF)(ue,{color:"success",class:"translate-middle p-4",pill:"",notification:""},{default:(0,s.k6)((()=>[(0,s.Lk)("span",j,[i[31]||(i[31]=(0,s.eW)(" Saatavilla   ")),(0,s.Lk)("img",{style:{width:"20px"},src:t(6674),alt:"ok"},null,8,H)])])),_:1})])):((0,s.uX)(),(0,s.CE)("td",N,[(0,s.bF)(re,{class:"provider-selection",outline:"info",size:"lg",onClick:i=>ie.getProviderInfo(e.provider,e,"orange")},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.provider.yritys)+" ",1),i[32]||(i[32]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",Y,"Etäisyys: "+(0,o.v_)(e.distance)+" km",1),i[33]||(i[33]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",K,(0,o.v_)(e.price)+" eur",1)])),_:2},1032,["onClick"]),(0,s.bF)(ue,{color:"info",class:"translate-middle p-4",pill:"",notification:""},{default:(0,s.k6)((()=>[(0,s.Lk)("span",G,(0,o.v_)(e.price)+" eur",1)])),_:2},1024)]))])))),128)),i[34]||(i[34]=(0,s.Lk)("tr",null,null,-1))])])),_:1})])):((0,s.uX)(),(0,s.CE)("div",J,i[36]||(i[36]=[(0,s.Lk)("h2",{style:{width:"100%"}},"Tarjouksia hetkellä ei löytyy",-1)])))])),_:1})):((0,s.uX)(),(0,s.Wv)(ne,{key:0},{default:(0,s.k6)((()=>[q.providers.length>0?((0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",x,[(0,s.Lk)("div",A,[i[17]||(i[17]=(0,s.Lk)("h3",{style:{"margin-bottom":"20px"}},"Palveluntarjoajat",-1)),(0,s.bo)((0,s.Lk)("select",{style:{padding:"20px","background-color":"#3c3535",color:"lightgrey","font-size":"18px"},id:"listOfProviders","onUpdate:modelValue":i[5]||(i[5]=e=>ee.filterResult=e),onClick:i[6]||(i[6]=(...e)=>ie.addFilter&&ie.addFilter(...e))},i[16]||(i[16]=[(0,s.Lk)("option",{value:""},"Suodata...",-1),(0,s.Lk)("option",{value:"distance"},"Etäisyyden mukaan - lähin ensin",-1),(0,s.Lk)("option",{value:"rating"},"positiivisen palauteen mukaan",-1)]),512),[[a.u1,ee.filterResult]])])]),i[25]||(i[25]=(0,s.Lk)("br",null,null,-1)),(0,s.bF)(ce,{style:{"font-size":"18px","text-align":"center",position:"relative"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(q.providers,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[e.timeoffer.map((e=>ee.datetime.providerMatchingForClient(q.bookingTime,{y:e.yearFrom,m:e.monthFrom,d:e.dayFrom,hour:e.hoursFrom,min:e.minutesFrom},{y:e.yearTo,m:e.monthTo,d:e.dayTo,hour:e.hoursTo,min:e.minutesTo}))).includes(!0)?((0,s.uX)(),(0,s.CE)("td",L,[(0,s.bF)(re,{class:"provider-selection",outline:"success",size:"lg",onClick:i=>ie.getProviderInfo(e,"green")},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.yritys),1),i[18]||(i[18]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",P,"Etäisyys: "+(0,o.v_)(e.distance)+" km",1),i[19]||(i[19]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",M,(0,o.v_)(e.priceByHour?e.priceByHour+" eur / tunti":"Urakkahinta"),1)])),_:2},1032,["onClick"]),(0,s.bF)(ue,{color:"success",class:"translate-middle p-4",pill:"",notification:""},{default:(0,s.k6)((()=>[(0,s.Lk)("span",S,[i[20]||(i[20]=(0,s.eW)(" Saatavilla   ")),(0,s.Lk)("img",{style:{width:"20px"},src:t(6674),alt:"ok"},null,8,X)])])),_:1})])):((0,s.uX)(),(0,s.CE)("td",z,[(0,s.bF)(re,{class:"provider-selection",outline:"info",size:"lg",onClick:i=>ie.getProviderInfo(e,"orange")},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.yritys)+" ",1),i[21]||(i[21]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",B,"Etäisyys: "+(0,o.v_)(e.distance)+" km",1),i[22]||(i[22]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",T,(0,o.v_)(e.priceByHour?e.priceByHour+" eur / tunti":"Urakkahinta"),1)])),_:2},1032,["onClick"]),(0,s.bF)(ue,{color:"info",class:"translate-middle p-4",pill:"",notification:""},{default:(0,s.k6)((()=>i[23]||(i[23]=[(0,s.Lk)("span",{style:{"font-size":"14px"}},"Sovittaessa",-1)]))),_:1})]))])))),128)),i[24]||(i[24]=(0,s.Lk)("tr",null,null,-1))])])),_:1})])):((0,s.uX)(),(0,s.CE)("div",R,i[26]||(i[26]=[(0,s.Lk)("h2",{style:{width:"100%"}},"Yrityksiä hetkellä ei löytyy",-1)])))])),_:1})),(0,s.bF)(re,{block:"",outline:"danger",size:"lg",onClick:ie.removeBooking},{default:(0,s.k6)((()=>i[37]||(i[37]=[(0,s.eW)("Poista tilaus")]))),_:1},8,["onClick"])])),_:1})])),_:1}))}t(4114),t(4603),t(7566),t(8721);var Z=t(5846),ee=t(8405),ie=t(5158),te=t(7337),se=t(5607),oe=t(1769),ae=t(4474),le=t(8068),ne=t(407),de=t(1690),re={name:"recipient-panel-result",props:{test:Boolean,chatusers:Array,selecteduser:null,messages:Array,loggedInUser:Object,booking:null,images:Array,bookingTime:null,providers:Array,confirmedBookings:Array,line:String},data(){return{offer:null,chatUser:null,initializeChatRoom:{},chatRoomData:{},count:0,datetime:ee.A,distance:se.A,selectedProvider:null,proSlides:[],isProviderSelected:!1,availability:"",orderMessage:null,isOrdered:!1,isEditDescription:!1,description:this.booking.description,isEditDate:!1,bookingDate:null,bookingDateToDisplay:this.booking.date,isAddFirstImage:!1,isPressedAddlmage:!1,isAddImage:!1,isAddImagePanel:!1,isEditImage:!1,isUploadImage:!1,isUploaded:!1,isImageCreated:!1,isAddNewImage:!1,isEditPanel:!1,value:null,imageIndex:0,file:null,isImageSelected:!1,isAdditionalImageSelected:!1,showImage:null,tempImages:[],imagesx:[],imagesxxx:[],room:"",roomUserCount:0,filterResult:""}},components:{successMessage:te.A,VueDatePicker:le.A,dist:se.A,recipientFinal:ie["default"],MDBBtn:Z.al,MDBBtnClose:Z.uR,MDBContainer:Z.Dj,MDBTable:Z.EU,MDBRow:Z.gU,MDBCol:Z.m6,MDBTextarea:Z.QP,MDBIcon:Z.$u,MDBBadge:Z.nf},methods:{editDate(){this.isEditDate=!0},async handleInternalDate(){if(this.bookingDate){console.log("new date: "+new Date(this.bookingDate).getTime()),this.bookingDateToDisplay=this.bookingDate.getMonth()+1+"/"+this.bookingDate.getDate()+"/"+this.bookingDate.getFullYear(),console.log("eeeeee "+(this.bookingDate.getMonth()+1)+"/"+this.bookingDate.getDate()+"/"+this.bookingDate.getFullYear());const e=new Date(this.bookingDate).getTime();await ne.A.newDate(this.booking.id,{year:this.bookingDate.getFullYear(),month:this.bookingDate.getMonth(),day:this.bookingDate.getDate(),hours:this.bookingDate.getHours(),minutes:this.bookingDate.getMinutes(),date_ms:e});const i={year:this.bookingDate.getFullYear(),month:this.bookingDate.getMonth(),day:this.bookingDate.getDate(),hours:this.bookingDate.getHours(),minutes:this.bookingDate.getMinutes()};this.$emit("updateBookingDate",this.booking,i)}console.log("Date is handled")},handleFileChange(e,i){console.log("i in file change "+i),this.imageIndex=i;try{const i=e.target.files[0];if(console.log("event target client ",e.target.files[0]),i){const t=URL.createObjectURL(i);this.tempImages.push(t),this.showImage=URL.createObjectURL(i),this.file=e.target.files[0],this.isAddImage=!0,this.isEditImage=!0}}catch(t){console.log("Error:",t)}this.value=e.target.files[0]},pressedAddImage(){this.isAddImage=!1,this.isEditImage=!1,this.isEditPanel=!1,this.isPressedAddlmage=!0,this.isAddImagePanel=!0},async addImage(){},pressEditPanel(e){this.isEditImage=!1,this.value=null,this.imageIndex=e,this.isEditPanel=!0,this.isAddImagePanel=!1},closeEditPanel(){this.isAddImagePanel=!1,this.isEditPanel=!1,this.isEditImage=!1,this.value=null},closeAddPanel(){this.isAddImagePanel=!1,this.isPressedAddlmage=!1,this.value=null},async uploadEditedImage(e,i){console.log("Edited image index is: "+e),this.isEditPanel=!1,this.isEditImage=!1;const t=new FormData;t.append("file",this.file,this.file.name),console.log("Image id "+this.images[e]._id);const s=await ae.A.updateImage(this.images[e]._id,t);s&&(this.images[this.imageIndex]={_id:this.images[e]._id,blob:this.showImage},this.images.forEach((e=>{console.log("Image name "+e._id)})),console.log("New image id is "+s._id),this.imgId=s._id,this.file=null,this.isEditPanel=!1)},async addAdditionalImage(){this.value=null,this.isAddImagePanel=!1,this.isAddImage=!1,this.isPressedAddlmage=!1;const e=new FormData;e.append("file",this.file,this.file.name);const i=await ae.A.create(e);if(await ne.A.addImage(this.booking.id,i.imgCreated._id),i){const e={_id:i.imgCreated._id,blob:this.showImage};this.$emit("addImage",e,this.booking.id)}},async removeImg(e){this.images[e].blob||console.log("removed image is blob"),console.log("removable image id is "+this.images[e]._id),await ne.A.removeImage(this.booking.id,this.images[e]._id),await ae.A.remove(this.images[e]._id,this.booking.id),this.$emit("removeImage",e),this.isEditPanel=!1},getDistance(){console.log("sss "+se.A.test())},selectUser(e){this.$emit("select",e)},noSelectUser(){this.$emit("noSelect")},onMessage(e,i){this.$emit("message",e,i)},initializeChat(){this.$emit("initializeChat",{initChatRoom:this.initializeChatRoom,chatData:this.chatRoomData})},handleCreateChatPanel(){console.log("Final info in result pressed "),console.log("recipient result xxxxx "+this.chatRoomData.username),this.initializeChat()},async pressAddFirstImage(){this.isAddFirstImage=!0,this.imageIndex=0},pressAdditionalImage(e){this.isAddImage=!0,this.imageIndex=this.images.length,console.log("Images index = "+this.imageIndex),this.isAddImage=!0},async uploadFirstImage(e){const i=new FormData;this.isUploadImage=!0,this.imageIndex=0,i.append("file",this.file,this.file.name);const t=await ae.A.create(i);if(await ne.A.addImage(this.booking.id,t.imgCreated._id),t){this.file=null;const e={_id:t.imgCreated._id,image:t.imgCreated.image,name:t.imgCreated.name};this.$emit("addImage",e),this.imageIndex=0,this.isImageSelected=!1,this.isUploaded=!0}},async uploadAdditionalImage(){this.isAdditionalImageSelected=!1,this.isAddImage=!1,this.value=null,console.log("Image index index "+this.imageIndex);const e=new FormData;this.isUploadImage=!0,this.isUploaded=!0,e.append("file",this.file,this.file.name);const i=await ae.A.create(e);if(await ne.A.addImage(this.booking.id,i.imgCreated._id),i){this.file=null;const e={_id:i.imgCreated._id,image:i.imgCreated.image,name:i.imgCreated.name};this.$emit("addImage",e),this.isImageSelected=!1,this.isUploaded=!0}},pressedEditDescription(){this.isEditDescription=!0,console.log("Descripton: "+this.description)},saveEditedDescription(){this.isEditDescription=!1;const e={description:this.description};this.$emit("editDescription",this.description),ne.A.editDescription(this.booking.id,e)},cancelEditDescription(){console.log("Is here something happening??")},providerGetBooking(e,i){console.log("Sended to user id... "+e),de.A.emit("accept provider",{id:e,booking:i})},async orderSuccess(e){if(this.booking.isIncludeOffers){this.canselResult(),this.$emit("offer_confirmed",this.booking);const i=await oe.A.getProvByProvId(e.id);console.log("Offer confirmation user id "+i.user.id),de.A.emit("confirm offer",i.user.id,this.booking);this.selectedProvider.id;await ne.A.updateRecipient(this.booking.id,{status:"confirmed"});this.booking.id}else{this.isProviderSelected=!1,console.log("Provider id "+e.id),console.log("Recpient id: "+this.booking.id);this.selectedProvider.id;await ne.A.addProviderData(this.booking.id,this.selectedProvider.id);await ne.A.updateRecipient(this.booking.id,{status:"notSeen"});const i=this.booking.id,t=await oe.A.addProviderBooking(e.id,i);if("Recipient is added!"===t){const i={status:"",userID:e.user.id,name:e.user.username,room:this.room};this.$emit("client:confirmed_provider",e.id,this.booking,i),this.roomToDb(e.id,{userID:this.booking.user.id,client:this.booking.user.username,room:this.room});const t=e.user.id;de.A.emit("accept provider",{id:t,booking:this.booking})}this.initializeChat()}},async orderSuccess_standing(e){this.isProviderSelected=!1,console.log("Provider id "+e.id),console.log("Recpient id: "+this.booking.id),this.canselResult(),this.$emit("offer_confirmed",this.booking);this.selectedProvider.id,await ne.A.updateRecipient(this.booking.id,{status:"confirmed"}),this.booking.id},getProviderInfo(e,i,s){this.proSlides=[],this.offer=i,this.selectedProvider=e,e.reference.forEach((e=>{this.proSlides=[...this.proSlides,{id:e.id,size:"1400-933",src:t(3906)(`./${e.name}`),thumb:t(3906)(`./${e.name}`),subHtml:'<div class="lightGallery-captions">\n                <h2>Terve</h2>\n\n            </div>"'}]})),this.availability=s,this.isProviderSelected=!0,this.room=e.yritys+this.chatUser.username;let o="",a="";this.chatUser&&(a=this.chatUser.username,o=e.yritys+a);const l={room:o,proID:e.user.id,pro:e.yritys,userID:e.user.id,username:e.user.username};e.user.id,e.user.username;this.initializeChatRoom={room:o,pro:e.yritys,status:"booking panel",username:a,providerUsername:e.user.username,providerID:e.user.id},this.chatRoomData=l},async roomToDb(e,i){await oe.A.addRoom(e,i)},addFilter(){const e=document.getElementById("listOfProviders");e.addEventListener("change",(e=>{console.log("Filtered provider: "+e.target.value),this.$emit("filter_provider",e.target.value)}))},handleCanselFinal(e){this.isProviderSelected=e},canselResult(){this.$emit("cansel:result",!1)},async removeBooking(){console.log("In start booking id "+this.booking.id),!0===confirm("Oletko varmaa, että haluat poistaa tilauksen!?")?(console.log("You pressed OK!"),this.$emit("removeBooking",this.booking.id)):console.log("You canceled!"),this.images.forEach((e=>{console.log("Images ## "+e._id),ae.A.cleanAllRecipientImages(e._id)}))}},async mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const i=JSON.parse(e);this.chatUser=i}}},ge=t(1241);const ce=(0,ge.A)(re,[["render",q],["__scopeId","data-v-26384392"]]);var ue=ce},6674:function(e,i,t){e.exports=t.p+"img/ok.c97d8292.png"}}]);
//# sourceMappingURL=508.4f2e81fb.js.map