"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[351,655],{1644:function(e,i,t){e.exports=t.p+"img/error.9510853e.png"},1889:function(e,i,t){t.d(i,{A:function(){return m}});var s=t(6768),o=t(4232);const r={key:0,class:"full-star"},n={key:1,class:"half-star"},a={key:2,class:"star"};function l(e,i,t,l,d,u){const c=(0,s.g2)("MDBContainer");return(0,s.uX)(),(0,s.Wv)(c,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.stars,((e,i)=>((0,s.uX)(),(0,s.CE)("span",{key:i,class:(0,o.C4)(["starGap",["star",{full:"full"===e,half:"half"===e}]])},["full"===e?((0,s.uX)(),(0,s.CE)("span",r,"★")):"half"===e?((0,s.uX)(),(0,s.CE)("span",n,"★")):((0,s.uX)(),(0,s.CE)("span",a,"★"))],2)))),128))])])),_:1})}t(4114);var d=t(5846),u={name:"RatingStars",props:{rating:Number},components:{MDBContainer:d.Dj},data(){return{}},computed:{stars(){let e=[],i=Math.floor(this.rating),t=this.rating%1>=.1;for(let s=0;s<i;s++)e.push("full");t&&e.push("half");while(e.length<5)e.push("empty");return e}}},c=t(1241);const h=(0,c.A)(u,[["render",l],["__scopeId","data-v-7c73cb5d"]]);var m=h},2947:function(e,i,t){t.r(i),t.d(i,{default:function(){return fe}});t(4114);var s=t(6768),o=t(4232);const r={class:"textSize"},n={class:"pro-panel-header"},a={class:"header-content"},l={key:0,class:"spinner-border",role:"status"},d={key:1,class:"pro-panel"},u={key:0},c={key:1},h={style:{border:"solid #ddd","margin-bottom":"10px",padding:"7px"}},m={style:{display:"flex","justify-content":"right",padding:"10px"}},g={key:0,colspan:"2"},p={key:1},k={class:"ratingData"},f={style:{"text-align":"center"}},v={key:0},y={style:{display:"flex","justify-content":"right",color:"green",cursor:"pointer"}},D={key:1},T={style:{float:"right"}},P={key:0,colspan:"2"},E={key:1},b={key:0,colspan:"2"},C={key:1};function M(e,i,t,M,F,w){const A=(0,s.g2)("MDBCol"),R=(0,s.g2)("MDBRow"),L=(0,s.g2)("calendar"),_=(0,s.g2)("error-notification"),B=(0,s.g2)("errorNotification"),I=(0,s.g2)("successNotification"),x=(0,s.g2)("MDBBtn"),K=(0,s.g2)("MDBBtnClose"),X=(0,s.g2)("MDBInput"),N=(0,s.g2)("feedback-list"),S=(0,s.g2)("rating-stars"),W=(0,s.g2)("MDBTextarea"),O=(0,s.g2)("edit-profession"),V=(0,s.g2)("editPrice"),H=(0,s.g2)("MDBTable"),$=(0,s.g2)("MDBContainer");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(R,{style:{"margin-top":"17px"}},{default:(0,s.k6)((()=>[(0,s.bF)(A,{class:"proPanelHeader",md:"4"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.Lk)("div",a,[(0,s.Lk)("h2",null,(0,o.v_)(M.provider.yritys),1),(0,s.Lk)("h2",null,(0,o.v_)(M.provider.address),1)])])])),_:1})])),_:1}),(0,s.bF)($,{style:{"margin-bottom":"50px"}},{default:(0,s.k6)((()=>[(0,s.bF)(L,{userIsProvider:t.userIsProvider,bookings:t.bookings,filled_days:t.filled_days,filled:t.filled,bookingsConfirmed:t.bookingsConfirmed,client_filled_days:t.client_filled_days,client_filled:t.client_filled,confirmedBookingsByProvider:t.confirmedBookingsByProvider},null,8,["userIsProvider","bookings","filled_days","filled","bookingsConfirmed","client_filled_days","client_filled","confirmedBookingsByProvider"]),(0,s.bF)(R,null,{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{default:(0,s.k6)((()=>[M.provider.profession?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(_,{message:M.rangeErrorMessage},null,8,["message"]),(0,s.bF)(B,{message:M.errorMessage},null,8,["message"]),(0,s.bF)(I,{message:M.successMessage},null,8,["message"]),(0,s.bF)(H,{responsive:"",borderless:"",class:"proPanelTable",style:{}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,o.v_)(0===M.provider.range?"Tarjoan palvelua paikalla":"Palvelun säde: "+M.provider.range+" km"),1),M.isEditRange?((0,s.uX)(),(0,s.CE)("td",c,[(0,s.Lk)("div",h,[(0,s.Lk)("div",m,[(0,s.bF)(K,{white:"",onClick:i[1]||(i[1]=e=>M.isEditRange=!1)})]),(0,s.Lk)("div",null,[(0,s.bF)(X,{white:"",label:"Säde - km",modelValue:M.range,"onUpdate:modelValue":i[2]||(i[2]=e=>M.range=e),size:"sm",type:"number"},null,8,["modelValue"]),i[9]||(i[9]=(0,s.Lk)("br",null,null,-1))]),M.range.length>0?((0,s.uX)(),(0,s.Wv)(x,{key:0,outline:"info",block:"",size:"sm",onClick:w.saveNewRange},{default:(0,s.k6)((()=>i[10]||(i[10]=[(0,s.eW)("Tallenna uusi säde")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0)])])):((0,s.uX)(),(0,s.CE)("td",u,[(0,s.bF)(x,{outline:"info",block:"",size:"sm",onClick:i[0]||(i[0]=e=>M.isEditRange=!0)},{default:(0,s.k6)((()=>i[8]||(i[8]=[(0,s.eW)("Muokkaa toimintaalueetta")]))),_:1})]))]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",{class:(0,o.C4)({hide:M.isFeedback})}," Palaute ",2),M.isFeedback?((0,s.uX)(),(0,s.CE)("td",g,[(0,s.bF)(N,{feedback:M.provider.feedback,onCloseFeedbackList:w.handleCloseFeedbackList},null,8,["feedback","onCloseFeedbackList"])])):((0,s.uX)(),(0,s.CE)("td",p,[(0,s.bF)(R,{class:"rating"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("p",k,(0,o.v_)(M.provider.rating.positive>0?M.provider.rating.positive/M.provider.rating.count:"0")+" tähteä   ( yhteensä "+(0,o.v_)(M.provider.rating.count)+" antajaa )",1)]),(0,s.bF)(A,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",f,[(0,s.bF)(S,{rating:M.provider.rating.positive/M.provider.rating.count},null,8,["rating"])])])),_:1}),M.provider.feedback.length>0?((0,s.uX)(),(0,s.Wv)(A,{key:0,sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(x,{block:"",outline:"warning",onClick:w.getFeedbackListData},{default:(0,s.k6)((()=>[i[11]||(i[11]=(0,s.eW)("Saatu arvostelut   ")),(0,s.Lk)("span",null,"( "+(0,o.v_)(M.provider.feedback.length)+" )",1)])),_:1},8,["onClick"])])),_:1})):(0,s.Q3)("",!0)])),_:1})]))]),(0,s.Lk)("tr",null,[i[13]||(i[13]=(0,s.Lk)("td",null," Portfolio ",-1)),F.isEditPortfolio?((0,s.uX)(),(0,s.CE)("td",D,[(0,s.Lk)("p",{style:{display:"flex","justify-content":"right",padding:"7px"},onClick:i[4]||(i[4]=e=>F.isEditPortfolio=!1)},"Poistu"),(0,s.bF)(W,{maxlength:"100",label:"Muokkaa kuvausta...",white:"",rows:"3",modelValue:F.des,"onUpdate:modelValue":i[5]||(i[5]=e=>F.des=e),wrapperClass:"mb-4"},null,8,["modelValue"]),F.des.length>0?((0,s.uX)(),(0,s.Wv)(x,{key:0,outline:"success",onClick:w.getDescriptionContent},{default:(0,s.k6)((()=>i[12]||(i[12]=[(0,s.eW)("Varmista")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0),(0,s.Lk)("span",T,(0,o.v_)(F.des.length)+" / 100",1)])):((0,s.uX)(),(0,s.CE)("td",v,[(0,s.eW)((0,o.v_)(t.proDescription)+" ",1),(0,s.Lk)("div",y,[(0,s.Lk)("p",{onClick:i[3]||(i[3]=e=>F.isEditPortfolio=!0)},"Muokkaa")])]))]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",{class:(0,o.C4)({hide:M.isEditProfession})},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(M.provider.profession,((e,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i},(0,o.v_)(e),1)))),128))],2),M.isEditProfession?((0,s.uX)(),(0,s.CE)("td",P,[(0,s.bF)(O,{provider:M.provider,onAdditionalProfession:w.handleAddProfession,onEditProfession:w.handleEditProfession,onRemoveProfession:w.handleRemoveProfession,"onCancel:editProfession":w.handleCancelEditProfession},null,8,["provider","onAdditionalProfession","onEditProfession","onRemoveProfession","onCancel:editProfession"])])):((0,s.uX)(),(0,s.CE)("td",E,[(0,s.bF)(x,{outline:"info",block:"",size:"sm",onClick:w.editProfessionPro},{default:(0,s.k6)((()=>i[14]||(i[14]=[(0,s.eW)("Muokkaa osaamista")]))),_:1},8,["onClick"])]))]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",{class:(0,o.C4)({hide:M.isEditPrice})},(0,o.v_)(M.provider.priceByHour)+" Euroa ",3),M.isEditPrice?((0,s.uX)(),(0,s.CE)("td",b,[(0,s.bF)(V,{currentPrice:M.provider.priceByHour,"onCancel:editPrice":w.cancelEditPrice,"onSave:editedPrice":w.saveEditedPrice},null,8,["currentPrice","onCancel:editPrice","onSave:editedPrice"])])):((0,s.uX)(),(0,s.CE)("td",C,[(0,s.bF)(x,{outline:"info",block:"",size:"sm",onClick:w.editPrice},{default:(0,s.k6)((()=>i[15]||(i[15]=[(0,s.eW)("Muokkaa tuntihinta")]))),_:1},8,["onClick"])]))]),(0,s.Lk)("tr",null,[i[17]||(i[17]=(0,s.Lk)("td",null," Katso kartalta ",-1)),(0,s.Lk)("td",null,[(0,s.bF)(x,{outline:"info",block:"",size:"sm",onClick:i[6]||(i[6]=e=>this.$router.push("/pro-public-search"))},{default:(0,s.k6)((()=>i[16]||(i[16]=[(0,s.eW)("Kartalta")]))),_:1})])])])])),_:1})])):((0,s.uX)(),(0,s.CE)("div",l,i[7]||(i[7]=[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1)])))])),_:1})])),_:1})])),_:1})])}t(8111),t(2489),t(7588),t(1701),t(3579);var F=t(8068),w=t(1769);const A={class:"edit-price"},R={style:{display:"flex","justify-content":"right"}};function L(e,i,t,o,r,n){const a=(0,s.g2)("error-msg"),l=(0,s.g2)("MDBBtnClose"),d=(0,s.g2)("MDBInput"),u=(0,s.g2)("MDBBtn"),c=(0,s.g2)("MDBContainer");return(0,s.uX)(),(0,s.Wv)(c,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",A,[(0,s.bF)(a,{message:o.priceErrorMessage},null,8,["message"]),(0,s.Lk)("div",R,[(0,s.bF)(l,{white:"",style:{padding:"13px",cursor:"pointer"},onClick:n.cancelEdit},null,8,["onClick"])]),(0,s.bF)(d,{type:"Number",label:"Uusi tuntihinta",size:"lg",white:"",modelValue:o.price,"onUpdate:modelValue":i[0]||(i[0]=e=>o.price=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,s.bF)(u,{outline:"success",block:"",size:"lg",style:{"margin-bottom":"20px"},onClick:n.handleEditPrice},{default:(0,s.k6)((()=>i[1]||(i[1]=[(0,s.eW)("Kinnita")]))),_:1},8,["onClick"])])])),_:1})}var _=t(5846),B=t(144),I=t(4482),x={name:"edit-price",props:{currentPrice:Number},setup(){const e=(0,B.KR)(null),i=(0,B.KR)(null);return{price:e,priceErrorMessage:i}},components:{errorMsg:I.A,MDBContainer:_.Dj,MDBBtn:_.al,MDBInput:_.gk,MDBBtnClose:_.uR},data(){return{errorMessage:null}},methods:{handleEditPrice(){const e=parseInt(this.price);this.price?e>0?(console.log("Pos"),this.$emit("save:editedPrice",this.price)):(this.price=null,this.priceErrorMessage="Hinta ei voi olla negatiivinen numero!",setTimeout((()=>{this.priceErrorMessage=null}),3e3)):(this.priceErrorMessage="Tuntihinta puuttuu!",setTimeout((()=>{this.priceErrorMessage=null}),3e3))},cancelEdit(){this.$emit("cancel:editPrice",!1),this.errorMessage="Here is some error!"}}},K=t(1241);const X=(0,K.A)(x,[["render",L]]);var N=X,S=t(5130);const W={class:"edit-profession"},O={key:0},V={style:{color:"#ddd"}},H={style:{"margin-bottom":"20px"}},$={value:"slotProps"},z={key:0},j={key:1},U={style:{},class:"flex align-items-center"},G={key:1},Q={key:2,style:{"margin-top":"13px","margin-bottom":"20px"}},Y={value:"slotProps"},q={key:0},J={key:1},Z={style:{},class:"flex align-items-center"};function ee(e,i,t,r,n,a){const l=(0,s.g2)("MDBBtnClose"),d=(0,s.g2)("MDBCol"),u=(0,s.g2)("Dropdown"),c=(0,s.g2)("MDBRow"),h=(0,s.g2)("MDBTable"),m=(0,s.g2)("MDBBtn"),g=(0,s.g2)("MDBContainer");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",W,[(0,s.bF)(l,{white:"",style:{float:"right",cursor:"pointer"},onClick:a.cancelEditProfession},null,8,["onClick"]),t.provider&&1===t.provider.profession.length?((0,s.uX)(),(0,s.CE)("div",O,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.provider.profession,((t,n)=>((0,s.uX)(),(0,s.Wv)(c,{key:n},{default:(0,s.k6)((()=>[(0,s.bF)(d,{col:"12"},{default:(0,s.k6)((()=>[(0,s.Lk)("p",V,(0,o.v_)(t),1)])),_:2},1024),(0,s.bF)(d,{col:"12"},{default:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:i[1]||(i[1]=(0,S.D$)(((...i)=>e.submit&&e.submit(...i)),["prevent"]))},[(0,s.Lk)("div",H,[(0,s.bF)(u,{onChange:e=>a.changeCurrentProfession(n),modelValue:r.selected,"onUpdate:modelValue":i[0]||(i[0]=e=>r.selected=e),options:r.proList,filter:"",optionLabel:"label",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"Valitse ammattilainen",class:"w-full md:w-100rem"},{optiongroup:(0,s.k6)((e=>[(0,s.Lk)("div",U,[(0,s.Lk)("div",null,(0,o.v_)(e.option.label),1)])])),default:(0,s.k6)((()=>[(0,s.Lk)("template",$,[e.slotProps.value?((0,s.uX)(),(0,s.CE)("div",z,[(0,s.Lk)("div",null,(0,o.v_)(e.slotProps.value.label),1)])):((0,s.uX)(),(0,s.CE)("span",j,(0,o.v_)(e.slotProps.placeholder),1))])])),_:2},1032,["onChange","modelValue","options"])])],32)])),_:2},1024)])),_:2},1024)))),128))])):((0,s.uX)(),(0,s.CE)("div",G,[(0,s.bF)(h,{borderless:"",style:{"font-size":"18px","text-align":"left"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.provider.profession,((e,i)=>((0,s.uX)(),(0,s.CE)("tr",{key:i},[(0,s.Lk)("td",null,(0,o.v_)(e),1),(0,s.Lk)("td",null,[(0,s.bF)(l,{white:"",onClick:t=>a.removeProfession(i,e)},null,8,["onClick"])])])))),128))])])),_:1})])),(0,s.bF)(m,{block:"",color:"primary",size:"lg",style:{"margin-bottom":"20px"},onClick:a.addProfessionPressed},{default:(0,s.k6)((()=>i[3]||(i[3]=[(0,s.eW)("Lisää ammatti")]))),_:1},8,["onClick"]),r.isAddProfession?((0,s.uX)(),(0,s.CE)("div",Q,[(0,s.bF)(u,{onChange:a.changeNewProfession,modelValue:r.selectedNewProfession,"onUpdate:modelValue":i[2]||(i[2]=e=>r.selectedNewProfession=e),options:r.proList,filter:"",optionLabel:"label",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"Valitse ammattilainen",class:"w-full md:w-100rem"},{optiongroup:(0,s.k6)((e=>[(0,s.Lk)("div",Z,[(0,s.Lk)("div",null,(0,o.v_)(e.option.label),1)])])),default:(0,s.k6)((()=>[(0,s.Lk)("template",Y,[e.slotProps.value?((0,s.uX)(),(0,s.CE)("div",q,[(0,s.Lk)("div",null,(0,o.v_)(e.slotProps.value.label),1)])):((0,s.uX)(),(0,s.CE)("span",J,(0,o.v_)(e.slotProps.placeholder),1))])])),_:1},8,["onChange","modelValue","options"])])):(0,s.Q3)("",!0),r.additionalProfession.length>2?((0,s.uX)(),(0,s.Wv)(m,{key:3,outline:"success",block:"",size:"lg",onClick:e.handleAddAdditionalProfession},{default:(0,s.k6)((()=>i[4]||(i[4]=[(0,s.eW)("Kinnita uus amet")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0)])])),_:1})])}var ie=t(3076),te=t(2436),se={name:"editProfession",props:{provider:Object},components:{Dropdown:te.A,MDBContainer:_.Dj,MDBBtn:_.al,MDBRow:_.gU,MDBCol:_.m6,MDBTable:_.EU,MDBBtnClose:_.uR},setup(){const e=(0,B.KR)(""),i=(0,B.KR)(null),t=(0,B.KR)(null),s=(0,B.KR)(!1),o=(0,B.KR)(""),r=(0,B.KR)(ie.A);return{profession:e,selected:i,selectedNewProfession:t,isAddProfession:s,additionalProfession:o,proList:r}},methods:{changeCurrentProfession(e){console.log("Selected xx "+e+" "+this.selected.label),this.$emit("editProfession",e,this.selected.label),this.selected=null},changeNewProfession(){console.log("New new "+this.selectedNewProfession.label),this.isAddProfession=!1,this.$emit("additionalProfession",this.selectedNewProfession.label),this.selectedNewProfession=null},addProfessionPressed(){this.selectedNewProfession="",this.isAddProfession=!0},addNewProfession(){this.selectedNewProfession="";const e=document.getElementById("new_profession");e.addEventListener("change",(e=>{this.isAddProfession=!1,this.$emit("additionalProfession",e.target.value)})),this.selectedNewProfession=""},editProfession(e){this.isAddProfession=!1;const i=document.getElementById("edit_profession");i.addEventListener("change",(i=>{this.$emit("editProfession",e,i.target.value)})),this.selected=""},removeProfession(e,i){this.isAddProfession=!1,this.$emit("removeProfession",e,i),this.selected=null},cancelEditProfession(){this.$emit("cancel:editProfession")}}};const oe=(0,K.A)(se,[["render",ee]]);var re=oe,ne=t(7337),ae=t(7153),le=t(4044),de=t(1690),ue=t(7533),ce=t(2782),he=t(7630),me=t(1889),ge=t(9614),pe={name:"Provider-panel",props:{userIsProvider:null,proDescription:{type:String,required:!0},bookings:Array,filled_days:Array,filled:Array,bookingsConfirmed:Array,client_filled_days:Array,client_filled:Array,confirmedBookingsByProvider:Array},components:{Gallery:ge["default"],FeedbackList:he.A,calendar:ae["default"],ratingStars:me.A,info:le.A,errorNotification:I.A,successNotification:ne.A,editPrice:N,editProfession:re,MDBContainer:_.Dj,MDBIcon:_.$u,MDBRow:_.gU,MDBCol:_.m6,MDBTable:_.EU,MDBBtn:_.al,MDBBtnClose:_.uR,MDBBadge:_.nf,MDBInput:_.gk,MDBTextarea:_.QP,VueDatePicker:F.A},data(){const e=()=>{(0,ue.A)(new Date,1)},i=(0,B.KR)(),t=(0,B.KR)([{hours:(new Date).getHours(),minutes:(new Date).getMinutes()},{hours:(new Date).getHours(),minutes:(new Date).getMinutes()}]);return{dateForTimeEdit:null,date:i,startTime:t,editMarkedTimeID:null,editMarketIndex:null,activeDate:null,setMarkers:null,dayMarkerData:[],isEditTime:!1,selfProvider:this.userIsProvider,confirmedBookings:[],testi:{},rooms:[],close:!0,isGallery:!1,proImages:[],isCalendarVisible:!1,filledTimes:[],dayPanelIndex:null,isHandleTask:!1,isPortfolio:!1,isEditPortfolio:!1,portfolioContent:"",des:this.proDescription,watchEffect:e}},setup(){const e=(0,B.KR)(!1),i=(0,B.KR)(null),t=(0,B.KR)(""),o=(0,B.KR)(null),r=(0,B.KR)(null),n=(0,B.KR)(""),a=(0,B.KR)(!1),l=(0,B.KR)(!1),d=(0,B.KR)(!1),u=(0,B.KR)(!1),c=(0,B.KR)(!1),h=(0,B.KR)(null),m=(0,B.KR)(null),g=(0,B.KR)([]),p=(0,B.KR)([]),k=(0,B.KR)(!1),f=(0,B.KR)([]),v=(0,B.KR)({}),y=(0,B.KR)(!1),D=(0,B.KR)([]),T=(0,B.KR)({}),P=(0,B.KR)(""),E=(0,B.KR)({}),b=(0,B.KR)(null),C=(0,B.KR)([]),M=(0,B.KR)(null),F=(0,B.KR)(null),w=(0,B.KR)(null),A=(0,B.KR)(null),R=(0,B.KR)(null),L=(0,B.KR)(null),_=(0,B.KR)({}),I=(0,B.KR)(!1),x=(0,B.KR)([]),K=(0,B.KR)(null),X=(0,B.KR)(!1),N=(0,B.KR)([(0,ue.A)(new Date,1),(0,ue.A)(new Date,2),(0,ue.A)(new Date,7)]);return{isProviderCalendar:e,testii:i,weekDay:t,timerange:o,datee:r,range:n,isRangeSelected:a,isEditRange:l,isEditPrice:d,isFeedback:u,isEditProfession:c,clearTime:h,dateTest:m,markers:g,contents:p,isContents:k,markedDays:f,time:v,isConfirmTime:y,times:D,datetime:T,userId:P,provider:E,creditLeft:b,providerTimes:C,errorMessage:M,timeEditSuccessMessage:w,timeEditErrorMessage:A,rangeErrorMessage:R,oblicationInfoMessage:L,successMessage:F,editTime:_,isTimeToEdit:I,editArr:x,timeToEdit:K,watchEffect:s.nT,highlightedDates:N,isDisplayConfirmed:X}},mounted(){this.userIsProvider&&(this.portfolioContent=this.userIsProvider.description)},beforeMount(){const e=window.localStorage.getItem("loggedAppUser");if(e){this.portfolioContent=this.proDescription;const i=JSON.parse(e);this.userId=i.id,this.providerData()}else this.$router.push("/")},watch:{proDescription(e){this.des=e}},methods:{async getDescriptionContent(){console.log("Changes?? "+this.des),console.log("Changes 2 ?? "+this.des);const e=this.des;await w.A.editPortfolio(this.userIsProvider.id,{description:this.des}),this.$emit("editPortfolio",this.des),this.des=e,this.isEditPortfolio=!1},openTask(e){this.dayPanelIndex=e,this.isHandleTask=!0,this.isDisplayConfirmed=!0,console.log("Index in open - "+e)},closeTask(e){this.dayPanelIndex=null,this.isHandletask=!1,this.isDisplayConfirmed=!1,console.log("Index in close - "+e)},closeDayPanel(){this.isTimeToEdit=!1,this.isEditTime=!1,this.isDisplayConfirmed=!1,this.dayPanelIndex=null},goToMap(){this.$router.push("/provider-public")},getDate(){const e=(new Date).getTime(),i=(new Date).getTime()+6048e5,t=864e5;console.log("and now "+e),console.log("week_ms added  is: "+i);const s=(i-e)/t;console.log("Days between - "+s)},saveNewRange(){const e=parseInt(this.range);e>0?this.range.includes(",")?(this.range="",this.rangeErrorMessage="Pilkku (,) ei ole sallittu merkki, laita piste (.)!",setTimeout((()=>{this.rangeErrorMessage=null}),3e3)):(this.isEditRange=!1,w.A.editRange(this.provider.id,{range:this.range}),this.provider.range=this.range):(this.range="",this.rangeErrorMessage="Säde tulee olla positiivinen numero!",setTimeout((()=>{this.rangeErrorMessage=null}),3e3))},getIt(){let e="aaa",i="room";de.A.auth={username:e,room:i},de.A.connect();let t="Oopersama";de.A.emit("updateRoom",t)},joinAllRooms(){const e=["111","222"];de.A.emit("joinAllClientRooms",e)},handleRemoveProConfirmed(e){console.log("Info closed here?? "+e.header),this.$emit("removeProBookingConfirmed",e),this.confirmedBookings=this.confirmedBookings.filter((i=>i.id!==e.id)),this.successMessage="Siit saab kustutada selle teavituse soovi korral!",setTimeout((()=>{this.successMessage=null}),3e3)},socketResetTest(){de.A.disconnect(),de.A.connect()},openChatPanel(e){e.preventDefault(),console.log("Will chat open...");const i=localStorage.getItem("sessionID");i&&(this.usernameAlreadySelected=!0,de.A.auth={sessionID:i},de.A.connect()),de.A.on("session",(({sessionID:e,userID:i,roomName:t})=>{de.A.auth={sessionID:e},localStorage.setItem("sessionID",e),de.A.userID=i,de.A.roomName=t}))},createOrdered(e){},handleInternal(e){this.editArr=[];let i=[];if(this.dayMarkerData=[],this.editTime={},this.isTimeToEdit=!1,e){console.log("DATE"+e[0].getDate()),this.activeDate=e[0].getDate(),this.dateForTimeEdit=e,console.log("get date "+this.activeDate);let t=e.toString().substring(8,10),s=parseInt(t);this.weekDay=e.toString().substring(0,3);let o={};console.log("length xxxxxxxx "+this.markers.length),this.filled_days.forEach((e=>{s===e.day?(console.log("On"),this.isTimeToEdit=!0,i.push({type:"highlight",day:s,weekDay:this.weekDay,hours:e.hours,minutes:e.minutes,booking:this.bookingsConfirmed.filter((e=>e.onTime[0].day===s))})):console.log("Ei ole")}));let r=!1;const n=[];this.markers.forEach((e=>{e.date.getDate()===s&&(r=!0,this.isTimeToEdit=!0,o={type:"marker",day:s,weekDay:this.weekDay,time:e.content},n.push(e.content),this.editArr.push(o))})),r&&(this.dayMarkerData=this.dayMarkerData.concat({type:"marker",day:s,weekday:this.weekDay,time:n})),this.times=[],this.providerTimes&&this.providerTimes.forEach((e=>{this.initializeTime(e)})),this.editArr=this.editArr.concat(i),this.dayMarkerData=this.dayMarkerData.concat(i)}},onTimePickerOpen(e){console.log("Timepicker open! ")},onTimePickerClose(){console.log("Timepicker is closed!")},onOverlayToggle(e){console.log(`Overlay ${e.overlay} is ${e.open?"opened":"closed"}`)},editPrice(){this.isEditPrice=!0},async saveEditedPrice(e){const i={priceByHour:e},t=await w.A.updateProvider(this.provider.id,i);t&&(this.provider.priceByHour=e,console.log("Price: "+this.provider.priceByHour),this.isEditPrice=!1,this.successMessage="Tuntihinta on muokattu!",setTimeout((()=>{this.successMessage=null}),2e3))},cancelEditPrice(e){this.isEditPrice=e},getFeedbackListData(){this.isFeedback=!0},handleCloseFeedbackList(){this.isFeedback=!1},editProfessionPro(){this.isEditProfession=!0},handleEditProfession(e,i){console.log("Profession is "+i+" and index "+e),this.provider.profession[0]=i,w.A.editProfession(this.provider.id,{index:e,pro:i})},handleAddProfession(e){console.log("Uus amet on "+e),w.A.additionalProfession(this.provider.id,{profession:e}),this.provider.profession.includes(e)||this.provider.profession.push(e)},handleRemoveProfession(e,i){console.log("Profession index is "+e+" and profession is "+i),w.A.removeProfession(this.provider.id,{profession:i}),this.provider.profession.splice(e,1)},handleCancelEditProfession(){this.isEditProfession=!1},async editTimeTest(){const e={hoursFrom:1};await ce.A.updateOffer("6431407f53469b1f48eeb2f0",e)},updateTimesAndMarkers(){this.providerTimes.forEach((e=>{console.log("Provider times: "+e.hoursFrom),this.setTimeMarkers(e)})),this.providerTimes.forEach((e=>{this.initializeTime(e)}))},async delTimeRange(e,i){await ce.A.removeTimeOffer(this.provider.id,e),console.log("Id argumendina? "+e),this.times.splice(i,1),this.providerTimes=this.providerTimes.filter((i=>i.id!==e)),this.markers=this.markers.filter((i=>i.content.timeId!==e)),console.log("MARKERS LEN "+this.markers.length),this.dayMarkerData=this.dayMarkerData.filter((e=>"marker"===e.type)),this.dayMarkerData.length>1?this.dayMarkerData=this.dayMarkerData.filter((i=>i.time.some((i=>i.timeId!==e)))):(console.log("Something else!!"),this.dayMarkerData[0].time=this.dayMarkerData[0].time.filter((i=>i.timeId!==e))),0===this.dayMarkerData[0].time.length&&(this.isTimeToEdit=!1)},onClose(){console.log("On close...")},async handleDate(){console.log("Date handled!");const e={yearFrom:this.date[0].getFullYear(),monthFrom:this.date[0].getMonth(),dayFrom:this.date[0].getDate(),hoursFrom:this.date[0].getHours(),minutesFrom:this.date[0].getMinutes(),yearTo:this.date[1].getFullYear(),monthTo:this.date[1].getMonth(),dayTo:this.date[1].getDate(),hoursTo:this.date[1].getHours(),minutesTo:this.date[1].getMinutes()},i=await ce.A.addAdditionalOffer(this.provider.id,e);console.log("Provider times "+this.providerTimes),this.providerTimes=this.providerTimes.concat(i),this.times=[],this.markers=[],this.providerTimes.forEach(((e,i)=>{this.setTimeMarkers(e,i),this.initializeTime(e)}));let t=[],s={};this.editArr=[],this.dayMarkerData=[],console.log("------------- PT -------- "+this.providerTimes.length),console.log("------------- ML --------- "+this.markers.length),this.filled_days.forEach((e=>{this.date[0].getDate()===e.day?(console.log("On"),this.isTimeToEdit=!0,t.push({type:"highlight",day:this.date[0].getDate(),weekDay:this.weekDay,hours:e.hours,minutes:e.minutes,booking:this.bookingsConfirmed.filter((e=>e.onTime[0].day===this.date[0].getDate()))})):console.log("Ei ole")}));const o=[];this.markers.forEach((e=>{e.date.getDate()===i.dayFrom&&(this.isTimeToEdit=!0,s={day:i.dayFrom,weekDay:this.weekDay,time:e.content},o.push(e.content))})),this.dayMarkerData=this.dayMarkerData.concat({type:"marker",day:i.dayFrom,weekday:this.weekDay,time:o}),this.dayMarkerData=this.dayMarkerData.concat(t)},async confirmEditedTime(e){let i;console.log("Confirmed??? "+e+" hours edited: "+this.t);const t=this.timeToEdit;if(t){i={hoursFrom:t[0].hours,minutesFrom:t[0].minutes,hoursTo:t[1].hours,minutesTo:t[1].minutes};const s=await ce.A.updateOffer(e,i);console.log("Offer edited: "+s),this.timeEditSuccessMessage="Aika muokattu onnistuneesti!",this.isEditTime=!1,setTimeout((()=>{this.timeEditSuccessMessage=null}),2e3),this.isTimeToEdit=!1}else this.timeEditErrorMessage="Ensin on vaihdettava kellonaika!",setTimeout((()=>{this.timeEditErrorMessage=null}),2e3);this.timeToEdit=null},onEdit(e,i){console.log("Editing time id "+e),console.log("Index on "+i),this.editMarkedTimeID=e,this.editMarketIndex=i,this.isEditTime=!0},async handleTime(e){this.xxx=e,console.log("Time is handled "+e[0].hours+" "+e[1].hours),console.log("ID NOW HERE"+this.editMarkedTimeID);const i={hoursFrom:e[0].hours,minutesFrom:e[0].minutes,hoursTo:e[1].hours,minutesTo:e[1].minutes};this.times[this.editMarketIndex]=[{hours:e[0].hours,minutes:e[0].minutes},{hours:e[1].hours,minutes:e[1].minutes}];const t=await ce.A.updateOffer(this.editMarkedTimeID,i);console.log("Offer edited: "+t),this.timeEditSuccessMessage="Aika muokattu onnistuneesti!",setTimeout((()=>{this.timeEditSuccessMessage=null}),2e3),this.isTimeToEdit=!1,this.providerTimes=this.providerTimes.filter((e=>e.id!==this.editMarkedTimeID?e:t));const s=e[0].hours>=10?e[0].hours:"0"+e[0].hours,o=e[1].hours>=10?e[1].hours:"0"+e[1].hours,r=e[0].minutes>=10?e[0].minutes:"0"+e[0].minutes,n=e[1].minutes>=10?e[1].minutes:"0"+e[1].minutes;let a=s+" : "+r+" - "+o+" : "+n;this.markers.map((e=>e.content.timeId===this.editMarkedTimeID?e.content.text=a:e)),this.isEditTime=!1,this.timeToEdit=e},setMarkedDay(e){const i=e-(new Date).getDate();this.markedDays.push(e),console.log("Day to set_ "+i)},cancelTime(){console.log("Time cancelled!")},async addAvailableDate(){const e={yearFrom:this.date[0].getFullYear(),monthFrom:this.date[0].getMonth(),dayFrom:this.date[0].getDate(),hoursFrom:this.date[0].getHours(),minutesFrom:this.date[0].getMinutes(),yearTo:this.date[1].getFullYear(),monthTo:this.date[1].getMonth(),dayTo:this.date[1].getDate(),hoursTo:this.date[1].getHours(),minutesTo:this.date[1].getMinutes()},i=await ce.A.addAdditionalOffer(this.provider.id,e);console.log("Saved? "+i)},async setTimeMarkers(e,i){console.log("KERTA "+e.id);let t=null;this.contents=[],t=e.monthFrom===(new Date).getMonth()?(0,ue.A)(new Date,e.dayFrom-(new Date).getDate()):(0,ue.A)(new Date(e.yearFrom,e.monthFrom,0),e.dayFrom),console.log("MAKKED DAY "+t.getDate()),console.log("Test markers: "+new Date(e.yearFrom,e.monthFrom,e.dayFrom,e.hoursFrom,e.minutesFrom));const s=new Date(e.yearFrom,e.monthFrom,e.dayFrom,e.hoursFrom,e.minutesFrom),o=new Date(e.yearTo,e.monthTo,e.dayTo,e.hoursTo,e.minutesTo),r=e.hoursFrom>=10?e.hoursFrom:"0"+e.hoursFrom,n=e.hoursTo>=10?e.hoursTo:"0"+e.hoursTo,a=e.minutesFrom>=10?e.minutesFrom:"0"+e.minutesFrom,l=e.minutesTo>=10?e.minutesTo:"0"+e.minutesTo;let d=r+" : "+a+" - "+n+" : "+l,u={text:d,index:i,timeId:e.id,date:s,color:"red"};this.contents.push({text:d,index:i,timeId:e.id,color:"red"});e.id;console.log("Marker added "+e.id),this.markers&&(o>=new Date?this.markers=this.markers.concat({dFrom:e.dayFrom,date:t,type:"line",color:"orange",content:u}):await ce.A.removeTimeOffer(this.provider.id,e.id)),console.log("Time pikkus "+this.times.length),this.times.forEach(((e,i)=>{}))},async providerData(){const e=await w.A.getProvider(this.userId);e&&(this.provider=e,this.creditLeft=((e.proTime-(new Date).getTime())/864e5).toFixed()<0?0:((e.proTime-(new Date).getTime())/864e5).toFixed(),this.providerTimes=e.timeoffer,e.isAvailable24_7||(this.isProviderCalendar=!0),this.rooms=e.room),this.times=[],this.providerTimes&&(this.providerTimes.forEach((e=>{this.initializeTime(e)})),this.providerTimes.forEach(((e,i)=>{this.setTimeMarkers(e,i)}))),console.log("Provider times pikkus "+this.providerTimes.length),console.log("Markerite pikkus "+this.markers.length)},createFilledTimes(){let e={};this.filled_days.forEach((i=>{e={day:i.day,time:i}}))},initializeTime(e){let i=[];const t=new Date(e.yearFrom,e.monthFrom,e.dayFrom,e.hoursFrom,e.minutesFrom);i.push({day:e.dayFrom,hours:e.hoursFrom,minutes:e.minutesFrom},{day:e.dayTo,hours:e.hoursTo,minutes:e.minutesTo}),t>=new Date&&this.times.push(i)},test(e){console.log("What ever: "+e)}}};const ke=(0,K.A)(pe,[["render",M]]);var fe=ke},4482:function(e,i,t){var s=t(6768);const o=({message:e})=>null===e?null:(0,s.bF)("div",{className:"error"},[e,(0,s.bF)("img",{className:"errorImg",alt:"error",src:t(1644)},null)]);i.A=o},7630:function(e,i,t){t.d(i,{A:function(){return m}});var s=t(6768),o=t(4232);const r={class:"pro-panel-feedback"},n={key:0},a={style:{"margin-bottom":"10px"}},l={key:1};function d(e,i,t,d,u,c){return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("p",{style:{"text-align":"right",cursor:"pointer",color:"orangered"},onClick:i[0]||(i[0]=i=>e.$emit("closeFeedbackList"))},"Poistu"),t.feedback.length>0?((0,s.uX)(),(0,s.CE)("div",n,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.feedback,(e=>((0,s.uX)(),(0,s.CE)("div",{style:{"text-align":"left"},key:e.id},[(0,s.Lk)("p",a,(0,o.v_)(e.neg?e.neg:e.pos),1)])))),128))])):((0,s.uX)(),(0,s.CE)("div",l,i[1]||(i[1]=[(0,s.Lk)("p",null,"Ei arvostelua vielä!",-1)])))])}var u={name:"FeedbackList",props:{feedback:Array}},c=t(1241);const h=(0,c.A)(u,[["render",d]]);var m=h}}]);
//# sourceMappingURL=351.98048c4d.js.map