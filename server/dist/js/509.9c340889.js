"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[509],{4482:function(e,s,n){var t=n(6768);const a=({message:e})=>null===e?null:(0,t.bF)("div",{className:"error"},[e,(0,t.bF)("img",{className:"errorImg",alt:"error",src:n(1644)},null)]);s.A=a},4248:function(e,s,n){const t=n(6425),a="/api/reset_pw",o=async e=>{const s=await t.post(`${a}/forgot_auth`,e);return s.data},r=async e=>{const s=await t.get(`${a}/reset_auth/${e}`);return s.data},l=async e=>{const s=await t.post(`${a}/reset_auth`,e);return s.data};s.A={forgot:o,reset:r,resetAuth:l}},4509:function(e,s,n){n.r(s),n.d(s,{default:function(){return p}});var t=n(6768),a=n(5130);function o(e,s,n,o,r,l){const u=(0,t.g2)("MDBBtn"),i=(0,t.g2)("MDBInput"),c=(0,t.g2)("success-message"),m=(0,t.g2)("error-message"),h=(0,t.g2)("MDBContainer");return(0,t.uX)(),(0,t.Wv)(h,null,{default:(0,t.k6)((()=>[r.isToken?((0,t.uX)(),(0,t.CE)("form",{key:1,style:{"margin-top":"100px"},onSubmit:s[2]||(s[2]=(0,a.D$)(((...e)=>l.handleSubmitReset&&l.handleSubmitReset(...e)),["prevent"]))},[(0,t.bF)(i,{type:"password",size:"lg",label:"Uusi salasana",white:"",modelValue:r.newPw,"onUpdate:modelValue":s[0]||(s[0]=e=>r.newPw=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.bF)(i,{type:"password",size:"lg",label:"Toista salasana",white:"",modelValue:r.confirmNewPw,"onUpdate:modelValue":s[1]||(s[1]=e=>r.confirmNewPw=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.bF)(u,{block:"",type:"submit",outline:"success"},{default:(0,t.k6)((()=>s[4]||(s[4]=[(0,t.eW)("Varmista uusi salasana")]))),_:1})],32)):((0,t.uX)(),(0,t.Wv)(u,{key:0,block:"",outline:"warning",onClick:l.handleOpenForm},{default:(0,t.k6)((()=>s[3]||(s[3]=[(0,t.eW)("Aloita salasanan vaihtamista")]))),_:1},8,["onClick"])),(0,t.bF)(c,{message:r.successInfo},null,8,["message"]),(0,t.bF)(m,{message:r.errorInfo},null,8,["message"])])),_:1})}n(4114);var r=n(4248),l=n(7337),u=n(4482),i=n(5846),c={name:"Reset",components:{successMessage:l.A,errorMessage:u.A,MDBContainer:i.Dj,MDBInput:i.gk,MDBBtn:i.al},data(){return{newPw:"",confirmNewPw:"",isToken:!1,token:this.$route.params.token,successInfo:null,errorInfo:null}},methods:{async handleOpenForm(){const e=await r.A.reset(this.token);"valid"===e?(console.log("Token "+e),this.isToken=!0):(console.log("Token "+e),this.errorInfo=e,setTimeout((()=>{this.errorInfo=null,this.$router.push("/forgot_auth")}),3e3))},async handleSubmitReset(){if(this.newPw!==this.confirmNewPw)this.errorInfo="Salasana on oltava sama!",setTimeout((()=>{this.errorInfo=null}),3e3);else{const e=await r.A.resetAuth({token:this.token,password:this.newPw});console.log("Auth--- "+e),e&&(this.successInfo="Salasanan luonti onnistui!",setTimeout((()=>{this.successInfo=null,this.$router.push("/login")}),3e3))}}}},m=n(1241);const h=(0,m.A)(c,[["render",o],["__scopeId","data-v-946dca7c"]]);var p=h},1644:function(e,s,n){e.exports=n.p+"img/error.9510853e.png"}}]);
//# sourceMappingURL=509.9c340889.js.map