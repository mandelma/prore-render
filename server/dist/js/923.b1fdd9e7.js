"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[923],{5118:function(e,s,n){var t=n(3396);const o=({message:e})=>null===e?null:(0,t.Wm)("div",{className:"error"},[e]);s.Z=o},5081:function(e,s,n){const t=n(7218),o="/api/reset_pw",a=async e=>{const s=await t.post(`${o}/forgot_auth`,e);return s.data},r=async e=>{const s=await t.get(`${o}/reset_auth/${e}`);return s.data},l=async e=>{const s=await t.post(`${o}/reset_auth`,e);return s.data};s.Z={forgot:a,reset:r,resetAuth:l}},3250:function(e,s,n){n.r(s),n.d(s,{default:function(){return v}});var t=n(3396),o=n(9242),a=n(7139);const r=e=>((0,t.dD)("data-v-4c93314f"),e=e(),(0,t.Cn)(),e),l=r((()=>(0,t._)("h3",null," Reset password",-1))),u={class:"form-group"},i=r((()=>(0,t._)("label",null,"Uusi salasana",-1))),c={class:"form-group"},p=r((()=>(0,t._)("label",null,"Toista salasana",-1))),m=r((()=>(0,t._)("button",{type:"submit",class:"btn btn-primary btn-block"},"Submit",-1))),w={style:{color:"white"}};function h(e,s,n,r,h,d){const f=(0,t.up)("MDBBtn"),g=(0,t.up)("success-message"),k=(0,t.up)("error-message"),_=(0,t.up)("MDBContainer");return(0,t.wg)(),(0,t.j4)(_,null,{default:(0,t.w5)((()=>[h.isToken?((0,t.wg)(),(0,t.iD)("form",{key:1,style:{"margin-top":"100px"},onSubmit:s[2]||(s[2]=(0,o.iM)(((...e)=>d.handleSubmitReset&&d.handleSubmitReset(...e)),["prevent"]))},[l,(0,t._)("div",u,[i,(0,t.wy)((0,t._)("input",{type:"password",class:"form-control",placeholder:"Uusi salasana","onUpdate:modelValue":s[0]||(s[0]=e=>h.newPw=e)},null,512),[[o.nr,h.newPw]])]),(0,t._)("div",c,[p,(0,t.wy)((0,t._)("input",{type:"password",class:"form-control",placeholder:"Toista salasana","onUpdate:modelValue":s[1]||(s[1]=e=>h.confirmNewPw=e)},null,512),[[o.nr,h.confirmNewPw]]),m])],32)):((0,t.wg)(),(0,t.j4)(f,{key:0,block:"",outline:"warning",onClick:d.handleOpenForm},{default:(0,t.w5)((()=>[(0,t.Uk)("Vaihtaa salasana")])),_:1},8,["onClick"])),(0,t.Wm)(g,{message:h.successInfo},null,8,["message"]),(0,t.Wm)(k,{message:h.errorInfo},null,8,["message"]),(0,t._)("p",w,"Token "+(0,a.zw)(h.token),1)])),_:1})}n(7658);var d=n(5081),f=n(8033),g=n(5118),k=n(4313),_={name:"Reset",components:{successMessage:f.Z,errorMessage:g.Z,MDBContainer:k.L5,MDBBtn:k.$v},data(){return{newPw:"",confirmNewPw:"",isToken:!1,token:this.$route.params.token,successInfo:null,errorInfo:null}},methods:{async handleOpenForm(){const e=await d.Z.reset(this.token);"valid"===e?(console.log("Token "+e),this.isToken=!0):(console.log("Token "+e),this.errorInfo=e,setTimeout((()=>{this.errorInfo=null,this.$router.push("/forgot_auth")}),3e3))},async handleSubmitReset(){const e=await d.Z.resetAuth({token:this.token,password:this.newPw});console.log("Auth--- "+e),e&&(this.successInfo="Salasanan luonti onnistui!",setTimeout((()=>{this.successInfo=null,this.$router.push("/login")}),3e3))}}},b=n(89);const y=(0,b.Z)(_,[["render",h],["__scopeId","data-v-4c93314f"]]);var v=y}}]);
//# sourceMappingURL=923.b1fdd9e7.js.map