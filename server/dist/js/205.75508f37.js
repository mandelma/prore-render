"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[205],{5118:function(e,s,r){var t=r(3396);const a=({message:e})=>null===e?null:(0,t.Wm)("div",{className:"error"},[e,(0,t.Wm)("img",{className:"errorImg",alt:"error",src:r(5551)},null)]);s.Z=a},7205:function(e,s,r){r.r(s),r.d(s,{default:function(){return W}});var t=r(3396),a=r(9242);const i=e=>((0,t.dD)("data-v-194f6d09"),e=e(),(0,t.Cn)(),e),l=i((()=>(0,t._)("h2",{style:{"margin-top":"50px","text-align":"center"}},"- Rekisteröintilomake -",-1))),o={class:"text-center"},n=i((()=>(0,t._)("p",null,"Tai registeröidy käyttämällä:",-1))),m=i((()=>(0,t._)("button",null,"Login Using Google",-1)));function g(e,s,r,i,g,u){const d=(0,t.up)("registerError"),c=(0,t.up)("register-error"),p=(0,t.up)("MDBInput"),h=(0,t.up)("MDBCheckbox"),w=(0,t.up)("MDBBtn"),b=(0,t.up)("MDBIcon"),E=(0,t.up)("GoogleLogin"),k=(0,t.up)("MDBContainer");return(0,t.wg)(),(0,t.iD)("div",null,[l,(0,t.Wm)(k,{style:{"margin-top":"50px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{message:g.registerErrorMessage},null,8,["message"]),(0,t.Wm)(d,{message:g.usernameExisting},null,8,["message"]),(0,t.Wm)(d,{message:g.registerEmailErrorMessage},null,8,["message"]),(0,t.Wm)(c,{message:g.registerPwRepeatErrorMessage},null,8,["message"]),(0,t._)("form",{onSubmit:s[7]||(s[7]=(0,a.iM)(((...e)=>u.userData&&u.userData(...e)),["prevent"]))},[(0,t.Wm)(p,{type:"text",size:"lg",label:"Etunimi",white:"",id:"registerFirstName",modelValue:i.registerFirstName,"onUpdate:modelValue":s[0]||(s[0]=e=>i.registerFirstName=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(p,{type:"text",size:"lg",label:"Sukunimi",white:"",id:"registerLastName",modelValue:i.registerLastName,"onUpdate:modelValue":s[1]||(s[1]=e=>i.registerLastName=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(p,{type:"text",size:"lg",label:"käyttäjätunnus",white:"",id:"registerUsername",modelValue:i.registerUsername,"onUpdate:modelValue":s[2]||(s[2]=e=>i.registerUsername=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(p,{type:"text",size:"lg",label:"Email",white:"",id:"registerEmail",modelValue:i.registerEmail,"onUpdate:modelValue":s[3]||(s[3]=e=>i.registerEmail=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(p,{type:"password",size:"lg",label:"Salasana",white:"",id:"registerPassword",modelValue:i.registerPassword,"onUpdate:modelValue":s[4]||(s[4]=e=>i.registerPassword=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(p,{type:"password",size:"lg",label:"Toista salasana",white:"",id:"registerPasswordRepeat",modelValue:i.registerPasswordRepeat,"onUpdate:modelValue":s[5]||(s[5]=e=>i.registerPasswordRepeat=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(h,{label:"Muista minut",white:"",size:"lg",id:"registerSubscribeCheck",modelValue:i.registerSubscribeCheck,"onUpdate:modelValue":s[6]||(s[6]=e=>i.registerSubscribeCheck=e),wrapperClass:"d-flex justify-content-center mb-4"},null,8,["modelValue"]),(0,t.Wm)(w,{outline:"primary",size:"lg",type:"submit",block:"",class:"mb-4"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Luo tili ")])),_:1}),(0,t._)("div",o,[n,(0,t.Wm)(w,{color:"secondary",floating:"",class:"mx-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{iconStyle:"fab",icon:"facebook-f"}),(0,t.Uk)("> ")])),_:1}),(0,t.Wm)(w,{color:"secondary",floating:"",class:"mx-1",onClick:u.handleGoogleAuth},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{iconStyle:"fab",icon:"google"})])),_:1},8,["onClick"]),(0,t.Wm)(w,{color:"secondary",floating:"",class:"mx-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{iconStyle:"fab",icon:"twitter"})])),_:1}),(0,t.Wm)(E,{callback:u.callback},{default:(0,t.w5)((()=>[m])),_:1},8,["callback"])])],32)])),_:1})])}var u=r(4313),d=r(4870),c=r(1478);const p=r(7218),h="/auth/google",w=async()=>{const e=await p.get(h);return e.data};var b={getAll:w},E=r(6823),k=r(5118),f=r(6070),M={name:"app-register",components:{registerError:k.Z,MDBContainer:u.L5,MDBInput:u.u2,MDBCheckbox:u.IH,MDBBtn:u.$v,MDBIcon:u.vm},data(){return{registerErrorMessage:null,registerEmailErrorMessage:null,registerPwRepeatErrorMessage:null,usernameExisting:null}},setup(){const e=(0,d.iH)(""),s=(0,d.iH)(""),r=(0,d.iH)(""),t=(0,d.iH)(""),a=(0,d.iH)(""),i=(0,d.iH)(""),l=(0,d.iH)(!0),o=()=>{(0,f.N3)().then((e=>{console.log("Handle the response",e)}))},n=e=>{console.log("Handle the response",e)};return{registerLastName:s,registerFirstName:e,registerUsername:r,registerEmail:t,registerPassword:a,registerPasswordRepeat:i,registerSubscribeCheck:l,login:o,callback:n}},computed:{isValidEmail(){return/^[^@]+@\w+(\.\w+)+\w$/.test(this.registerEmail)}},methods:{callback(e){console.log("Handle the response",e)},async handleGoogleAuth(){console.log("Google"),await b.getAll()},emailValidation(){},validateEmail(){/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.email)?this.msg["email"]="Please enter a valid email address":this.msg["email"]=""},async userData(){const e={firstName:this.registerFirstName,lastName:this.registerLastName,username:this.registerUsername,email:this.registerEmail,password:this.registerPassword};if(""!==this.registerFirstName&&""!==this.registerLastName&&""!==this.registerUsername&&""!==this.registerPassword&&""!==this.registerEmail)if(this.registerUsername.length<4)this.registerErrorMessage="Username must be longer than 4 characters!",setTimeout((()=>{this.registerErrorMessage=null}),2e3);else if(/^[^@]+@\w+(\.\w+)+\w$/.test(this.registerEmail))if(this.registerPassword!==this.registerPasswordRepeat)this.registerPwRepeatErrorMessage="Salasana on oltava sama!",setTimeout((()=>{this.registerPwRepeatErrorMessage=null}),2e3);else{console.log("Uus kasutaja");const s=await c.Z.addUser(e);if("Käyttäjätunnus on jo olemassa!"===s.error)this.usernameExisting="Käyttäjätunnus on jo olemassa! Vaihda käyttäjätunnus",setTimeout((()=>{this.usernameExisting=null}),2e3);else if("Sähköposti on jo olemassa!"===s.error)this.registerEmailErrorMessage="Antamasi sähköpostiosoite on jo olemassa!",setTimeout((()=>{this.registerEmailErrorMessage=null}),2e3);else{const e=await E.Z.login({username:this.registerUsername,password:this.registerPassword});"login error"!==e.error&&this.$emit("register:data",e)}}else this.registerEmailErrorMessage="Anna kelvollinen sähköpostiosoite!",setTimeout((()=>{this.registerEmailErrorMessage=null}),2e3);else this.registerErrorMessage="Kaikki kentät on täytettävä!!",setTimeout((()=>{this.registerErrorMessage=null}),2e3)}}},y=r(89);const V=(0,y.Z)(M,[["render",g],["__scopeId","data-v-194f6d09"]]);var W=V},5551:function(e,s,r){e.exports=r.p+"img/error.9510853e.png"}}]);
//# sourceMappingURL=205.75508f37.js.map