(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[90],{4729:function(e){e.exports={}},5118:function(e,s,t){"use strict";var o=t(3396);const a=({message:e})=>null===e?null:(0,o.Wm)("div",{className:"error"},[e]);s.Z=a},3998:function(e,s){"use strict";const t=[{label:"Hitsaaja",value:"1"},{label:"Putkimies",value:"2"},{label:"Sähkömies",value:"3"}],o=[{label:"Siivooja",value:"4"}],a=[{group:"Rakennus",options:t},{group:"Kiinteistöala",options:o}];s.Z=a},3090:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return H}});t(7658);var o=t(3396),a=t(7139),l=t(9242);const n=(0,o._)("h2",{style:{"margin-top":"200px","margin-bottom":"50px"}},"-TMI panel-",-1),i={class:"ui large form"},r=(0,o._)("option",{value:""},"Valitse oma ammattisi",-1),u=["label"],d=["value"],m=["value"],p={style:{margin:"20px 0 20px 0"}};function g(e,s,t,g,c,y){const h=(0,o.up)("ErrorNotification"),b=(0,o.up)("MDBInput"),v=(0,o.up)("MDBCheckbox"),f=(0,o.up)("MDBBtn"),_=(0,o.up)("MDBContainer");return(0,o.wg)(),(0,o.iD)("div",null,[n,(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,{message:c.errorFormMessage},null,8,["message"]),(0,o._)("form",null,[(0,o.Wm)(b,{label:"Anna yrityksen nimi",modelValue:g.yritys,"onUpdate:modelValue":s[0]||(s[0]=e=>g.yritys=e),id:"yritys",size:"lg",wrapperClass:"mb-4"},null,8,["modelValue"]),(0,o.Wm)(b,{label:"Anna yrityksen y-tunnus",modelValue:g.ytunnus,"onUpdate:modelValue":s[1]||(s[1]=e=>g.ytunnus=e),id:"ytunnus",size:"lg",wrapperClass:"mb-4"},null,8,["modelValue"]),(0,o.Wm)(b,{label:"Anna osoitteesi",id:"osoite",size:"lg",wrapperClass:"mb-4"}),(0,o.Wm)(b,{wrapperClass:"mb-4",label:"Anna toiminta-alueen säde - km",size:"lg",type:"number"}),(0,o.Wm)(b,{label:"Anna tuntihinta",modelValue:g.price,"onUpdate:modelValue":s[2]||(s[2]=e=>g.price=e),id:"hinta",size:"lg",wrapperClass:"mb-4"},null,8,["modelValue"]),(0,o._)("div",i,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>c.profession=e)},[r,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.prodata,(e=>((0,o.wg)(),(0,o.iD)(o.HY,null,[e.group?((0,o.wg)(),(0,o.iD)("optgroup",{label:e.group,key:e.group},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.label,key:e.label},(0,a.zw)(e.label),9,d)))),128))],8,u)):((0,o.wg)(),(0,o.iD)("option",{value:e,key:e.value},(0,a.zw)(e.label),9,m))],64)))),256))],512),[[l.bM,c.profession]])]),(0,o._)("div",p,[(0,o.Wm)(v,{label:"Saatavilla 24/7",modelValue:g.isAvailable24_7,"onUpdate:modelValue":s[4]||(s[4]=e=>g.isAvailable24_7=e)},null,8,["modelValue"])])]),(0,o.Wm)(f,{outline:"success",size:"lg",block:"",onClick:y.addProvider},{default:(0,o.w5)((()=>[(0,o.Uk)("Add provider profile")])),_:1},8,["onClick"]),(0,o.Wm)(f,{outline:"danger",size:"lg",block:"",onClick:s[5]||(s[5]=e=>this.$router.push("/")),style:{"margin-bottom":"50px"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Poistu ")])),_:1})])),_:1})])}var c=t(4870),y=t(3998),h=t(5118),b=t(4313),v=t(4161);const f=t(7218),_="/api/map",k=async()=>{const e=await f.get(_);return e.data};var w={getLocation:k},M=t(9398);const A=t(4729),D=t(4729);var V={name:"provider-form",data(){return{result:"",errorFormMessage:null,latitude:0,longitude:0,address:"",profession:"",userId:"",prodata:y.Z}},setup(){const e=(0,c.iH)(""),s=(0,c.iH)(""),t=(0,c.iH)(""),o=(0,c.iH)(null),a=(0,c.iH)(!1);return{yritys:e,ytunnus:s,date:t,price:o,isAvailable24_7:a}},components:{MDBContainer:b.L5,MDBBtn:b.$v,MDBInput:b.u2,MDBCheckbox:b.IH,errorNotification:h.Z},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const s=JSON.parse(e);this.userId=s.id,console.log("User id in Provider: "+s.id)}console.log("Google key is: "+D.google);const s={lat:50.064192,lng:-130.605469},t={north:s.lat+.1,south:s.lat-.1,east:s.lng+.1,west:s.lng-.1},o=document.getElementById("osoite"),a={bounds:t,componentRestrictions:{country:"fi"},fields:["address_components","geometry","icon","name","formatted_address"],strictBounds:!1},l=new google.maps.places.Autocomplete(o,a);l.addListener("place_changed",(()=>{let e=l.getPlace();this.latitude=e.geometry.location.lat(),this.longitude=e.geometry.location.lng(),console.log(e),console.log("Latitude: "+e.geometry.location.lat()),console.log("Full address: "+e.formatted_address),this.address=e.formatted_address}))},methods:{canselSession(){this.$emit("cansel:provider","Test")},getAddress(){v.Z.get("https://maps.googleapis.com/maps/api/geocode/json?address=01620+Raikukuja,+Vantaa&key="+A.googleMap).then((e=>{e.data.error_message?(this.error=e.data.error_message,console.log(e.data.error_message)):(this.address=e.data.results[0].formatted_address,console.log(e.data.results[0].formatted_address),console.log(e.data.results[0].address_components[0].long_name),this.result=e.data.results[0].formatted_address)})).catch((e=>{this.error=e.message,this.spinner=!1,console.log(e.message)}))},async addProvider(){const e={yritys:this.yritys,ytunnus:this.ytunnus,address:this.address,latitude:this.latitude,longitude:this.longitude,profession:this.profession,priceByHour:this.price,isAvailable24_7:this.isAvailable24_7},s=await M.Z.addProvider(this.userId,e);console.log("Added provider::: "+s),s?this.$router.push("/provider-panel"):(this.errorFormMessage="Tarkista kentat ja yritä uuddelleen!",setTimeout((()=>{this.errorFormMessage=null}),2e3))},testMonth(){},async getTest(){const e=await w.getLocation();console.log("result "+e)}}},C=t(89);const B=(0,C.Z)(V,[["render",g]]);var H=B}}]);
//# sourceMappingURL=90.3425b8c1.js.map