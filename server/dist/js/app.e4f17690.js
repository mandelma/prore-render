(function(){var e={6765:function(e,t){"use strict";const s=({num:e})=>{let t="";switch(5===e&&(t="Mis siis"),e){case 0:t="Tammikuu";break;case 1:t="Helmikuu";break;case 2:t="Maaliskuu";break;case 3:t="Huhtikuu";break;case 4:t="Toukokuu";break;case 5:t="Kesäkuu";break;case 6:t="Heinäkuu";break;case 7:t="Elokuu";break;case 8:t="Syyskuu";break;case 9:t="Lokakuu";break;case 10:t="Maaliskuu";break;case 11:t="Joulukuu";break}return t};t.A=s},4589:function(e){class t{constructor(e){this.data=e}response(e){return"Tere "+this.data+" "+e}answer(){return"Tere "+this.data}}e.exports={className:t}},6732:function(e,t,s){"use strict";var o=s(6768);const i=({message:e})=>(0,o.bF)("div",{className:"info"},[e]);t.A=i},7337:function(e,t,s){"use strict";var o=s(6768);const i=({message:e})=>null===e?null:(0,o.bF)("div",{className:"success"},[e,(0,o.bF)("img",{className:"successImg",alt:"error",src:s(1727)},null)]);t.A=i},3786:function(e,t,s){"use strict";var o=s(5130),i=(s(4114),s(6768)),n=s(4232);const a=["src"],r=["src"],l={style:{"font-size":"12px",padding:"2px"}},c={key:0},d={key:0,class:"chat-new-message-provider"},u={key:1,class:"chat-new-message-client"},g={key:1,class:"chat-user-is-provider"},h={key:2,class:"chat-user-is-client"},m=["src"],p={style:{"font-size":"12px",padding:"5px"}},f=["src"],k={class:"pill"},v=["src"],y={key:0},b={key:0},w={key:0},B={class:"limit-warning"},C={key:1},A={class:"limit-warning"},I={key:2},x={class:"limit-success"},S={key:1,class:"bookingRejectMessagePanel"},D={class:"bookingRejectMessage"},P={key:2,class:"bookingRejectMessagePanel"},R={class:"bookingRejectMessage"},M={id:"container"},U={class:"box"};function L(e,t,o,L,_,$){const O=(0,i.g2)("MDBNavbarBrand"),E=(0,i.g2)("router-link"),N=(0,i.g2)("MDBNavbarItem"),j=(0,i.g2)("MDBNavbarNav"),F=(0,i.g2)("MDBBadge"),T=(0,i.g2)("MDBDropdownToggle"),W=(0,i.g2)("MDBDropdownItem"),X=(0,i.g2)("MDBDropdownMenu"),H=(0,i.g2)("MDBDropdown"),V=(0,i.g2)("MDBNavbar"),z=(0,i.g2)("Notifications"),Q=(0,i.g2)("success-message"),G=(0,i.g2)("MDBContainer"),K=(0,i.g2)("MDBFooter"),J=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(V,{dark:"",size:"large",position:"top",bg:"dark",container:"","bg-secondary":"","bg-gradient":"","text-white":"",class:"d-flex justify-content-between"},{default:(0,i.k6)((()=>[(0,i.bF)(E,{to:"/",onClick:$.onPressedLogoBtn},{default:(0,i.k6)((()=>[(0,i.bF)(O,null,{default:(0,i.k6)((()=>[(0,i.Lk)("img",{src:s(773),style:{width:"20px"},alt:"home"},null,8,a)])),_:1})])),_:1},8,["onClick"]),void 0===_.loggedUser.token?((0,i.uX)(),(0,i.Wv)(j,{key:0,right:"",class:"mb-2 mb-lg-0 d-flex flex-row"},{default:(0,i.k6)((()=>[(0,i.bF)(N,null,{default:(0,i.k6)((()=>[(0,i.bF)(E,{to:"/login",onClick:t[0]||(t[0]=e=>L.collapse7=!1),style:{color:"greenyellow"}},{default:(0,i.k6)((()=>t[12]||(t[12]=[(0,i.eW)("Kirjaudu")]))),_:1})])),_:1})])),_:1})):((0,i.uX)(),(0,i.Wv)(j,{key:1,right:"",class:"mb-2 mb-lg-0 d-flex flex-row"},{default:(0,i.k6)((()=>[_.chatParticipants.length>0?((0,i.uX)(),(0,i.Wv)(H,{key:0,modelValue:L.dropDownChat,"onUpdate:modelValue":t[2]||(t[2]=e=>L.dropDownChat=e),style:{padding:"3px"},variant:"none"},{default:(0,i.k6)((()=>[(0,i.bF)(T,{tag:"a",class:"nav-link",style:{"padding-top":"15px"},onClick:t[1]||(t[1]=e=>L.dropDownChat=!L.dropDownChat)},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{style:{width:"35px"},src:s(5625),alt:"Chat"},null,8,r),_.newMessageList.length>0?((0,i.uX)(),(0,i.Wv)(F,{key:0,class:"translate-middle p-1",pill:"",notification:"",color:"danger"},{default:(0,i.k6)((()=>[(0,i.Lk)("span",l,(0,n.v_)(_.newMessageList.length),1)])),_:1})):(0,i.Q3)("",!0)])),_:1}),(0,i.bF)(X,{dark:"",style:{padding:"12px"}},{default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(_.chatParticipants,((e,s)=>((0,i.uX)(),(0,i.Wv)(W,{href:"#",key:s},{default:(0,i.k6)((()=>[(0,i.bF)(E,{style:{color:"green"},class:(0,n.C4)({disabled:e.proID===_.user.id&&_.isAccessTerminated}),to:"/chat",onClick:t=>$.updateRoom(e)},{default:(0,i.k6)((()=>[_.newMessageList.some((t=>t.room===e.room))?((0,i.uX)(),(0,i.CE)("div",c,[e.proID===_.user.id?((0,i.uX)(),(0,i.CE)("h4",d,[(0,i.Lk)("b",null,[(0,i.eW)((0,n.v_)(e.pro)+"  ( "+(0,n.v_)(e.name)+" ) ",1),(0,i.bF)(F,{color:"danger",class:"translate-middle p-1",pill:"",notification:""},{default:(0,i.k6)((()=>t[13]||(t[13]=[(0,i.eW)("Uusi viesti!")]))),_:1})])])):((0,i.uX)(),(0,i.CE)("h4",u,[(0,i.Lk)("b",null,[(0,i.eW)((0,n.v_)(e.name)+" ",1),(0,i.bF)(F,{color:"danger",class:"translate-middle p-1",pill:"",notification:""},{default:(0,i.k6)((()=>t[14]||(t[14]=[(0,i.eW)("Uusi viesti!")]))),_:1})])]))])):e.proID===_.user.id?((0,i.uX)(),(0,i.CE)("h4",g,(0,n.v_)(e.pro)+"  ( "+(0,n.v_)(e.name)+" ) ",1)):((0,i.uX)(),(0,i.CE)("h4",h,(0,n.v_)(e.name),1))])),_:2},1032,["class","onClick"])])),_:2},1024)))),128))])])),_:1})])),_:1},8,["modelValue"])):(0,i.Q3)("",!0),_.recipientCompletedBookings.length>0?((0,i.uX)(),(0,i.Wv)(H,{key:1,modelValue:L.dropDownfeedback,"onUpdate:modelValue":t[4]||(t[4]=e=>L.dropDownfeedback=e),style:{padding:"3px","margin-top":"10px"}},{default:(0,i.k6)((()=>[(0,i.bF)(T,{tag:"a",class:"nav-link",style:{padding:"5px","padding-top":"17px"},onClick:t[3]||(t[3]=e=>L.dropDownfeedback=!L.dropDownfeedback)},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{style:{width:"45px"},src:s(9138),alt:"palaute"},null,8,m),(0,i.bF)(F,{class:"translate-middle p-1",pill:"",notification:"",color:"danger"},{default:(0,i.k6)((()=>[(0,i.Lk)("span",p,(0,n.v_)(_.recipientCompletedBookings.length),1)])),_:1})])),_:1}),(0,i.bF)(X,{dark:"",style:{}},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(_.recipientCompletedBookings,((e,t)=>((0,i.uX)(),(0,i.Wv)(W,{href:"#",key:t},{default:(0,i.k6)((()=>[(0,i.bF)(E,{to:"/feedback",onClick:t=>$.handleFeedbackClient(e),style:{"font-size":"17px",color:"#ddd"}},{default:(0,i.k6)((()=>[(0,i.eW)((0,n.v_)(e.date)+" - "+(0,n.v_)(e.header),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])):(0,i.Q3)("",!0),_.providerBookings.length>0?((0,i.uX)(),(0,i.Wv)(N,{key:2,to:"/notification",class:"me-3 me-lg-0",linkClass:"link-secondary",style:{padding:"10px"}},{default:(0,i.k6)((()=>[(0,i.Lk)("span",{class:(0,n.C4)({"gentle-hover-shake":_.isRingBell})},[(0,i.Lk)("img",{style:{width:"30px","margin-top":"5px"},src:s(3744),onClick:t[5]||(t[5]=(...e)=>$.handleNotifications&&$.handleNotifications(...e)),alt:"Notifications"},null,8,f)],2),_.notSeenClientBookings.length>0?((0,i.uX)(),(0,i.Wv)(F,{key:0,notification:"",color:"danger",style:{"margin-top":"10px"},class:"translate-middle p-1",onClick:$.handleNotifications,pill:""},{default:(0,i.k6)((()=>[(0,i.Lk)("span",k,(0,n.v_)(_.notSeenClientBookings.length),1)])),_:1},8,["onClick"])):((0,i.uX)(),(0,i.Wv)(F,{key:1,notification:"",color:"danger",class:"translate-middle p-2",pill:""}))])),_:1})):(0,i.Q3)("",!0),(0,i.bF)(H,{modelValue:L.dropdownUser,"onUpdate:modelValue":t[7]||(t[7]=e=>L.dropdownUser=e),style:{padding:"10px","margin-top":"10px"}},{default:(0,i.k6)((()=>[(0,i.bF)(T,{tag:"a",onClick:t[6]||(t[6]=e=>L.dropdownUser=!L.dropdownUser)},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{style:{width:"35px",height:"35px",border:"solid grey","border-radius":"50%"},src:_.showAvatar?_.showAvatar:s(4310)(`./${_.avatar.name}`),alt:"user_avatar"},null,8,v)])),_:1}),(0,i.bF)(X,{dark:"",style:{padding:"12px","margin-top":"10px"}},{default:(0,i.k6)((()=>[(0,i.bF)(W,{href:"#",class:"x",style:{"border-radius":"0","":"hover: background-color: blue"}},{default:(0,i.k6)((()=>[(0,i.bF)(E,{to:"/language",class:"user"},{default:(0,i.k6)((()=>t[15]||(t[15]=[(0,i.eW)(" Kieliasetukset ")]))),_:1})])),_:1}),(0,i.bF)(W,{href:"#",class:"x",style:{"border-radius":"0","":"hover: background-color: blue"}},{default:(0,i.k6)((()=>[(0,i.bF)(E,{to:"/profile",class:"user",onClick:$.onPressedUserIconChildren},{default:(0,i.k6)((()=>t[16]||(t[16]=[(0,i.eW)(" Omat tiedot ")]))),_:1},8,["onClick"])])),_:1}),_.userIsProvider?((0,i.uX)(),(0,i.Wv)(W,{key:0,href:"#"},{default:(0,i.k6)((()=>[(0,i.bF)(E,{to:"/gallery",class:"user",onClick:$.onPressedUserIconChildren},{default:(0,i.k6)((()=>t[17]||(t[17]=[(0,i.eW)(" Galleria ")]))),_:1},8,["onClick"])])),_:1})):(0,i.Q3)("",!0),_.recipientCompletedBookingsHistory.length>0||_.proCompletedHistory.length>0?((0,i.uX)(),(0,i.Wv)(W,{key:1,href:"#"},{default:(0,i.k6)((()=>[(0,i.bF)(E,{to:"/history",class:"user",onClick:$.onPressedUserIconChildren},{default:(0,i.k6)((()=>t[18]||(t[18]=[(0,i.eW)(" Arkisto ")]))),_:1},8,["onClick"])])),_:1})):(0,i.Q3)("",!0),_.recipientBookings.length>0?((0,i.uX)(),(0,i.Wv)(W,{key:2,href:"#"},{default:(0,i.k6)((()=>[(0,i.bF)(E,{to:"/received",class:"user",onClick:$.onPressedUserIconChildren},{default:(0,i.k6)((()=>t[19]||(t[19]=[(0,i.eW)(" Tilaukset ")]))),_:1},8,["onClick"])])),_:1})):(0,i.Q3)("",!0),_.userIsProvider?((0,i.uX)(),(0,i.Wv)(W,{key:3,href:"#"},{default:(0,i.k6)((()=>[(0,i.bF)(E,{to:"/pay-plan",class:"user",onClick:$.onPressedUserIconChildren},{default:(0,i.k6)((()=>t[20]||(t[20]=[(0,i.eW)(" Laskutus ")]))),_:1},8,["onClick"])])),_:1})):(0,i.Q3)("",!0),(0,i.bF)(W,{href:"#"},{default:(0,i.k6)((()=>[(0,i.bF)(E,{to:"/rules",class:"user",onClick:$.onPressedUserIconChildren},{default:(0,i.k6)((()=>t[21]||(t[21]=[(0,i.eW)(" Säännöt ")]))),_:1},8,["onClick"])])),_:1}),(0,i.bF)(W,{href:"#",onClick:$.handleLogOut},{default:(0,i.k6)((()=>t[22]||(t[22]=[(0,i.Lk)("p",{class:"user"},"Log out",-1)]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["modelValue"])])),_:1})),(0,i.bF)(j,{center:"",class:"mb-2 mb-lg-0"},{default:(0,i.k6)((()=>[null!==_.proTimeCreditLeft?((0,i.uX)(),(0,i.CE)("div",y,["dash-board"===$.currentRouteName||"provider-panel"===$.currentRouteName?((0,i.uX)(),(0,i.CE)("div",b,[_.proTimeCreditLeft<=0?((0,i.uX)(),(0,i.CE)("div",w,[(0,i.Lk)("h5",B,[t[23]||(t[23]=(0,i.eW)("Käyttö päättynyt!    ")),(0,i.Lk)("span",{class:"limit-refill",onClick:t[8]||(t[8]=t=>e.$router.push("/pay-plan"))},"Lataa aikaa!")])])):_.proTimeCreditLeft<=3&&_.proTimeCreditLeft>0?((0,i.uX)(),(0,i.CE)("div",C,[(0,i.Lk)("h5",A,[(0,i.eW)("Käyttö "+(0,n.v_)(_.proTimeCreditLeft)+" päivää    ",1),(0,i.Lk)("span",{class:"limit-refill",onClick:t[9]||(t[9]=t=>e.$router.push("/pay-plan"))},"Lataa aikaa!")])])):((0,i.uX)(),(0,i.CE)("div",I,[(0,i.Lk)("div",null,[(0,i.Lk)("h5",x,"Käyttö: "+(0,n.v_)(_.proTimeCreditLeft)+" päivää",1)])]))])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)])),_:1})])),_:1}),_.isNotification?((0,i.uX)(),(0,i.Wv)(z,{key:0,"onExit:notifications":$.handleExitNotifications,"onUpdate:status":$.handleStatusUpdate,bookings:_.providerBookings},null,8,["onExit:notifications","onUpdate:status","bookings"])):(0,i.Q3)("",!0),(0,i.bF)(Q,{style:{padding:"20px"},message:_.ratingResult},null,8,["message"]),_.messageAboutRejectBooking?((0,i.uX)(),(0,i.CE)("div",S,[(0,i.Lk)("p",{class:"bookingRejectMessageClose",onClick:t[10]||(t[10]=(...e)=>$.closeClientRejectedBookingMsgPanel&&$.closeClientRejectedBookingMsgPanel(...e))},"Selvä"),(0,i.Lk)("h3",D,(0,n.v_)(_.messageAboutRejectBooking),1)])):(0,i.Q3)("",!0),_.messageAboutRejectBookingByClient?((0,i.uX)(),(0,i.CE)("div",P,[(0,i.Lk)("p",{class:"bookingRejectMessageClose",onClick:t[11]||(t[11]=(...e)=>$.closeProRejectedBookingMsgPanel&&$.closeProRejectedBookingMsgPanel(...e))},"Selvä"),(0,i.Lk)("h3",R,(0,n.v_)(_.messageAboutRejectBookingByClient),1)])):(0,i.Q3)("",!0),(0,i.bF)(K,{bg:"dark",text:["center","white"],class:"fixed-bottom"},{default:(0,i.k6)((()=>[_.clientMapSearchData.length>0?((0,i.uX)(),(0,i.Wv)(G,{key:0},{default:(0,i.k6)((()=>[(0,i.Lk)("div",M,[(0,i.Lk)("div",null,[(0,i.Lk)("div",U,(0,n.v_)(_.sentence),1)])])])),_:1})):(0,i.Q3)("",!0),t[24]||(t[24]=(0,i.Lk)("div",{class:"text-center p-3",style:{"background-color":"rgba(0, 0, 0, 0.2)"}}," © 2024 Copyright: DUVA OY ",-1))])),_:1}),(0,i.bF)(J,{test:$.test,"onLogin:data":$.handleLogin,"onRegister:data":$.createUser,userIsProvider:_.userIsProvider,proImages:_.proImages,isPro:_.isProOpenGallery,"onAdd:slide":$.handleAddSlide,"onRemove:slide":$.handleRemoveSlide,"onUpdate:gallery":$.handleUpdateGallery,onUpdateGalleryRemove:$.handleUpdateGalleryRemove,loggedInUser:_.loggedUser,recipientBookings:_.recipientBookings,onAddImageToRecipientBookings:$.handleAddImageRecipientBookings,confirmedBookingsByClient:_.clientAcceptedBookings,confirmedBookingsByProvider:_.providerAcceptedBookings,"onBooking:update":$.handleCreateBooking,"onBooking_map:update":$.handleCreateMapBooking,onOffer_confirmed:$.handleOfferConfirmed,"onExit:notifications":$.handleExitNotifications,"onUpdate:status":$.handleStatusUpdate,"onUpdate:proChatNav":$.handleUpdateProChatNav,"onUpdate:booking":$.handleUpdateClientConfirmedBooking,"onCreate:offer":$.handleCreateOffer,"onRemove:booking":$.handleRemoveBooking,"onReject:bookingByPro":$.handleRejectBookingByPro,"onReject:bookingByClient":$.handleRejectBookingByClient,onRemoveRecipient:$.handleRemoveRecipient,"onActivate:bell":$.handleActivateBell,"onDeactivate:bell":$.handleDeActivateBell,bookings:_.providerBookings,bookingsConfirmed:_.providerBookingsHistory,recipientConfirmedBookings:_.recipientCompletedBookingsHistory,proCompletedHistory:_.proCompletedHistory,onRemoveProBookingConfirmed:$.handleRemoveProBookingConfirmed,customer:_.rateCustomer,onIsRated:$.handleRated,onBackFromFeedback:e.handleBackFromFeedbackClient,onFinalinfo:$.fromFinal,onInitializeChat:$.handleChat,chatusers:_.users,activeUser:_.activeUser,messages:_.conversation,"onSet:room":$.handleSetRoom,isSelectedByExpiredUser:_.isSelectedByExpiredUser,newMessageRoom:_.newMessageRoom,provider:_.userIsProvider,recipient:_.recipientBookings,"onRecipient:date_ms":$.handleUpdateBookingDate_ms,creditLeft:_.proTimeCreditLeft,onShowCreatedProvider:$.handleShowCreatedProvider,onUpdateProTimeCredit:$.handleUpdateProTimeCredit,isAccessDenied:_.isAccessTerminated,"onSelect:user":$.onSelectUser,onNoSelected:$.noSelectUser,selecteduser:_.selectedUser,"onOn:message":$.handleMessage,onOtherUser:e.otherUser,onBookingWaitingProBack:e.handleBookingWaitingProBackBtn,onUpdateAvatar:$.handleUpdateAvatar,onRemoveAvatar:$.handleRemoveAvatar,"recipient-test":_.recipientTest,onSetNavbarChatUser:$.handleSetNavbarChatUser,onSetNavbarAboutSetFeedback:$.handleSetNavbarFeedback,onResetMapSearch:$.mapSearchReset,wentOut:$.wentOut},null,8,["test","onLogin:data","onRegister:data","userIsProvider","proImages","isPro","onAdd:slide","onRemove:slide","onUpdate:gallery","onUpdateGalleryRemove","loggedInUser","recipientBookings","onAddImageToRecipientBookings","confirmedBookingsByClient","confirmedBookingsByProvider","onBooking:update","onBooking_map:update","onOffer_confirmed","onExit:notifications","onUpdate:status","onUpdate:proChatNav","onUpdate:booking","onCreate:offer","onRemove:booking","onReject:bookingByPro","onReject:bookingByClient","onRemoveRecipient","onActivate:bell","onDeactivate:bell","bookings","bookingsConfirmed","recipientConfirmedBookings","proCompletedHistory","onRemoveProBookingConfirmed","customer","onIsRated","onBackFromFeedback","onFinalinfo","onInitializeChat","chatusers","activeUser","messages","onSet:room","isSelectedByExpiredUser","newMessageRoom","provider","recipient","onRecipient:date_ms","creditLeft","onShowCreatedProvider","onUpdateProTimeCredit","isAccessDenied","onSelect:user","onNoSelected","selecteduser","onOn:message","onOtherUser","onBookingWaitingProBack","onUpdateAvatar","onRemoveAvatar","recipient-test","onSetNavbarChatUser","onSetNavbarAboutSetFeedback","onResetMapSearch","wentOut"])],64)}var _=s(4474),$=s(910),O=s(683),E=s(1769),N=s(407),j=s(3674);const F=s(6425),T="/api/chatmessages",W=()=>{const e=F.get(T);return e.data},X=async(e,t)=>{const s=await F.put(`${T}/${e}`,t);return s.data},H=async e=>{await F.delete(`${T}/${e}`)};var V={getMessages:W,editStatus:X,deleteRoomMessages:H};const z=s(6425),Q="/api/chatusers",G=async()=>{const e=await z.get(Q);return e.data},K=async e=>{const t=await z.get(`${Q}/${e}`);return t.data},J=async e=>{await z.delete(`${Q}/${e}`)};var Y={getAll:G,getChatUser:K,removeChatMembersRoom:J},Z=s(5862);const q=s(6425),ee="/api/pro_history",te=async()=>{const e=await q.get(ee);return e.data},se=async e=>{const t=await q.post(`${ee}`,e);return t.data};var oe={getProHistory:te,updateProHistory:se},ie=(s(2456),s(6765)),ne=s(7337),ae=s(6732),re=s(4589),le=s(5384),ce=s(144),de=s(1238);const ue=async()=>{const e=window.localStorage.getItem("loggedAppUser");if(e){console.log("Tooooken 0 "+e);const t=JSON.parse(e).token,s=await j.A.verifyToken(t);return!s}};var ge={validation:ue},he=s(9621),me=s(4263),pe=s(5846),fe=s(1690);s(6425);const ke=e=>{e.hasNewMessages=!1,e.messages=[]};var ve={name:"App",props:{},components:{MDBFooter:pe.vp,MDBRow:pe.gU,MDBCol:pe.m6,MDBContainer:pe.Dj,MDBBtnClose:pe.uR,User:he.A,MessagePanel:me.A,Notifications:$["default"],monthConverter:ie.A,successMessage:ne.A,infoMessage:ae.A,MDBNavbar:pe.Ke,MDBCollapse:pe.Js,MDBNavbarItem:pe.DE,MDBNavbarBrand:pe.D1,MDBNavbarNav:pe.HZ,MDBNavbarToggler:pe.SX,MDBBadge:pe.nf,MDBIcon:pe.$u,MDBBtn:pe.al,MDBDropdown:pe.Zr,MDBDropdownToggle:pe.Ho,MDBDropdownMenu:pe.IF,MDBDropdownItem:pe.Oo,Language:de["default"]},data(){return{res:[],currentLanguage:null,currentChatRoom:null,newMessageTest:!1,imageSrc:null,unread:null,sentence:null,i:0,chatParticipants:[],test:!1,recipientTest:null,credit:0,testDialog:["eka","toka","pipi"],counter:null,user:null,isNewMessage:!0,messageInfo:"",newMessageList:[],rateCustomer:{},ratingResult:null,newMessageRoom:"",tu:[],userSocketID:"",info:"",users:[],currentRoom:"",messages:[],conversation:[],selectedUser:null,activeUser:null,msg:"",isBell:!1,loggedUser:{},isAccessTerminated:!1,messageAboutAccess:"Access denied!",recipientBookings:[],clientAcceptedBookings:[],providerAcceptedBookings:[],offers:[],messageAboutRejectBooking:null,messageAboutRejectBookingByClient:null,recipientImages:[],userIsProvider:null,proTimeCreditLeft:null,isSelectedByExpiredUser:!1,proImages:[],isProOpenGallery:!0,providerBookings:[],providerBookingsHistory:[],recipientCompletedBookings:[],recipientCompletedBookingsHistory:[],proCompletedHistory:[],isNotification:!1,notSeenClientBookings:[],avatar:{name:"avatar.png"},showAvatar:null,newMessage:"",otheruser:{},isMapSearchData:!1,isMapSearchActive:!1,clientMapSearchData:[],isRingBell:!1}},created(){},async mounted(){const e=new re.className("Hallo");console.log("xxx "+e.response("aaa"));const t=localStorage.getItem("lang");t&&(this.currentLanguage=t),this.validateToken();const s=window.localStorage.getItem("currentRoom");if(s){const e=JSON.parse(s);this.currentChatRoom=JSON.parse(s),this.selectedUser=this.users.find((t=>t.room===e&&t.userID!==this.loggedUser.id)),fe.A.emit("update room",e)}const o=window.localStorage.getItem("loggedAppUser");if(o){const e=JSON.parse(o);this.user=e;const t=e.username,s=e.id;this.joinServer(t,s);const i=window.localStorage.getItem("rejectedBookingMessage");i&&(this.messageAboutRejectBooking=JSON.parse(i).msg+" Syy: "+JSON.parse(i).reason);const n=window.localStorage.getItem("clientRejectedBookingMessage");n&&(this.messageAboutRejectBookingByClient=JSON.parse(n).msg+" Syy: "+JSON.parse(n).reason)}const i=window.localStorage.getItem("selectedChatUser");if(i){const e=JSON.parse(i);this.selectedUser=e,fe.A.emit("update room",e.room)}const n=window.localStorage.getItem("customerFeedback");if(n){const e=JSON.parse(n);this.rateCustomer=e}setInterval(this.runEveryMinite,1e4)},setup(){const e=(0,ce.KR)(!1),t=(0,ce.KR)(!1),s=(0,ce.KR)(!1),o=(0,ce.KR)(!1),i=(0,ce.KR)(!1),n=(0,ce.KR)(!1),a=(0,ce.KR)(!1),r=(0,ce.KR)(!1),{t:l}=(0,le.s9)();return{collapse7:e,dropDownDialog:t,dropDownChat:s,dropdownUser:o,dropdownLang:i,dropdown2:n,dropdownBell:a,dropDownfeedback:r,t:l}},methods:{editLanguage(e){},handleOfferConfirmed(e){console.log("Confirmed booking header is "+e.header),this.recipientBookings=this.recipientBookings.filter((t=>t.id!==e.id)),this.providerAcceptedBookings=this.providerAcceptedBookings.concat(e)},async handleCreateOffer(e,t){console.log("Offer price is in App - "+t.user.username),await N.A.updateRecipient(t.id,{status:"offered"}),this.providerBookings.length<1&&this.$router.push("/")},handleUpdateBookingDate_ms(e,t){console.log("Date_ms "+t),console.log("Date_ms booking id "+e.id);const s=this.recipientBookings.find((t=>t.id===e.id));s.created_ms=t,this.recipientBookings.map((t=>t.id===e.id?s:t))},handleUpdateProChatNav(){console.log("Initializing nav chatters..."),this.initNavChatters()},callback(e){console.log("Handle the response",e)},handleShowCreatedProvider(e){this.proTimeCreditLeft=30,this.userIsProvider=e},removeChatnavUser(e){!0===confirm("Oletko varmaa, että haluat poistaa chat käyttäjän?")?(console.log("You pressed OK!"),this.chatParticipants=this.chatParticipants.filter((t=>t.name!==e.name))):console.log("You canceled!")},removeExpiredRecipientBookings(){console.log("Aaaaaaaaaaaaaaaaa"),this.recipientBookings.forEach((e=>{console.log("Recipient bookings time "+(e.created_ms-(new Date).getTime())),e.created_ms-(new Date).getTime()>0?console.log("It is valid!"):console.log("It is not valid anymore!")}))},mapSearchReset(){this.mapSearchData=null},handleUpdateProTimeCredit(e){this.proTimeCreditLeft=e,this.isAccessTerminated=!1},handleAddSlide(e,t){this.proImages=[...this.proImages,e]},handleRemoveSlide(e,t){this.proImages=this.proImages.filter(((e,s)=>s!==t))},handleAddImageRecipientBookings(e,t){},async handleRemoveRecipient(e){this.recipientBookings=this.recipientBookings.filter((t=>t.id!==e)),await N.A.removeBooking(e)},async load(e){await _.A.createProRefImg(this.userIsProvider.id,e)},async handleUpdateGallery(e){console.log("Will be updated!!"),await _.A.createProRefImg(this.userIsProvider.id,e)},handleUpdateGalleryRemove(e){e.length>0&&e.forEach((async e=>{await _.A.removeProRefImage(e,this.userIsProvider.id)}))},wentOut(){console.log("Went................")},isSameId(e,t){return e.value===t.value},comp(){console.log("Comparing"),console.log("xxx--xxx "+this.chatParticipants.map((e=>e.name))),console.log("yyyy---yyyy "+this.newMessageList.map((e=>e.userID)));const e=[{value:"4a55eff3-1e0d-4a81-9105-3ddd7521d642",display:"Jamsheer"},{value:"644838b3-604d-4899-8b78-09e4799f586f",display:"Muhammed"},{value:"b6ee537a-375c-45bd-b9d4-4dd84a75041d",display:"Ravi"},{value:"e97339e1-939d-47ab-974c-1b68c9cfb536",display:"Ajmal"},{value:"a63a6f77-c637-454e-abf2-dfb9b543af6c",display:"Ryan"}],t=[{value:"4a55eff3-1e0d-4a81-9105-3ddd7521d642",display:"Jamsheer",$$hashKey:"008"},{value:"644838b3-604d-4899-8b78-09e4799f586f",display:"Muhammed",$$hashKey:"009"},{value:"b6ee537a-375c-45bd-b9d4-4dd84a75041d",display:"Ravi",$$hashKey:"00A"},{value:"e97339e1-939d-47ab-974c-1b68c9cfb536",display:"Ajmal",$$hashKey:"00B"}],s=e.filter((({value:e})=>t.some((({value:t})=>t===e))));console.log("results "+s.length),e.forEach(((e,t)=>{}))},startChat(){fe.A.emit("join all rooms")},chat(){console.log("Clicked to chat")},handleUpdateAvatar(e){console.log("Avatar in app is------------- "+e),this.showAvatar=e},handleRemoveAvatar(){this.avatar={name:"avatar.png"},this.showAvatar=null},handleChat(e){this.currentRoom=e.room,this.chatParticipants.some((t=>t.room===e.chatData.room))||(this.chatParticipants=this.chatParticipants.concat({status:"",proID:e.chatData.proID,pro:e.chatData.pro,userID:e.chatData.userID,name:e.chatData.username,room:e.chatData.room})),console.log("Init chat room "+e.initChatRoom.pro),fe.A.emit("create room users",e.initChatRoom),window.localStorage.setItem("currentRoom",JSON.stringify(e.chatData.room)),this.currentChatRoom=e.chatData.room,fe.A.emit("update room",e.chatData.room)},fromFinal(e){this.info=e,console.log("Data from final in app: "+e)},submit(e,t,s){console.log("What===");let o={userID:e,username:t,room:s};fe.A.emit("new chat user",o)},joinServer:function(e,t){console.log("Joining server: "+e+" ja id: "+t),fe.A.on("get socketID",(e=>{console.log("user socket id "+e),this.userSocketID=e})),fe.A.on("get current credentials",(()=>{fe.A.emit("current credentials",{room:this.currentRoom,userID:t,username:e})})),fe.A.on("connect user",(e=>{})),fe.A.on("loggedIn",(e=>{this.users=[],e.users.forEach((e=>{for(let t=0;t<this.users.length;t++){const s=this.users[t];if(s.userID===e.userID)return void(s.connected=e.connected)}e.self=e.userID===this.loggedUser.id,e.self||(this.activeUser=e),ke(e),e.messages=[],this.users.push(e)})),this.users.sort(((e,t)=>e.self?-1:t.self?1:e.username<t.username?-1:e.username>t.username?1:0)),console.log("Room users: "+e.users.map((e=>e.username)))})),this.listen()},listen:function(){fe.A.on("user info",(e=>{})),fe.A.on("init new messages",(e=>{e.forEach((e=>{"unsent"===e.status&&(this.newMessageList=this.newMessageList.concat(e))}))})),fe.A.on("userOnline",(e=>{this.users=[],fe.A.on("get socketID",(e=>{console.log("user socket id "+e),this.userSocketId=e})),e.users.forEach((e=>{for(let t=0;t<this.users.length;t++){const s=this.users[t];if(s.userID===e.userID)return s.connected=e.connected,void console.log("xxxxxxxxxxxxx--xxxxxxxxxxxxxxx")}e.self=e.userID===this.loggedUser.id,this.currentChatRoom?e.userID!==this.loggedUser.id&&e.room===this.currentChatRoom&&(this.selectedUser=e):e.userID!==this.loggedUser.id&&(this.selectedUser=e),this.initReactiveProperties(e),e.messages=[],e.room===this.currentChatRoom&&this.users.push(e)})),this.users.sort(((e,t)=>e.self?-1:t.self?1:e.username<t.username?-1:e.username>t.username?1:0))})),fe.A.on("user connected",((e,t)=>{for(let s=0;s<this.users.length;s++){const t=this.users[s];if(t.userID===e){t.connected=!0;break}}})),fe.A.on("userLeft",((e,t,s)=>{console.log("User left "+e,t,s);for(let o=0;o<this.users.length;o++){const t=this.users[o];if(t.userID===e){t.connected=!1;break}}})),fe.A.on("new message",(async e=>{if(this.newMessageRoom=e.room,(!this.currentChatRoom||this.currentChatRoom!==e.room)&&(this.newMessageTest=!0,!this.newMessageList.some((t=>t.room===e.room)))){const t={status:"",userID:e.userID,proID:e.receiverID,name:e.username,room:e.room};this.chatParticipants.some((t=>t.room===e.room))||(this.chatParticipants=this.chatParticipants.concat(t)),await V.editStatus(e.id,{status:"unsent"}),this.newMessageList=this.newMessageList.concat(e)}})),fe.A.on("accept provider",(async({id:e,booking:t})=>{this.providerBookings=this.providerBookings.concat(t),this.notSeenClientBookings.push(t),this.isRingBell=!0,setTimeout((()=>{this.isRingBell=!1}),3e3)})),fe.A.on("map pro search",(e=>{this.clientMapSearchData=[...this.clientMapSearchData,e],this.isMapSearchData})),fe.A.on("accept recipient booking",(async({id:e,booking:t})=>{let s=await N.A.getBookingById(t.id);const o=this.recipientBookings.find((e=>e.id===t.id));o.status="confirmed",this.recipientBookings=this.recipientBookings.map((e=>e.id!==t.id?e:o)),this.recipientBookings=this.recipientBookings.filter((e=>e.id!==t.id)),this.providerAcceptedBookings=this.providerAcceptedBookings.concat(s),this.clientAcceptedBookings=this.clientAcceptedBookings.filter((e=>e.id!==t.id))})),fe.A.on("send booking for order",(e=>{console.log("Order for BELL!!!"),this.notSeenClientBookings.push(e),this.providerBookings=this.providerBookings.concat(e),this.isRingBell=!0,setTimeout((()=>{this.isRingBell=!1}),3e3)})),fe.A.on("send offer",(async e=>{console.log("Offer is here! "+e.user.username),this.recipientBookings=await N.A.getOwnBookings(this.loggedUser.id),this.clientAcceptedBookings=this.clientAcceptedBookings.concat(e)})),fe.A.on("confirm sent offer",(e=>{console.log("Sent offer is confirmed!"),this.providerBookings=this.providerBookings.filter((t=>t.id!==e.id)),this.providerBookings.length<1&&this.$router.push("/")})),fe.A.on("remove archived chat nav user",(({room:e})=>{this.chatParticipants=this.chatParticipants.filter((t=>t.room!==e))})),fe.A.on("reject recipient booking",(async({id:e,room:t,pro:s,booking:o,reason:i})=>{const n=this.recipientBookings.find((e=>e.id===o.id));console.log("Pro id "+e),console.log("TMI*** xx"+s),n.status="waiting",this.recipientBookings=this.recipientBookings.map((e=>e.id!==o.id?e:n)),this.clientAcceptedBookings=this.clientAcceptedBookings.filter((e=>e.id!==o.id)),this.chatParticipants=this.chatParticipants.filter((e=>e.room!==t));const a={msg:`Valitettavsti TMI ${s} ei varmistanut tilausta '${o.header}' - ${o.date}!`,reason:i,room:t};window.localStorage.setItem("rejectedBookingMessage",JSON.stringify(a)),this.messageAboutRejectBooking=a.msg+" Syy: "+a.reason})),fe.A.on("booking rejected by client",(({id:e,room:t,booking:s,reason:o})=>{console.log("Client rejected booking! xxxxxxxx "),this.providerBookings=this.providerBookings.filter((e=>e.id!==s.id)),this.chatParticipants=this.chatParticipants.filter((e=>e.room!==t)),this.providerBookings.length<1&&this.$router.push("/");const i={msg:`Asiakas ${s.user.username} on poistanut lähetetty tilauksen`,reason:o};window.localStorage.setItem("clientRejectedBookingMessage",JSON.stringify(i)),this.messageAboutRejectBookingByClient=i.msg+". Syy: "+i.reason+" !"})),fe.A.emit("online",this.currentRoom),fe.A.on("messages",(e=>{this.conversation=e.msg})),fe.A.on("image",(e=>{new Image;this.imageSrc=`data:image/jpg;base64,${e}`})),fe.A.on("private message",(({content:e,chatImg:t,username:s,date:o,from:i,to:n})=>{console.log("Message in app: "+e.body),"file"===e.msg_status&&(this.imageSrc=`data:chatImg/jpg;base64,${t}`),this.test=!0,fe.A.on("messages",(e=>{this.conversation=e.msg}));for(let a=0;a<this.users.length;a++){const t=this.users[a],r=this.userSocketId===i;if(t.userID===(r?n:i)){this.conversation.push({content:e,image:this.imageSrc,username:s,date:o,userID:t.userID,fromSelf:r}),t.messages.push({content:e,date:o,fromSelf:r}),t!==this.selectedUser&&(t.hasNewMessages=!0,this.messageSeen=!0);break}}}))},initReactiveProperties(e){e.hasNewMessages=!1,e.messages=[]},onSelectUser(e){e.self||(this.selectedUser=e,fe.A.emit("update room",e.room)),console.log("----------Tuleb läbi--------"+e.username),this.isNewMessage=!1,e.hasNewMessages=!1,this.messageInfo=""},noSelectUser(){this.selectedUser=null,this.currentChatRoom=null,window.localStorage.removeItem("currentRoom")},async handleMessage(e,t,s){console.log("chat status in the app: "+e.msg_status),this.conversation.push({content:e,image:t,username:this.loggedUser.username,date:s,user:this.loggedUser.username,userID:this.loggedUser.id})},handleProviderActionConfirm(){},async handleFeedbackClient(e){console.log("Feedback client is "+e.id),this.rateCustomer=e,window.localStorage.setItem("customerFeedback",JSON.stringify(e))},async getRecipientCompletedBookings(e){const t=await Z.A.getClientHistory();this.recipientCompletedBookingsHistory=t.filter((t=>t.user.id===e)),this.recipientCompletedBookings=t.filter((t=>t.user.id===e&&"no rated"===t.status))},async getProCompletedHistory(e){const t=await oe.getProHistory();this.proCompletedHistory=t.filter((t=>t.user.id===e))},onPressedLogoBtn(){this.selectedUser=null,this.currentChatRoom=null,window.localStorage.removeItem("currentRoom")},onPressedUserIconChildren(){window.localStorage.removeItem("selectedChatUser")},handleSetRoom(e){this.currentChatRoom=e,window.localStorage.setItem("currentRoom",JSON.stringify(e))},updateRoom(e){console.log("Mate id "+e.userID),this.currentChatRoom=e.room,window.localStorage.setItem("currentRoom",JSON.stringify(e.room)),this.users.forEach((e=>{})),this.selectedUser=this.users.find((t=>t.room===e.room&&t.userID!==this.loggedUser.id)),this.newMessageList.forEach((async t=>{t.inline,t.room===e.room&&(await V.editStatus(t.id,{status:"sent"}),this.newMessageList=this.newMessageList.filter((t=>t.room!==e.room)))})),fe.A.emit("update room",e.room)},handleNewMessageNotification(){fe.A.emit("update room",this.newMessageRoom)},handleActivateBell(e){console.log("Bell bell bell "+e)},handleDeActivateBell(){},profile(){this.$router.push("/profile"),console.log("Pressed profile")},history(){this.$router.push("/history")},renderPage(){this.$router.push({path:"/chat"}).then((()=>{this.$router.go()}))},renderDialogPage(){this.$router.push({path:"/dialog"}).then((()=>{this.$router.go()}))},reload:()=>{(void 0).isRouterAlive=!1,setTimeout((()=>{(void 0).isRouterAlive=!0}),0)},async getUsers(){this.users=await O.A.getAll()},async createUser(e){console.log("User name is here: "+e.username),this.submit(e.id,e.username,e.username+e.id),window.localStorage.setItem("loggedAppUser",JSON.stringify(e)),this.loggedUser=e,window.location.replace("/")},async handleLogin(e){console.log("userdata: "+e.username),window.localStorage.setItem("loggedAppUser",JSON.stringify(e)),this.loggedUser=e;let t=e.username,s=e.id;this.joinServer(t,s),this.$route.query.redirect?this.$router.push(this.$route.query.redirect):window.location.replace("/")},handleLogOut(){window.localStorage.removeItem("loggedAppUser"),window.localStorage.removeItem("selectedChatUser"),this.loginUser="",this.loggedUser="",this.selectedUser=null,fe.A.emit("user leave"),this.messageAboutRejectBooking=null,this.messageAboutRejectBookingByClient=null,this.proTimeCreditLeft=null,this.$router.push("/")},handleUpdateClientConfirmedBooking(e){console.log("___________________id----------- "+e)},handleRemoveProBookingConfirmed(e){},handleSetNavbarChatUser(e,t){this.clientAcceptedBookings=this.clientAcceptedBookings.concat(e),console.log("Booking first  "+e.header),this.selectedUser=null},async handleRated(e,t,s){await Z.A.updateStatus(this.rateCustomer.id,{status:"rated"}),this.recipientCompletedBookings=this.recipientCompletedBookings.filter((e=>e.id!==this.rateCustomer.id)),window.localStorage.removeItem("customerFeedback"),this.ratingResult="negatiivista"===t||"positiivista"===t?`Olet antanut ${t} palautetta yritykselle - ${s}`:`Et ole antanut palautetta yritykselle - ${s}`,setTimeout((()=>{this.ratingResult=null}),3e3)},async handleSetNavbarFeedback(e){this.providerAcceptedBookings=this.providerAcceptedBookings.filter((t=>t.id!==e.id)),this.recipientBookings=this.recipientBookings.filter((e=>"confirmed"!==e.status&&"completed"!==e.status)),this.recipientCompletedBookings=this.recipientCompletedBookings.filter((t=>t.id!==e.id));const t={header:e.header,address:e.ordered[0].address,date:e.date,userID:e.ordered[0].user.id},s={status:"no rated",header:e.header,proID:e.ordered[0].id,company:e.ordered[0].yritys,id_number:e.ordered[0].ytunnus,rating:e.ordered[0].rating,address:e.ordered[0].address,date:e.date,professional:e.ordered[0].profession,userID:e.user.id},o=await Z.A.updateClientHistory(s),i=await oe.updateProHistory(t);this.recipientCompletedBookingsHistory=this.recipientCompletedBookingsHistory.concat(o),this.proCompletedHistory=this.proCompletedHistory.concat(i),this.recipientCompletedBookings=this.recipientCompletedBookings.concat(o);const n=e.ordered[0].yritys+e.user.username;this.chatParticipants.find((e=>e.room===n));await Y.removeChatMembersRoom(n),await V.deleteRoomMessages(n),this.chatParticipants=this.chatParticipants.filter((e=>e.room!==n)),await E.A.removeRoom(e.ordered[0].id,e.user.id)},async calculateImageSize(e){let t=new Image;t.src=s(3906)(`./${e}`),await t.decode();let o=t.width,i=t.height;return{width:o,height:i}},async initNavChatters(){const e=await Y.getChatUser(this.user.id);e.forEach((e=>{let t=e.member.find((e=>e.userID!==this.user.id));console.log("Chat room + users id-- "+t.username),this.chatParticipants=[...this.chatParticipants,{id:e.id,status:"",proID:e.proID,pro:e.pro,userID:t.userID,name:t.username,room:e.room}]}))},async handleProvider(){const e=await E.A.getProvider(this.loggedUser.id);e&&(this.proTimeCreditLeft=((e.proTime-(new Date).getTime())/864e5).toFixed()<0?0:((e.proTime-(new Date).getTime())/864e5).toFixed(),this.proTimeCreditLeft<=0&&(this.isAccessTerminated=!0),this.userIsProvider=e,this.proImages=[],this.userIsProvider.reference.forEach(((e,t)=>{this.calculateImageSize(e.name).then((t=>{console.log("Image size::: "+t.width+" "+t.height),this.proImages=[...this.proImages,{id:e._id,size:t.width+"-"+t.height,src:s(3906)(`./${e.name}`),thumb:s(3906)(`./${e.name}`),subHtml:'<div class="lightGallery-captions">\n                <h2>Terve</h2>\n\n            </div>"'}]}))})),this.userIsProvider.user.avatar?(console.log("provider user avatar is "+this.userIsProvider.user.avatar.name),this.avatar=this.userIsProvider.user.avatar):console.log("No avatar is included"),console.log("User credit "+this.userIsProvider.credit),this.credit=this.userIsProvider.credit,this.providerBookings=e.booking.filter((e=>"confirmed"!==e.status&&"completed"!==e.status)),this.providerBookingsHistory=this.userIsProvider.booking.filter((e=>"confirmed"===e.status))),this.notSeenClientBookings=this.providerBookings.filter((e=>"notSeen"===e.status)),this.providerBookings.forEach((e=>{e.status}))},async handleRecipientBookings(){let e=await N.A.getOwnBookings(this.loggedUser.id);if(e.length>0){e[0].user.avatar&&(this.avatar=e[0].user.avatar),this.providerAcceptedBookings=e.filter((e=>"confirmed"===e.status)),this.clientAcceptedBookings=e.filter((e=>"notSeen"===e.status||"seen"===e.status||"offered"===e.status));let t=e.filter((e=>"completed"!==e.status));this.recipientBookings=e.filter((e=>"confirmed"!==e.status&&"completed"!==e.status)),this.removeExpiredRecipientBookings(),t.forEach((e=>{if(e.ordered.length>0){let t=e.ordered[0].user.username;console.log("Pro "+t);e.ordered[0].room.findIndex((e=>e.userID===this.loggedUser.id))}}))}},async handleCreateBooking(e){await N.A.updateRecipient(e.id,{status:"notSeen"});const t=await N.A.getBookingById(e.id),s=await E.A.getProvidersMatchingByProfession({result:e.professional});console.log("Professional. "+e.professional);let o=[],i=[];s.forEach((e=>{i=i.concat(e.user.id),o=o.concat(e.id)}));for(let n=0;n<s.length;n++)console.log("Pro id "+s[n].id),await N.A.addProviderData(e.id,s[n].id),await E.A.addProviderBooking(s[n].id,e.id);fe.A.emit("send created booking",i,t),this.recipientBookings=this.recipientBookings.concat(e),this.clientAcceptedBookings=this.clientAcceptedBookings.concat(e)},async handleCreateMapBooking(e,t){await N.A.updateRecipient(e.id,{status:"notSeen"});this.recipientBookings=this.recipientBookings.concat(e),this.clientAcceptedBookings=this.clientAcceptedBookings.concat(e)},handleNotifications(){this.$router.push("/notification")},handleExitNotifications(e){console.log("State is: "+e),this.isNotification=e},handleStatusUpdate(e){this.providerBookings=this.providerBookings.filter((t=>t.id!==e)),this.handleProvider()},handleRemoveBooking(e){console.log("Handling remove booking..."+e),this.providerBookings=this.providerBookings.filter((t=>t.id!==e))},async handleRejectBookingByPro(e,t,s){console.log("Handling rejecting booking by pro..."+e.user.id),console.log("Ordered user id-- "+s),await N.A.removeProviderData(e.id,s),await E.A.removeProviderBooking(s,e.id),this.chatParticipants=this.chatParticipants.filter((e=>e.room!==t)),await Y.removeChatMembersRoom(t),await V.deleteRoomMessages(t),console.log("What is the room  "+t),this.providerBookings=this.providerBookings.filter((t=>t.id!==e.id))},async handleRejectBookingByClient(e,t,s){console.log("room "+s),console.log("user id "+t),console.log("booking header "+e.header),await N.A.removeProviderData(e.id,t),await E.A.removeProviderBooking(t,e.id),await Y.removeChatMembersRoom(s),await V.deleteRoomMessages(s),this.chatParticipants=this.chatParticipants.filter((e=>e.room!==s)),this.clientAcceptedBookings=this.clientAcceptedBookings.filter((t=>t.id!==e.id))},closeClientRejectedBookingMsgPanel(){const e=window.localStorage.getItem("rejectedBookingMessage");if(e){const t=JSON.parse(e);this.chatParticipants=this.chatParticipants.filter((e=>e.room!==t.room))}window.localStorage.removeItem("rejectedBookingMessage"),this.messageAboutRejectBooking=null},closeProRejectedBookingMsgPanel(){const e=window.localStorage.getItem("clientRejectedBookingMessage");if(e){const t=JSON.parse(e);this.chatParticipants=this.chatParticipants.filter((e=>e.room!==t.room))}window.localStorage.removeItem("clientRejectedBookingMessage"),this.messageAboutRejectBookingByClient=null},test(){console.log("xxxx "+ge)},async validateToken(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e),s=await j.A.verifyToken(t.token);"token expired"===s.result?(window.localStorage.removeItem("loggedAppUser"),this.loggedUser="",this.selectedUser=null,window.localStorage.removeItem("currentRoom"),fe.A.emit("user leave")):(this.loggedUser=t,console.log("Loged, logged user "+this.loggedUser.username),this.getRecipientCompletedBookings(t.id),this.getProCompletedHistory(t.id),this.chatParticipants=[],this.initNavChatters(),this.handleRecipientBookings(),this.handleProvider())}},runEveryMinite(){let e;this.clientMapSearchData.length>0&&(this.i>=this.clientMapSearchData.length?(e=this.clientMapSearchData[this.clientMapSearchData.length-1],this.sentence="Etsitään ammattilaista "+e.pro+" etäisyys "+e.dist+" km."):(e=this.clientMapSearchData[this.i],this.sentence="Etsitään ammattilaista - "+e.pro+" etäisyys "+e.dist+" km.",this.i+=1),console.log("Index length "+this.i))}},beforeUnmount(){fe.A.emit("user leave"),this.selectedUser=null},computed:{isValid(){return this.msg.length>0},currentRouteName(){return this.$route.name}}},ye=s(1241);const be=(0,ye.A)(ve,[["render",L]]);var we=be,Be=s(1387);const Ce=[{path:"/admin",name:"admin-panel",component:()=>s.e(917).then(s.bind(s,4917))},{path:"/",name:"dash-board",component:()=>s.e(795).then(s.bind(s,5521))},{path:"/language",name:"language",component:()=>Promise.resolve().then(s.bind(s,1238))},{path:"/register",name:"app-register",component:()=>s.e(147).then(s.bind(s,9147))},{path:"/login",name:"login-register",component:()=>s.e(760).then(s.bind(s,760))},{path:"/profile",name:"user-profile",component:()=>s.e(365).then(s.bind(s,1365))},{path:"/pay-plan",name:"pay-plan",component:()=>s.e(188).then(s.bind(s,5188))},{path:"/rules",name:"rules",component:()=>s.e(185).then(s.bind(s,8185))},{path:"/recipient-public",name:"recipient-public",component:()=>Promise.all([s.e(353),s.e(373),s.e(237)]).then(s.bind(s,4237))},{path:"/recipient-form",name:"recipient-form",component:()=>Promise.all([s.e(353),s.e(373),s.e(321)]).then(s.bind(s,6321)),props:!0,beforeEnter:async(e,t,s)=>{const o=window.localStorage.getItem("loggedAppUser"),i=JSON.parse(o),n=await N.A.getOwnBookings(i.id);if(n.length>0)return s("/received");s()},meta:{requiresAuth:!0}},{path:"/received",name:"recipient-panel",component:()=>Promise.all([s.e(158),s.e(508),s.e(556)]).then(s.bind(s,3892))},{path:"/recipient-result",name:"recipient-result",component:()=>Promise.all([s.e(158),s.e(508),s.e(191)]).then(s.bind(s,3508))},{path:"/received-final/:data",name:"recipient-final",component:()=>s.e(158).then(s.bind(s,5158)),props:!0},{path:"/rf",name:"r-form",component:()=>Promise.all([s.e(353),s.e(373),s.e(321)]).then(s.bind(s,6321))},{path:"/provider-public",name:"provider-public",component:()=>Promise.all([s.e(353),s.e(373),s.e(828)]).then(s.bind(s,7828)),beforeEnter:async(e,t,s)=>{const o=window.localStorage.getItem("loggedAppUser");if(!o)return s();{const e=JSON.parse(o),t=await E.A.getProvider(e.id);if(t)return s("/provider-panel");s()}}},{path:"/pro-public-search",name:"provider-public-search",component:()=>Promise.all([s.e(353),s.e(373),s.e(828)]).then(s.bind(s,7828))},{path:"/provider-form",name:"provider-form",component:()=>Promise.all([s.e(353),s.e(373),s.e(93)]).then(s.bind(s,5093)),beforeEnter:async(e,t,s)=>{const o=window.localStorage.getItem("loggedAppUser"),i=JSON.parse(o),n=await E.A.getProvider(i.id);if(n)return s("/provider-panel");s()}},{path:"/provider-panel",name:"provider-panel",component:()=>Promise.all([s.e(353),s.e(17)]).then(s.bind(s,1017)),props:!0},{path:"/location",name:"user-location",component:()=>Promise.all([s.e(373),s.e(974)]).then(s.bind(s,2974))},{path:"/notification",name:"client-notifications",component:()=>Promise.resolve().then(s.bind(s,910))},{path:"/chat",name:"live-chat",component:()=>Promise.resolve().then(s.bind(s,6510))},{path:"/history",name:"user-history",component:()=>s.e(69).then(s.bind(s,3069))},{path:"/feedback",name:"Feedback",component:()=>s.e(60).then(s.bind(s,6060))},{path:"/gallery",name:"Gallery",component:()=>Promise.resolve().then(s.bind(s,222))},{path:"/forgot_auth",name:"Forgot",component:()=>s.e(726).then(s.bind(s,9726))},{path:"/reset_auth/:token",name:"Reset",props:!0,component:()=>s.e(509).then(s.bind(s,4509))}],Ae=["recipient-form","provider-form"],Ie=(0,Be.aE)({history:(0,Be.Bt)(),routes:Ce});Ie.beforeEach((async(e,t,s)=>{const o=window.localStorage.getItem("loggedAppUser");if(o){JSON.parse(o)}const i=Ae.includes(e.name);i&&!o?s({path:"/login",query:{redirect:e.fullPath}}):s()}));var xe=Ie,Se=JSON.parse('{"welcome":"Tervetuloa","navMainPage":"Etusivu","speedIsImportant":"Nopeus on tärkein!","receiver":"Etsin palvelua","provider":"Tarjoan palvelua"}'),De=JSON.parse('{"welcome":"Welcome","navMainPage":"Home","speedIsImportant":"Speed is important!","receiver":"Receiver","provider":"Provider"}');const Pe=(0,le.hU)({legacy:!1,locale:localStorage.getItem("lang")||"fin",fallbackLocale:"fin",messages:{en:De,fin:Se}});var Re=Pe,Me=s(8068),Ue=s(9119);(0,o.Ef)(we).component("VueDatePicker",Me.A),(0,o.Ef)(we).use(xe).use(Ue.Ay).use(Re).mount("#app")},5862:function(e,t,s){"use strict";const o=s(6425),i="/api/client_history",n=async()=>{const e=await o.get(i);return e.data},a=async e=>{const t=await o.post(`${i}`,e);return t.data},r=async(e,t)=>{const s=await o.put(`${i}/${e}`,t);return s.data};t.A={getClientHistory:n,updateClientHistory:a,updateStatus:r}},4474:function(e,t,s){"use strict";const o=s(6425),i="/api/upload",n=async()=>{const e=await o.get(i);return e.data},a=async(e,t)=>{const s=await o.post(`${i}/${e}/pro-ref-img`,t);return s.data},r=async(e,t)=>{await o.delete(`${i}/${e}/del-pro-ref-image/${t}`)},l=async e=>{const t=await o.post(i,e,{});return t.data},c=async(e,t)=>{const s=await o.post(`${i}/${e}/avatar`,t);return s.data},d=async e=>{const t=await o.post(`${i}/chat-img`,e);return t.data},u=async(e,t)=>{const s=await o.post(`${i}/${e}/update_avatar`,t);return s.data},g=async(e,t)=>{const s=await o.put(`${i}/${e}`,t);return s.data},h=async(e,t)=>{await o.delete(`${i}/${e}/delClientImg/${t}`)},m=async e=>{await o.delete(`${i}/${e}/delAllClientBookingImages`)};t.A={getAll:n,createProRefImg:a,removeProRefImage:r,create:l,createProfileImage:c,createChatImage:d,newAvatar:u,updateImage:g,remove:h,cleanAllRecipientImages:m}},3674:function(e,t,s){"use strict";const o=s(6425),i="/api/login",n=async e=>{const t=await o.post(i,e);return t.data},a=async e=>{const t=await o.post(`${i}/${e}`);return t.data};t.A={login:n,verifyToken:a}},2456:function(e,t,s){"use strict";const o=s(6425),i="/api/offer",n=async e=>{const t=await o.post(i,e);return t.data};t.A={addOffer:n}},1769:function(e,t,s){"use strict";const o=s(6425),i="/api/providers",n=async()=>{const e=await o.get(i);return e.data},a=async e=>{const t=await o.get(`${i}/${e}`);return t.data},r=async e=>{const t=await o.get(`${i}/${e}/by-provider-id`);return t.data},l=async e=>{const t=await o.post(`${i}/profession`,e);return t.data},c=async(e,t)=>{const s=await o.post(`${i}/${e}`,t);return s.data},d=async(e,t)=>{const s=await o.post(`${i}/${e}/addRoom`,t);return s.data},u=async(e,t)=>{const s=await o.delete(`${i}/${e}/remove-room`,t);return s.data},g=async(e,t)=>{const s=await o.put(`${i}/${e}/editAddress`,t);return s.data},h=async(e,t)=>{const s=await o.put(`${i}/${e}/editProfession`,t);return s.data},m=async(e,t)=>{const s=await o.post(`${i}/${e}/addProfession`,t);return s.data},p=async(e,t)=>{const s=await o.put(`${i}/${e}/removeProfession`,t);return s.data},f=async(e,t)=>{const s=await o.post(`${i}/${e}/addRecipient/${t}`);return s.data},k=async(e,t)=>{const s=await o.put(`${i}/${e}`,t);return s.data},v=async(e,t)=>{const s=await o.put(`${i}/${e}/renewCredit`,t);return s.data},y=async(e,t)=>{const s=await o.put(`${i}/${e}/recipient/${t}`);return s.data},b=async e=>{const t=await o.put(`${i}/${e}/rating-plus`);return t.data},w=async e=>{const t=await o.put(`${i}/${e}/rating-minus`);return t.data},B=async(e,t)=>{const s=await o.put(`${i}/${e}/rating-pos`,t);return s.data},C=async(e,t)=>{const s=await o.put(`${i}/${e}/rating-neg`,t);return s.data},A=async(e,t)=>{const s=await o.post(`${i}/${e}/addSlide`,t);return s.data},I=async(e,t)=>{const s=await o.put(`${i}/${e}/updateRange`,t);return s.data};t.A={getProviders:n,getProvider:a,getProvByProvId:r,getProvidersMatchingByProfession:l,addProvider:c,updateProvider:k,updateTimeCredit:v,addRoom:d,removeRoom:u,editAddress:g,editProfession:h,additionalProfession:m,removeProfession:p,addProviderBooking:f,removeProviderBooking:y,setPositiveRating:b,setNegativeRating:w,addPositiveFeedback:B,addNegativeFeedback:C,addProSlide:A,editRange:I}},407:function(e,t,s){"use strict";const o=s(6425),i="/api/recipients",n=async()=>{const e=await o.get(i);return e.data},a=async e=>{const t=await o.get(`${i}/user/${e}`);return t.data},r=async e=>{const t=await o.get(`${i}/booking/${e}`);return t.data},l=async(e,t)=>{const s=await o.post(`${i}/${e}`,t);return s.data},c=async(e,t)=>{const s=await o.put(`${i}/${e}`,t);return s.data},d=async(e,t)=>{const s=await o.put(`${i}/${e}/editBookingAddress`,t);return s.data},u=async(e,t)=>{const s=await o.put(`${i}/${e}/description`,t);return s.data},g=async(e,t)=>{const s=await o.post(`${i}/${e}/addOrdered/${t}`);return s.data},h=async(e,t)=>{const s=await o.put(`${i}/${e}/pro/${t}`);return s.data},m=async(e,t)=>{const s=await o.post(`${i}/${e}/offer/${t}`);return s.data},p=async(e,t)=>{const s=await o.put(`${i}/${e}/updateDate`,t);return s.data},f=async(e,t)=>{const s=await o.post(`${i}/${e}/addImage/${t}`);return s.data},k=async(e,t)=>{const s=await o.delete(`${i}/${e}/image/${t}`);return s.data},v=async(e,t)=>{const s=await o.put(`${i}/client/${e}`,t);return s.data},y=async e=>{await o.delete(`${i}/${e}`)};t.A={getRecipients:n,getOwnBookings:a,getBookingById:r,addRecipient:l,updateRecipient:c,editBookingAddress:d,editDescription:u,addProviderData:g,removeProviderData:h,createOffer:m,newDate:p,addImage:f,removeImage:k,feedbackClient:v,removeBooking:y}},683:function(e,t,s){"use strict";const o=s(6425),i="/api/users",n=async()=>{const e=await o.get(i);return e.data},a=async e=>{const t=await o.post(`${i}`,e);return t.data},r=async(e,t)=>{const s=await o.put(`${i}/${e}/updateEmail`,t);return s.data},l=async e=>{const t=await o.put(`${i}/${e}/removeAvatar`,{avatar:{}});return t.data};t.A={getAll:n,addUser:a,editEmail:r,removeAvatar:l}},1690:function(e,t,s){"use strict";var o=s(7910);const i="https://line-app-pro.onrender.com/",n={"force new connection":!0,reconnectionAttempts:"Infinity",timeout:1e4,transports:["websocket"]},a=o.io.connect(i,n);a.onAny(((e,...t)=>{console.log(e,t)})),t.A=a},1238:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var o=s(6768);const i=["src"],n=["src"];function a(e,t,a,r,l,c){const d=(0,o.g2)("MDBBtn"),u=(0,o.g2)("MDBContainer");return(0,o.uX)(),(0,o.Wv)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(d,{color:"dark",style:{width:"200px",height:"70px","margin-top":"20px"},size:"lg",onClick:t[0]||(t[0]=e=>c.setLanguage("fin"))},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{style:{width:"50px","margin-right":"20px"},src:s(9121),alt:"fin"},null,8,i),t[2]||(t[2]=(0,o.eW)(" Suomi "))])),_:1}),(0,o.bF)(d,{color:"dark",style:{width:"200px",height:"70px","margin-top":"20px"},size:"lg",onClick:t[1]||(t[1]=e=>c.setLanguage("en"))},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{style:{width:"50px","margin-right":"20px"},src:s(1937),alt:"en"},null,8,n),t[3]||(t[3]=(0,o.eW)(" English "))])),_:1})])),_:1})}s(4114);var r=s(5846),l=s(5384),c={name:"Language",components:{MDBContainer:r.Dj,MDBBtn:r.al},data(){const{locale:e}=(0,l.s9)();return(0,o.nT)((()=>{const e=localStorage.getItem("lang");e&&(this.locale=e)})),{locale:e,watchEffect:o.nT}},methods:{setLanguage(e){console.log("New language is "+e),this.locale=e,localStorage.setItem("lang",e),this.$router.push("/")}}},d=s(1241);const u=(0,d.A)(c,[["render",a]]);var g=u},4263:function(e,t,s){"use strict";s.d(t,{A:function(){return W}});var o=s(6768),i=s(4232),n=s(5130);const a={key:0},r={style:{display:"flex","justify-content":"right",padding:"20px"}},l=["src"],c={key:1,class:"panel"},d={style:{"overflow-y":"auto"},class:"messages",ref:"chatArea"},u={class:"inner",ref:"refscrollHeight"},g={class:"messagesBody"},h={key:0,class:"messageRow"},m={class:"displayName"},p={class:"messageBlue"},f={key:0},k=["src","onClick"],v={class:"messageContent"},y={class:"messageTimeStampRight"},b={key:1,class:"messageRowRight"},w={class:"messageOrange"},B={key:0},C=["src","onClick"],A={class:"messageContent"},I={class:"messageTimeStampRight"},x={key:2,style:{border:"1px solid blue",padding:"20px"}},S={style:{display:"flex","justify-content":"right"}},D=["src"],P={for:"file-upload",class:"custom-image-upload"},R=["placeholder"],M=["disabled"],U=["src"];function L(e,t,L,_,$,O){const E=(0,o.g2)("MDBIcon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[$.isImageZoom?((0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",r,[(0,o.Lk)("p",{style:{cursor:"pointer"},onClick:t[0]||(t[0]=e=>$.isImageZoom=!1)},"Valmis")]),(0,o.Lk)("img",{src:s(8748)(`./${this.imageToZoom}`)},null,8,l)])):(0,o.Q3)("",!0),$.userIn?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",d,[(0,o.Lk)("div",u,[(0,o.Lk)("div",null,[(0,o.Lk)("div",null,[(0,o.Lk)("div",g,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(L.messages,((e,n)=>((0,o.uX)(),(0,o.CE)("div",{key:n},[e.userID!==$.userIn.id?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",null,[(0,o.Lk)("div",m,[(0,o.bF)(E,{size:"2x"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.Lk)("i",{class:"fas fa-user-circle"},null,-1)]))),_:1}),(0,o.eW)(" "+(0,i.v_)(e.username),1)]),(0,o.Lk)("div",p,[(0,o.Lk)("div",null,["file"===e.content.msg_status?((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("img",{style:{width:"160px",cursor:"pointer"},src:e.is_db_image?s(8748)(`./${e.image}`):e.image,onClick:t=>O.zoomChatImage(e.image)},null,8,k)])):(0,o.Q3)("",!0),(0,o.Lk)("p",v,(0,i.v_)(e.content.body),1)]),(0,o.Lk)("div",y,(0,i.v_)(e.date),1)])])])):((0,o.uX)(),(0,o.CE)("div",b,[(0,o.Lk)("div",w,["file"===e.content.msg_status?((0,o.uX)(),(0,o.CE)("div",B,[(0,o.Lk)("img",{style:{width:"160px"},src:e.is_db_image?s(8748)(`./${e.image}`):e.image,onClick:t=>O.zoomChatImage(e.image)},null,8,C)])):(0,o.Q3)("",!0),(0,o.Lk)("p",A,(0,i.v_)(e.content.body),1),(0,o.Lk)("div",I,(0,i.v_)(e.date),1)])]))])))),128))])])])],512)],512)])):(0,o.Q3)("",!0),$.files?((0,o.uX)(),(0,o.CE)("div",x,[(0,o.Lk)("div",S,[(0,o.Lk)("h4",{style:{cursor:"pointer"},onClick:t[1]||(t[1]=e=>$.files=null)},"X")]),(0,o.Lk)("img",{style:{width:"300px"},src:$.blob},null,8,D)])):(0,o.Q3)("",!0),(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,n.D$)(((...e)=>O.onSubmit&&O.onSubmit(...e)),["prevent"]))},[(0,o.Lk)("input",{id:"file-upload",type:"file",onChange:t[2]||(t[2]=e=>O.handleImageChange(e))},null,32),(0,o.Lk)("label",P,[(0,o.bF)(E,null,{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.Lk)("i",{class:"far fa-image"},null,-1)]))),_:1})]),(0,o.bo)((0,o.Lk)("textarea",{style:{padding:"20px","background-color":"#292424",color:"ghostwhite"},id:"myInput","onUpdate:modelValue":t[3]||(t[3]=e=>$.msg=e),onKeypress:t[4]||(t[4]=(...e)=>O.handleInput&&O.handleInput(...e)),ref:"textarea",placeholder:$.files?"Lisää kuvaan kuvaus...":"Kirjoita viesti..."},"    ",40,R),[[n.Jo,$.msg]]),(0,o.Lk)("button",{disabled:!O.isValid,class:"sender"},[(0,o.Lk)("img",{class:(0,i.C4)({"sender-btn-disabled":!O.isValid}),alt:"send",src:s(8802)},null,10,U)],8,M)],32)],64)}s(6573),s(8100),s(7936),s(7467),s(4732),s(9577),s(4603),s(7566),s(8721);var _=s(5846),$=s(2815),O=s(4474),E=s(1690),N=s(144),j={name:"MessagePanel",components:{MDBIcon:_.$u,MDBBtnClose:_.uR},props:{test:Boolean,user:Object,messages:Array,initMessages:Array},data(){return{userIn:null,msg:"",files:null,filename:"",blob:null,imageSearch:null,imageToZoom:null,isImageZoom:!1,expand_message:!0}},setup(){let e=(0,N.KR)(null),t=(0,N.KR)(null);const s=()=>{(0,o.dY)((()=>{e.value.scrollTo({behavior:"smooth",top:t.value.clientHeight})}))};return(0,o.$u)(s),{update:s,chatArea:e,refscrollHeight:t}},watch:{messages:async function(){console.log("Watching..."),await this.scrollToEnd()}},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.userIn=t,document.getElementById("myInput").style.height="40px"}},methods:{resize(){let e=this.$refs["textarea"];e.style.height="20px",e.style.height=e.scrollHeight+"px"},btnClick(){this.expand_message=!this.expand_message},handleInput(e){if(console.log("E "+e.key),console.log("xxx "+e.target.style.height),"Enter"===e.key)console.log("Offset"),e.preventDefault(),this.onSubmit(),document.getElementById("myInput").value="";else{let e=this.$refs["textarea"];e.style.height="20px",e.style.height=e.scrollHeight+"px"}},handleImageChange(e){const t=e.target.files[0];t&&(this.files=e.target.files[0],this.filename=e.target.files[0].name,console.log("File name "+this.files.name),this.blob=URL.createObjectURL(t))},async onSubmit(){const e=new Date,t=new FileReader;if(this.files){console.log("Files before - "+this.files.name);const s=new FormData;s.append("file",this.files,this.files.name);const o=await O.A.createChatImage(s);console.log("Image result _ "+o.imgCreated.name),t.onload=t=>{const s=new Uint8Array(t.target.result);console.log("Files "+this.files),this.$emit("new:message",{msg_status:"file",body:this.msg},this.blob,(0,$.Ay)(e,"dd-mm-yyyy,  HH:MM")),E.A.emit("private server message",{content:{msg_status:"file",body:this.msg},img:s,file:o.imgCreated.name,date:(0,$.Ay)(e,"dd-mm-yyyy,  HH:MM"),to:this.user.userID}),this.msg=""},t.readAsArrayBuffer(this.files),this.files=null}else{const t={msg_status:"text",body:this.msg};this.$emit("new:message",t,this.blob,(0,$.Ay)(e,"dd-mm-yyyy,  HH:MM")),E.A.emit("private server message",{content:{msg_status:"text",body:this.msg},img:null,file:null,date:(0,$.Ay)(e,"dd-mm-yyyy,  HH:MM"),to:this.user.userID}),this.msg=""}},zoomChatImage(e){console.log("Zooming chat image!"),this.imageToZoom=e,this.isImageZoom=!0},displaySender(e,t){return 0===t||this.user.messages[t-1].fromSelf!==this.user.messages[t].fromSelf},async scrollToEnd(){try{if(this.messages&&this.messages.length>0){console.log(" Is in end ------------ "+this.messages.length);const e=await this.messages[this.messages.length-1].id;document.getElementById(e).scrollIntoView({block:"start"})}}catch(e){console.log(e)}}},computed:{isValid(){return this.msg.length>0}}},F=s(1241);const T=(0,F.A)(j,[["render",L],["__scopeId","data-v-9518f416"]]);var W=T},9621:function(e,t,s){"use strict";s.d(t,{A:function(){return k}});var o=s(6768),i=s(4232);const n={class:"description"},a={key:0,class:"status"};function r(e,t,s,r,l,c){const d=(0,o.g2)("status-icon");return s.user.self?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,i.C4)(["user",{selected:s.selected}]),onClick:t[0]||(t[0]=(...e)=>c.onClick&&c.onClick(...e))},[(0,o.Lk)("div",n,[s.user.self?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",a,[(0,o.bF)(d,{user:s.user,connected:s.user.connected},null,8,["user","connected"])]))])],2))}const l={style:{"font-size":"18px",color:"#9ba2a4"}};function c(e,t,s,n,a,r){const c=(0,o.g2)("MDBIcon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[1]||(t[1]=(0,o.Lk)("div",null,null,-1)),(0,o.Lk)("p",l,[(0,o.bF)(c,{size:"2x"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.Lk)("i",{class:"fas fa-user-circle"},null,-1)]))),_:1}),(0,o.eW)(" "+(0,i.v_)(s.user.username)+" ",1),(0,o.Lk)("i",{class:(0,i.C4)(["icon",{connected:s.connected}]),style:{padding:"10px","margin-left":"10px"}},null,2)])],64)}var d=s(5846),u={name:"StatusIcon",components:{MDBIcon:d.$u},props:{connected:Boolean,user:Object},data(){return{avatar:null,chatavatar:null}},methods:{},async mounted(){}},g=s(1241);const h=(0,g.A)(u,[["render",c],["__scopeId","data-v-06c40d02"]]);var m=h,p={name:"chat-user",components:{StatusIcon:m},props:{user:Object,firstUser:String,selected:Boolean},data(){return{isChatOpen:!1}},methods:{onClick(){this.$emit("select")},setUserNotSelected(){this.$emit("noSelected")}},computed:{status(){return this.user.connected?"Aloita chattailu":"Olen offline-tilassa Jätä viesti"}}};const f=(0,g.A)(p,[["render",r],["__scopeId","data-v-1ac24d69"]]);var k=f},222:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var o=s(6768);const i={key:0,style:{"text-align":"center"}},n={key:1},a={key:2},r=["data-lg-size","data-src"],l=["src"];function c(e,t,s,c,d,u){const g=(0,o.g2)("lightgallery"),h=(0,o.g2)("MDBBtn"),m=(0,o.g2)("MDBContainer");return(0,o.uX)(),(0,o.Wv)(m,{style:{"padding-top":"150px"}},{default:(0,o.k6)((()=>[s.inspectingBooking?((0,o.uX)(),(0,o.CE)("h2",n,"Kuvat tehtävästä")):((0,o.uX)(),(0,o.CE)("h2",i,"Kuvia tehtyistä työistä")),s.isPro?((0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("input",{id:"pro-file-upload",type:"file",onChange:t[0]||(t[0]=t=>u.handleFileChange(t,e.i))},null,32),t[1]||(t[1]=(0,o.Lk)("label",{for:"pro-file-upload",class:"pro-file-upload"},[(0,o.Lk)("span",null,"Lataa uusi kuva tehtävästä")],-1))])):(0,o.Q3)("",!0),(0,o.bF)(g,{style:{"text-align":"left"},id:"update",settings:{speed:500,plugins:d.plugins},onInit:u.onInit,onBeforeSlide:u.onBeforeSlide},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.proImages,((e,t)=>((0,o.uX)(),(0,o.CE)("a",{key:t,"data-lg-size":e.size,class:"gallery-item","data-src":e.src},[(0,o.Lk)("img",{style:{"margin-bottom":"10px",width:"140px","margin-left":"0"},class:"img-responsive",alt:"Image",src:e.thumb},null,8,l)],8,r)))),128))])),_:1},8,["settings","onInit","onBeforeSlide"]),d.isImageEdited||d.removedImages.length>0?((0,o.uX)(),(0,o.Wv)(h,{key:3,block:"",color:"success",size:"lg",onClick:u.uploadProSlides},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("Vahvista tehtyt muokkaukset ja sulje")]))),_:1},8,["onClick"])):(0,o.Q3)("",!0)])),_:1})}s(4603),s(7566),s(8721);var d=s(1769),u=s(5374),g=s.n(u),h=s(9185),m=s(4474),p=s(5846);let f=null;var k={name:"Gallery",props:{isPro:Boolean,inspectingBooking:Boolean,userIsProvider:Object,proImages:Array},components:{Lightgallery:g(),MDBContainer:p.Dj,MDBBtn:p.al},watch:{proImages(e,t){this.$nextTick((()=>{f.refresh()}))}},data(){return{pro:null,showImage:null,file:null,value:null,plugins:[h.A],height:" 100px",id:null,index:1,isImageEdited:!1,images:[],addedSlides:[],removedImages:[],items:[{id:"1",size:"1400-933",src:"https://images.unsplash.com/photo-1542103749-8ef59b94f47e?ixid=MXwxMjA3fDB8MH,xwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1400&q=80",thumb:"https://images.unsplash.com/photo-1542103749-8ef59b94f47e?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=240&q=80",subHtml:'<div class="lightGallery-captions">\n                <h4>Photo by <a href="https://unsplash.com/@dann">Dan</a></h4>\n                <p>Published on November 13, 2018</p>\n            </div>'},{id:"2",size:"1400-933",src:"https://images.unsplash.com/photo-1473876988266-ca0860a443b8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1400&q=80",thumb:"https://images.unsplash.com/photo-1473876988266-ca0860a443b8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=240&q=80",subHtml:'<div class="lightGallery-captions">\n                <h4>Photo by <a href="https://unsplash.com/@kylepyt">Kyle Peyton</a></h4>\n                <p>Published on September 14, 2016</p>\n            </div>'},{id:"3",size:"1400-932",src:"https://images.unsplash.com/photo-1588953936179-d2a4734c5490?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1400&q=80",thumb:"https://images.unsplash.com/photo-1588953936179-d2a4734c5490?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=240&q=80",subHtml:'<div class="lightGallery-captions">\n                <h4>Photo by <a href="https://unsplash.com/@jxnsartstudio">Garrett Jackson</a></h4>\n                <p>Published on May 8, 2020</p>\n            </div>'},{id:"4",size:"1000-400",src:s(4368),thumb:s(4368),subHtml:'<div class="lightGallery-captions">\n\n\n            </div>"'}]}},beforeMount(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.pro=t}},methods:{async handleProvider(e){},async getImageDimensions(e){let t=new Image;t.src=URL.createObjectURL(e),await t.decode();let s=t.width,o=t.height;return{width:s,height:o}},handleFileChange(e,t){console.log("i in file change "+t);try{const t=e.target.files[0];console.log("event target client ",e.target.files[0]);const s=new FormData;if(t){URL.createObjectURL(t);this.showImage=URL.createObjectURL(t);const o=URL.createObjectURL(t);this.file=e.target.files[0];const i=e.target.files[0];s.append("file",i,i.name),this.getImageDimensions(i).then((e=>{const t={width:e.width,height:e.height},i={id:null,size:e.width+"-"+e.height,data:s,src:o,thumb:o,subHtml:'<div class="lightGallery-captions">\n\n\n            </div>"'};this.$emit("add:slide",i,t)})),this.isImageEdited=!0}}catch(s){console.log("Error:",s)}this.value=e.target.files[0]},async updateSlides(e){let t=await m.A.createProRefImg(this.userIsProvider.id,e.data);await d.A.addProSlide(this.userIsProvider.id,{slideID:t.imgCreated._id}),console.log("lkdfanvoöinaeäofvnaespvns ")},uploadProSlides(){this.$router.go(-1),this.$emit("updateGalleryRemove",this.removedImages);for(let e=0;e<this.proImages.length;e++)null===this.proImages[e].id&&this.updateSlides(this.proImages[e])},onInit(e){if(console.log("Details "+e.instance.index),f=e.instance,this.isPro){const e='<button style="margin-left: 100px; color: #ddd; background-color: red;" type="button" aria-label="View source" id="lg-delete">Poista kuva</button>';f.outer.find(".lg-toolbar").append(e),document.getElementById("lg-delete").addEventListener("click",(()=>{console.log("custom button click "+this.index);const e=this.proImages[this.index].id;e&&(this.removedImages=[...this.removedImages,e]),console.log("Image id "+e),this.$emit("remove:slide",e,this.index),console.log("prov id... "+this.userIsProvider.id);const t=f;t.closeGallery(),t.refresh()}))}},onBeforeSlide(e){console.log("calling before slide "+typeof e.index);let t=e.index;console.log("Tasku "+t+typeof t),this.index=t}}},v=s(1241);const y=(0,v.A)(k,[["render",c],["__scopeId","data-v-1e189e23"]]);var b=y},6510:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var o=s(6768);const i={key:0};function n(e,t,s,n,a,r){const l=(0,o.g2)("User"),c=(0,o.g2)("MessagePanel"),d=(0,o.g2)("MDBContainer");return(0,o.uX)(),(0,o.Wv)(d,{style:{}},{default:(0,o.k6)((()=>[(0,o.Lk)("div",null,[s.chatusers.length>0?((0,o.uX)(),(0,o.CE)("div",i,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.chatusers,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t},[(0,o.bF)(l,{user:e,selected:s.selecteduser===e,onNoSelected:r.noSelected,onSelect:t=>r.selectUser(e)},null,8,["user","selected","onNoSelected","onSelect"])])))),128)),s.selecteduser?((0,o.uX)(),(0,o.Wv)(c,{key:0,test:s.test,user:s.selecteduser,messages:s.messages,"onNew:message":r.onMessage},null,8,["test","user","messages","onNew:message"])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])])),_:1})}s(4114);var a=s(5846),r=s(9621),l=s(4263),c=s(1690),d=s(6732),u={name:"live-chat",props:{creditLeft:null,userIsProvider:null,isSelectedByExpiredUser:Boolean,test:Boolean,selecteduser:null,chatusers:Array,isAccessDenied:Boolean,messages:Array,newMessageRoom:String,loggedInUser:Object,bookings:Array,bookingsHistory:Array,un:String,ri:String},components:{User:r.A,MessagePanel:l.A,infoMessage:d.A,MDBContainer:a.Dj},data(){return{tabFocus:!1,user:{},selectedUser:null,users:[],msg:"",messageAboutCredit:"Lataa lisää aikaa!",userId:null,username:"",room:"",count:0}},created(){},watch:{tabFocus(e){console.log("New value:",e)}},methods:{lataa(){this.$router.push("/pay-plan")},sendMessage:function(){""!==this.msg&&(c.A.emit("msg",this.msg),this.msg="")},startChat(){let e="userdialog",t="eka";c.A.emit("credentials",{userID:this.loggedUser.id,username:t,room:e})},submit(){},selectUser(e){this.$emit("select:user",e),this.selectedUser=e},noSelected(){this.$emit("noSelected")},onMessage(e,t,s){this.$emit("on:message",e,t,s)},renderChat(){this.count++},newChat(){console.log("Aaaaaaaa");let e="alla",t="tuba";this.usernameAlreadySelected=!0,c.A.auth={username:e,room:t},c.A.connect()},onUsernameSelection(e,t){this.username=e,this.room=t,this.usernameAlreadySelected=!0,c.A.auth={username:e,room:t},c.A.connect()},updateRoom(){c.A.emit("updateRoom","uus-tuba"),c.A.on("get room users",(e=>{this.users=e})),this.socketResetTest()},removeChatUser(){console.log("Remove chat user"),c.A.emit("unsubscribe"),window.localStorage.removeItem("sessionID"),c.A.on("get room users",(e=>{this.users=e})),location.reload()}},computed:{isValid(){return this.msg.length>0}},mounted(){},unmounted(){"/chat"!==this.currentRouteName&&(this.noSelected(),console.log("Ei ole see router"))}},g=s(1241);const h=(0,g.A)(u,[["render",n],["__scopeId","data-v-5c25fce4"]]);var m=h},910:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Q}});s(4114);var o=s(6768),i=s(4232);const n={key:0,class:"spinner-border",role:"status"},a={key:1},r=["onClick"],l={style:{display:"flex","justify-content":"right",color:"deepskyblue"}},c=["onClick"],d={style:{display:"flex","justify-content":"right",color:"deepskyblue"}},u={key:2};function g(e,t,s,g,h,m){const p=(0,o.g2)("MDBBtnClose"),f=(0,o.g2)("monthConverter"),k=(0,o.g2)("MDBCol"),v=(0,o.g2)("Booking"),y=(0,o.g2)("MDBRow"),b=(0,o.g2)("MDBContainer");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(b,{style:{"margin-top":"100px",position:"relative"}},{default:(0,o.k6)((()=>[0===s.bookings.length?((0,o.uX)(),(0,o.CE)("div",n,t[2]||(t[2]=[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...",-1)]))):((0,o.uX)(),(0,o.CE)("div",a,[(0,o.bF)(p,{white:"",class:"close_btn",onClick:m.backFromProNotifications},null,8,["onClick"]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.bookings.length>0?s.bookings:h.allBookings,((n,a)=>((0,o.uX)(),(0,o.Wv)(y,{key:a,style:{"margin-bottom":"10px",padding:"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(k,{style:{border:"1px solid #ddd",padding:"30px","font-size":"18px"},sm:"4",class:(0,i.C4)([{activeHeader:a===h.bookingIndex&&h.isBooking}])},{default:(0,o.k6)((()=>["notSeen"===n.status?((0,o.uX)(),(0,o.CE)("span",{key:0,class:(0,i.C4)({"strong-tilt-move-shake":h.isNoLimit&&a===h.bookingIndex})},[(0,o.Lk)("span",{class:"new_notification",onClick:e=>m.messageSeen(n,a)},[t[3]||(t[3]=(0,o.eW)(" ( ")),(0,o.Lk)("b",null,(0,i.v_)(n.user.username),1),t[4]||(t[4]=(0,o.eW)(" ) ")),(0,o.bF)(f,{num:n.onTime[0].month},null,8,["num"]),(0,o.eW)(" "+(0,i.v_)(n.onTime[0].day)+" "+(0,i.v_)(n.onTime[0].year)+" - "+(0,i.v_)(n.header)+" ",1),(0,o.Lk)("span",l,(0,i.v_)(n.isIncludeOffers?"offered"===n.status?"Tarjous lähetetty":"Lähetä tarjous":"Varmista tilaus"),1)],8,r)],2)):((0,o.uX)(),(0,o.CE)("span",{key:1,class:(0,i.C4)({"strong-tilt-move-shake":h.isNoLimit&&a===h.bookingIndex})},[(0,o.Lk)("span",{class:"seen_notification",onClick:e=>m.messageSeen(n,a)},[t[5]||(t[5]=(0,o.eW)(" ( ")),(0,o.Lk)("b",null,(0,i.v_)(n.user.username),1),t[6]||(t[6]=(0,o.eW)(" ) ")),(0,o.bF)(f,{num:n.onTime[0].month},null,8,["num"]),(0,o.eW)(" "+(0,i.v_)(n.onTime[0].day)+" "+(0,i.v_)(n.onTime[0].year)+" - "+(0,i.v_)(n.header)+" ",1),(0,o.Lk)("span",d,(0,i.v_)(n.isIncludeOffers?"offered"===n.status?"Tarjous lähetetty":"Lähetä tarjous":"Varmista tilaus"),1)],8,c)],2))])),_:2},1032,["class"]),(0,o.bF)(k,{sm:"8"},{default:(0,o.k6)((()=>[h.isNoLimitText&&a===h.bookingIndex?((0,o.uX)(),(0,o.CE)("h4",{key:0,style:{color:"palevioletred","text-underline":"cornflowerblue",cursor:"pointer","margin-top":"10px"},onClick:t[0]||(t[0]=t=>e.$router.push("/pay-plan"))}," Lataa lisää aikaa täältä ")):(0,o.Q3)("",!0),h.isBooking&&a===h.bookingIndex?((0,o.uX)(),(0,o.Wv)(v,{key:1,booking:n,bookingImages:h.bookingImages,"onSet:room":m.handleSetRoom,"onCreate:offer":m.handleCreateOffer,selected_room:h.room,chatusers:s.chatusers,messages:s.messages,"onSelect:user":m.selectUser,onNoSelected:m.noSelected,selecteduser:s.selecteduser,"onOn:message":m.onMessage,"onClose:booking":m.handleCloseBooking,"onConfirm:booking":m.handleConfirmBooking,"onReject:booking":m.handleRejectBooking},null,8,["booking","bookingImages","onSet:room","onCreate:offer","selected_room","chatusers","messages","onSelect:user","onNoSelected","selecteduser","onOn:message","onClose:booking","onConfirm:booking","onReject:booking"])):s.creditLeft<0&&a===h.bookingIndex?((0,o.uX)(),(0,o.CE)("div",u,[t[7]||(t[7]=(0,o.Lk)("h2",null,"Rajoitettu pääsy!",-1)),(0,o.Lk)("p",{style:{color:"orangered",cursor:"pointer"},onClick:t[1]||(t[1]=t=>e.$router.push("/pay-plan"))}," Lataa lisää aikaa ")])):(0,o.Q3)("",!0)])),_:2},1024)])),_:2},1024)))),128))]))])),_:1})])}var h=s(5846),m=s(144),p=s(8614),f=s(6765),k=s(407),v=s(1769),y=s(9621),b=s(4263);function w(e,t,s,i,n,a){const r=(0,o.g2)("user"),l=(0,o.g2)("message-panel");return(0,o.uX)(),(0,o.CE)("div",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.users,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,style:{width:"300px",margin:"auto","margin-bottom":"5px","border-radius":"5px"}},[(0,o.Lk)("p",null,[t.self?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(r,{key:0,user:t,firstUser:e.userFirst,selected:n.selectedUser===t,onSelect:e=>a.onSelectUser(t)},null,8,["user","firstUser","selected","onSelect"]))])])))),128)),n.selectedUser?((0,o.uX)(),(0,o.Wv)(l,{key:0,user:n.selectedUser,initMessages:n.initMessages,"onNew:message":a.onMessage},null,8,["user","initMessages","onNew:message"])):(0,o.Q3)("",!0)])}var B=s(1690),C={name:"chat-io",props:{me:Object,uname:String,rm:String,isUserRemoved:Boolean},components:{User:y.A,MessagePanel:b.A},data(){return{selectedUser:null,users:[],room:"",firstUser:"",user:!0,initMessages:{}}},methods:{onMessage(e,t){this.selectedUser&&(console.log("Selected user: "+this.selectedUser.username),B.A.emit("private message",{content:e,date:t,to:this.selectedUser.userID}),this.selectedUser.messages.push({content:e,date:t,fromSelf:!0}))},onSelectUser(e){e.self||(this.selectedUser=e),e.hasNewMessages=!1}},mounted(){B.A.on("init messages",(e=>{this.initMessages=e.messages}))},beforeMount(){},created(){B.A.on("init messages",(e=>{this.initMessages=e.messages})),B.A.on("connect",(()=>{this.users.forEach((e=>{e.self&&(e.connected=!0)}))})),B.A.on("disconnect",(()=>{this.users.forEach((e=>{e.self&&(e.connected=!1)}))}));const e=e=>{this.initMessages.length>0&&(console.log("Room vvvvvv"+this.initMessages[0].room),this.room=this.initMessages[0].room),e.room===this.room?e.messages=this.initMessages:e.messages=[],e.hasNewMessages=!1};B.A.on("get room users",(t=>{console.log("Room users: "+t.users.map((e=>e.username))),t.users.forEach((t=>{for(let e=0;e<this.users.length;e++){const s=this.users[e];if(s.userID===t.userID)return void(s.connected=t.connected)}t.self=t.userID===B.A.userID,e(t),this.users.push(t)})),this.users.sort(((e,t)=>e.self?-1:t.self?1:e.username<t.username?-1:e.username>t.username?1:0))})),B.A.on("get updated room users",(t=>{this.users=[],t.users.forEach((t=>{for(let e=0;e<this.users.length;e++){const s=this.users[e];if(s.userID===t.userID)return void(s.connected=t.connected)}t.self=t.userID===B.A.userID,t.self||(this.selectedUser=t),e(t),this.users.push(t)})),this.users.sort(((e,t)=>e.self?-1:t.self?1:e.username<t.username?-1:e.username>t.username?1:0))})),B.A.on("user connected",(t=>{for(let e=0;e<this.users.length;e++){const s=this.users[e];if(s.userID===t.userID)return void(s.connected=!0)}e(t),this.users.push(t)})),B.A.on("user disconnected",(e=>{for(let t=0;t<this.users.length;t++){const s=this.users[t];if(s.userID===e){s.connected=!1;break}}})),B.A.on("private message",(({content:e,date:t,from:s,to:o})=>{for(let i=0;i<this.users.length;i++){const n=this.users[i],a=B.A.userID===s;if(n.userID===(a?o:s)){n.messages.push({content:e,date:t,fromSelf:a}),n!==this.selectedUser&&(n.hasNewMessages=!0);break}}}))},unmounted(){B.A.off("connect"),B.A.off("disconnect"),B.A.off("users"),B.A.off("user connected"),B.A.off("user disconnected"),B.A.off("private message")}},A=s(1241);const I=(0,A.A)(C,[["render",w],["__scopeId","data-v-c22e0ffa"]]);var x=I,S=s(6510);const D={style:{border:"solid blue"}},P={key:0},R={key:1,style:{"margin-bottom":"20px"}},M={key:0},U={key:0,style:{padding:"13px","margin-top":"13px",border:"1px solid blue","margin-bottom":"20px"}},L={style:{display:"flex","justify-content":"right","margin-bottom":"7px"}},_={key:2,style:{"margin-bottom":"20px"}},$={key:0,style:{padding:"13px","margin-top":"13px",border:"1px solid blue"}},O={style:{display:"flex","justify-content":"right","margin-bottom":"7px"}};function E(e,t,s,n,a,r){const l=(0,o.g2)("MDBBtnClose"),c=(0,o.g2)("MDBBtn"),d=(0,o.g2)("MDBTable"),u=(0,o.g2)("live-chat"),g=(0,o.g2)("MDBInput"),h=(0,o.g2)("MDBTextarea");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(d,{borderless:"",style:{"font-size":"18px",color:"#dddddd","text-align":"center"}},{default:(0,o.k6)((()=>[(0,o.Lk)("tbody",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("td",null,[(0,o.eW)((0,i.v_)(s.booking.address)+" ",1),(0,o.bF)(l,{white:"",class:"closeData",onClick:r.closeBooking},null,8,["onClick"])])]),(0,o.Lk)("tr",null,[(0,o.Lk)("td",D,(0,i.v_)(s.booking.description),1)]),t[12]||(t[12]=(0,o.Lk)("tr",null,null,-1)),(0,o.Lk)("tr",null,[s.booking.image&&s.booking.image.length>0?((0,o.uX)(),(0,o.CE)("td",P,[a.isImageOpen?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(c,{key:0,outline:"success",onClick:t[0]||(t[0]=e=>r.openImagePanel(s.booking.image))},{default:(0,o.k6)((()=>t[10]||(t[10]=[(0,o.eW)(" Open image ")]))),_:1})),(0,o.Lk)("div",null,[a.isImageOpen?((0,o.uX)(),(0,o.Wv)(c,{key:0,outline:"secondary",onClick:r.closeImagePanel},{default:(0,o.k6)((()=>t[11]||(t[11]=[(0,o.eW)(" Close image ")]))),_:1},8,["onClick"])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)]),t[13]||(t[13]=(0,o.Lk)("tr",null,[(0,o.Lk)("td")],-1)),t[14]||(t[14]=(0,o.Lk)("tr",null,[(0,o.Lk)("td")],-1)),(0,o.Lk)("tr",null,[(0,o.Lk)("td",null,[(0,o.bF)(c,{outline:"info",onClick:r.pressOpenChat,size:"lg",style:{float:"right"}},{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(a.isOpenChat?"Sulje chat paneeli":"Avaa chat paneeli"),1)])),_:1},8,["onClick"])])])])])),_:1}),a.isOpenChat?((0,o.uX)(),(0,o.Wv)(u,{key:0,chatusers:s.chatusers,messages:s.messages,"onSelect:user":r.selectUser,onNoSelected:r.noSelected,selecteduser:s.selecteduser,"onOn:message":r.onMessage},null,8,["chatusers","messages","onSelect:user","onNoSelected","selecteduser","onOn:message"])):(0,o.Q3)("",!0),s.booking.isIncludeOffers?((0,o.uX)(),(0,o.CE)("div",R,["offered"!==s.booking.status?((0,o.uX)(),(0,o.CE)("div",M,[(0,o.bF)(c,{block:"",outline:"primary",size:"lg",onClick:t[1]||(t[1]=e=>a.isOffer=!0)},{default:(0,o.k6)((()=>t[15]||(t[15]=[(0,o.eW)(" Tee Hintatarjous ")]))),_:1}),a.isOffer?((0,o.uX)(),(0,o.CE)("div",U,[(0,o.Lk)("div",L,[(0,o.bF)(l,{white:"",onClick:t[2]||(t[2]=e=>a.isOffer=!1)})]),(0,o.bF)(g,{white:"",type:"number",label:"Tarjoa hintasi",modelValue:a.priceOffer,"onUpdate:modelValue":t[3]||(t[3]=e=>a.priceOffer=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,o.bF)(h,{white:"",style:{},label:"Anna tarvittaessa lisäselvityksiä...",rows:"3",modelValue:a.aboutOffer,"onUpdate:modelValue":t[4]||(t[4]=e=>a.aboutOffer=e)},null,8,["modelValue"]),a.priceOffer?((0,o.uX)(),(0,o.Wv)(c,{key:0,label:"Anna hintatarjous",block:"",size:"lg",outline:"success",style:{"margin-top":"12px"},onClick:t[5]||(t[5]=e=>r.createOffer(s.booking))},{default:(0,o.k6)((()=>t[16]||(t[16]=[(0,o.eW)(" Lähetä ")]))),_:1})):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),(0,o.bF)(c,{block:"",outline:"danger",size:"lg"},{default:(0,o.k6)((()=>t[17]||(t[17]=[(0,o.eW)("Poista tilaus")]))),_:1})])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",_,[(0,o.bF)(c,{block:"",outline:"success",size:"lg",onClick:t[6]||(t[6]=e=>r.confirmBooking(s.booking))},{default:(0,o.k6)((()=>t[18]||(t[18]=[(0,o.eW)(" Varmista tilaus ")]))),_:1}),a.isQuitClientBooking?((0,o.uX)(),(0,o.CE)("div",$,[(0,o.Lk)("div",O,[(0,o.bF)(l,{white:"",onClick:t[7]||(t[7]=e=>a.isQuitClientBooking=!1)})]),(0,o.bF)(h,{white:"",style:{},label:"Anna syy...",rows:"3",modelValue:a.reason,"onUpdate:modelValue":t[8]||(t[8]=e=>a.reason=e)},null,8,["modelValue"]),a.reason.length>1?((0,o.uX)(),(0,o.Wv)(c,{key:0,block:"",size:"lg",outline:"success",style:{"margin-top":"12px"},onClick:t[9]||(t[9]=e=>r.confirmRejectBooking(s.booking))},{default:(0,o.k6)((()=>t[19]||(t[19]=[(0,o.eW)(" Varmista ")]))),_:1})):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),a.isQuitClientBooking?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(c,{key:1,block:"",outline:"danger",size:"lg",onClick:r.rejectBooking},{default:(0,o.k6)((()=>t[20]||(t[20]=[(0,o.eW)(" Poista tilaus ")]))),_:1},8,["onClick"]))])),t[21]||(t[21]=(0,o.Lk)("div",null,null,-1))],64)}var N=s(222),j={name:"Booking",props:{booking:Object,bookingImages:Array,selected_room:String,selecteduser:null,chatusers:Array,messages:Array},components:{LiveChat:S["default"],Gallery:N["default"],MDBTable:h.EU,MDBBtn:h.al,MDBBtnClose:h.uR,MDBTextarea:h.QP,MDBInput:h.gk},data(){return{test:null,isOffer:!1,priceOffer:null,aboutOffer:null,isOpenImage:!1,isImageOpen:!1,srcImg:"",reason:"",isOpenChat:!1,isQuitClientBooking:!1}},mounted(){},methods:{pressOpenChat(){this.$emit("set:room",this.selected_room),console.log("Selected room - "+this.selected_room),B.A.emit("update room",this.selected_room),this.isOpenChat=!this.isOpenChat},getBooking(e){console.log("Booking user "+e.booking.id)},selectUser(e){this.$emit("select:user",e)},noSelected(){this.$emit("noSelected")},onMessage(e,t){this.$emit("on:message",e,t)},openImagePanel(e){this.isOpenImage=!0,this.srcImg=s(9298)(`./${e.map((e=>e.name))}`),""!==this.srcImg&&(this.isImageOpen=!0)},closeImagePanel(){this.isOpenImage=!1,this.isImageOpen=!1},async createOffer(e){const t=await k.A.getBookingById(e.id);this.test=t,console.log("Creating offer id xx "+t.user.id),this.isOffer=!1,this.$emit("create:offer",this.priceOffer,this.aboutOffer,t)},confirmBooking(e){console.log("Booking header "+e.header),this.$emit("confirm:booking",e)},closeBooking(){this.$emit("close:booking"),this.noSelected()},rejectBooking(){this.isQuitClientBooking=!0},confirmRejectBooking(e){this.$emit("reject:booking",e,this.reason),this.noSelected()}}};const F=(0,A.A)(j,[["render",E],["__scopeId","data-v-17ff477a"]]);var T=F,W=s(7104),X=s(1414),H=s(2456),V={name:"client-notifications",props:{bookings:Array,chatusers:Array,activeUser:null,selecteduser:null,creditLeft:null,messages:Array,loggedInUser:Object,userIsProvider:Object,room:String},components:{User:y.A,MessagePanel:b.A,PulseLoader:p.A,monthConverter:f.A,TabView:W.A,TabPanel:X.A,chatContent:x,liveChat:S["default"],Booking:T,MDBContainer:h.Dj,MDBRow:h.gU,MDBCol:h.m6,MDBListGroup:h.lC,MDBListGroupItem:h._N,MDBTabs:h.w6,MDBTabNav:h.E2,MDBTabItem:h.Yc,MDBTabContent:h._1,MDBTabPane:h.Vj,MDBTable:h.EU,MDBBtnClose:h.uR,MDBBtn:h.al},setup(){const e=(0,m.KR)("null");return{activeTabId4:e}},data(){return{selectedUser:null,userIn:null,allBookings:[],proBookings:this.bookings,providerID:null,selectedPro:"",isBooking:!1,isOfferCreated:!1,bookingID:null,pressed:!1,bookingIndex:null,booking:{},bookingImages:[],currentRoom:"",isAccessTerminated:!1,bookingDate:null,isSeen:!1,isOpenImage:!1,isImageOpen:!1,srcImg:"",isChatOpen:!1,isRenderData:!1,loading:!1,id:null,un:"sanna",ri:"",room:"",isChat:!1,isPressedOpenChat:!1,isPressedContactToUser:!1,isConnection:!1,isPressedFinal:!1,count:0,isNoLimit:!1,isNoLimitText:!1}},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.userIn=t,this.handleBookings()}else this.$router.push("/")},methods:{backFromProNotifications(){this.$router.go(-1)},avajauuenda(){this.isChat=!0,this.count++},selectUser(e){this.$emit("select:user",e)},noSelected(){this.$emit("noSelected")},onMessage(e,t){this.$emit("on:message",e,t)},renderComponent(){this.isChat=!0,B.A.on("get updated room users",(e=>{console.log("xx-notification "+e.users.length),e.users.length>1&&(this.isTwoUsersOnline=!0)}))},async handleBookings(){const e=await v.A.getProvider(this.userIn.id);this.providerID=e.id,this.selectedPro=e.yritys,e&&(this.allBookings=e.booking.filter((e=>"offered"!==e.status&&"completed"!==e.status&&"confirmed"!==e.status)))},createBookingDate(){this.bookingDate=22},async getImageSize(e){let t=new Image;t.src=s(9298)(`./${e}`),await t.decode();let o=t.width,i=t.height;return{width:o,height:i}},handleOpenBooking(e,t){},handleCloseBooking(){this.isBooking=!1},handleSetRoom(e){this.$emit("set:room",e)},messageSeen(e,t){if(this.bookingIndex=t,this.creditLeft>0){this.bookingImages=[],this.isBooking=!0,e.image?e.image.forEach((e=>{this.getImageSize(e.name).then((t=>{this.bookingImages=[...this.bookingImages,{id:e._id,size:t.width+"-"+t.height,src:s(9298)(`./${e.name}`),thumb:s(9298)(`./${e.name}`),subHtml:'<div class="lightGallery-captions">\n                <h2>Terve</h2>\n\n            </div>"'}]}))})):this.isAccessTerminated=!0,this.isSeen=!0,this.booking=e,this.ri=this.userIsProvider.yritys+e.user.username,console.log("Ri means: "+this.ri);const t=this.userIsProvider.yritys+e.user.username;this.userIn.username;this.room=t,this.id=e.id,(this.isOfferCreated||"offered"!==e.status)&&this.editStatus(e.id,"seen")}else this.isNoLimitText=!0,this.isNoLimit=!0,setTimeout((()=>{this.isNoLimit=!1}),500)},async handleCreateOffer(e,t,s){const o=this.userIsProvider,i={name:o.yritys,distance:33,duration:50,price:e,description:t,provider:o.id},n=await H.A.addOffer(i);n&&(this.isOfferCreated=!0),console.log("Created offer id is "+n.id),this.allBookings=this.allBookings.filter((e=>e.id!==s.id)),this.isBooking=!1;await k.A.createOffer(s.id,n.id);this.$emit("create:offer",i,s);const a=s;console.log("BBBBBBBB booking "+s.user.id),a.offers.concat(n),B.A.emit("send offer",s)},async editStatus(e,t){const s={status:t},o=await k.A.updateRecipient(e,s);console.log("Is status updated: "+o.status),this.$emit("update:status",e)},openImagePanel(e){this.isOpenImage=!0,this.srcImg=s(5932)(`./${e.map((e=>e.name))}`),""!==this.srcImg&&(this.isImageOpen=!0)},async handleConfirmBooking(e){console.log("Booking header "+e.header),console.log("confirmed booking id "+e.id),console.log("Confirmed booking user id "+e.user.id),this.editStatus(e.id,"confirmed"),this.$emit("remove:booking",e.id),this.isBooking=!1,B.A.emit("accept recipient booking",{id:e.user.id,booking:e}),this.bookings=this.bookings.filter((t=>t.id!==e.id)),this.bookings.length<1&&this.$router.go(-1)},closeImagePanel(){this.isOpenImage=!1,this.isImageOpen=!1},async handleRejectBooking(e,t){const s=await k.A.getBookingById(e.id),o=s.user.id;this.editStatus(e.id,"waiting"),this.$emit("reject:bookingByPro",s,this.room,this.providerID),B.A.emit("reject booking by pro",{id:o,room:this.room,pro:this.selectedPro,booking:e,reason:t}),console.log("Test pro id "+o),this.bookings=this.bookings.filter((t=>t.id!==e.id)),this.bookings.length<1&&this.$router.go(-1)},exitFromNotificationData(){location.reload()}}};const z=(0,A.A)(V,[["render",g],["__scopeId","data-v-580dd104"]]);var Q=z},4310:function(e,t,s){var o={"./avatar.png":6975,"./jane_doe.png":7633};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=n,e.exports=i,i.id=4310},8748:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=8748,e.exports=t},3906:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=3906,e.exports=t},9298:function(e,t,s){var o={"./avatar/avatar.png":6975,"./avatar/jane_doe.png":7633};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=n,e.exports=i,i.id=9298},5932:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=5932,e.exports=t},6975:function(e,t,s){"use strict";e.exports=s.p+"img/avatar.4388e4e4.png"},7633:function(e,t,s){"use strict";e.exports=s.p+"img/jane_doe.f446515f.png"},4368:function(e,t,s){"use strict";e.exports=s.p+"img/avatar.db2f8c83.png"},1937:function(e,t,s){"use strict";e.exports=s.p+"img/en.1045d8fa.png"},9121:function(e,t,s){"use strict";e.exports=s.p+"img/fin_1.f94527fc.png"},773:function(e,t,s){"use strict";e.exports=s.p+"img/home.70dfa002.png"},3744:function(e,t,s){"use strict";e.exports=s.p+"img/bell.4f72008f.png"},5625:function(e,t,s){"use strict";e.exports=s.p+"img/chat.4b6268e4.png"},9138:function(e,t,s){"use strict";e.exports=s.p+"img/palaute.ef0be53c.png"},8802:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA4QAAAOEBcBgcLgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAUkSURBVFiF7ZddbBRVFMd/987szHaXFkr5ahf5lFq+VlAWKFYBQYn6JBoTH3zQBBMfTCmi8QFs0AdN/AA0EgW/HozRhIQgyEdCiUEDiEi0Fiylgm2B0o/FtaXL7szce30oJSAtNEStD/4f55w55zfn3DP3XmGMYSAlBzT7/wD/BQD7305492vkOy4JoXlES4rFPzkFS94gqgUzFSRyHMqA0oxPYY9dQPPfVoFZGwnldRIXkoRjMc+WlGmLsfkR0lOLEJ4y0cO/dacVAuNIY/xAvH5TFVizBvnNIEqQJCxJqWtx90Wf4qiLVzIKHY8RnThMi7FDA35qgk37bX5Pdy+3XNcwf4LPjlonkIpYvyqwcB3jpCZhSebmhJifGcLUsAW3DsePjyZaPMLI8QWKaEjZnqfwA0VNs81be1zauyTiUpyZsYDHZmTZUu1iS/btrKD1GoDF6xmJIoEgEXVY4AXMdAThCSO5GB9NpGQU9sQCxdCIwvNUOOtrlNIYDy54cLzV4sPvorR0SvIjxji2QWkhnpqdoWyCz4+nbWpbrS5P8R6AvXAts6RmcTTM/ECTkIYhsaGkp8dwpxThFI8wjMpV+L4Keb7C8xUmgFTH1eAnk5IPDuZw5g/J8KjR8UIla1os8nO0WH1fmvyIJuMLTiUlXb4QbogvAWxXssE3JOIxeGIujMnXaKVys77C8xSB0pxP9d2eppRk4/4wjSmLoTlGPzTZkzXNNtXNFmXjfbGsNHPZt6VTUJ+0Awxf7HiWLICdV0RpspEnq0/zxro9Ku+x27Ni0nB1w3XR3CF5/0CYU0mLwWGjHyjxZCSE3PFLSPtayIr5F5kRC65651yH5ES75WvBpp5nl6fgwXdwXamfD4xcNWm4ch6NZ8SYfH1N4rYLko0HwtS1WeS6RpeO9eXowZqaczbfN9kU5mlW3Z8m6lw9XR0ZwbYah72/hs7uLhexawB6tHADg4bA6qyiYmaRH1oa9xiZq0mlJe8dcKltsYk4Rs8Z48tx+RqtYVedo1s6pVxS4vH4HdleK3aizeLTw26mIWW9uqeCl/sE6NHidynIlbyS9c3ThYONbEhKEQ4ZPfuWQE4s6G5RW5dk93FHC2HkygUZikcEvcYyBvbVh/jkh7CvFZOqnqPhhgA9WrSWmAVHpxUGg++8oqc/nLGpPmszvkDx4uI0rtV3jPYuyZZqh0ONocM7y0lcabvhblhVwRlp8W0k1A2qDWz+2dXVZ22W3p6lcsn1kwO0dgiOt9oXPM2Gv9r6tR37ioPtXdIDOHLGpiMjZMQxxAt7L/mVCjQ0nLdIpoWT9dl8UwDGUJ1MywxAw3mpCyIax0JX7ory/v4w12tiW6ekrt3SlmTbty/QeXMAkupURuQYAx1ZIaeMVDw8LSvnjfU52Bgyy74YxLkLvYdq6ZTUtloXfc3G3uz9Avh6OQ0Yo35qtkEIc+uw7ilIpiVaG+Er0bZqezTYftRBX1GOjC+ob7fwFN49Hey5aQADxpbUHWuxyHONOZ+WfPZjWNW1WcogyqtWMMKHOVtrnPpVX0WDppS89PWCE21W1iA+rqzk2r9afwEAlBGHMoFAgNx6zDHZgFpLU7R3BW8DVC3nSCYlJjd3yjWVuyL+50dcTv8uqU9KAsNHfcXt94Hk3jdZIwQvCYEyhpVVK1jXp+96bnPgMymYro05uatclPTl2/8jmc1+FPWW4q7dK2m9nuveco4LmLVoLc8YJWqv5/uPHkr7owG/F/wPMOAAfwKhwkcodKKz1gAAAABJRU5ErkJggg=="},1727:function(e,t,s){"use strict";e.exports=s.p+"img/success.1c84882e.png"}},t={};function s(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,i,n){if(!o){var a=1/0;for(d=0;d<e.length;d++){o=e[d][0],i=e[d][1],n=e[d][2];for(var r=!0,l=0;l<o.length;l++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(r=!1,n<a&&(a=n));if(r){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[o,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,o){return s.f[o](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+e+"."+{17:"d680b44c",60:"1afad497",69:"922877ea",93:"ffb50ea0",147:"3830d8a8",158:"96a17d4b",185:"d66d6391",188:"c97ed7d3",191:"5c34816a",237:"b3afd837",321:"1410b6fd",353:"dff62fbf",365:"466db10a",373:"9d7bfb91",508:"4f2e81fb",509:"c1e13236",556:"b071b980",726:"71b96422",760:"4737ae71",795:"8108c99e",828:"5a02c977",917:"28210cb2",974:"3ed0e676"}[e]+".js"}}(),function(){s.miniCssF=function(e){return"css/"+e+"."+{17:"c2efc169",60:"8af0a692",69:"72e7e87e",93:"2cb81287",147:"6699b1ec",188:"c5b34e62",191:"a72a5897",237:"4df4d821",321:"ae972a67",365:"cdcac4c7",509:"d76829cd",556:"a66f2b1e",726:"933f9d6b",760:"e25b03c2",795:"6f9f9837",828:"adf69790",974:"f6eab601"}[e]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="prore-mongo:";s.l=function(o,i,n,a){if(e[o])e[o].push(i);else{var r,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+n){r=u;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",t+n),r.src=o),e[o]=[i];var g=function(t,s){r.onerror=r.onload=null,clearTimeout(h);var i=e[o];if(delete e[o],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((function(e){return e(s)})),t)return t(s)},h=setTimeout(g.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=g.bind(null,r.onerror),r.onload=g.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,i,n){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",s.nc&&(a.nonce=s.nc);var r=function(s){if(a.onerror=a.onload=null,"load"===s.type)i();else{var o=s&&s.type,r=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+r+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=r,a.parentNode&&a.parentNode.removeChild(a),n(l)}};return a.onerror=a.onload=r,a.href=t,o?o.parentNode.insertBefore(a,o.nextSibling):document.head.appendChild(a),a},t=function(e,t){for(var s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var i=s[o],n=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(n===e||n===t))return i}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){i=a[o],n=i.getAttribute("data-href");if(n===e||n===t)return i}},o=function(o){return new Promise((function(i,n){var a=s.miniCssF(o),r=s.p+a;if(t(a,r))return i();e(o,r,null,i,n)}))},i={524:0};s.f.miniCss=function(e,t){var s={17:1,60:1,69:1,93:1,147:1,188:1,191:1,237:1,321:1,365:1,509:1,556:1,726:1,760:1,795:1,828:1,974:1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=o(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))}}}(),function(){var e={524:0};s.f.j=function(t,o){var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)o.push(i[2]);else if(191!=t){var n=new Promise((function(s,o){i=e[t]=[s,o]}));o.push(i[2]=n);var a=s.p+s.u(t),r=new Error,l=function(o){if(s.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var n=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",r.name="ChunkLoadError",r.type=n,r.request=a,i[1](r)}};s.l(a,l,"chunk-"+t,t)}else e[t]=0},s.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,n,a=o[0],r=o[1],l=o[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var d=l(s)}for(t&&t(o);c<a.length;c++)n=a[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},o=self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(3786)}));o=s.O(o)})();
//# sourceMappingURL=app.e4f17690.js.map