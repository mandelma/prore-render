"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[601,689],{5118:function(e,s,r){var t=r(3396);const i=({message:e})=>null===e?null:(0,t.Wm)("div",{className:"error"},[e]);s.Z=i},1689:function(e,s,r){r.r(s),r.d(s,{default:function(){return y}});var t=r(3396),i=r(9242),a=r(7139);const l=e=>((0,t.dD)("data-v-460c6c16"),e=e(),(0,t.Cn)(),e),o=l((()=>(0,t._)("h2",{style:{"margin-top":"50px","text-align":"center"}},"- Rekisteröintilomake -",-1))),n=["error-messages"],m={class:"text-center"},u=l((()=>(0,t._)("p",null,"Tai registeröidy käyttämällä:",-1)));function g(e,s,r,l,g,d){const c=(0,t.up)("registerError"),p=(0,t.up)("MDBInput"),h=(0,t.up)("MDBCheckbox"),w=(0,t.up)("MDBBtn"),f=(0,t.up)("MDBIcon"),b=(0,t.up)("MDBContainer");return(0,t.wg)(),(0,t.iD)("div",null,[o,(0,t.Wm)(b,{style:{"margin-top":"50px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{message:g.registerErrorMessage},null,8,["message"]),(0,t.Wm)(c,{message:g.usernameExisting},null,8,["message"]),(0,t._)("form",{onSubmit:s[10]||(s[10]=(0,i.iM)(((...e)=>d.userData&&d.userData(...e)),["prevent"]))},[(0,t.Wm)(p,{type:"text",size:"lg",label:"Etunimi",id:"registerFirstName",modelValue:l.registerFirstName,"onUpdate:modelValue":s[0]||(s[0]=e=>l.registerFirstName=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(p,{type:"text",size:"lg",label:"Sukunimi",id:"registerLastName",modelValue:l.registerLastName,"onUpdate:modelValue":s[1]||(s[1]=e=>l.registerLastName=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(p,{type:"text",size:"lg",label:"käyttäjätunnus",id:"registerUsername",modelValue:l.registerUsername,"onUpdate:modelValue":s[2]||(s[2]=e=>l.registerUsername=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(p,{type:"text",size:"lg",label:"Email",white:"",id:"registerEmail",modelValue:l.registerEmail,"onUpdate:modelValue":s[3]||(s[3]=e=>l.registerEmail=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t._)("div",null," Email is "+(0,a.zw)(d.isValidEmail?"valid":"invalid"),1),(0,t.Wm)(p,{type:"password",size:"lg",label:"Salasana",id:"registerPassword",modelValue:l.registerPassword,"onUpdate:modelValue":s[4]||(s[4]=e=>l.registerPassword=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(p,{type:"password",size:"lg",label:"Toista salasana",id:"registerPasswordRepeat",modelValue:l.registerPasswordRepeat,"onUpdate:modelValue":s[5]||(s[5]=e=>l.registerPasswordRepeat=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(h,{label:"Muista minut",size:"lg",id:"registerSubscribeCheck",modelValue:l.registerSubscribeCheck,"onUpdate:modelValue":s[6]||(s[6]=e=>l.registerSubscribeCheck=e),wrapperClass:"d-flex justify-content-center mb-4"},null,8,["modelValue"]),(0,t.wy)((0,t._)("input",{required:"required","onUpdate:modelValue":s[7]||(s[7]=e=>l.registerEmail=e),"error-messages":e.emailErrors,onInput:s[8]||(s[8]=s=>e.$v.registerEmail.$touch()),onBlur:s[9]||(s[9]=s=>e.$v.registerEmail.$touch()),label:"Email"},null,40,n),[[i.nr,l.registerEmail]]),(0,t.Wm)(w,{outline:"primary",size:"lg",type:"submit",block:"",class:"mb-4"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Luo tili ")])),_:1}),(0,t._)("div",m,[u,(0,t.Wm)(w,{color:"secondary",floating:"",class:"mx-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{iconStyle:"fab",icon:"facebook-f"}),(0,t.Uk)("> ")])),_:1}),(0,t.Wm)(w,{color:"secondary",floating:"",class:"mx-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{iconStyle:"fab",icon:"google"})])),_:1}),(0,t.Wm)(w,{color:"secondary",floating:"",class:"mx-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{iconStyle:"fab",icon:"twitter"})])),_:1})])],32)])),_:1})])}var d=r(4313),c=r(4870),p=r(1478),h=r(6823),w=r(5118),f={name:"app-register",components:{registerError:w.Z,MDBContainer:d.L5,MDBInput:d.u2,MDBCheckbox:d.IH,MDBBtn:d.$v,MDBIcon:d.vm},data(){return{registerErrorMessage:null,usernameExisting:null}},setup(){const e=(0,c.iH)(""),s=(0,c.iH)(""),r=(0,c.iH)(""),t=(0,c.iH)(""),i=(0,c.iH)(""),a=(0,c.iH)(""),l=(0,c.iH)(!0);return{registerLastName:s,registerFirstName:e,registerUsername:r,registerEmail:t,registerPassword:i,registerPasswordRepeat:a,registerSubscribeCheck:l}},computed:{isValidEmail(){return/^[^@]+@\w+(\.\w+)+\w$/.test(this.registerEmail)}},methods:{emailValidation(){},validateEmail(){/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.email)?this.msg["email"]="Please enter a valid email address":this.msg["email"]=""},async userData(){const e={firstName:this.registerFirstName,lastName:this.registerLastName,username:this.registerUsername,email:this.registerEmail,password:this.registerPassword};if(""!==this.registerFirstName&&""!==this.registerLastName&&""!==this.registerUsername&&""!==this.registerPassword&&""!==this.registerEmail)if(this.registerUsername.length<4)this.registerErrorMessage="Username must be longer than 4 characters!",setTimeout((()=>{this.registerErrorMessage=null}),2e3);else{console.log("Uus kasutaja");const s=await p.Z.addUser(e);if("username existing"===s.error)this.usernameExisting="Käyttäjätunnus on jo olemassa! Vaihda käyttäjätunnus",setTimeout((()=>{this.usernameExisting=null}),2e3);else{const e=await h.Z.login({username:this.registerUsername,password:this.registerPassword});"login error"!==e.error&&this.$emit("register:data",e)}}else this.registerErrorMessage="All fields must be filled!",setTimeout((()=>{this.registerErrorMessage=null}),2e3)}}},b=r(89);const k=(0,b.Z)(f,[["render",g],["__scopeId","data-v-460c6c16"]]);var y=k},601:function(e,s,r){r.r(s),r.d(s,{default:function(){return E}});var t=r(3396);const i={key:0},a={key:1};function l(e,s,r,l,o,n){const m=(0,t.up)("MDBTabItem"),u=(0,t.up)("MDBTabNav"),g=(0,t.up)("MDBTabs"),d=(0,t.up)("Register"),c=(0,t.up)("Login"),p=(0,t.up)("MDBContainer");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(p,{style:{"margin-top":"50px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:l.form7ActiveTab,"onUpdate:modelValue":s[0]||(s[0]=e=>l.form7ActiveTab=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{pills:"",justify:"",tabsClasses:"mb-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{onClick:n.pressLoginTab,tabId:"ex3-1",href:"ex3-1"},{default:(0,t.w5)((()=>[(0,t.Uk)("Kirjaudu")])),_:1},8,["onClick"]),(0,t.Wm)(m,{onClick:n.pressRegisterTab,tabId:"ex3-2",href:"ex3-2"},{default:(0,t.w5)((()=>[(0,t.Uk)("Registeröidy")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["modelValue"]),o.isRegister?((0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(d,{"onRegister:data":n.handleRegister},null,8,["onRegister:data"])])):((0,t.wg)(),(0,t.iD)("div",a,[(0,t.Wm)(c,{"onLogin:data":n.userControl},null,8,["onLogin:data"])]))])),_:1})])}r(7658);var o=r(9242);const n=e=>((0,t.dD)("data-v-193e45cc"),e=e(),(0,t.Cn)(),e),m={class:"text-center mb-3"},u=n((()=>(0,t._)("p",null,"Kirjaudu käyttämällä:",-1))),g=n((()=>(0,t._)("p",{class:"text-center"},"tai:",-1))),d={class:"text-center"};function c(e,s,r,i,a,l){const n=(0,t.up)("loginError"),c=(0,t.up)("MDBIcon"),p=(0,t.up)("MDBBtn"),h=(0,t.up)("MDBInput"),w=(0,t.up)("MDBCheckbox"),f=(0,t.up)("MDBCol"),b=(0,t.up)("router-link"),k=(0,t.up)("MDBRow");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(n,{message:i.loginErrorMessage},null,8,["message"]),(0,t._)("form",{onSubmit:s[4]||(s[4]=(0,o.iM)(((...e)=>l.userLoginData&&l.userLoginData(...e)),["prevent"]))},[(0,t._)("div",m,[u,(0,t.Wm)(p,{color:"secondary",floating:"",class:"mx-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{iconStyle:"fab",icon:"facebook-f"}),(0,t.Uk)("> ")])),_:1}),(0,t.Wm)(p,{color:"secondary",floating:"",class:"mx-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{iconStyle:"fab",icon:"google"})])),_:1}),(0,t.Wm)(p,{color:"secondary",floating:"",class:"mx-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{iconStyle:"fab",icon:"twitter"})])),_:1}),(0,t.Wm)(p,{color:"secondary",floating:"",class:"mx-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{iconStyle:"fab",icon:"github"})])),_:1})]),g,(0,t.Wm)(h,{type:"text",size:"lg",label:"Käyttäjätunnus",white:"",id:"loginUsername",modelValue:i.loginUsername,"onUpdate:modelValue":s[0]||(s[0]=e=>i.loginUsername=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(h,{type:"password",size:"lg",label:"Salasana",white:"",id:"loginPassword",modelValue:i.loginPassword,"onUpdate:modelValue":s[1]||(s[1]=e=>i.loginPassword=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(k,{class:"mb-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{class:"d-flex justify-content-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{label:"Muista minut",white:"",id:"loginCheck",modelValue:i.loginCheck,"onUpdate:modelValue":s[2]||(s[2]=e=>i.loginCheck=e),wrapperClass:"mb-3 mb-md-0"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,{to:"/forgot_auth"},{default:(0,t.w5)((()=>[(0,t.Uk)("Forgot password")])),_:1})])),_:1})])),_:1}),(0,t.Wm)(p,{white:"",color:"primary",size:"lg",type:"submit",block:"",class:"mb-4"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Kirjaudu ")])),_:1}),(0,t._)("div",d,[(0,t._)("p",null,[(0,t.Uk)("Ei jäsen? "),(0,t._)("span",{id:"reg",onClick:s[3]||(s[3]=e=>this.$router.push("/register")),style:{cursor:"pointer"}},"rekisteröidy")])])],32)])}var p=r(4313),h=r(4870),w=r(6823),f=r(5118),b={name:"login-form",components:{loginError:f.Z,MDBInput:p.u2,MDBCheckbox:p.IH,MDBBtn:p.$v,MDBRow:p.uZ,MDBCol:p.TK,MDBIcon:p.vm},setup(){const e=(0,h.iH)(""),s=(0,h.iH)(""),r=(0,h.iH)(!0),t=(0,h.iH)(null);return{loginUsername:e,loginPassword:s,loginCheck:r,loginErrorMessage:t}},methods:{async userLoginData(){let e;const s={username:this.loginUsername,password:this.loginPassword};""!==this.loginUsername&&""!==this.loginPassword?(e=await w.Z.login(s),"login error"!==e.error?(console.log("User logged in"),this.$emit("login:data",e)):(console.log("No user logged in"),this.loginError="Väärä Käyttäjätunnus tai salasana!",this.loginErrorMessage="Väärä Käyttäjätunnus tai salasana!",setTimeout((()=>{this.loginErrorMessage=null}),2e3))):(console.log("Mingi väli on tühi!!"),this.loginErrorMessage="kaikki kentät on täytettävä!",setTimeout((()=>{this.loginErrorMessage=null}),2e3)),this.emptyLoginFields()},emptyLoginFields(){this.loginUsername="",this.loginPassword="",this.loginCheck=!1}}},k=r(89);const y=(0,k.Z)(b,[["render",c],["__scopeId","data-v-193e45cc"]]);var M=y,C=r(1689),D={name:"login-register",components:{Login:M,Register:C["default"],MDBContainer:p.L5,MDBTabs:p.zk,MDBTabNav:p.JH,MDBTabItem:p.kX},setup(){const e=(0,h.iH)("ex3-1"),s=(0,h.iH)(""),r=(0,h.iH)(""),t=(0,h.iH)(!0),i=(0,h.iH)(""),a=(0,h.iH)(""),l=(0,h.iH)(""),o=(0,h.iH)(""),n=(0,h.iH)(""),m=(0,h.iH)(!0);return{form7ActiveTab:e,form2Username:s,form2Password:r,form7LoginCheck:t,form7RegisterName:i,form7RegisterUsername:a,form7RegisterEmail:l,form7RegisterPassword:o,form7RegisterPasswordRepeat:n,form7RegisterTermsCheck:m}},data(){return{isLogin:!0,isRegister:!1}},mounted(){this.isLogin=!0},methods:{pressLoginTab(){this.isRegister=!1,this.islogin=!0},pressRegisterTab(){this.isLogin=!1,this.isRegister=!0},handleRegister(e){this.$emit("register:data",e)},userControl(e){this.$emit("login:data",e)}}};const v=(0,k.Z)(D,[["render",l]]);var E=v}}]);
//# sourceMappingURL=601.f0fafc13.js.map