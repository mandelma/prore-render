"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[857],{4482:function(e,i,t){var s=t(6768);const o=({message:e})=>null===e?null:(0,s.bF)("div",{className:"error"},[e,(0,s.bF)("img",{className:"errorImg",alt:"error",src:t(1644)},null)]);i.A=o},4304:function(e,i,t){t.d(i,{A:function(){return P}});var s=t(6768),o=t(4232);const n={key:0},r={class:"waiting-info"},l={key:0},a={key:1},d={key:1},u={class:"pro-info"},m={style:{float:"right"}},c={key:0},k={key:1},h={key:0,colspan:"2"},p={key:1,colspan:"2"};function g(e,i,t,g,f,v){const b=(0,s.g2)("monthConverter"),y=(0,s.g2)("MDBBtn"),C=(0,s.g2)("MDBTable");return"for-recipient"===t.status?((0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("div",r,[i[2]||(i[2]=(0,s.eW)(" ( ")),(0,s.Lk)("b",null,(0,o.v_)(t.msg.ordered[0].yritys),1),(0,s.eW)(" ) - "+(0,o.v_)(t.msg.header),1),i[3]||(i[3]=(0,s.Lk)("br",null,null,-1)),(0,s.bF)(b,{num:t.msg.onTime[0].month},null,8,["num"]),(0,s.eW)(" "+(0,o.v_)(t.msg.onTime[0].day)+" / "+(0,o.v_)(t.msg.onTime[0].year),1),i[4]||(i[4]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" klo "+(0,o.v_)(t.msg.onTime[0].hours)+" : "+(0,o.v_)(t.msg.onTime[0].minutes),1),i[5]||(i[5]=(0,s.Lk)("br",null,null,-1)),0===t.msg.ordered[0].range?((0,s.uX)(),(0,s.CE)("p",l,(0,o.v_)(t.msg.ordered[0].yritys)+" odottaa sinua osoitteseen: "+(0,o.v_)(t.msg.ordered[0].address),1)):((0,s.uX)(),(0,s.CE)("p",a,(0,o.v_)(t.msg.ordered[0].yritys)+" tulossa sovittuun osoitteeseen!",1)),(0,s.bF)(y,{block:"",outline:"warning",onClick:i[0]||(i[0]=e=>v.removeComplitedBookingPanel(t.msg))},{default:(0,s.k6)((()=>i[1]||(i[1]=[(0,s.eW)(" (Kustub muidu kui aeg läbi saab) - Saab eemaldada kohe (ajutine lahendus) ")]))),_:1})])])):((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("div",u,[(0,s.Lk)("div",m,[(0,s.bF)(b,{num:t.msg.onTime[0].month},null,8,["num"]),(0,s.eW)(" "+(0,o.v_)(t.msg.onTime[0].day)+" / "+(0,o.v_)(t.msg.onTime[0].year),1),i[6]||(i[6]=(0,s.Lk)("br",null,null,-1)),(0,s.eW)(" klo "+(0,o.v_)(t.msg.onTime[0].hours>=10?t.msg.onTime[0].hours:"0"+t.msg.onTime[0].hours)+" : "+(0,o.v_)(t.msg.onTime[0].minutes>=10?t.msg.onTime[0].minutes:"0"+t.msg.onTime[0].minutes),1)]),"for-provider"===t.status?((0,s.uX)(),(0,s.Wv)(C,{key:0,borderless:"",style:{"font-size":"18px",color:"#ddd","text-align":"left",padding:"10px",width:"100%"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[i[7]||(i[7]=(0,s.Lk)("td",null," Sovittu: ",-1)),(0,s.Lk)("td",null,(0,o.v_)(t.msg.header),1)]),(0,s.Lk)("tr",null,[i[8]||(i[8]=(0,s.Lk)("td",null," Paikka: ",-1)),0===t.provider.range?((0,s.uX)(),(0,s.CE)("td",c,(0,o.v_)(t.provider.address),1)):((0,s.uX)(),(0,s.CE)("td",k,(0,o.v_)(t.msg.address),1))]),(0,s.Lk)("tr",null,[0===t.provider.range?((0,s.uX)(),(0,s.CE)("td",h,i[9]||(i[9]=[(0,s.Lk)("p",{style:{color:"deepskyblue"}}," Asiakas tulossa! ",-1)]))):((0,s.uX)(),(0,s.CE)("td",p,i[10]||(i[10]=[(0,s.Lk)("p",{style:{color:"deepskyblue"}}," Meno asiakkaan luonna! ",-1)])))])])])),_:1})):(0,s.Q3)("",!0)])]))}var f=t(5846),v=t(6765),b={name:"Info",props:{status:String,msg:Object,provider:Object},components:{MDBBtn:f.al,MDBTable:f.EU,monthConverter:v.A},methods:{removeCompletedBookingPro(e){this.$emit("remove:proConfirmed",e)},removeComplitedBookingPanel(e){this.$emit("remove:complitedBookingPanel",e)}}},y=t(1241);const C=(0,y.A)(b,[["render",g],["__scopeId","data-v-235bf50d"]]);var P=C},6857:function(e,i,t){t.r(i),t.d(i,{default:function(){return Te}});t(4114);var s=t(6768),o=t(4232);const n={key:0},r={key:0,class:"spinner-border",role:"status"},l={style:{position:"relative","text-align":"center"}},a={style:{"margin-top":"50px"},id:"info-block"},d={class:"file-marker"},u={class:"box-contents"},m={class:"flex flex-wrap align-items-center justify-content-center"},c={key:0},k={style:{"font-size":"16px"}},h=["onClick"],p={style:{display:"flex","justify-content":"right",padding:"20px"}},g={key:0,class:"spinner-border",role:"status"},f={key:1},v={key:0},b={key:1},y={style:{border:"solid green","margin-bottom":"10px",padding:"7px"}},C={style:{display:"flex","justify-content":"right",padding:"10px"}},P={style:{width:"33px"}},T={style:{width:"33px"}},F={key:0},E={key:1};function L(e,i,t,L,D,_){const w=(0,s.g2)("MDBCol"),M=(0,s.g2)("MDBRow"),A=(0,s.g2)("info"),x=(0,s.g2)("MDBContainer"),R=(0,s.g2)("errorNotification"),B=(0,s.g2)("successNotification"),K=(0,s.g2)("MDBIcon"),X=(0,s.g2)("VueDatePicker"),I=(0,s.g2)("MDBBtnClose"),W=(0,s.g2)("MDBTable"),z=(0,s.g2)("editPrice"),V=(0,s.g2)("edit-profession"),$=(0,s.g2)("feedback-list"),N=(0,s.g2)("MDBBtn"),S=(0,s.g2)("MDBInput"),O=(0,s.g2)("MDBBadge");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.bF)(M,null,{default:(0,s.k6)((()=>[(0,s.bF)(w),(0,s.bF)(w,{col:"7",style:{position:"relative"}})])),_:1}),L.provider?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",n,[L.provider.profession?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",r,i[8]||(i[8]=[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1)])))])),(0,s.bF)(M,null,{default:(0,s.k6)((()=>[(0,s.bF)(w,{class:"proPanelHeader",md:"4"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",l,[(0,s.Lk)("h2",null,(0,o.v_)(L.provider.yritys),1),(0,s.Lk)("h2",null,(0,o.v_)(L.provider.address),1)])])),_:1}),D.confirmedBookings.length>0?((0,s.uX)(),(0,s.Wv)(w,{key:0,md:"8"},{default:(0,s.k6)((()=>[(0,s.bF)(x,null,{default:(0,s.k6)((()=>[(0,s.Lk)("aside",a,[(0,s.Lk)("section",d,[(0,s.Lk)("div",null,[i[9]||(i[9]=(0,s.Lk)("div",{class:"box-title"}," Vahvistetut tilaukset! ",-1)),(0,s.Lk)("div",u,[(0,s.Lk)("div",m,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(D.confirmedBookings,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"scalein animation-duration-3000 animation-iteration flex align-items-center justify-content-center font-bold w-full"},[(0,s.bF)(A,{style:{width:"100%"},status:"for-provider",msg:e,provider:L.provider,"onRemove:proConfirmed":_.handleRemoveProConfirmed},null,8,["msg","provider","onRemove:proConfirmed"])])))),128))])])])])])])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(x,null,{default:(0,s.k6)((()=>[(0,s.bF)(M,null,{default:(0,s.k6)((()=>[L.isProviderCalendar?((0,s.uX)(),(0,s.Wv)(w,{key:0},{default:(0,s.k6)((()=>[(0,s.bF)(x,null,{default:(0,s.k6)((()=>[(0,s.bF)(R,{message:L.timeEditErrorMessage},null,8,["message"]),(0,s.bF)(B,{message:L.timeEditSuccessMessage},null,8,["message"]),L.isTimeToEdit?((0,s.uX)(),(0,s.CE)("div",c,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(L.editArr,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,style:{border:"solid orange","padding-bottom":"20px","padding-top":"20px","margin-bottom":"10px"}},[(0,s.Lk)("div",k,(0,o.v_)(e.weekDay)+" - "+(0,o.v_)(e.day),1),(0,s.bF)(W,{borderless:"",style:{"font-size":"18px",color:"#ddd","text-align":"left"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.time,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",null,(0,o.v_)(L.times[e.index][0].hours>=10?L.times[e.index][0].hours:"0"+L.times[e.index][0].hours)+" : "+(0,o.v_)(L.times[e.index][0].minutes>=10?L.times[e.index][0].minutes:"0"+L.times[e.index][0].minutes)+" - "+(0,o.v_)(L.times[e.index][1].hours>=10?L.times[e.index][1].hours:"0"+L.times[e.index][1].hours)+" : "+(0,o.v_)(L.times[e.index][1].minutes>=10?L.times[e.index][1].minutes:"0"+L.times[e.index][1].minutes),1),(0,s.Lk)("td",null,[(0,s.bF)(X,{dark:"",modelValue:L.times[e.index],"onUpdate:modelValue":[i=>L.times[e.index]=i,_.handleTime],"time-picker":"",range:""},{trigger:(0,s.k6)((()=>[(0,s.bF)(K,{class:"clickable-text"},{default:(0,s.k6)((()=>i[10]||(i[10]=[(0,s.Lk)("i",{class:"fas fa-edit",size:"lg",style:{cursor:"pointer"}},null,-1)]))),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])]),(0,s.Lk)("td",null,[(0,s.bF)(K,null,{default:(0,s.k6)((()=>[(0,s.Lk)("i",{class:"far fa-save",size:"lg",onClick:i=>_.confirmEditedTime(e.timeId),style:{cursor:"pointer"}},null,8,h)])),_:2},1024)]),(0,s.Lk)("td",null,[(0,s.bF)(I,{white:"",onClick:i=>_.delTimeRange(e.timeId)},null,8,["onClick"])])])))),128))])])),_:2},1024),(0,s.Lk)("div",p,[(0,s.Lk)("span",{style:{color:"greenyellow",cursor:"pointer"},onClick:i[0]||(i[0]=e=>L.isTimeToEdit=!1)},"Valmis")])])))),128))])):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[(0,s.bF)(X,{dark:"",class:(0,o.C4)({datepicker_opacity:e.isMapSearchActive}),style:{"margin-bottom":"50px","justify-content":"center"},onInternalModelChange:_.handleInternal,range:"","auto-range":"0",modelValue:L.date,"onUpdate:modelValue":[i[1]||(i[1]=e=>L.date=e),_.handleDate],inline:"",locale:"fi",selectText:"Valitse","min-date":new Date,markers:L.markers,"teleport-center":"","month-change-on-scroll":!1},null,8,["class","onInternalModelChange","modelValue","onUpdate:modelValue","min-date","markers"])])])),_:1})])),_:1})):(0,s.Q3)("",!0),L.isEditPrice?((0,s.uX)(),(0,s.Wv)(w,{key:1},{default:(0,s.k6)((()=>[(0,s.bF)(z,{"onCancel:editPrice":_.cancelEditPrice,"onSave:editedPrice":_.saveEditedPrice},null,8,["onCancel:editPrice","onSave:editedPrice"])])),_:1})):L.isEditProfession?((0,s.uX)(),(0,s.Wv)(w,{key:2},{default:(0,s.k6)((()=>[(0,s.bF)(V,{provider:L.provider,onAdditionalProfession:_.handleAddProfession,onEditProfession:_.handleEditProfession,onRemoveProfession:_.handleRemoveProfession,"onCancel:editProfession":_.handleCancelEditProfession},null,8,["provider","onAdditionalProfession","onEditProfession","onRemoveProfession","onCancel:editProfession"])])),_:1})):L.isFeedback?((0,s.uX)(),(0,s.Wv)(w,{key:3},{default:(0,s.k6)((()=>[(0,s.bF)($,{feedback:L.provider.feedback,onCloseFeedbackList:_.handleCloseFeedbackList},null,8,["feedback","onCloseFeedbackList"])])),_:1})):((0,s.uX)(),(0,s.Wv)(w,{key:4},{default:(0,s.k6)((()=>[L.provider.profession?((0,s.uX)(),(0,s.CE)("div",f,[(0,s.bF)(R,{message:L.errorMessage},null,8,["message"]),(0,s.bF)(B,{message:L.successMessage},null,8,["message"]),(0,s.bF)(W,{borderless:"",style:{position:"relative",color:"#ddd","font-size":"18px","text-align":"left"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,o.v_)(0===L.provider.range?"Tarjoan palvelua paikalla":"Palvelun säde: "+L.provider.range+" km"),1),L.isEditRange?((0,s.uX)(),(0,s.CE)("td",b,[(0,s.Lk)("div",y,[(0,s.Lk)("div",C,[(0,s.bF)(I,{white:"",onClick:i[3]||(i[3]=e=>L.isEditRange=!1)})]),(0,s.Lk)("div",null,[(0,s.bF)(S,{white:"",label:"Säde - km",modelValue:L.range,"onUpdate:modelValue":i[4]||(i[4]=e=>L.range=e),size:"lg",type:"number"},null,8,["modelValue"]),i[13]||(i[13]=(0,s.Lk)("br",null,null,-1))]),L.range.length>0?((0,s.uX)(),(0,s.Wv)(N,{key:0,outline:"info",block:"",size:"lg",onClick:_.saveNewRange},{default:(0,s.k6)((()=>i[14]||(i[14]=[(0,s.eW)("Tallenna uusi säde")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0)])])):((0,s.uX)(),(0,s.CE)("td",v,[(0,s.bF)(N,{outline:"info",block:"",size:"lg",onClick:i[2]||(i[2]=e=>L.isEditRange=!0)},{default:(0,s.k6)((()=>i[12]||(i[12]=[(0,s.eW)("Muokkaa toimintaalueetta")]))),_:1})]))]),(0,s.Lk)("tr",null,[i[16]||(i[16]=(0,s.Lk)("td",null," Palaute ",-1)),(0,s.Lk)("td",null,[(0,s.bF)(M,{class:"rating"},{default:(0,s.k6)((()=>[(0,s.bF)(w,null,{default:(0,s.k6)((()=>[(0,s.bF)(K,{style:{padding:"10px",color:"limegreen"},i:"",class:"far fa-thumbs-up",size:"2x"}),(0,s.bF)(O,{color:"success",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.k6)((()=>[(0,s.Lk)("h2",P,(0,o.v_)(L.provider.rating.positive),1)])),_:1})])),_:1}),(0,s.bF)(w,null,{default:(0,s.k6)((()=>[(0,s.bF)(K,{style:{padding:"10px",color:"palevioletred"},i:"",class:"far fa-thumbs-down",size:"2x"}),(0,s.bF)(O,{color:"danger",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.k6)((()=>[(0,s.Lk)("h2",T,(0,o.v_)(L.provider.rating.negative),1)])),_:1})])),_:1}),(0,s.bF)(w,null,{default:(0,s.k6)((()=>[(0,s.bF)(N,{block:"",color:"primary",onClick:_.getFeedbackListData},{default:(0,s.k6)((()=>i[15]||(i[15]=[(0,s.eW)("Katso oma arvostelua")]))),_:1},8,["onClick"])])),_:1})])),_:1})])]),L.isProviderCalendar?((0,s.uX)(),(0,s.CE)("tr",E,[i[20]||(i[20]=(0,s.Lk)("td",null," Päätän, koska tarjoan palvelua ",-1)),(0,s.Lk)("td",null,[(0,s.bF)(N,{outline:"info",block:"",size:"lg",onClick:i[6]||(i[6]=e=>L.isProviderCalendar=!1)},{default:(0,s.k6)((()=>i[19]||(i[19]=[(0,s.eW)("Vaihda 24/7")]))),_:1})])])):((0,s.uX)(),(0,s.CE)("tr",F,[i[18]||(i[18]=(0,s.Lk)("td",null," Tarjoan palvelua 24/7 ",-1)),(0,s.Lk)("td",null,[(0,s.bF)(N,{outline:"info",size:"lg",onClick:i[5]||(i[5]=e=>L.isProviderCalendar=!0)},{default:(0,s.k6)((()=>i[17]||(i[17]=[(0,s.eW)("Vaihda kalenteriin")]))),_:1})])])),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(L.provider.profession,((e,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i},(0,o.v_)(e),1)))),128))]),(0,s.Lk)("td",null,[(0,s.bF)(N,{outline:"info",block:"",size:"lg",onClick:_.editProfessionPro},{default:(0,s.k6)((()=>i[21]||(i[21]=[(0,s.eW)("Muokkaa osaamista")]))),_:1},8,["onClick"])])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,o.v_)(L.provider.priceByHour)+" Euroa ",1),(0,s.Lk)("td",null,[(0,s.bF)(N,{outline:"info",block:"",size:"lg",onClick:_.editPrice},{default:(0,s.k6)((()=>i[22]||(i[22]=[(0,s.eW)("Muokkaa tuntihinta")]))),_:1},8,["onClick"])])]),(0,s.Lk)("tr",null,[i[24]||(i[24]=(0,s.Lk)("td",null," Katso kartalta ",-1)),(0,s.Lk)("td",null,[(0,s.bF)(N,{outline:"info",block:"",size:"lg",onClick:i[7]||(i[7]=e=>this.$router.push("/pro-public-search"))},{default:(0,s.k6)((()=>i[23]||(i[23]=[(0,s.eW)("Kartalta")]))),_:1})])])])])),_:1})])):((0,s.uX)(),(0,s.CE)("div",g,i[11]||(i[11]=[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1)])))])),_:1}))])),_:1})])),_:1})]),(0,s.eW)(" confirmed "+(0,o.v_)(D.confirmedBookings),1)],64)}var D=t(8068),_=t(1769);function w(e,i,t,o,n,r){const l=(0,s.g2)("MDBInput"),a=(0,s.g2)("MDBBtn"),d=(0,s.g2)("MDBContainer");return(0,s.uX)(),(0,s.Wv)(d,null,{default:(0,s.k6)((()=>[(0,s.bF)(l,{label:"Uusi tuntihinta",size:"lg",white:"",modelValue:o.price,"onUpdate:modelValue":i[0]||(i[0]=e=>o.price=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,s.bF)(a,{outline:"success",block:"",size:"lg",onClick:r.handleEditPrice},{default:(0,s.k6)((()=>i[1]||(i[1]=[(0,s.eW)("Kinnita")]))),_:1},8,["onClick"]),(0,s.bF)(a,{outline:"danger",block:"",size:"lg",onClick:r.cancelEdit},{default:(0,s.k6)((()=>i[2]||(i[2]=[(0,s.eW)("Poistu")]))),_:1},8,["onClick"])])),_:1})}var M=t(5846),A=t(144),x={name:"edit-price",setup(){const e=(0,A.KR)(null);return{price:e}},components:{MDBContainer:M.Dj,MDBBtn:M.al,MDBInput:M.gk},data(){return{errorMessage:null}},methods:{handleEditPrice(){this.$emit("save:editedPrice",this.price)},cancelEdit(){this.$emit("cancel:editPrice",!1),this.errorMessage="Here is some error!"}}},R=t(1241);const B=(0,R.A)(x,[["render",w]]);var K=B,X=t(5130);const I={key:0},W={style:{"margin-bottom":"20px"}},z={value:"slotProps"},V={key:0},$={key:1},N={style:{},class:"flex align-items-center"},S={key:1},O={key:2,style:{"margin-bottom":"20px"}},j={value:"slotProps"},U={key:0},H={key:1},Q={style:{},class:"flex align-items-center"};function G(e,i,t,n,r,l){const a=(0,s.g2)("MDBIcon"),d=(0,s.g2)("Dropdown"),u=(0,s.g2)("MDBTable"),m=(0,s.g2)("MDBBtnClose"),c=(0,s.g2)("MDBBtn"),k=(0,s.g2)("MDBContainer");return(0,s.uX)(),(0,s.Wv)(k,null,{default:(0,s.k6)((()=>[(0,s.bF)(a,{style:{float:"right",cursor:"pointer"},onClick:l.cancelEditProfession,size:"3x"},{default:(0,s.k6)((()=>i[3]||(i[3]=[(0,s.Lk)("i",{class:"fas fa-undo"},null,-1)]))),_:1},8,["onClick"]),t.provider&&1===t.provider.profession.length?((0,s.uX)(),(0,s.CE)("div",I,[(0,s.bF)(u,{borderless:"",style:{"font-size":"18px","text-align":"left"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.provider.profession,((t,r)=>((0,s.uX)(),(0,s.CE)("tr",{key:r},[(0,s.Lk)("td",null,(0,o.v_)(t),1),(0,s.Lk)("td",null,[(0,s.Lk)("form",{onSubmit:i[1]||(i[1]=(0,X.D$)(((...i)=>e.submit&&e.submit(...i)),["prevent"]))},[(0,s.Lk)("div",W,[(0,s.bF)(d,{onChange:e=>l.changeCurrentProfession(r),modelValue:n.selected,"onUpdate:modelValue":i[0]||(i[0]=e=>n.selected=e),options:n.proList,filter:"",optionLabel:"label",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"Valitse ammattilainen",class:"w-full md:w-100rem"},{optiongroup:(0,s.k6)((e=>[(0,s.Lk)("div",N,[(0,s.Lk)("div",null,(0,o.v_)(e.option.label),1)])])),default:(0,s.k6)((()=>[(0,s.Lk)("template",z,[e.slotProps.value?((0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("div",null,(0,o.v_)(e.slotProps.value.label),1)])):((0,s.uX)(),(0,s.CE)("span",$,(0,o.v_)(e.slotProps.placeholder),1))])])),_:2},1032,["onChange","modelValue","options"])])],32)])])))),128))])])),_:1})])):((0,s.uX)(),(0,s.CE)("div",S,[(0,s.bF)(u,{borderless:"",style:{"font-size":"18px","text-align":"left"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.provider.profession,((e,i)=>((0,s.uX)(),(0,s.CE)("tr",{key:i},[(0,s.Lk)("td",null,(0,o.v_)(e),1),(0,s.Lk)("td",null,[(0,s.bF)(m,{white:"",onClick:t=>l.removeProfession(i,e)},null,8,["onClick"])])])))),128))])])),_:1})])),(0,s.bF)(c,{block:"",color:"primary",size:"lg",onClick:l.addProfessionPressed},{default:(0,s.k6)((()=>i[4]||(i[4]=[(0,s.eW)("Lisää ammatti")]))),_:1},8,["onClick"]),n.isAddProfession?((0,s.uX)(),(0,s.CE)("div",O,[(0,s.bF)(d,{onChange:l.changeNewProfession,modelValue:n.selectedNewProfession,"onUpdate:modelValue":i[2]||(i[2]=e=>n.selectedNewProfession=e),options:n.proList,filter:"",optionLabel:"label",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"Valitse ammattilainen",class:"w-full md:w-100rem"},{optiongroup:(0,s.k6)((e=>[(0,s.Lk)("div",Q,[(0,s.Lk)("div",null,(0,o.v_)(e.option.label),1)])])),default:(0,s.k6)((()=>[(0,s.Lk)("template",j,[e.slotProps.value?((0,s.uX)(),(0,s.CE)("div",U,[(0,s.Lk)("div",null,(0,o.v_)(e.slotProps.value.label),1)])):((0,s.uX)(),(0,s.CE)("span",H,(0,o.v_)(e.slotProps.placeholder),1))])])),_:1},8,["onChange","modelValue","options"])])):(0,s.Q3)("",!0),n.additionalProfession.length>2?((0,s.uX)(),(0,s.Wv)(c,{key:3,outline:"success",block:"",size:"lg",onClick:e.handleAddAdditionalProfession},{default:(0,s.k6)((()=>i[5]||(i[5]=[(0,s.eW)("Kinnita uus amet")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0),(0,s.bF)(c,{outline:"danger",block:"",size:"lg",style:{"margin-top":"20px"},onClick:l.cancelEditProfession},{default:(0,s.k6)((()=>i[6]||(i[6]=[(0,s.eW)("Poistu")]))),_:1},8,["onClick"])])),_:1})}var Y=t(3076),J=t(2436),q={name:"editProfession",props:{provider:Object},components:{Dropdown:J.A,MDBContainer:M.Dj,MDBBtn:M.al,MDBTable:M.EU,MDBIcon:M.$u,MDBBtnClose:M.uR},setup(){const e=(0,A.KR)(""),i=(0,A.KR)(null),t=(0,A.KR)(null),s=(0,A.KR)(!1),o=(0,A.KR)(""),n=(0,A.KR)(Y.A);return{profession:e,selected:i,selectedNewProfession:t,isAddProfession:s,additionalProfession:o,proList:n}},methods:{changeCurrentProfession(e){console.log("Selected xx "+e+" "+this.selected.label),this.$emit("editProfession",e,this.selected.label),this.selected=null},changeNewProfession(){console.log("New new "+this.selectedNewProfession.label),this.isAddProfession=!1,this.$emit("additionalProfession",this.selectedNewProfession.label),this.selectedNewProfession=null},addProfessionPressed(){this.selectedNewProfession="",this.isAddProfession=!0},addNewProfession(){this.selectedNewProfession="";const e=document.getElementById("new_profession");e.addEventListener("change",(e=>{this.isAddProfession=!1,this.$emit("additionalProfession",e.target.value)})),this.selectedNewProfession=""},editProfession(e){this.isAddProfession=!1;const i=document.getElementById("edit_profession");i.addEventListener("change",(i=>{this.$emit("editProfession",e,i.target.value)})),this.selected=""},removeProfession(e,i){this.isAddProfession=!1,this.$emit("removeProfession",e,i),this.selected=null},cancelEditProfession(){this.$emit("cancel:editProfession")}}};const Z=(0,R.A)(q,[["render",G]]);var ee=Z,ie=t(4482),te=t(7337),se=t(4304),oe=t(1690),ne=t(7533);const re=t(6425),le="/api/offers",ae=async()=>{const e=await re.get(le);return e.data},de=async e=>{const i=await re.post(`${le}`,e);return i.data},ue=async(e,i)=>{const t=await re.post(`${le}/${e}`,i);return t.data},me=async(e,i)=>{const t=await re.delete(`${le}/${e}/timeoffer/${i}`);return t.data},ce=async(e,i)=>{const t=await re.put(`${le}/${e}`,i);return t.data};var ke={getOffers:ae,addFirstOffer:de,addAdditionalOffer:ue,removeTimeOffer:me,updateOffer:ce};const he={style:{border:"1px solid #999",padding:"10px"}},pe={style:{"margin-bottom":"10px"}};function ge(e,i,t,n,r,l){return(0,s.uX)(),(0,s.CE)("div",he,[(0,s.Lk)("h4",{style:{"text-align":"right",cursor:"pointer",color:"green"},onClick:i[0]||(i[0]=i=>e.$emit("closeFeedbackList"))},"Valmis"),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.feedback,(e=>((0,s.uX)(),(0,s.CE)("div",{style:{"text-align":"left"},key:e.id},[(0,s.Lk)("h2",pe,(0,o.v_)(e.pos),1)])))),128)),(0,s.Lk)("h3",null,(0,o.v_)(t.feedback.length>0?t.feedback.pos:"Ei arvostelua vielä!"),1)])}var fe={name:"FeedbackList",props:{feedback:Array}};const ve=(0,R.A)(fe,[["render",ge]]);var be=ve,ye=t(222),Ce={name:"Provider-panel",props:{userIsProvider:Object,bookings:Array,bookingsConfirmed:Array},components:{Gallery:ye["default"],FeedbackList:be,info:se.A,errorNotification:ie.A,successNotification:te.A,editPrice:K,editProfession:ee,MDBContainer:M.Dj,MDBIcon:M.$u,MDBRow:M.gU,MDBCol:M.m6,MDBTable:M.EU,MDBBtn:M.al,MDBBtnClose:M.uR,MDBBadge:M.nf,MDBInput:M.gk,VueDatePicker:D.A},data(){return{confirmedBookings:[],testi:{},un:"",ri:"",rooms:[],close:!0,isGallery:!1,proImages:[]}},setup(){const e=(0,A.KR)(!1),i=(0,A.KR)(null),t=(0,A.KR)(""),s=(0,A.KR)(null),o=(0,A.KR)(null),n=(0,A.KR)(!1),r=(0,A.KR)(!1),l=(0,A.KR)(!1),a=(0,A.KR)(!1),d=(0,A.KR)(!1),u=(0,A.KR)(!1),m=(0,A.KR)(null),c=(0,A.KR)(null),k=(0,A.KR)(null),h=(0,A.KR)([]),p=(0,A.KR)([]),g=(0,A.KR)(!1),f=(0,A.KR)([]),v=(0,A.KR)({}),b=(0,A.KR)(!1),y=(0,A.KR)([]),C=(0,A.KR)({}),P=(0,A.KR)(""),T=(0,A.KR)({}),F=(0,A.KR)(null),E=(0,A.KR)([]),L=(0,A.KR)(null),D=(0,A.KR)(null),_=(0,A.KR)(null),w=(0,A.KR)(null),M=(0,A.KR)(null),x=(0,A.KR)({}),R=(0,A.KR)(!1),B=(0,A.KR)([]),K=(0,A.KR)(null),X=(0,A.KR)([(0,ne.A)(new Date,1),(0,ne.A)(new Date,2),(0,ne.A)(new Date,7)]);return{isProviderCalendar:e,testii:i,weekDay:t,timerange:s,datee:o,range:n,isRangeSelected:r,isEditRange:l,isEditPrice:a,isFeedback:d,isEditProfession:u,clearTime:m,dateTest:c,date:k,markers:h,contents:p,isContents:g,markedDays:f,time:v,isConfirmTime:b,times:y,datetime:C,userId:P,provider:T,creditLeft:F,providerTimes:E,errorMessage:L,timeEditSuccessMessage:_,timeEditErrorMessage:w,oblicationInfoMessage:M,successMessage:D,editTime:x,isTimeToEdit:R,editArr:B,timeToEdit:K,highlightedDates:X}},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const i=JSON.parse(e);this.userId=i.id,console.log("User token in provider: "+i.token),this.providerData()}else this.$router.push("/")},methods:{goToMap(){this.$router.push("/provider-public")},getDate(){const e=(new Date).getTime(),i=(new Date).getTime()+6048e5,t=864e5;console.log("and now "+e),console.log("week_ms added  is: "+i);const s=(i-e)/t;console.log("Days between - "+s)},saveNewRange(){this.isEditRange=!1,_.A.editRange(this.provider.id,{range:this.range}),this.provider.range=this.range},getIt(){let e="aaa",i="room";oe.A.auth={username:e,room:i},oe.A.connect();let t="Oopersama";oe.A.emit("updateRoom",t)},joinAllRooms(){const e=["111","222"];oe.A.emit("joinAllClientRooms",e)},handleRemoveProConfirmed(e){console.log("Info closed here?? "+e.header),this.$emit("removeProBookingConfirmed",e),this.confirmedBookings=this.confirmedBookings.filter((i=>i.id!==e.id)),this.successMessage="Siit saab kustutada selle teavituse soovi korral!",setTimeout((()=>{this.successMessage=null}),3e3)},socketResetTest(){oe.A.disconnect(),oe.A.connect()},openChatPanel(e){e.preventDefault(),console.log("Will chat open...");const i=localStorage.getItem("sessionID");i&&(this.usernameAlreadySelected=!0,oe.A.auth={sessionID:i},oe.A.connect()),oe.A.on("session",(({sessionID:e,userID:i,roomName:t})=>{oe.A.auth={sessionID:e},localStorage.setItem("sessionID",e),oe.A.userID=i,oe.A.roomName=t}))},handleInternal(e){if(this.editArr=[],this.editTime={},this.isTimeToEdit=!1,e){let i=e.toString().substring(8,10),t=parseInt(i);this.weekDay=e.toString().substring(0,3);let s={};this.markers.forEach((e=>{e.date.getDate()===t&&(this.isTimeToEdit=!0,s={day:t,weekDay:this.weekDay,time:e.content})})),this.editArr.push(s)}},editPrice(){this.isEditPrice=!0},async saveEditedPrice(e){const i={priceByHour:e},t=await _.A.updateProvider(this.provider.id,i);t&&(this.provider.priceByHour=e,console.log("Price: "+this.provider.priceByHour),this.isEditPrice=!1,this.successMessage="Tuntihinta on muokattu!",setTimeout((()=>{this.successMessage=null}),2e3))},cancelEditPrice(e){this.isEditPrice=e},getFeedbackListData(){this.isFeedback=!0},handleCloseFeedbackList(){this.isFeedback=!1},editProfessionPro(){this.isEditProfession=!0},handleEditProfession(e,i){console.log("Profession is "+i+" and index "+e),this.provider.profession[0]=i,_.A.editProfession(this.provider.id,{index:e,pro:i})},handleAddProfession(e){console.log("Uus amet on "+e),_.A.additionalProfession(this.provider.id,{profession:e}),this.provider.profession.includes(e)||this.provider.profession.push(e)},handleRemoveProfession(e,i){console.log("Profession index is "+e+" and profession is "+i),_.A.removeProfession(this.provider.id,{profession:i}),this.provider.profession.splice(e,1)},handleCancelEditProfession(){this.isEditProfession=!1},removeExpiredDateTime(){this.providerTimes.forEach((e=>{let i=e.yearFrom,t=e.monthFrom,s=e.dayFrom,o=e.hoursFrom,n=e.minutesFrom;new Date(i,t,s,o,n).getTime()<(new Date).getTime()&&this.delTimeRange(e.id)}))},async editTimeTest(){const e={hoursFrom:1};await ke.updateOffer("6431407f53469b1f48eeb2f0",e)},updateTimesAndMarkers(){this.providerTimes.forEach((e=>{console.log("Provider times: "+e.hoursFrom),this.setTimeMarkers(e)})),this.providerTimes.forEach((e=>{this.initializeTime(e)}))},async delTimeRange(e){await ke.removeTimeOffer(this.provider.id,e),this.providerTimes=this.providerTimes.filter((i=>i.id!==e)),this.times=[],this.markers=[],this.updateTimesAndMarkers(),this.editArr.length>1?(this.updateTimesAndMarkers(),this.editArr[0].time=this.editArr[0].time.filter((i=>i.timeId!==e))):(this.editArr=[],this.updateTimesAndMarkers())},onTimePickerOpen(){console.log("Timepicker opened")},alertFn(e){console.log("Opened "+e)},onClose(){console.log("On close...")},async handleDate(){console.log("Date handled!");const e={yearFrom:this.date[0].getFullYear(),monthFrom:this.date[0].getMonth(),dayFrom:this.date[0].getDate(),hoursFrom:this.date[0].getHours(),minutesFrom:this.date[0].getMinutes(),yearTo:this.date[1].getFullYear(),monthTo:this.date[1].getMonth(),dayTo:this.date[1].getDate(),hoursTo:this.date[1].getHours(),minutesTo:this.date[1].getMinutes()},i=await ke.addAdditionalOffer(this.provider.id,e);console.log("Provider times "+this.providerTimes),this.providerTimes=this.providerTimes.concat(i),this.times=[],this.markers=[],this.editArr=[],this.providerTimes.forEach((e=>{this.initializeTime(e)})),this.providerTimes.forEach((e=>{this.setTimeMarkers(e)}));let t={};this.markers.forEach((e=>{e.date.getDate()===i.dayFrom&&(this.isTimeToEdit=!0,t={day:i.dayFrom,weekDay:this.weekDay,time:e.content})})),this.editArr.push(t)},async confirmEditedTime(e){let i;console.log("Confirmed??? "+e+" hours edited: "+this.t);const t=this.timeToEdit;if(t){i={hoursFrom:t[0].hours,minutesFrom:t[0].minutes,hoursTo:t[1].hours,minutesTo:t[1].minutes};const s=await ke.updateOffer(e,i);console.log("Offer edited: "+s),this.timeEditSuccessMessage="Aika muokattu onnistuneesti!",this.providerTimes=this.providerTimes.map((i=>i.id!==e?i:s)),this.testii=s,setTimeout((()=>{this.timeEditSuccessMessage=null}),2e3),this.isTimeToEdit=!1}else this.timeEditErrorMessage="Ensin on vaihdettava kellonaika!",setTimeout((()=>{this.timeEditErrorMessage=null}),2e3);this.timeToEdit=null},handleTime(e){this.timeToEdit=e},setMarkedDay(e){const i=e-(new Date).getDate();this.markedDays.push(e),console.log("Day to set_ "+i)},cancelTime(){console.log("Time cancelled!")},async addAvailableDate(){const e={yearFrom:this.date[0].getFullYear(),monthFrom:this.date[0].getMonth(),dayFrom:this.date[0].getDate(),hoursFrom:this.date[0].getHours(),minutesFrom:this.date[0].getMinutes(),yearTo:this.date[1].getFullYear(),monthTo:this.date[1].getMonth(),dayTo:this.date[1].getDate(),hoursTo:this.date[1].getHours(),minutesTo:this.date[1].getMinutes()},i=await ke.addAdditionalOffer(this.provider.id,e);console.log("Saved? "+i)},setTimeMarkers(e){let i=null;this.contents=[],i=e.monthFrom===(new Date).getMonth()?(0,ne.A)(new Date,e.dayFrom-(new Date).getDate()):(0,ne.A)(new Date(e.yearFrom,e.monthFrom,0),e.dayFrom),console.log("Test markers: "+new Date(e.yearFrom,e.monthFrom,e.dayFrom)),this.times.forEach(((t,s)=>{if(t[0].day===e.dayFrom){let o=t[0].hours+" : "+t[0].minutes+" - "+t[1].hours+" : "+t[1].minutes;this.contents.push({text:o,index:s,timeId:this.providerTimes[s].id,color:"red"}),this.markers=this.markers.concat({dFrom:e.dayFrom,date:i,type:"line",color:"orange",content:this.contents})}}))},async providerData(){const e=await _.A.getProvider(this.userId);e&&(this.provider=e,this.creditLeft=((e.proTime-(new Date).getTime())/864e5).toFixed()<0?0:((e.proTime-(new Date).getTime())/864e5).toFixed(),e.reference.forEach(((e,i)=>{this.proImages=[...this.proImages,{id:i,size:"1400-933",src:t(3906)(`./${e.name}`),thumb:t(3906)(`./${e.name}`),subHtml:'<div class="lightGallery-captions">\n\n\n            </div>"'}]})),this.providerTimes=e.timeoffer,e.isAvailable24_7||(this.isProviderCalendar=!0),console.log("Provider rooms are: "+e.room.map((e=>e))),this.rooms=e.room),this.confirmedBookings=e.booking.filter((e=>"confirmed"===e.status)),this.times=[],this.providerTimes&&(this.providerTimes.forEach((e=>{this.initializeTime(e)})),this.removeExpiredDateTime(),this.providerTimes.forEach((e=>{this.setTimeMarkers(e)})))},initializeTime(e){let i=[];i.push({day:e.dayFrom,hours:e.hoursFrom,minutes:e.minutesFrom},{day:e.dayTo,hours:e.hoursTo,minutes:e.minutesTo}),this.times.push(i)},test(e){console.log("What ever: "+e)}}};const Pe=(0,R.A)(Ce,[["render",L]]);var Te=Pe},1644:function(e,i,t){e.exports=t.p+"img/error.9510853e.png"}}]);
//# sourceMappingURL=857.1237511d.js.map