"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[596],{9398:function(e,t,o){const s=o(7218),a="/api/providers",l=async()=>{const e=await s.get(a);return e.data},n=async(e,t)=>{const o=await s.post(`${a}/${e}`,t);return o.data};t["Z"]={getProviders:l,addProvider:n}},4596:function(e,t,o){o.r(t),o.d(t,{default:function(){return P}});o(7658);var s=o(3396),a=o(7139),l=o(9242);const n=(0,s._)("h2",{style:{"margin-top":"50px","margin-bottom":"50px"}},"Hei, olen TMI ja tarjoan palvelua!",-1),i={class:"ui large form"},d={class:"field"},r=(0,s._)("option",{disabled:"",value:""},"Valitse ammatti",-1),u=(0,s._)("option",null,"Putkimies",-1),c=(0,s._)("option",null,"Sähkömies",-1),g=(0,s._)("option",null,"Siivooja",-1),m=[r,u,c,g];function p(e,t,o,r,u,c){const g=(0,s.up)("MDBInput"),p=(0,s.up)("VueDatePicker"),h=(0,s.up)("MDBCheckbox"),_=(0,s.up)("MDBBtn"),f=(0,s.up)("MDBContainer");return(0,s.wg)(),(0,s.iD)("div",null,[n,(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s._)("form",null,[(0,s.Wm)(g,{label:"Anna osoitteesi",id:"osoite",size:"lg",wrapperClass:"mb-4"}),(0,s.Wm)(g,{label:"Anna tuntihinta",modelValue:r.price,"onUpdate:modelValue":t[0]||(t[0]=e=>r.price=e),id:"hinta",size:"lg",wrapperClass:"mb-4"},null,8,["modelValue"]),(0,s.Wm)(p,{size:"lg",placeholder:"Mistä mihin asti palvelet?",style:{"margin-bottom":"20px"},modelValue:r.date,"onUpdate:modelValue":t[1]||(t[1]=e=>r.date=e),id:"datte",range:""},null,8,["modelValue"]),(0,s._)("div",null,"Selected: "+(0,a.zw)(u.profession),1),(0,s._)("div",i,[(0,s._)("div",d,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>u.profession=e)},m,512),[[l.bM,u.profession]])])]),(0,s.Wm)(h,{label:"Saatavilla 24/7",modelValue:r.isAvailable24_7,"onUpdate:modelValue":t[3]||(t[3]=e=>r.isAvailable24_7=e)},null,8,["modelValue"])]),(0,s._)("h1",null,(0,a.zw)(u.result),1),(0,s.Wm)(_,{outline:"success",size:"lg",block:"",onClick:c.addProvider},{default:(0,s.w5)((()=>[(0,s.Uk)("Testaus")])),_:1},8,["onClick"]),(0,s.Wm)(_,{outline:"success",size:"lg",block:"",onClick:t[4]||(t[4]=e=>this.$router.push("/provided"))},{default:(0,s.w5)((()=>[(0,s.Uk)("Kinnita andmed")])),_:1}),(0,s.Wm)(_,{outline:"success",size:"lg",block:"",onClick:c.testMonth},{default:(0,s.w5)((()=>[(0,s.Uk)("Date month")])),_:1},8,["onClick"]),(0,s.Wm)(_,{outline:"danger",size:"lg",block:"",onClick:c.canselSession,style:{"margin-bottom":"50px"}},{default:(0,s.w5)((()=>[(0,s.Uk)(" Cansel ")])),_:1},8,["onClick"])])),_:1})])}var h=o(4870),_=o(6725),f=o(4313),v=o(4161);const k=o(7218),b="/api/map",w=async()=>{const e=await k.get(b);return e.data};var y={getLocation:w},M=o(9398);const C=o(4729),D=o(4729);var V={name:"provider-form",data(){return{result:"",latitude:0,longitude:0,address:"",profession:"",userId:""}},setup(){const e=(0,h.iH)(""),t=(0,h.iH)(null),o=(0,h.iH)(!1);return{date:e,price:t,isAvailable24_7:o}},components:{MDBContainer:f.L5,MDBBtn:f.$v,MDBInput:f.u2,MDBCheckbox:f.IH,VueDatePicker:_.Z},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.userId=t.id,console.log("User id in Provider: "+t.id)}console.log("Google key is: "+D.google);const t={lat:50.064192,lng:-130.605469},o={north:t.lat+.1,south:t.lat-.1,east:t.lng+.1,west:t.lng-.1},s=document.getElementById("osoite"),a={bounds:o,componentRestrictions:{country:"fi"},fields:["address_components","geometry","icon","name","formatted_address"],strictBounds:!1},l=new google.maps.places.Autocomplete(s,a);l.addListener("place_changed",(()=>{let e=l.getPlace();this.latitude=e.geometry.location.lng(),this.longitude=e.geometry.location.lng(),console.log(e),console.log("Latitude: "+e.geometry.location.lng()),console.log("Full address: "+e.formatted_address),this.address=e.formatted_address}))},methods:{canselSession(){this.$emit("cansel:provider","Test")},getAddress(){v.Z.get("https://maps.googleapis.com/maps/api/geocode/json?address=01620+Raikukuja,+Vantaa&key="+C.googleMap).then((e=>{e.data.error_message?(this.error=e.data.error_message,console.log(e.data.error_message)):(this.address=e.data.results[0].formatted_address,console.log(e.data.results[0].formatted_address),console.log(e.data.results[0].address_components[0].long_name),this.result=e.data.results[0].formatted_address)})).catch((e=>{this.error=e.message,this.spinner=!1,console.log(e.message)}))},async addProvider(){const e={address:this.address,latitude:this.latitude,longitude:this.longitude,profession:this.profession,priceByHour:this.price,isAvailable24_7:this.isAvailable24_7,monthFrom:this.date[0].getMonth(),dayFrom:this.date[0].getDate(),hoursFrom:this.date[0].getHours(),minutesFrom:this.date[0].getMinutes(),monthTo:this.date[1].getMonth(),dayTo:this.date[1].getDate(),hoursTo:this.date[1].getHours(),minutesTo:this.date[1].getMinutes()},t=await M.Z.addProvider(this.userId,e);console.log("Added provider::: "+t)},testMonth(){console.log("Month: "+this.date[0].getMonth())},async getTest(){const e=await y.getLocation();console.log("result "+e)}}},B=o(89);const A=(0,B.Z)(V,[["render",p]]);var P=A}}]);
//# sourceMappingURL=596.2515f147.js.map