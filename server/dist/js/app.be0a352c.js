(function(){var e={407:function(e,t,o){"use strict";const i=o(6425),s="/api/recipients",n=async()=>{const e=await i.get(s);return e.data},a=async e=>{const t=await i.get(`${s}/user/${e}`);return t.data},r=async e=>{const t=await i.get(`${s}/booking/${e}`);return t.data},l=async(e,t)=>{const o=await i.post(`${s}/${e}`,t);return o.data},d=async(e,t)=>{const o=await i.put(`${s}/${e}`,t);return o.data},c=async(e,t)=>{const o=await i.put(`${s}/${e}/editBookingAddress`,t);return o.data},u=async(e,t)=>{const o=await i.put(`${s}/${e}/description`,t);return o.data},g=async(e,t)=>{const o=await i.post(`${s}/${e}/addOrdered/${t}`);return o.data},A=async(e,t)=>{const o=await i.put(`${s}/${e}/visitor`,t);return o.data},m=async(e,t)=>{const o=await i.put(`${s}/${e}/pro/${t}`);return o.data},h=async(e,t)=>{const o=await i.post(`${s}/${e}/offer/${t}`);return o.data},p=async(e,t)=>{const o=await i.put(`${s}/${e}/updateDate`,t);return o.data},f=async(e,t)=>{const o=await i.post(`${s}/${e}/addImage/${t}`);return o.data},v=async(e,t)=>{const o=await i.delete(`${s}/${e}/image/${t}`);return o.data},k=async(e,t)=>{const o=await i.put(`${s}/client/${e}`,t);return o.data},y=async e=>{await i.delete(`${s}/${e}`)};t.A={getRecipients:n,getOwnBookings:a,getBookingById:r,addRecipient:l,updateRecipient:d,editBookingAddress:c,editDescription:u,addProviderData:g,addVisitor:A,removeProviderData:m,createOffer:h,newDate:p,addImage:f,removeImage:v,feedbackClient:k,removeBooking:y}},417:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABaBJREFUWEetl2lsXNUVx3/nvRk7Y8djxzVJ5DhmbGzHcQqFGJtgzBIJCYFaiaWgClRFFbT9BJSypKVUBYmlUL4EiVVIyQeEkAmEClVdkDAkjVPkAVGBSYhTZ+zYjuPgdZyxZ968e8qbiZfxFif2/fjuvef/O/ecc899wrlGU5NdfFH5Gp+dXItt11iGK4FNWBSD5KW3axRDL7YcEZcvBPe/EwF7sDcaHWb79uRiErLgpKpVcuhQQZb6LnFV7hTlxwibz8WrkBSlQ4W/IvY+V7K/7W7YMrjQvnkBbmhu9kWy8ypw9WeI7gAJnUt4zryIopxG9BXLyO5VJwN939y1JTF73RyA2nDYP5jQKzD6hCI/OW/huRvGFWm2xHrekYnW7oaG8ZlLMgA88eGY1ruWvAi6bQXEz6aIuiocVrUfz1of/Nexysr4pO0pAO/YO7NXb1Uju1ZUfNoLAxxW5P7Oa2o/wQsRkAZQtUKHPq8SY15Y7NhtEYK2TdR1SWpq//mOhMCncVfv7b2+/sQUQElLS6HP9T+A8KeFLPpF2JKbw42FBXz43SDfxjJCuXQQZQRhd9Ja/3h3w8ZxoanJLt8Q2mqUpoWy3ROvzcvlqbKNFGVn83rPSd7oObV00bkrOwV+ebyx7iMpbg4X+f36mMCj81m0BS4NBHi+opSy3NWER6M8efwERy/0BFIh5wwi7+asCfxaSvf/p8YSe+98l4wFbPT7eLh4HTdvWM9X0TF2Hu2gPe4sx/t02sExy1h3SOnB1p9ayruzLXriF/ls7irM5zcVZXSNT/BipJu/DY0sWzxtQPpR86yEDrT+GWHn7Muh0La5Z90PeDC0kf54gnf6+tm1vLjPBo8Jus8D2Idw68zZgAi3FOTxl5oqBhIJ3urpY1dv/wp5PmXGIIQldLD1M5T6yc+pjM9Zlcr48mAeX45E+WMkVbLLGkmjnHYcRpLutB3lsIQOhr9BNd3lVLnY7+P1zRVsCp7ttMuSTW/2rqy+eIIXOnv44PTATItHMwDUcdgQO8NrV19JTUE+lggJ12U4sbys9wB6HIdXuvv4ODOJPYDpEHgA8t1pLisI8kzt5WwuyKcjOsZbHRGGlgGRsCzajdDhzHJEvBDMTEJjcMfGsM+MUVtYwKsNV+GzLPYc72JPVzfDzqKPm/mDZVnIqgDi982e97rJ5xJqCT+H0d9N56bBHR0lNzHB7aFSHtlSjYrFm72n2N17ignjNbUVGTGF96XsQPhOI/q2QBpRQZMOJhol33X4ReUl/LyijL5kkpe6TvLv4dEVgpB+hGek/MBnVQbrQ4SqKb88CMfBHRlmzfevzV9VV7KjopxIPM6urpN8OjRyoe14UsJ7rh3B0rulOBwu8k/oYyLyCKrTLyQPIpHAGh2iOifAQz+s4dp1a2mLxdjZ3sn/xi+wHacRYsDeSGPdDqG52XdxVn6dqPkAdG1GdFMQcWRwgEvzgzy59UcU5ebw0ole3uvPqOelJ4WIQfUYxjwQue6qf6Y8LmlpK/Rp7H401RMCGdaMwcRiWNFRqvOD3LqpivcHhpbTjkdR3RO5tv5BT2fqyMsPhEtd4VVRcxMi9mwIrzxJOlh5QcTvX7rHmSsdlFb1Wfd1Xl17OAOgpqkta3xDfJvR5MuC1ABeR16xIZBU+ErhD52NdX+fNJzxLC9paQlYbvaNlpjngEoga4UIvCvwazHus8ev27Z3ps05PyYV7e3ZzqmRBgv9vXpdUsi/YIh0wo2hfK3C0zM9n/cEpu8BleL9rSVZtvwWuA2lCCH3PEC8/uPVaTeq/1Cf/dpkzGfbWPjnNFUdJwJ+09eoyN2KNgoSBF0NrJonR86KyhiqAwitGPO2V2qLgS8KMLmxpq0ta3xgolrF3S5CnYpUYshDSFeL4Kr30oUjItIKZn/kmvovl3Ji/wfso2LB+a4NggAAAABJRU5ErkJggg=="},683:function(e,t,o){"use strict";var i=o(4915);const s=o(6425),n=`${i.A}/users`,a=async()=>{const e=await s.get(n);return e.data},r=async e=>{const t=await s.get(`${n}/${e}`);return t.data},l=async e=>{const t=await s.post(`${n}`,e);return t.data},d=async(e,t)=>{const o=await s.put(`${n}/${e}/updateEmail`,t);return o.data},c=async e=>{const t=await s.put(`${n}/${e}/removeAvatar`,{avatar:{}});return t.data};t.A={getAll:a,getUser:r,addUser:l,editEmail:d,removeAvatar:c}},737:function(e,t,o){"use strict";var i=o(5130),s=(o(8111),o(2489),o(3579),o(6768)),n=o(4232);const a={class:"bg-image hover-zoom"},r={class:"navChatContainer"},l={key:0},d={key:0,class:"chat-new-message-provider"},c={key:1,class:"chat-new-message-client"},u={key:1,class:"chat-user-is-provider"},g={key:2,style:{display:"flex","justify-content":"space-around"},class:"chat-user-is-client"},A={class:"navFeedbackContainer"},m={class:"navClientBellContainer"},h={class:"avatarContainer"},p=["src"],f={class:"user"},v={key:0},k={style:{"flex-direction":"column"}},y={style:{"font-size":"11px"}},_={class:"available_btn_panel",style:{}},b={class:"small_available_btn_panel"},w={id:"container"},B={class:"box"};function C(e,t,o,C,I,D){const P=(0,s.g2)("MDBIcon"),x=(0,s.g2)("MDBNavbarBrand"),M=(0,s.g2)("router-link"),E=(0,s.g2)("language"),R=(0,s.g2)("MDBBadge"),L=(0,s.g2)("MDBDropdownToggle"),S=(0,s.g2)("MDBCol"),O=(0,s.g2)("MDBRow"),U=(0,s.g2)("MDBDropdownItem"),N=(0,s.g2)("MDBDropdownMenu"),F=(0,s.g2)("MDBDropdown"),$=(0,s.g2)("MDBNavbarItem"),Q=(0,s.g2)("MDBNavbarNav"),T=(0,s.g2)("MDBNavbar"),j=(0,s.g2)("success-message"),H=(0,s.g2)("info-message"),X=(0,s.g2)("prompt-panel"),W=(0,s.g2)("MDBBtn"),V=(0,s.g2)("MDBContainer"),Y=(0,s.g2)("MDBFooter"),G=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(T,{id:"navbar",style:{padding:"3px  0 3px 0"},dark:"",size:"large",position:"top",bg:"dark",container:"","bg-secondary":"","bg-gradient":"","text-white":"",class:"d-flex justify-content-between"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/",onClick:D.onPressedLogoBtn},{default:(0,s.k6)((()=>[(0,s.bF)(x,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",a,[(0,s.bF)(P,{class:"responsive-icon"},{default:(0,s.k6)((()=>t[12]||(t[12]=[(0,s.Lk)("i",{class:"fas fa-home",style:{color:"white","margin-top":"5px"}},null,-1)]))),_:1})])])),_:1})])),_:1},8,["onClick"]),(0,s.bF)(E),void 0!==I.loggedUser.token?((0,s.uX)(),(0,s.Wv)(Q,{key:0,right:"",class:"mb-2 mb-lg-0 d-flex flex-row"},{default:(0,s.k6)((()=>[I.chatParticipants.filter((e=>e.isActive)).length>0?((0,s.uX)(),(0,s.Wv)(F,{key:0,modelValue:C.dropDownChat,"onUpdate:modelValue":t[2]||(t[2]=e=>C.dropDownChat=e),class:"navChatDD",variant:"none"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",r,[(0,s.bF)(L,{tag:"a",class:"nav-link",onClick:t[0]||(t[0]=e=>C.dropDownChat=!C.dropDownChat)},{default:(0,s.k6)((()=>[(0,s.bF)(P,{solid:"",icon:"comment",class:"responsive-icon",style:{color:"white"}}),I.newMessageList.length>0?((0,s.uX)(),(0,s.Wv)(R,{key:0,class:"translate-middle p-1",style:{"margin-left":"2px","margin-top":"3px"},pill:"",notification:"",color:"danger"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,n.v_)(I.newMessageList.length),1)])),_:1})):(0,s.Q3)("",!0)])),_:1})]),(0,s.bF)(N,{dark:"",style:{padding:"0 7px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.chatParticipants.filter((e=>e.isActive)),((e,o)=>((0,s.uX)(),(0,s.Wv)(U,{href:"#",key:o},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.bF)(M,{style:{color:"green"},class:(0,n.C4)({disabled:e.proID===I.user.id&&I.isAccessTerminated}),to:"/chat",onClick:t=>D.updateRoom(e)},{default:(0,s.k6)((()=>[I.newMessageList.some((t=>t.room===e.room))?((0,s.uX)(),(0,s.CE)("div",l,[e.proID===I.user.id?((0,s.uX)(),(0,s.CE)("h4",d,[(0,s.Lk)("b",null,[(0,s.eW)((0,n.v_)(e.pro)+"  ( "+(0,n.v_)(e.name)+" ) ",1),(0,s.bF)(R,{color:"danger",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_newMessage")),1)])),_:1})])])):((0,s.uX)(),(0,s.CE)("h4",c,[(0,s.Lk)("b",null,[(0,s.eW)((0,n.v_)(e.name)+" ",1),(0,s.bF)(R,{color:"danger",class:"ms-2",pill:"",notification:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_newMessage")),1)])),_:1})])]))])):e.proID===I.user.id?((0,s.uX)(),(0,s.CE)("h4",u,(0,n.v_)(e.pro)+"  ( "+(0,n.v_)(e.name)+" ) ",1)):((0,s.uX)(),(0,s.CE)("div",g,[(0,s.Lk)("h4",null,[(0,s.bF)(O,null,{default:(0,s.k6)((()=>[(0,s.bF)(S,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.name),1)])),_:2},1024)])),_:2},1024)]),0===e.same_room_counter&&"recipient-public"!==I.route.name&&"live-chat"!==I.route.name?((0,s.uX)(),(0,s.CE)("span",{key:0,onClick:t[1]||(t[1]=(0,i.D$)((()=>{}),["prevent"]))},[(0,s.bF)(P,{style:{"margin-left":"10px","margin-top":"7px",color:"palevioletred"},onClick:t=>D.removeTempChat(e.room,e.name)},{default:(0,s.k6)((()=>t[13]||(t[13]=[(0,s.Lk)("i",{class:"fas fa-trash-alt"},null,-1)]))),_:2},1032,["onClick"])])):(0,s.Q3)("",!0)]))])),_:2},1032,["class","onClick"])])])),_:2},1024)))),128))])])),_:1})])),_:1},8,["modelValue"])):(0,s.Q3)("",!0),I.recipientCompletedBookings.length>0?((0,s.uX)(),(0,s.Wv)(F,{key:1,modelValue:C.dropDownfeedback,"onUpdate:modelValue":t[4]||(t[4]=e=>C.dropDownfeedback=e)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",A,[(0,s.bF)(L,{tag:"a",class:"nav-link",onClick:t[3]||(t[3]=e=>C.dropDownfeedback=!C.dropDownfeedback)},{default:(0,s.k6)((()=>[(0,s.bF)(P,{solid:"",icon:"comments",class:"responsive-icon",style:{color:"white"}}),(0,s.bF)(R,{class:"translate-middle p-1",style:{"margin-left":"2px","margin-top":"3px"},pill:"",notification:"",color:"danger"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,n.v_)(I.recipientCompletedBookings.length),1)])),_:1})])),_:1})]),(0,s.bF)(N,{dark:"",style:{}},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.recipientCompletedBookings,((e,t)=>((0,s.uX)(),(0,s.Wv)(U,{href:"#",key:t},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/feedback",onClick:t=>D.handleFeedbackClient(e),style:{"font-size":"17px",color:"#ddd"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.date)+" - "+(0,n.v_)(e.header),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])):(0,s.Q3)("",!0),I.newOffers.length>0&&"recipient-panel"!==I.route.name?((0,s.uX)(),(0,s.Wv)($,{key:2,class:"me-3 me-lg-0",onClick:D.offerSeen},{default:(0,s.k6)((()=>[(0,s.Lk)("div",m,[(0,s.bF)(P,{solid:"",icon:"bell",class:"responsive-icon",style:{color:"lightskyblue"}}),(0,s.bF)(R,{notification:"",color:"danger",class:"translate-middle p-1",style:{"margin-left":"2px","margin-top":"3px"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(I.newOffers.length),1)])),_:1})])])),_:1},8,["onClick"])):(0,s.Q3)("",!0),I.providerBookings.length>0?((0,s.uX)(),(0,s.Wv)($,{key:3,to:"/notification",class:"me-3 me-lg-0",linkClass:"link-secondary"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",{class:(0,n.C4)(["navProBellContainer",{"gentle-hover-shake":I.isRingBell}])},[(0,s.bF)(P,{solid:"",icon:"bell",class:"responsive-icon",style:{color:"orange"}}),I.notSeenClientBookings.length>0?((0,s.uX)(),(0,s.Wv)(R,{key:0,notification:"",color:"danger",style:{"margin-left":"2px","margin-top":"3px"},class:"translate-middle p-1",onClick:D.handleNotifications,pill:""},{default:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,n.v_)(I.notSeenClientBookings.length),1)])),_:1},8,["onClick"])):((0,s.uX)(),(0,s.Wv)(R,{key:1,notification:"",color:"danger",class:"translate-middle p-1",pill:""}))],2)])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(F,{modelValue:C.dropdownUser,"onUpdate:modelValue":t[6]||(t[6]=e=>C.dropdownUser=e),style:{}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",h,[(0,s.bF)(L,{class:"bg-image hover-zoom",tag:"a",onClick:t[5]||(t[5]=e=>C.dropdownUser=!C.dropdownUser)},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{style:{},class:"navAvatar",src:I.showAvatar?I.showAvatar:I.avatar,alt:"user_avatar"},null,8,p)])),_:1}),I.notes.filter((e=>e.isNewMsg)).length>0?((0,s.uX)(),(0,s.Wv)(R,{key:0,notification:"",color:"info",style:{"margin-top":"3px"},class:"translate-middle p-1",pill:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(I.notes.filter((e=>e.isNewMsg)).length),1)])),_:1})):(0,s.Q3)("",!0)]),(0,s.bF)(N,{dark:"",style:{padding:"12px"}},{default:(0,s.k6)((()=>[I.notes.length>0?((0,s.uX)(),(0,s.Wv)(U,{key:0,href:"#"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/message",class:"user",onClick:D.handleNotes},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_user_messages"))+" ",1),I.notes.filter((e=>e.isNewMsg)).length?((0,s.uX)(),(0,s.Wv)(R,{key:0,color:"info",class:"ms-2"},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(I.notes.filter((e=>e.isNewMsg)).length),1)])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["onClick"])])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(U,{href:"#",class:"x",style:{"border-radius":"0","":"hover: background-color: blue"}},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/profile",class:"user",onClick:D.onPressedUserIconChildren},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_user_profile")),1)])),_:1},8,["onClick"])])),_:1}),(0,s.bF)(U,{href:"#",class:"x",style:{"border-radius":"0","":"hover: background-color: blue"}},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/manual",class:"user",onClick:D.onPressedUserIconChildren},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_user_manual")),1)])),_:1},8,["onClick"])])),_:1}),I.userIsProvider?((0,s.uX)(),(0,s.Wv)(U,{key:1,href:"#"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/pro-gallery",class:"user",onClick:D.onPressedUserIconChildren},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_user_gallery")),1)])),_:1},8,["onClick"])])),_:1})):(0,s.Q3)("",!0),I.recipientCompletedBookingsHistory.length>0||I.proCompletedHistory.length>0?((0,s.uX)(),(0,s.Wv)(U,{key:2,href:"#"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/history",class:"user",onClick:D.onPressedUserIconChildren},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_user_history")),1)])),_:1},8,["onClick"])])),_:1})):(0,s.Q3)("",!0),I.recipientBookings.length>0?((0,s.uX)(),(0,s.Wv)(U,{key:3,href:"#"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/received",class:"user",onClick:D.onPressedUserIconChildren},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_user_orders")),1)])),_:1},8,["onClick"])])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(U,{href:"#"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/calendar",class:"user",onClick:D.onPressedUserIconChildren},{default:(0,s.k6)((()=>t[14]||(t[14]=[(0,s.eW)(" Calendar ")]))),_:1},8,["onClick"])])),_:1}),I.userIsProvider?((0,s.uX)(),(0,s.Wv)(U,{key:4,href:"#"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/pay-plan",class:"user",onClick:D.onPressedUserIconChildren},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_user_billing")),1)])),_:1},8,["onClick"])])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(U,{href:"#"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/rules",class:"user",onClick:D.onPressedUserIconChildren},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_user_rules")),1)])),_:1},8,["onClick"])])),_:1}),(0,s.bF)(U,{href:"#",onClick:D.handleLogOut},{default:(0,s.k6)((()=>[(0,s.Lk)("p",f,(0,n.v_)(C.t("nav_logout")),1)])),_:1},8,["onClick"])])),_:1})])),_:1},8,["modelValue"])])),_:1})):((0,s.uX)(),(0,s.Wv)(Q,{key:1,right:"",class:"mb-2 mb-lg-0 d-flex flex-row"},{default:(0,s.k6)((()=>[(0,s.bF)($,null,{default:(0,s.k6)((()=>[(0,s.bF)(M,{to:"/login",onClick:t[7]||(t[7]=e=>C.collapse7=!1),style:{color:"cornflowerblue"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(C.t("nav_sign_in")),1)])),_:1})])),_:1})])),_:1}))])),_:1}),(0,s.bF)(j,{style:{padding:"20px"},message:I.ratingResult},null,8,["message"]),(0,s.bF)(H,{style:{padding:"20px"},message:I.offerLimitLoadedMessage},null,8,["message"]),(0,s.bF)(X,{promptPanelContent:I.promptPanelContent,"onPrompt:no":D.handlePromptNo,"onPrompt:yes":D.handlePromptYes},null,8,["promptPanelContent","onPrompt:no","onPrompt:yes"]),I.userIsProvider&&I.loggedUser?((0,s.uX)(),(0,s.CE)("div",v,["recipient-public"!==I.route.name&&"provider-public"!==I.route.name?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"availableDrag",style:(0,n.Tr)({left:C.pos.x+"px",top:C.pos.y+"px"}),onMousedown:t[10]||(t[10]=(...e)=>C.startDrag&&C.startDrag(...e)),onTouchstart:t[11]||(t[11]=(...e)=>C.startDrag&&C.startDrag(...e))},[(0,s.Lk)("div",null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",k,[(0,s.Lk)("p",y,[t[15]||(t[15]=(0,s.eW)(" Näkyvyys kalenterissa ")),(0,s.Lk)("i",{class:(0,n.C4)(I.isProAvailable?"icon-green":"icon-red"),style:{"margin-bottom":"7px"}},null,2)]),(0,s.Lk)("div",_,[(0,s.bF)(W,{color:"success",onClick:D.switchProAvailability},{default:(0,s.k6)((()=>t[16]||(t[16]=[(0,s.eW)("Heti")]))),_:1},8,["onClick"]),(0,s.bF)(W,{color:"danger",onClick:D.undoProAvailability},{default:(0,s.k6)((()=>t[17]||(t[17]=[(0,s.eW)("Pois")]))),_:1},8,["onClick"])]),(0,s.Lk)("div",b,[(0,s.Lk)("p",{style:{color:"lawngreen"},onClick:t[8]||(t[8]=(...e)=>D.switchProAvailability&&D.switchProAvailability(...e))},"HETI"),(0,s.Lk)("p",{style:{color:"red"},onClick:t[9]||(t[9]=(...e)=>D.undoProAvailability&&D.undoProAvailability(...e))},"POIS")])])])])],36)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.bF)(Y,{bg:"dark",text:["center","white"],class:"fixed-bottom"},{default:(0,s.k6)((()=>[I.clientMapSearchData.length>0?((0,s.uX)(),(0,s.Wv)(V,{key:0},{default:(0,s.k6)((()=>[(0,s.Lk)("div",w,[(0,s.Lk)("div",null,[(0,s.Lk)("div",B,(0,n.v_)(I.sentence),1)])])])),_:1})):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,n.C4)([{footer:"dash-board"!==I.route.name},"text-center p-3"]),style:{"background-color":"rgba(0, 0, 0, 0.2)"}},[t[19]||(t[19]=(0,s.eW)(" © 2025 Copyright: DUVA OY ")),(0,s.bF)(M,{to:"/admin"},{default:(0,s.k6)((()=>t[18]||(t[18]=[(0,s.eW)(" ------- ")]))),_:1})],2)])),_:1}),(0,s.bF)(G,{avatar:I.avatar,onDelete_avatar:D.handleDeleteAvatar,avatarObject:I.avatarObject,client_filled_days:I.client_filled_days,client_filled:I.client_filled,filled_days:I.filled_days,filled:I.filled,notes:I.notes,onRemove_note:D.handleRemoveNote,test:I.test,"onLogin:data":D.handleLogin,"onRegister:data":D.createUser,userIsProvider:I.userIsProvider,proImages:I.proImages,onAddProImage:D.handleAddProImage,onEditProRefImage:D.handleEditProRefImage,onRemoveProRefImage:D.handleRemoveProRefImage,proRefSlides:I.proRefSlides,isPro:I.isProOpenGallery,"onAdd:slide":D.handleAddSlide,"onRemove:slide":D.handleRemoveSlide,"onUpdate:gallery":D.handleUpdateGallery,onUpdateGalleryRemove:D.handleUpdateGalleryRemove,loggedInUser:I.loggedUser,recipientBookings:I.recipientBookings,onAddImageToRecipientBookings:D.handleAddImageRecipientBookings,confirmedBookingsByClient:I.clientAcceptedBookings,confirmedBookingsByProvider:I.providerAcceptedBookings,"onBooking:update":D.handleCreateBooking,"onBooking_map:update":D.handleCreateMapBooking,onOffer_confirmed:D.handleOfferConfirmed,"onExit:notifications":D.handleExitNotifications,"onUpdate:status":D.handleStatusUpdate,"onUpdate:proChatNav":D.handleUpdateProChatNav,"onUpdate:booking":e.handleUpdateClientConfirmedBooking,onGet_booking_offers:D.getBookingOffers,offers:I.offers,onOffer_limit_is_loaded:D.handleOfferLimitIsLoaded,"onCreate:offer":D.handleCreateOffer,onEditOfferStatus:D.handleEditOfferStatus,onConfirm_client_booking:D.handleConfirmClientBooking,onReject_pro_form_booking:D.handleRejectProFormBooking,onReject_bookingByPro_no_offers:D.handleRejectBookingByProNoOffers,onReject_bookingByClient_no_offers:D.handleRejectBookingByClientNoOffers,onRemoveBookingWithOffers:D.handleRemoveBookingWithOffers,"onActivate:bell":D.handleActivateBell,"onDeactivate:bell":e.handleDeActivateBell,bookings:I.providerBookings,bookingsConfirmed:I.confirmedProBookings,recipientConfirmedBookings:I.recipientCompletedBookingsHistory,proCompletedHistory:I.proCompletedHistory,onRemoveProBookingConfirmed:e.handleRemoveProBookingConfirmed,customer:I.rateCustomer,onIsRated:D.handleRated,onBackFromFeedback:e.handleBackFromFeedbackClient,onFinalinfo:D.fromFinal,onInitializeChat:D.handleInitializeChat,onJoinChatPanel:D.handleJoinChatPanel,chatusers:I.users,activeUser:I.activeUser,messages:I.conversation,"onSet:room":D.handleSetRoom,isSelectedByExpiredUser:I.isSelectedByExpiredUser,newMessageRoom:I.newMessageRoom,provider:I.userIsProvider,onEditPortfolio:D.handleEditPortfolio,proDescription:I.proDescription,recipient:I.recipientBookings,"onRecipient:date_ms":D.handleUpdateBookingDate_ms,creditLeft:I.proTimeCreditLeft,onShowCreatedProvider:D.handleShowCreatedProvider,onUpdateProTimeCredit:D.handleUpdateProTimeCredit,isAccessDenied:I.isAccessTerminated,"onSelect:user":D.onSelectUser,onNoSelected:D.noSelectUser,selecteduser:I.selectedUser,"onJoin:visitor":D.handleJoinVisitor,"onOn:message":D.handleMessage,onOtherUser:e.otherUser,onBookingWaitingProBack:e.handleBookingWaitingProBackBtn,onUpdateAvatar:D.handleUpdateAvatar,onRemoveAvatar:D.handleRemoveAvatar,"recipient-test":I.recipientTest,"onClient:confirmed_provider":e.handleClientConfirmedUser,onArchiveClientSideBooking:D.handleArchiveClientSideBooking,onResetMapSearch:D.mapSearchReset,wentOut:D.wentOut},null,8,["avatar","onDelete_avatar","avatarObject","client_filled_days","client_filled","filled_days","filled","notes","onRemove_note","test","onLogin:data","onRegister:data","userIsProvider","proImages","onAddProImage","onEditProRefImage","onRemoveProRefImage","proRefSlides","isPro","onAdd:slide","onRemove:slide","onUpdate:gallery","onUpdateGalleryRemove","loggedInUser","recipientBookings","onAddImageToRecipientBookings","confirmedBookingsByClient","confirmedBookingsByProvider","onBooking:update","onBooking_map:update","onOffer_confirmed","onExit:notifications","onUpdate:status","onUpdate:proChatNav","onUpdate:booking","onGet_booking_offers","offers","onOffer_limit_is_loaded","onCreate:offer","onEditOfferStatus","onConfirm_client_booking","onReject_pro_form_booking","onReject_bookingByPro_no_offers","onReject_bookingByClient_no_offers","onRemoveBookingWithOffers","onActivate:bell","onDeactivate:bell","bookings","bookingsConfirmed","recipientConfirmedBookings","proCompletedHistory","onRemoveProBookingConfirmed","customer","onIsRated","onBackFromFeedback","onFinalinfo","onInitializeChat","onJoinChatPanel","chatusers","activeUser","messages","onSet:room","isSelectedByExpiredUser","newMessageRoom","provider","onEditPortfolio","proDescription","recipient","onRecipient:date_ms","creditLeft","onShowCreatedProvider","onUpdateProTimeCredit","isAccessDenied","onSelect:user","onNoSelected","selecteduser","onJoin:visitor","onOn:message","onOtherUser","onBookingWaitingProBack","onUpdateAvatar","onRemoveAvatar","recipient-test","onClient:confirmed_provider","onArchiveClientSideBooking","onResetMapSearch","wentOut"])],64)}o(4114),o(116),o(7588),o(1701);var I=o(4474),D=o(5570);function P(){return new Promise((e=>{if(window.google?.maps?.places&&customElements.get("gmp-placeautocomplete"))return void e();window.initMap=()=>{e()};const t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDt2YXE5tk0J72JgqnH3DTD7MeoqbbWBmU&libraries=places,geometry&v=beta&callback=initMap",t.async=!0,t.defer=!0,document.head.appendChild(t)}))}var x=o(7533),M=o(4754),E=o(683),R=o(1769),L=o(407),S=o(3674);const O=o(6425),U="/api/chatmessages",N=()=>{const e=O.get(U);return e.data},F=async e=>{const t=await O.get(`${U}/${e}`);return t.data},$=async(e,t)=>{const o=await O.put(`${U}/${e}`,t);return o.data},Q=async e=>{await O.delete(`${U}/${e}`)};var T={getMessages:N,getRoomMessages:F,editStatus:$,deleteRoomMessages:Q};const j=o(6425),H="/api/chatusers",X=async()=>{const e=await j.get(H);return e.data},W=async e=>{const t=await j.get(`${H}/${e}`);return t.data},V=async(e,t)=>{const o=await j.put(`${H}/${e}`,t);return o.data},Y=async e=>{const t=await j.put(`${H}/${e}/is_active`);return t.data},G=async e=>{const t=await j.put(`${H}/${e}/reduce_counter`);return t.data},z=async e=>{await j.delete(`${H}/${e}`)};var J={getAll:X,getChatUser:W,updateStatus:V,setDisplayChatUsers:Y,reduceCounter:G,removeChatMembersRoom:z},q=o(3198);const K=o(6425),Z="/api/pro_history",ee=async()=>{const e=await K.get(Z);return e.data},te=async e=>{const t=await K.post(`${Z}`,e);return t.data};var oe={getProHistory:ee,updateProHistory:te},ie=o(2456),se=o(4915);const ne=o(6425),ae=`${se.A}/messages`,re=async()=>{const e=await ne.get(ae);return e.data},le=async(e,t)=>{const o=await ne.post(`${ae}/${e}/message`,t);return o.data},de=async(e,t)=>{const o=await ne.put(`${ae}/${e}/edit_message_status`,t);return o.data},ce=async(e,t)=>{await ne.delete(`${ae}/${e}/remove_message/${t}`)};var ue={getMessage:re,createMessage:le,editMessage:de,removeSelectedMessage:ce},ge=o(6765),Ae=o(5607),me=o(7337),he=o(6732),pe=o(8269);const fe={ref:"customDiv"};function ve(e,t,o,n,a,r){const l=(0,s.g2)("MDBContainer");return(0,s.uX)(),(0,s.Wv)(l,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",fe,[(0,s.Lk)("div",{onClick:t[0]||(t[0]=(...e)=>n.toggle&&n.toggle(...e))},[(0,s.RG)(e.$slots,"header",{},void 0,!0)]),n.showPopup?((0,s.uX)(),(0,s.CE)("div",{key:0,onClick:t[1]||(t[1]=(0,i.D$)((()=>{}),["stop"]))},[(0,s.RG)(e.$slots,"content",{},void 0,!0)])):(0,s.Q3)("",!0)],512)])),_:3})}var ke=o(5846),ye=o(144),_e={name:"ChatModal",components:{MDBContainer:ke.Dj},setup(){const e=(0,ye.KR)(!1),t=(0,ye.KR)(null),o=()=>{e.value=!e.value},i=o=>{t.value&&!t.value.contains(o.target)&&(e.value=!1)};return(0,s.sV)((()=>{document.addEventListener("click",i)})),(0,s.hi)((()=>{document.removeEventListener("click",i)})),{showPopup:e,customDiv:t,toggle:o,handleClickOutside:i}}},be=o(1241);const we=(0,be.A)(_e,[["render",ve],["__scopeId","data-v-4f50a3c2"]]);var Be=we,Ce=o(2526),Ie=o(4589),De=o(1387),Pe=o(5384);var xe=o(5264),Me=o(2842),Ee=o(1690);o(6425);var Re=o(6510);const Le=e=>{e.hasNewMessages=!1,e.messages=[]};var Se={name:"App",props:{},components:{liveChat:Re["default"],ChatModal:Be,MDBFooter:ke.vp,MDBRow:ke.gU,MDBCol:ke.m6,MDBContainer:ke.Dj,MDBBtnClose:ke.uR,User:xe.A,MessagePanel:Me.A,Notifications:M["default"],monthConverter:ge.A,successMessage:me.A,infoMessage:he.A,promptPanel:pe["default"],modal:Be,MDBNavbar:ke.Ke,MDBCollapse:ke.Js,MDBNavbarItem:ke.DE,MDBNavbarBrand:ke.D1,MDBNavbarNav:ke.HZ,MDBNavbarToggler:ke.SX,MDBBadge:ke.nf,MDBIcon:ke.$u,MDBBtn:ke.al,MDBDropdown:ke.Zr,MDBDropdownToggle:ke.Ho,MDBDropdownMenu:ke.IF,MDBDropdownItem:ke.Oo,MDBAccordion:ke.mg,MDBAccordionItem:ke.rQ,Language:Ce["default"],language:Ce["default"]},data(){const e=(0,De.lq)();return{client:null,givenRatingNav:null,isPageVisible:!0,o:[],route:e,promptPanelContent:null,promptRoom:"",offers:[],di:null,du:null,offerLimitLoadedMessage:null,notes:[],res:[],clientAcceptedBookings:[],providerAcceptedBookings:[],client_filled_days:[],client_filled:[],filled_days:[],filled:[],currentChatRoom:null,newMessageTest:!1,imageSrc:null,unread:null,sentence:null,i:0,chatParticipants:[],test:!1,recipientTest:null,credit:0,testDialog:["eka","toka","pipi"],counter:null,user:null,isNewMessage:!0,messageInfo:"",newMessageList:[],rateCustomer:{},ratingResult:null,newMessageRoom:"",tu:[],userSocketID:"",info:"",users:[],currentRoom:"",messages:[],conversation:[],selectedUser:null,activeUser:null,msg:"",isBell:!1,loggedUser:{},isAccessTerminated:!1,messageAboutAccess:"Access denied!",recipientBookings:[],newOffers:[],recipientImages:[],userIsProvider:null,proTimeCreditLeft:null,isSelectedByExpiredUser:!1,isProAvailable:!1,proImages:[],proRefSlides:[],isProOpenGallery:!0,providerBookings:[],confirmedProBookings:[],recipientCompletedBookings:[],recipientCompletedBookingsHistory:[],proCompletedHistory:[],isNotification:!1,notSeenClientBookings:[],avatar:o(6975),avatarObject:null,showAvatar:null,newMessage:"",otheruser:{},proDescription:"",isMapSearchData:!1,isMapSearchActive:!1,clientMapSearchData:[],isRingBell:!1}},created(){},beforeMount(){},setup(){(0,s.sV)((async()=>{window.google||(await P(),console.log("Map is inited in APP!"))}));const e=(0,ye.KR)(!1),t=(0,ye.KR)(!1),o=(0,ye.KR)(!1),i=(0,ye.KR)(!1),n=(0,ye.KR)(!1),a=(0,ye.KR)(!1),r=(0,ye.KR)(!1),l=(0,ye.KR)(!1),{t:d}=(0,Pe.s9)(),c=(0,ye.KR)({x:20,y:70}),u={x:0,y:0};let g=!1;const A=e=>e.touches&&e.touches.length>0?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY},m=e=>{const{x:t,y:o}=A(e);g=!0,u.x=t-c.value.x,u.y=o-c.value.y,window.addEventListener("mousemove",h),window.addEventListener("mouseup",p),window.addEventListener("touchmove",h),window.addEventListener("touchend",p)},h=e=>{if(!g)return;const{x:t,y:o}=A(e);c.value.x=t-u.x,c.value.y=o-u.y;const i=t-u.x,s=o-u.y,n=document.querySelector(".availableDrag"),a=n.offsetWidth,r=n.offsetHeight;c.value.x=Math.min(Math.max(0,i),window.innerWidth-a),c.value.y=Math.min(Math.max(0,s),window.innerHeight-r)},p=()=>{g=!1,window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",p),window.removeEventListener("touchmove",h),window.removeEventListener("touchend",p)};return(0,s.hi)((()=>{p()})),{collapse7:e,dropDownDialog:t,dropDownChat:o,dropdownUser:i,dropdownLang:n,dropdown2:a,dropdownBell:r,dropDownfeedback:l,t:d,isDragging:g,pos:c,startDrag:m}},mounted(){this.handleVisibilityChange(),document.addEventListener("visibilitychange",this.handleVisibilityChange),console.log("Production mode enabled"),console.log("ENV PKT");const e=new Ie.className("Hallo");console.log("xxx "+e.response("aaa"));const t=window.localStorage.getItem("currentRoom");if(t){const e=JSON.parse(t);this.currentChatRoom=JSON.parse(t),this.selectedUser=this.users.find((t=>t.room===e&&t.userID!==this.loggedUser.id)),Ee.A.emit("update room",e)}const o=window.localStorage.getItem("loggedAppUser");if(o){const e=JSON.parse(o);this.user=e;const t=e.username,i=e.id;this.joinServer(t,i)}const i=window.localStorage.getItem("selectedChatUser");if(i){const e=JSON.parse(i);this.selectedUser=e,Ee.A.emit("update room",e.room)}const s=window.localStorage.getItem("customerFeedback");if(s){const e=JSON.parse(s);this.rateCustomer=e}setInterval(this.runEveryMinite,1e4)},methods:{handleVisibilityChange(){this.isPageVisible="visible"===document.visibilityState,console.log("Page visible:",this.isPageVisible),this.isPageVisible?this.validateToken():console.log("Page is not visible!")},setStatusIfVisible(){console.log("Yes, page is visible!")},handleEditPortfolio(e){console.log("Des content "+e),this.proDescription=e},async switchProAvailability(){console.log("Time is selected!");await R.A.setAvailability(this.userIsProvider.id,{isAvailable24_7:!0});this.isProAvailable=!0},async undoProAvailability(){console.log("Not pro available, pending... ");await R.A.setAvailability(this.userIsProvider.id,{isAvailable24_7:!1});this.isProAvailable=!1},handleDeleteAvatar(){console.log("Deleting avatar!!"),this.avatar=o(6975)},async leiapildid(){const e=await R.A.getProvider(this.loggedUser.id);e&&(this.userIsProvider=e,e.reference.forEach(((e,t)=>{console.log("IMMM "+e.name),this.proImages=[...this.proImages,{_id:e._id,image:e.image,name:e.name}]})))},async handlePromptYes(){console.log("Prompt yes App"),this.promptPanelContent=null;const e=this.promptRoom,t=await T.getRoomMessages(e);for(let s in t)console.log("Chat_message "+t[s].content.body),t[s].is_db_image&&await I.A.removeRoomChatImage(t[s].imgID);const o=this.chatParticipants.find((t=>t.room===e)),i=o.userID;Ee.A.emit("remove temp room",e,i),await T.deleteRoomMessages(e),await J.removeChatMembersRoom(e),this.chatParticipants=this.chatParticipants.filter((t=>t.room!==e))},handlePromptNo(){console.log("Prompt no App"),this.promptPanelContent=null},getDist(){const e=[60.276416745100214,24.8582598642488],t=[60.23308429999999,24.7531404];Ae.A.findDistance(e,t).then((e=>{this.di=e.distance,console.log("DD "+e.distance)}))},getBookingOffers(e){this.offers=e},handleAddProImage(e){console.log("But what is image key?? "+e.key),this.proImages=this.proImages.concat(e)},handleEditProRefImage(e,t,o,i){console.log("Edit "+e),console.log("Edit "+t),console.log("Edit "+i),this.proImages[e]={_id:t,key:o,blob:i}},handleRemoveProRefImage(e){console.log("Removable pro ref image index is "+e),this.proImages.splice(e,1)},async removeTempChat(e,t){if(console.log("Chat room -- "+e),this.promptRoom=e,!0===confirm("Oletko varmaa, että haluat poistaa chatin?")){const t=await T.getRoomMessages(e);for(let e in t)console.log("Chat_message "+t[e].content.body),t[e].is_db_image&&await D.A.deleteImage(t[e].imgID,t[e].key);const o=this.chatParticipants.find((t=>t.room===e)),i=o.userID;console.log("UUUSER "+o.userID),Ee.A.emit("remove temp room",e,i),await T.deleteRoomMessages(e),await J.removeChatMembersRoom(e),this.chatParticipants=this.chatParticipants.filter((t=>t.room!==e))}else console.log("You canceled to remove chat!")},async createNoteToDisplay(e,t,o,i){const s={isNewMsg:!0,content:e,isLink:t,sender:i,reason:o,time:new Date},n=await ue.createMessage(this.loggedUser.id,s);this.notes=this.notes.concat(n)},async handleRemoveNote(e){console.log("Removed note id is: "+e.id),this.notes=this.notes.filter((t=>t.id!==e.id)),await ue.removeSelectedMessage(this.user.id,e.id),this.notes.length<1&&(e.isLink||this.$router.push("/"))},async handleNotes(e){console.log("Clicked on notes")},offerSeen(){console.log("Is here some effect???"),this.$router.push("/received")},handleJoinVisitor(e,t){console.log("VISITOR");const o=this.providerBookings.findIndex((t=>t.id===e));this.providerBookings[o].visitors=this.providerBookings[o].visitors.concat(t),this.notSeenClientBookings=this.providerBookings.filter((e=>!e.visitors.includes(t)))},handleEditOfferStatus(e){console.log("Offer id in app "+e),this.newOffers=this.newOffers.filter((t=>t.id!==e))},async handleOfferConfirmed(e,t){console.log("Confirmed booking header is ---- "+e.header);const o=await L.A.getBookingById(e.id);this.newOffers=this.newOffers.filter((t=>t.bookingID!==e.id)),this.recipientBookings=this.recipientBookings.filter((t=>t.id!==e.id)),o.ordered=o.ordered.filter((e=>e.id===t)),this.providerAcceptedBookings=this.providerAcceptedBookings.concat(o),this.checkClientCalendarFilledDays()},async handleOfferLimitIsLoaded(e,t){this.offerLimitLoadedMessage="Tarjoukset jo lähetetty, olet valitettavasti myöhässä!",setTimeout((()=>{this.offerLimitLoadedMessage=null}),3e3),await R.A.removeProviderBooking(this.userIsProvider.id,t.id),this.providerBookings=this.providerBookings.filter((e=>e.id!==t.id)),await this.updateChatNavCounter(e),this.providerBookings.length<1&&this.$router.push("/")},async handleCreateOffer(e,t){console.log("Offer price is in App - "+t.user.username);await L.A.getBookingById(t.id);t.status="offered",t.offers=t.offers.concat(e),await L.A.updateRecipient(t.id,{status:"offered"}),this.providerBookings=this.providerBookings.map((e=>e.id===t.id?t:e)),this.providerBookings.length<1&&this.$router.push("/")},handleUpdateBookingDate_ms(e,t,o,i){console.log("Date_ms "+i),console.log("Date_ms booking id "+e.id);const s=this.recipientBookings.find((t=>t.id===e.id));s.created=o,s.created_ms=i,s.date=t,this.recipientBookings.map((t=>t.id===e.id?s:t))},handleUpdateProChatNav(){console.log("Initializing nav chatters..."),this.initNavChatters()},callback(e){console.log("Handle the response",e)},handleShowCreatedProvider(e){this.proTimeCreditLeft=30,this.userIsProvider=e,this.proDescription=e.description},removeExpiredRecipientBookings(){console.log("Aaaaaaaaaaaaaaaaa"),this.recipientBookings.forEach((e=>{console.log("Recipient bookings time "+(e.created_ms-(new Date).getTime())),e.created_ms-(new Date).getTime()>=0?(console.log("booking "+e.header+" is valid!"),e.image&&e.image.forEach((e=>{console.log("Images created ## "+e._id)}))):(console.log("Booking "+e.header+" is not valid anymore!"),this.handleRemoveBookingWithOffers(e,e.offers))}))},removeExpiredConfirmedBookings(){console.log("Confirmed aaaaaaaaaaaaaaaaaaaaaaaaaaaa "),this.providerAcceptedBookings.forEach((e=>{const t=e.ordered[0].yritys+e.user.username;e.created_ms-(new Date).getTime()>0?console.log("Confirmed booking "+e.header+" is valid!  room "+t):(console.log("Confirmed booking "+e.header+" is not valid anymore!"),this.handleArchiveClientSideBooking(e,t))}))},mapSearchReset(){this.mapSearchData=null},handleUpdateProTimeCredit(e){this.proTimeCreditLeft=e,this.isAccessTerminated=!1},handleAddSlide(e,t){this.proImages=[...this.proImages,e]},handleRemoveSlide(e,t){this.proImages=this.proImages.filter(((e,o)=>o!==t))},handleAddFirstImageRecipientBookings(e,t){},handleAddImageRecipientBookings(e,t){console.log("GGGGGGGGGGGGGGGGGGGGGG");const o=this.recipientBookings.find((e=>e.id=t));o.image=o.image.concat(e),this.recipientBookings.map((e=>e.id===t?o:e))},async removeRoom_conversation_images(e){const t=await T.getRoomMessages(e);for(let o in t)console.log("Chat_message "+t[o].content.body),t[o].is_db_image&&await D.A.deleteImage(t[o].imgID,t[o].key);await T.deleteRoomMessages(e),await J.removeChatMembersRoom(e)},async handleRemoveAllFormBookingsByClient(e){console.log("Do we remove chatroom and messages, images?? ROOM "+e),console.log("ChatParticipants length "+this.chatParticipants.length);for(let t in this.chatParticipants)if(this.chatParticipants[t].room===e){console.log("CP handled ---- "+this.chatParticipants[t].room);let o=this.chatParticipants[t];return void(o.same_room_counter>1?(console.log("More than 1 - "),await J.reduceCounter(e),this.chatParticipants[t].same_room_counter-=1):(console.log("Removing room "+e),this.chatParticipants=this.chatParticipants.filter((t=>t.room!==e)),await this.removeRoom_conversation_images(e)))}},async handleRemoveBookingWithOffers(e,t){if(t.forEach((e=>{console.log("---OFFER "+e.provider.user.username)})),e.ordered.map((e=>{console.log("Ord "+e.user.username)})),console.log("Booking image "+e.image),null!==e.image)for(let l=0;l<e.image.length;l++){const t=e.image[l];console.log("Image to delete ## key "+t.key),await D.A.deleteImage(t.id,t.key)}const o=this.user.username;let i=[],s=[];console.log("You pressed OK!");let n=[],a=[],r=[];e&&(r=e.ordered,n=e.offers),console.log("Offer array length "+n.length),console.log("All matched providers length "+r.length);for(let l in r)console.log("X "+l),console.log("Yritys "+r[l].yritys),console.log("zzzz "+r[l].user.id),console.log("Room ------ "+r[l].yritys+o),i=[...i,{id:r[l].user.id,room:r[l].yritys+o}],await this.handleRemoveAllFormBookingsByClient(r[l].yritys+o),await R.A.removeProviderBooking(r[l].id,e.id);for(let l in n)s=[...s,n[l].yritys+o],console.log("----------- "+n[l].provider.user.id),console.log("-+-+-+-+- "+n[l].provider),a=a.concat({id:n[l].provider.user.id,room:n[l].room}),await R.A.removeProviderBooking(n[l].provider.id,e.id);Ee.A.emit("notice about cansel order",i,a,e),this.recipientBookings=this.recipientBookings.filter((t=>t.id!==e.id)),this.newOffers=[],await ie.A.deleteBookingOffers(e.id),await L.A.removeBooking(e.id)},async load(e){await I.A.createProRefImg(this.userIsProvider.id,e)},async handleUpdateGallery(e){console.log("Will be updated!!"),await I.A.createProRefImg(this.userIsProvider.id,e)},handleUpdateGalleryRemove(e){e.length>0&&e.forEach((async e=>{await I.A.removeProRefImage(e,this.userIsProvider.id)}))},wentOut(){console.log("Went................")},isSameId(e,t){return e.value===t.value},comp(){console.log("Comparing"),console.log("xxx--xxx "+this.chatParticipants.map((e=>e.name))),console.log("yyyy---yyyy "+this.newMessageList.map((e=>e.userID)));const e=[{value:"4a55eff3-1e0d-4a81-9105-3ddd7521d642",display:"Jamsheer"},{value:"644838b3-604d-4899-8b78-09e4799f586f",display:"Muhammed"},{value:"b6ee537a-375c-45bd-b9d4-4dd84a75041d",display:"Ravi"},{value:"e97339e1-939d-47ab-974c-1b68c9cfb536",display:"Ajmal"},{value:"a63a6f77-c637-454e-abf2-dfb9b543af6c",display:"Ryan"}],t=[{value:"4a55eff3-1e0d-4a81-9105-3ddd7521d642",display:"Jamsheer",$$hashKey:"008"},{value:"644838b3-604d-4899-8b78-09e4799f586f",display:"Muhammed",$$hashKey:"009"},{value:"b6ee537a-375c-45bd-b9d4-4dd84a75041d",display:"Ravi",$$hashKey:"00A"},{value:"e97339e1-939d-47ab-974c-1b68c9cfb536",display:"Ajmal",$$hashKey:"00B"}],o=e.filter((({value:e})=>t.some((({value:t})=>t===e))));console.log("results "+o.length),e.forEach(((e,t)=>{}))},handleUpdateAvatar(e,t){console.log("Avatar in app is------------- "+e.key),this.avatarObject=e,this.showAvatar=t},handleRemoveAvatar(){this.avatar={name:"avatar.png"},this.showAvatar=null},handleJoinChatPanel(e){window.localStorage.setItem("currentRoom",JSON.stringify(e)),this.currentChatRoom=e,Ee.A.emit("update room",e)},handleInitializeChat(e){this.currentRoom=e.room;const t={useCounter:e.chatData.useCounter,isActive:e.chatData.isActive,bookingID:e.chatData.bookingID,same_room_counter:e.chatData.same_room_counter,proID:e.chatData.proID,pro:e.chatData.pro,userID:e.chatData.proID,name:e.initChatRoom.providerUsername,room:e.chatData.room};if(console.log("Init chat room "+e.chatData.userID),this.chatParticipants.some((t=>t.room===e.chatData.room)))this.chatParticipants.forEach((t=>{console.log("On olemas tuba "+e.chatData.room),t.room===e.chatData.room&&"0"!==e.initChatRoom.bookingID&&(console.log("Cp counter "+t.same_room_counter),t.same_room_counter+=1)}));else if(console.log("Ei ole olemas tuba - loome toa "+e.chatData.room),"0"!==e.initChatRoom.bookingID){const t={useCounter:e.chatData.useCounter,isActive:e.chatData.isActive,bookingID:e.chatData.bookingID,same_room_counter:e.chatData.same_room_counter,proID:e.chatData.proID,pro:e.chatData.pro,userID:e.chatData.userID,name:e.chatData.username,room:e.chatData.room};this.chatParticipants=this.chatParticipants.concat(t)}else this.chatParticipants=this.chatParticipants.concat(t);Ee.A.emit("create room users",e.initChatRoom),"0"===e.initChatRoom.bookingID&&this.handleJoinChatPanel(e.chatData.room)},fromFinal(e){this.info=e,console.log("Data from final in app: "+e)},submit(e,t,o){console.log("What===");let i={userID:e,username:t,room:o};Ee.A.emit("new chat user",i)},async updateChatNavCounter(e){if(console.log("ROOOOOOOOOOOM "+e),this.chatParticipants.length>0){let t=this.chatParticipants.findIndex((t=>t.room===e));const o=this.chatParticipants[t];o.same_room_counter>1?(console.log("found room counter if > 1 "+o.same_room_counter),await J.reduceCounter(e),this.chatParticipants[t].same_room_counter-=1):(console.log("found room counter < 1 "+o.same_room_counter),this.chatParticipants=this.chatParticipants.filter((t=>t.room!==e)),await this.removeRoom_conversation_images(e))}},socket_updateChatNavCounter(e){if(console.log("#### ROOM "+e),this.chatParticipants.length>0){const t=this.chatParticipants.findIndex((t=>t.room===e));let o=this.chatParticipants[t].same_room_counter;console.log("Counter value before: "+o),o>1?(o-=1,this.chatParticipants[t].same_room_counter=o):this.chatParticipants=this.chatParticipants.filter((t=>t.room!==e)),console.log("Counter value after: "+o)}},joinServer:function(e,t){console.log("Joining server: "+e+" ja id: "+t),Ee.A.on("get socketID",(e=>{console.log("user socket id "+e),this.userSocketID=e})),Ee.A.on("get current credentials",(()=>{Ee.A.emit("current credentials",{room:this.currentRoom,userID:t,username:e})})),Ee.A.on("connect user",(e=>{})),Ee.A.on("loggedIn",(e=>{this.users=[],e.users.forEach((e=>{for(let t=0;t<this.users.length;t++){const o=this.users[t];if(o.userID===e.userID)return void(o.connected=e.connected)}e.self=e.userID===this.loggedUser.id,e.self||(this.activeUser=e),Le(e),e.messages=[],this.users.push(e)})),this.users.sort(((e,t)=>e.self?-1:t.self?1:e.username<t.username?-1:e.username>t.username?1:0)),console.log("Room users: "+e.users.map((e=>e.username)))})),this.listen()},listen:function(){Ee.A.on("user info",(e=>{})),Ee.A.on("init new messages",(e=>{e.forEach((e=>{"unsent"===e.status&&(this.newMessageList=this.newMessageList.concat(e))}))})),Ee.A.on("userOnline",(e=>{this.users=[],Ee.A.on("get socketID",(e=>{console.log("user socket id "+e),this.userSocketId=e})),e.users.forEach((e=>{for(let t=0;t<this.users.length;t++){const o=this.users[t];if(o.userID===e.userID)return o.connected=e.connected,void console.log("xxxxxxxxxxxxx--xxxxxxxxxxxxxxx")}e.self=e.userID===this.loggedUser.id,this.currentChatRoom?e.userID!==this.loggedUser.id&&e.room===this.currentChatRoom&&(this.selectedUser=e):e.userID!==this.loggedUser.id&&(this.selectedUser=e),this.initReactiveProperties(e),e.messages=[],e.room===this.currentChatRoom&&this.users.push(e)})),this.users.sort(((e,t)=>e.self?-1:t.self?1:e.username<t.username?-1:e.username>t.username?1:0))})),Ee.A.on("user connected",((e,t)=>{for(let o=0;o<this.users.length;o++){const t=this.users[o];if(t.userID===e){t.connected=!0;break}}})),Ee.A.on("userLeft",((e,t,o)=>{console.log("User left "+e,t,o);for(let i=0;i<this.users.length;i++){const t=this.users[i];if(t.userID===e){t.connected=!1;break}}})),Ee.A.on("new message",(async e=>{this.newMessageRoom=e.room,this.currentChatRoom&&this.currentChatRoom===e.room||(this.newMessageTest=!0,this.newMessageList.some((t=>t.room===e.room))||(this.chatParticipants.forEach((t=>{t.room===e.room&&(t.isActive=!0)})),await T.editStatus(e.id,{status:"unsent"}),this.newMessageList=this.newMessageList.concat(e)))})),Ee.A.on("accept provider",(async({id:e,booking:t})=>{this.providerBookings=this.providerBookings.concat(t),this.notSeenClientBookings.push(t),this.isRingBell=!0,setTimeout((()=>{this.isRingBell=!1}),3e3)})),Ee.A.on("map pro search",(e=>{this.clientMapSearchData=[...this.clientMapSearchData,e],this.isMapSearchData})),Ee.A.on("set chat_nav",(e=>{let t=this.chatParticipants.findIndex((t=>t.room===e.room));console.log("Index ----- "+t),this.chatParticipants[t]=e,this.chatParticipants.some((t=>t.room===e.room))||(this.chatParticipants=this.chatParticipants.concat(e))})),Ee.A.on("accept recipient booking",(async({booking:e})=>{console.log("BOOOOKING ID "+e.id);let t=await L.A.getBookingById(e.id);this.recipientBookings.find((t=>t.id===e.id));console.log("xxx status = "+t.status),t.status="confirmed",this.recipientBookings=this.recipientBookings.filter((e=>"confirmed"!==e.status&&"completed"!==e.status)),this.recipientBookings=this.recipientBookings.filter((e=>e.id!==t.id)),this.providerAcceptedBookings=this.providerAcceptedBookings.concat(t),this.clientAcceptedBookings=this.clientAcceptedBookings.concat(t),this.checkClientCalendarFilledDays();const o=`${t.ordered[0].yritys} on vahvistanut tilauksen " ${e.header} " !`,i="",s="admin";await this.createNoteToDisplay(o,!1,i,s)})),Ee.A.on("send booking for order",((e,t)=>{console.log("Order for BELL!!!"),this.notSeenClientBookings.push(e),this.providerBookings=this.providerBookings.concat(e),this.isRingBell=!0,setTimeout((()=>{this.isRingBell=!1}),3e3)})),Ee.A.on("send offer limit is loaded",(e=>{this.socket_updateChatNavCounter(e)})),Ee.A.on("send offer",(async(e,t)=>{console.log("Offer is here! "+e.user.username),this.newOffers=this.newOffers.concat(t),e.offers.push(t),this.proRefSlides.push({pro:t.provider.id,slides:t.provider.reference}),this.offers.push(t);const o=this.recipientBookings.findIndex((t=>t.id===e.id));this.recipientBookings[o].offers=this.recipientBookings[o].offers.concat(t)})),Ee.A.on("confirm sent offer",(async(e,t)=>{console.log("Sent offer is confirmed!, booking id is: "+e.id);this.providerBookings=this.providerBookings.filter((t=>t.id!==e.id));let o=await L.A.getBookingById(e.id);this.confirmedProBookings=this.confirmedProBookings.concat(e),this.checkCalendarFilledDays(),console.log("xxxxxxx asiakas name "+e.user.username);const i=`Asiakas ${o.user.username} on hyväksynyt sinun tarjoukseen. Merkintä on `,s="";await this.createNoteToDisplay(i,!0,s,e.user.username),console.log("Route name in app. "+this.route.name),"client-notifications"===this.route.name&&this.providerBookings.length<1&&this.$router.push("/")})),Ee.A.on("sent deal done notification",((e,t)=>{console.log("Sended notification about deal done!! "+e.header+" has made this deal. Accepted offer: "+t.price+" euroa."),this.providerBookings=this.providerBookings.filter((t=>t.id!==e.id));const o=`Lähettämääsi tarjousta "${e.header}" ei vahvistettu!`,i="",s="admin";this.createNoteToDisplay(o,!1,i,s),"client-notifications"===this.route.name&&this.providerBookings.length<1&&this.$router.push("/")})),Ee.A.on("deal done for rest of",((e,t)=>{console.log("ID "+e+"Booking id "+t.id),this.providerBookings=this.providerBookings.filter((e=>e.id!==t.id)),this.notSeenClientBookings=this.notSeenClientBookings.filter((e=>e.id!==t.id)),this.providerBookings.length<1&&this.$router.push("/")})),Ee.A.on("sent notice about cansel offer",((e,t)=>{console.log("Sended booking ---------- "+t.header);const o=`Tilaus "${t.header}" on valitettavasti poistettu tilaajan toiven mukaan!`,i="",s="admin";this.createNoteToDisplay(o,!1,i,s),this.notSeenClientBookings=this.notSeenClientBookings.filter((e=>e.id!==t.id)),this.providerBookings=this.providerBookings.filter((e=>e.id!==t.id)),this.providerBookings.length<1&&this.$router.push("/")})),Ee.A.on("handle rest of providers",((e,t)=>{this.notSeenClientBookings=this.notSeenClientBookings.filter((e=>e.id!==t.id)),this.providerBookings=this.providerBookings.filter((e=>e.id!==t.id)),this.socket_updateChatNavCounter(e),this.providerBookings.length<1&&this.$router.push("/")})),Ee.A.on("set archived booking",((e,t)=>{this.socket_updateChatNavCounter(t),this.confirmedProBookings=this.confirmedProBookings.filter((t=>t.id!==e.id)),this.checkCalendarFilledDays()})),Ee.A.on("reject map booking by_pro",(({id:e,room:t,pro:o,booking:i,reason:s})=>{const n=this.recipientBookings.find((e=>e.id===i.id));n.status="waiting",this.recipientBookings=this.recipientBookings.filter((e=>e.id!==i.id)),this.clientAcceptedBookings=this.clientAcceptedBookings.filter((e=>e.id!==i.id)),this.socket_updateChatNavCounter(t),this.chatParticipants;const a=`Valitettavasti ${o} ei varmistanut tilausta '${i.header}'!`,r=s,l=o.yritys;this.createNoteToDisplay(a,!1,r,l)})),Ee.A.on("reject form booking by_pro",(({room:e,booking:t})=>{console.log("# room "+e),this.socket_updateChatNavCounter(e)})),Ee.A.on("rejected map booking by_client",(({id:e,room:t,booking:o,reason:i})=>{console.log("Client rejected booking! xxxxxxxx "),this.providerBookings=this.providerBookings.filter((e=>e.id!==o.id)),this.notSeenClientBookings=this.notSeenClientBookings.filter((e=>e.id!==o.id)),this.socket_updateChatNavCounter(t),this.providerBookings.length<1&&this.$router.push("/");const s=`Asiakas ${o.user.username} on poistanut lähetetty tilauksen "${o.header}"!`,n=o.user.username;this.createNoteToDisplay(s,!1,i,n)})),Ee.A.emit("online",this.currentRoom),Ee.A.on("messages",(e=>{this.conversation=e.msg})),Ee.A.on("image",(e=>{new Image;this.imageSrc=`data:image/jpg;base64,${e}`})),Ee.A.on("display booking_image",((e,t)=>{console.log("BID "+t);const o=this.providerBookings.findIndex((e=>e.id===t));console.log(" Added image booking INDEX is "+o);const i=e.bytes,s=`data:imageStr/jpg;base64,${i}`,n={_id:e.id,show:s};this.providerBookings[o].image=this.providerBookings[o].image.concat(n)})),Ee.A.on("display edited_booking_image",((e,t,o)=>{console.log("BID "+o);const i=`data:image/jpg;base64,${t}`,s={_id:e,show:i},n=this.providerBookings.findIndex((e=>e.id===o));if(console.log("INDEX "+n),this.providerBookings[n].image){const t=this.providerBookings[n].image.findIndex((t=>t._id===e));console.log("IMAGE INDEX "+t),this.providerBookings[n].image[t]=s}})),Ee.A.on("stop display booking_image",((e,t)=>{const o=this.providerBookings.findIndex((e=>e.id===t.id));if(this.providerBookings[o].image){const t=this.providerBookings[o].image.findIndex((t=>t._id===e));this.providerBookings[o].image.splice(t,1)}})),Ee.A.on("show pro ref image",((e,t,o,i)=>{console.log("Show pro ref image id "+e),console.log("Show pro id "+t);const s=`data:display/jpg;base64,${o}`,n={_id:e,show:s},a=this.proRefSlides.findIndex((e=>e.pro===t));console.log("PRO INDEX "+a);const r=this.proRefSlides[a].slides.findIndex((t=>t._id===e));"edit"===i?(console.log("SLIDE INDEX "+r),this.proRefSlides[a].slides[r]=n):"add"===i&&(this.proRefSlides[a].slides=this.proRefSlides[a].slides.concat(n))})),Ee.A.on("remove pro ref image",((e,t)=>{const o=this.proRefSlides.findIndex((e=>e.pro===t)),i=this.proRefSlides[o].slides.findIndex((t=>t._id===e));this.proRefSlides[o].slides.splice(i,1)})),Ee.A.on("remove temp_room",(e=>{this.chatParticipants=this.chatParticipants.filter((t=>t.room!==e)),"live-chat"===this.route.name&&this.$router.go(-1)})),Ee.A.on("private message",(({content:e,chatImg:t,username:o,date:i,from:s,to:n})=>{console.log("Message in app: "+e.body),"file"===e.msg_status&&(this.imageSrc=`data:chatImg/jpg;base64,${t}`),this.test=!0,Ee.A.on("messages",(e=>{this.conversation=e.msg}));for(let a=0;a<this.users.length;a++){const t=this.users[a],r=this.userSocketId===s;if(t.userID===(r?n:s)){this.conversation.push({content:e,image:this.imageSrc,username:o,date:i,userID:t.userID,fromSelf:r}),t.messages.push({content:e,date:i,fromSelf:r}),t!==this.selectedUser&&(t.hasNewMessages=!0,this.messageSeen=!0);break}}}))},initReactiveProperties(e){e.hasNewMessages=!1,e.messages=[]},onSelectUser(e){e.self||(this.selectedUser=e,Ee.A.emit("update room",e.room)),console.log("----------Tuleb läbi--------"+e.username),this.isNewMessage=!1,e.hasNewMessages=!1,this.messageInfo=""},noSelectUser(){this.selectedUser=null,this.currentChatRoom=null,window.localStorage.removeItem("currentRoom")},async handleMessage(e,t,o){console.log("chat status in the app: "+e.msg_status),this.conversation.push({content:e,image:t,username:this.loggedUser.username,date:o,user:this.loggedUser.username,userID:this.loggedUser.id});const i=this.chatParticipants.findIndex((e=>e.room===this.currentChatRoom));this.chatParticipants[i].isActive=!0},handleProviderActionConfirm(){},async handleFeedbackClient(e){this.givenRatingNav&&(e.rating=this.givenRatingNav),this.client=e,console.log("Feedback client is "+e.id),this.rateCustomer=e,window.localStorage.setItem("customerFeedback",JSON.stringify(e))},async getRecipientCompletedBookings(e){const t=await q.A.getClientHistory();this.recipientCompletedBookingsHistory=t.filter((t=>t.user.id===e)),this.recipientCompletedBookings=t.filter((t=>t.user.id===e&&"no rated"===t.status))},async getProCompletedHistory(e){const t=await oe.getProHistory();this.proCompletedHistory=t.filter((t=>t.user.id===e))},onPressedLogoBtn(){this.selectedUser=null,this.currentChatRoom=null},onPressedUserIconChildren(){window.localStorage.removeItem("selectedChatUser")},handleSetRoom(e){this.currentChatRoom=e,window.localStorage.setItem("currentRoom",JSON.stringify(e))},updateRoom(e){console.log("Mate id "+e.userID),this.currentChatRoom=e.room,window.localStorage.setItem("currentRoom",JSON.stringify(e.room)),this.selectedUser=this.users.find((t=>t.room===e.room&&t.userID!==this.loggedUser.id)),this.newMessageList.forEach((async t=>{t.inline,t.room===e.room&&(await T.editStatus(t.id,{status:"sent"}),this.newMessageList=this.newMessageList.filter((t=>t.room!==e.room)))})),Ee.A.emit("update room",e.room)},handleNewMessageNotification(){Ee.A.emit("update room",this.newMessageRoom)},handleActivateBell(e){console.log("Bell bell bell "+e)},profile(){this.$router.push("/profile"),console.log("Pressed profile")},history(){this.$router.push("/history")},renderPage(){this.$router.push({path:"/chat"}).then((()=>{this.$router.go()}))},renderDialogPage(){this.$router.push({path:"/dialog"}).then((()=>{this.$router.go()}))},reload:()=>{(void 0).isRouterAlive=!1,setTimeout((()=>{(void 0).isRouterAlive=!0}),0)},async getUsers(){this.users=await E.A.getAll()},async createUser(e){console.log("User name is here: "+e.username),this.submit(e.id,e.username,e.username+e.id),window.localStorage.setItem("loggedAppUser",JSON.stringify(e)),this.loggedUser=e,window.location.replace("/")},async handleLogin(e){console.log("userdata: "+e.username),window.localStorage.setItem("loggedAppUser",JSON.stringify(e)),this.loggedUser=e;let t=e.username,o=e.id;this.joinServer(t,o),this.$route.query.redirect?this.$router.push(this.$route.query.redirect):window.location.replace("/")},handleLogOut(){window.localStorage.removeItem("loggedAppUser"),window.localStorage.removeItem("selectedChatUser"),this.loginUser="",this.loggedUser="",this.selectedUser=null,Ee.A.emit("user leave"),this.proTimeCreditLeft=null,this.user=null,this.$router.push("/")},async handleRated(e,t,o,i){this.givenRatingNav=i,await q.A.updateRating(this.rateCustomer.id,{rating:i}),await q.A.updateStatus(this.rateCustomer.id,{status:"rated"}),this.recipientCompletedBookings=this.recipientCompletedBookings.filter((e=>e.id!==this.rateCustomer.id)),window.localStorage.removeItem("customerFeedback"),this.ratingResult="rated"===t?`Olet antanut ${i.positive} tähteä yritykselle - ${o} , kiitos 😊`:`Et antanut tällä kerta palautetta yritykselle - ${o}.`,setTimeout((()=>{this.ratingResult=null}),3e3)},async handleArchiveClientSideBooking(e,t){Ee.A.emit("archive booking",e.ordered[0].user.id,e,t),this.providerAcceptedBookings=this.providerAcceptedBookings.filter((t=>t.id!==e.id)),this.recipientBookings=this.recipientBookings.filter((e=>"confirmed"!==e.status&&"completed"!==e.status)),this.recipientCompletedBookings=this.recipientCompletedBookings.filter((t=>t.id!==e.id));const o={header:e.header,address:e.ordered[0].address,date:e.date,userID:e.ordered[0].user.id},i={status:"no rated",header:e.header,proID:e.ordered[0].id,company:e.ordered[0].yritys,id_number:e.ordered[0].ytunnus,rating:e.ordered[0].rating,address:e.ordered[0].address,date:e.date,professional:e.ordered[0].profession,userID:e.user.id},s=await q.A.updateClientHistory(i),n=await oe.updateProHistory(o);this.recipientCompletedBookingsHistory=this.recipientCompletedBookingsHistory.concat(s),this.proCompletedHistory=this.proCompletedHistory.concat(n),this.recipientCompletedBookings=this.recipientCompletedBookings.concat(s);const a=e.ordered[0].yritys+e.user.username;this.chatParticipants.find((e=>e.room===a));await this.updateChatNavCounter(a),await R.A.removeProviderBooking(e.ordered[0].id,e.id),await ie.A.deleteBookingOffers(e.id),await L.A.removeBooking(e.id)},async calculateImageSize(e){let t=new Image;t.src=o(3906)(`./${e}`),await t.decode();let i=t.width,s=t.height;return{width:i,height:s}},async initNavChatters(){const e=await J.getChatUser(this.user.id);e.forEach((e=>{let t=e.member.find((e=>e.userID!==this.user.id));this.chatParticipants=[...this.chatParticipants,{id:e.id,useCounter:e.useCounter,isActive:e.isActive,bookingID:e.bookingID,same_room_counter:e.same_room_counter,isOnline:e.isOnline,status:"",proID:e.proID,pro:e.pro,userID:t.userID,name:t.username,room:e.room}]}))},async handleUser(){const e=await E.A.getUser(this.loggedUser.id);this.notes=e.messages,!0===e.avatar.isImage?(console.log("Is avatar image "+e.avatar.isImage),this.avatar=e.avatar.imageUrl,this.avatarObject=e.avatar):this.avatarObject=e.avatar},async handleProvider(){console.log("Current route "+this.route.name),this.proImages=[];const e=await R.A.getProvider(this.loggedUser.id);e&&(this.proTimeCreditLeft=((e.proTime-(new Date).getTime())/864e5).toFixed()<0?0:((e.proTime-(new Date).getTime())/864e5).toFixed(),this.proTimeCreditLeft<=0&&(this.isAccessTerminated=!0),this.isProAvailable=e.isAvailable24_7,this.userIsProvider=e,this.proDescription=e.description,e.reference.forEach(((e,t)=>{console.log("IMMM "+e.imageUrl),this.proImages=[...this.proImages,{_id:e._id,key:e.key,imageUrl:e.imageUrl}]})),console.log("User credit "+this.userIsProvider.credit),this.credit=this.userIsProvider.credit,this.providerBookings=e.booking.filter((e=>"confirmed"!==e.status&&"completed"!==e.status&&e.created_ms-(new Date).getTime()>0)),this.confirmedProBookings=this.userIsProvider.booking.filter((e=>"confirmed"===e.status&&e.created_ms-(new Date).getTime()>0)),this.checkCalendarFilledDays()),this.notSeenClientBookings=this.providerBookings.filter((e=>!e.visitors.includes(this.userIsProvider.id))),this.providerBookings.forEach((e=>{}))},checkClientCalendarFilledDays(){this.client_filled_days=[],this.client_filled=[];let e=null;this.providerAcceptedBookings.forEach((t=>{t.created_ms-(new Date).getTime()>0&&(this.client_filled_days=this.client_filled_days.concat(t.onTime),t.onTime.forEach((t=>{console.log("DAY in p accepted:  "+t.month),t.monthFrom===(new Date).getMonth()?e=(0,x.A)(new Date,t.dayFrom-(new Date).getDate()):(console.log("WHAT???"),e=(0,x.A)(new Date(t.year,t.month,0),t.day)),this.client_filled.push(e)})))}))},checkCalendarFilledDays(){this.filled_days=[],this.filled=[];let e=null;this.confirmedProBookings.forEach((t=>{t.created_ms-(new Date).getTime()>0?(this.filled_days=this.filled_days.concat(t.onTime),t.onTime.forEach((t=>{console.log("DAY "+t.month),t.monthFrom===(new Date).getMonth()?e=(0,x.A)(new Date,t.dayFrom-(new Date).getDate()):(console.log("WHAT"),e=(0,x.A)(new Date(t.year,t.month,0),t.day)),this.filled.push(e)}))):console.log("SORRY, pro booking is expired!!")}))},async handleRecipientBookings(){let e=await L.A.getOwnBookings(this.loggedUser.id);if(e.length>0){e.forEach((e=>{e.ordered;let t,o=[];e.ordered.forEach((e=>{t=e.id,o.push(e.reference),this.proRefSlides.some((t=>t.pro===e.id))||this.proRefSlides.push({pro:e.id,slides:e.reference})}))})),this.newOffers=[],e.forEach((e=>{this.newOffers=this.newOffers.concat(e.offers.filter((e=>e.isNewOffer)))})),this.providerAcceptedBookings=e.filter((e=>"confirmed"===e.status)),this.clientAcceptedBookings=e.filter((e=>"notSeen"===e.status||"seen"===e.status||"offered"===e.status)),this.checkClientCalendarFilledDays();let t=e.filter((e=>"completed"!==e.status));this.recipientBookings=e.filter((e=>"confirmed"!==e.status&&"completed"!==e.status)),console.log("Created booking: "),this.removeExpiredRecipientBookings(),this.removeExpiredConfirmedBookings(),t.forEach((e=>{if(e.ordered.length>0){let t=e.ordered[0].user.username;console.log("Pro "+t);e.ordered[0].room.findIndex((e=>e.userID===this.loggedUser.id))}}))}},async handleCreateBooking(e,t,o){console.log("Booking zone - "+e.zone),e.ordered=[];let i=[e.latitude,e.longitude],s=[];const n=await R.A.getProvidersMatchingByProfession({result:e.professional});console.log("Professional. "+e.professional);let a=[],r=[];for(let d=0;d<n.length;d++)s=[n[d].latitude,n[d].longitude],console.log("Pro id "+n[d].id),0===e.zone?n[d].user.id!==this.loggedUser.id&&(console.log("PRP ID, zone is 0: "+n[d].user.id),r=[...r,n[d]],a=[...a,n[d].user.id],await L.A.addProviderData(e.id,n[d].id),await R.A.addProviderBooking(n[d].id,e.id)):Ae.A.findDistance(i,s).then((async t=>{console.log("Data distance: "+t.distance),console.log("Data distance type - "+typeof t.distance),parseInt(t.distance)<e.zone&&(e.ordered=[...e.ordered,n[d]],n[d].user.id!==this.loggedUser.id&&(console.log("PRP ID: "+n[d].user.id),a=[...a,n[d].user.id],await L.A.addProviderData(e.id,n[d].id),await R.A.addProviderBooking(n[d].id,e.id)))}));t&&(e.image=[],e.image=e.image.concat(t),console.log("IMAGE DATA "+o.name)),console.log("proIdArr length is "+a.length),e.ordered=r;const l=await L.A.getBookingById(e.id);Ee.A.emit("send created booking",a,l),this.recipientBookings=this.recipientBookings.concat(e)},async handleCreateMapBooking(e,t){await L.A.updateRecipient(e.id,{status:"notSeen"});this.recipientBookings=this.recipientBookings.concat(e),this.clientAcceptedBookings=this.clientAcceptedBookings.concat(e)},handleNotifications(){this.$router.push("/notification")},handleExitNotifications(e){console.log("State is: "+e),this.isNotification=e},handleStatusUpdate(e){this.providerBookings=this.providerBookings.filter((t=>t.id!==e)),this.handleProvider()},handleConfirmClientBooking(e){console.log("Handling remove booking..."+e.id),this.providerBookings=this.providerBookings.filter((t=>t.id!==e.id)),this.confirmedProBookings=this.confirmedProBookings.concat(e),this.checkCalendarFilledDays(),this.providerBookings.length<1&&this.$router.go(-1)},async handleRejectProFormBooking(e,t,o){console.log("Provider id "+o),console.log("booking id "+t.id),await R.A.removeProviderBooking(o,t.id),await L.A.removeProviderData(t.id,o),this.providerBookings=this.providerBookings.filter((e=>e.id!==t.id)),await this.updateChatNavCounter(e),this.providerBookings.length<1&&this.$router.go(-1)},async handleRejectBookingByProNoOffers(e,t,o){console.log("Handling rejecting booking by pro..."+e.user.id),console.log("Ordered user id-- "+o),await L.A.removeProviderData(e.id,o),await R.A.removeProviderBooking(o,e.id),await this.updateChatNavCounter(t),this.providerBookings=this.providerBookings.filter((t=>t.id!==e.id)),this.providerBookings.length<1&&this.$router.go(-1)},async handleRejectBookingByClientNoOffers(e,t,o){console.log("room "+o),console.log("user id "+t),console.log("booking header "+e.header),await R.A.removeProviderBooking(t,e.id),await this.updateChatNavCounter(o),this.recipientBookings=this.recipientBookings.filter((t=>t.id!==e.id)),await L.A.removeBooking(e.id)},async validateToken(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e),o=await S.A.verifyToken(t.token);"token expired"===o.result?(window.localStorage.removeItem("loggedAppUser"),this.loggedUser="",this.selectedUser=null,window.localStorage.removeItem("currentRoom"),Ee.A.emit("user leave"),this.$router.push("/login")):(this.loggedUser=t,console.log("Loged, logged user "+t.id),await this.handleUser(),this.chatParticipants=[],await this.initNavChatters(),await this.handleRecipientBookings(),await this.handleProvider(),await this.getRecipientCompletedBookings(t.id),await this.getProCompletedHistory(t.id))}},runEveryMinite(){let e;this.clientMapSearchData.length>0&&(this.i>=this.clientMapSearchData.length?(e=this.clientMapSearchData[this.clientMapSearchData.length-1],this.sentence="Etsitään "+e.pro+" etäisyys "+e.dist+" km."):(e=this.clientMapSearchData[this.i],this.sentence="Etsitään - "+e.pro+" etäisyys "+e.dist+" km.",this.i+=1),console.log("Index length "+this.i))}},beforeUnmount(){document.removeEventListener("visibilitychange",this.handleVisibilityChange),Ee.A.emit("user leave"),this.selectedUser=null},computed:{isValid(){return this.msg.length>0},currentRouteName(){return this.$route.name}}};const Oe=(0,be.A)(Se,[["render",C]]);var Ue=Oe;const Ne=[{path:"/admin",name:"admin-panel",component:()=>o.e(119).then(o.bind(o,2119))},{path:"/",name:"dash-board",component:()=>o.e(264).then(o.bind(o,6368))},{path:"/language",name:"language",component:()=>Promise.resolve().then(o.bind(o,2526))},{path:"/register",name:"app-register",component:()=>o.e(138).then(o.bind(o,9138))},{path:"/login",name:"login-register",component:()=>o.e(537).then(o.bind(o,9537))},{path:"/profile",name:"user-profile",component:()=>o.e(906).then(o.bind(o,6906))},{path:"/pay-plan",name:"pay-plan",component:()=>o.e(188).then(o.bind(o,5188))},{path:"/rules",name:"rules",component:()=>o.e(506).then(o.bind(o,6506))},{path:"/recipient-public",name:"recipient-public",component:()=>Promise.all([o.e(353),o.e(373),o.e(754)]).then(o.bind(o,6373))},{path:"/recipient-form",name:"recipient-form",component:()=>Promise.all([o.e(353),o.e(373),o.e(416)]).then(o.bind(o,7416)),props:!0,meta:{requiresAuth:!0}},{path:"/received",name:"recipient-panel",component:()=>Promise.all([o.e(807),o.e(286),o.e(870)]).then(o.bind(o,6260))},{path:"/recipient-result",name:"recipient-result",component:()=>Promise.all([o.e(807),o.e(286),o.e(969)]).then(o.bind(o,286))},{path:"/received-final/:data",name:"recipient-final",component:()=>Promise.all([o.e(807),o.e(697)]).then(o.bind(o,4807)),props:!0},{path:"/rf",name:"r-form",component:()=>Promise.all([o.e(353),o.e(373),o.e(416)]).then(o.bind(o,7416))},{path:"/provider-public",name:"provider-public",component:()=>Promise.all([o.e(353),o.e(373),o.e(25)]).then(o.bind(o,2025)),beforeEnter:async(e,t,o)=>{const i=window.localStorage.getItem("loggedAppUser");if(!i)return o();{const e=JSON.parse(i),t=await R.A.getProvider(e.id);if(t)return o("/provider-panel");o()}}},{path:"/pro-public-search",name:"provider-public-search",component:()=>Promise.all([o.e(353),o.e(373),o.e(25)]).then(o.bind(o,2025))},{path:"/provider-form",name:"provider-form",component:()=>Promise.all([o.e(353),o.e(373),o.e(843)]).then(o.bind(o,4843)),beforeEnter:async(e,t,o)=>{const i=window.localStorage.getItem("loggedAppUser"),s=JSON.parse(i),n=await R.A.getProvider(s.id);if(n)return o("/provider-panel");o()}},{path:"/provider-panel",name:"provider-panel",component:()=>Promise.all([o.e(353),o.e(153),o.e(351)]).then(o.bind(o,2947)),props:!0},{path:"/calendar",name:"calendar",component:()=>Promise.all([o.e(153),o.e(655)]).then(o.bind(o,7153))},{path:"/location",name:"user-location",component:()=>Promise.all([o.e(373),o.e(974)]).then(o.bind(o,2974))},{path:"/notification",name:"client-notifications",component:()=>Promise.resolve().then(o.bind(o,4754))},{path:"/chat",name:"live-chat",component:()=>Promise.resolve().then(o.bind(o,6510))},{path:"/history",name:"user-history",component:()=>o.e(69).then(o.bind(o,3069))},{path:"/feedback",name:"Feedback",component:()=>o.e(505).then(o.bind(o,505))},{path:"/gallery",name:"Gallery",component:()=>Promise.resolve().then(o.bind(o,9614))},{path:"/pro-gallery",name:"pro-gallery",component:()=>o.e(627).then(o.bind(o,3627)),beforeEnter:Fe},{path:"/forgot_auth",name:"Forgot",component:()=>o.e(429).then(o.bind(o,6429))},{path:"/reset_auth/:token",name:"Reset",props:!0,component:()=>o.e(509).then(o.bind(o,4509))},{path:"/manual",name:"manual",component:()=>o.e(383).then(o.bind(o,9383))},{path:"/message",name:"message",component:()=>o.e(954).then(o.bind(o,2954))},{path:"/prompt",name:"actionPanel",component:()=>Promise.resolve().then(o.bind(o,8269))}];function Fe(e,t,o){const i=window.localStorage.getItem("loggedAppUser"),s=JSON.parse(i);if(!s)return o("/login");o()}const $e=["recipient-form","provider-form","Gallery","pro-gallery"],Qe=(0,De.aE)({history:(0,De.LA)(),routes:Ne});Qe.beforeEach((async(e,t,o)=>{const i=window.localStorage.getItem("loggedAppUser");if(i){JSON.parse(i)}const s=$e.includes(e.name);s&&!i?o({path:"/login",query:{redirect:e.fullPath}}):o()}));var Te=Qe,je=JSON.parse('{"welcome":"Tervetuloa","navMainPage":"Etusivu","speedIsImportant":"Nopeus on tärkein!","receiver":"Etsin palvelua","provider":"Tarjoan palvelua","nav_accessRestricted":"Käyttö päättynyt!","nav_accessFewDays_usage":"Käyttö","nav_accessFewDays_dayCount":"päivää","nav_loadTime":"Lataa lisää aikaa!","nav_sign_in":"Kirjaudu","nav_user_messages":"Ilmoituksia","nav_user_profile":"Omat tiedot","nav_user_manual":"Käyttöohje","nav_user_history":"Arkisto","nav_user_orders":"Tilaukset","nav_user_gallery":"Galleria","nav_user_billing":"Laskutus","nav_user_rules":"Säänöt","nav_logout":"Kirjaudu ulos","nav_newMessage":"Uusi!","receiver_form_offersOrQuickSolution":"Täytä tilaus tarjousten varten tai löytää nopea ratkaisu kartalta!","receiver_form_getProfessional":"Valitse ammattilainen","receiver_form_enterOrderKeyword":"Syötä tilauksen avainsana","receiver_form_selectDesiredRegion":"Valitse haluamasi alue","receiver_form_whenProNeeded":"Mihin aikaan tarvitset ammattilaista?","receiver_form_orderContentsDescription":"Kuvaus tilauksen sisällöstä...","receiver_form_orderContentImage":"Valitse kuva","receiver_form_orderContentImageEdit":"Muokkaa kuva","receiver_form_createAnOrder":"Luo tilaus","recipient_panel_confirmed_orders":"Vahvistetut varaukset","recipient_panel_you_have":"Sinulla on","offerCountNotification":"tarjousta","recipient_panel_open_orders":"avointa tilausta","recipient_panel_order_is_pending":"Tilaus on vierellä kun tarjoajaa vahvista sen","recipient_panel_no_offers":"Ei vielä tarjouksia","recipient_panel_quit_order":"Keskeyttä tilaus","recipient_panel_order":"Tilaus","recipient_panel_give_reason":"Anna syy...","recipient_panel_confirm_quit":"Varmistaa tilauksen poisto","recipient_panel_new_order":"Tee uusi tilaus","recipient_result_need_a_pro":"Tarvin ammattilaisen","recipient_result_order_is_expired":"Tilaus on vanhentunut. Muokkaa tilauksen päivämäärä / aikaa tai poista tilaus!","recipient_result_edit_description":"Muokkaa tilauksen kuvausta...","recipient_result_edit_date":"Muokkaa tilauksen päivämäärä ja aikaa","recipient_result_select_date":"Valitse sopiva aika...","recipient_result_edit_picture":"Muokkaa kuva","recipient_result_edit_order_picture":"Muokkaa tilauksen kuvaa","recipient_result_select_new_image":"Valitse uusi kuva tilauksesta","recipient_result_upload_edited_image":"Lataa muokattu kuva","recipient_result_remove_image":"Poista kuva","recipient_result_add_image":"Lisää kuva","recipient_result_offers":"Tarjoukset","recipient_result_filter":"Suodata","recipient_result_filter_by_distance":"Etäisyyden mukaan - lähin ensin","recipient_result_filter_by_rating":"Positiivisen palauteen mukaan - enemmän ensin","recipient_result_filter_by_price":"Tarjottu hinnan mukaan - halvin ensin","recipient_result_distance":"Etäisyys:","recipient_result_new":"uusi!","recipient_result_waiting_offers":"Odotetaan tarjouksia...","recipient_result_remove_order":"Poista tilaus","recipient_final_feedback":"Palautteet"}'),He=JSON.parse('{"welcome":"Welcome","navMainPage":"Home","speedIsImportant":"Speed is important!","receiver":"Receiver","provider":"Provider","nav_accessRestricted":"Access restricted!","nav_accessFewDays_usage":"Usage left","nav_accessFewDays_dayCount":"days","nav_loadTime":"Charge extra time!","nav_sign_in":"Sign in","nav_user_messages":"Messages","nav_user_profile":"Profile","nav_user_manual":"User manual","nav_user_history":"History","nav_user_orders":"Orders","nav_user_gallery":"Gallery","nav_user_billing":"Billing","nav_user_rules":"Rules","nav_logout":"Log out","nav_newMessage":"New!","receiver_form_offersOrQuickSolution":"Fill out the order for offers or find a quick solution on the map!","receiver_form_getProfessional":"Get professional","receiver_form_enterOrderKeyword":"Enter order keyword","receiver_form_selectDesiredRegion":"Select desired region","receiver_form_whenProNeeded":"What time do you need a professional?","receiver_form_orderContentsDescription":"Description of the order contents...","receiver_form_orderContentImage":"Select image","receiver_form_orderContentImageEdit":"Edit image","receiver_form_createAnOrder":"Create an order","recipient_panel_confirmed_orders":"Confirmed orders","recipient_panel_you_have":"You have","offerCountNotification":"offers","recipient_panel_open_orders":"open orders","recipient_panel_order_is_pending":"The order is pending when pro confirm it","recipient_panel_no_offers":"No offers done yet","recipient_panel_quit_order":"Quit order","recipient_panel_order":"Order","recipient_panel_give_reason":"Give reason...","recipient_panel_confirm_quit":"Confirm quit order","recipient_panel_new_order":"Place a new order","recipient_result_need_a_pro":"I need a pro","recipient_result_order_is_expired":"Order is expired. Edit order\'s date / time or quit a order!","recipient_result_edit_description":"Edit order description...","recipient_result_edit_date":"Edit date and time of order","recipient_result_select_date":"Select suitable date...","recipient_result_edit_picture":"Edit picture","recipient_result_edit_order_picture":"Edit order picture","recipient_result_select_new_image":"Select new image of order","recipient_result_upload_edited_image":"Upload edited image","recipient_result_remove_image":"Remove image","recipient_result_add_image":"Add image","recipient-result_offers":"Offers","recipient_result_filter":"Filter","recipient_result_filter_by_distance":"By distance - nearest first","recipient_result_filter_by_rating":"By positive rating - more first","recipient_result_filter_by_price":"By offered price - cheapest first","recipient_result_distance":"Distance:","recipient_result_new":"new!","recipient_result_waiting_offers":"Waiting for offers...","recipient_result_remove_order":"Remove order","recipient_final_feedback":"Feedback"}'),Xe=JSON.parse('{"welcome":"Teretulemast","navMainPage":"Kodu","speedIsImportant":"Kiirus on oluline!","receiver":"Otsin teenust","provider":"Pakun teenust","nav_accessRestricted":"Kasutamine piiratud!","nav_accessFewDays_usage":"Aega jäänud","nav_accessFewDays_dayCount":"päeva","nav_loadTime":"Laadige rohkem aega!","nav_sign_in":"Kirjuta sisse","nav_user_messages":"Teated","nav_user_profile":"Profiil","nav_user_manual":"Kasutusjuhend","nav_user_history":"Ajalugu","nav_user_orders":"Tellimused","nav_user_gallery":"Galerii","nav_user_billing":"Arveldamine","nav_user_rules":"Reeglid","nav_logout":"Logi välja","nav_newMessage":"Uus!","receiver_form_offersOrQuickSolution":"Täitke tellimuse vorm pakkumiste jaoks või leidke kiire lahendus kaardilt!","receiver_form_getProfessional":"Vali amet","receiver_form_enterOrderKeyword":"Anna tellimuse märksõna","receiver_form_selectDesiredRegion":"Vali soovitud piirkond","receiver_form_whenProNeeded":"Mis ajale vajate professionaali?","receiver_form_orderContentsDescription":"Tellimuse sisu kirjeldus...","receiver_form_orderContentImage":"Vali pilt","receiver_form_orderContentImageEdit":"Muuda pilti","receiver_form_createAnOrder":"Loo tellimus","recipient_panel_confirmed_orders":"Kinnitatud telliused","recipient_panel_you_have":"Sinul on","offerCountNotification":"pakkumist","recipient_panel_open_orders":"avatut tellimust","recipient_panel_order_is_pending":"Tellimus on ootel kui pro kinnitab selle","recipient_panel_no_offers":"Veel ei ole pakkumisi","recipient_panel_quit_order":"Kustuta tellimus","recipient_panel_order":"Tellimus","recipient_panel_give_reason":"Anna põhjus...","recipient_panel_confirm_quit":"Kinnita tellimuse kustutamine","recipient_panel_new_order":"Tee uus tellimus","recipient_result_need_a_pro":"Vajan professionaali","recipient_result_order_is_expired":"Tellimus on vananenud. Muuda tellimuse päeva / aega või kustuta tellimus!","recipient_result_edit_description":"Muuda tellimuse kirjeldust...","recipient_result_edit_date":"Muuda tellimuse kuupäeva ja kellaaega","recipient_result_select_date":"Vali sobiv aeg...","recipient_result_edit_picture":"Muuda pilti","recipient_result_edit_order_picture":"Muuda tellimuse pilti","recipient_result_select_new_image":"Vali uus tellimuse pilt","recipient_result_upload_edited_image":"Salvesta muudetud pilt","recipient_result_remove_image":"Eemalda pilt","recipient_result_add_image":"Lisa pilt","recipient_result_offers":"Pakkumised","recipient_result_filter":"Filtreeri","recipient_result_filter_by_distance":"Kauguse järgi - lähim esimesena","recipient_result_filter_by_rating":"Positiivse tagasiside järgi - rohkem esimesena","recipient_result_filter_by_price":"Pakutud hinna järgi - odavam esimesena","recipient_result_distance":"Kaugus:","recipient_result_new":"uus!","recipient_result_waiting_offers":"Oodatakse pakkumisi...","recipient_result_remove_order":"Kustuta tellimus","recipient_final_feedback":"Tagasiside"}');const We=(0,Pe.hU)({legacy:!1,locale:localStorage.getItem("lang")||"fin",fallbackLocale:"fin",messages:{en:He,fin:je,est:Xe}});var Ve=We,Ye=o(8068),Ge=o(9119);(0,i.Ef)(Ue).component("VueDatePicker",Ye.A),(0,i.Ef)(Ue).use(Te).use(Ge.Ay).use(Ve).mount("#app")},907:function(e,t){"use strict";const o=({date:e})=>{const t=[];t[0]="Tammikuu",t[1]="Helmikuu",t[2]="Maaliskuu",t[3]="Huhtikuu",t[4]="Toukokuu",t[5]="Kesäkuu",t[6]="Heinäkuu",t[7]="Elokuu",t[8]="Syyskuu",t[9]="Lokakuu",t[10]="Marraskuu",t[11]="Joulukuu";const o=new Date(e);let i=o.getHours(),s=o.getMinutes();i=i<10?"0"+i:i,s=s<10?"0"+s:s;let n=i+":"+s;return t[new Date(e).getMonth()]+" "+o.getDate()+" / "+o.getFullYear()+"  klo "+n};t.A=o},1690:function(e,t,o){"use strict";var i=o(1714);let s="";s="https://prokeikkatori-f43699030e18.herokuapp.com/";const n={"force new connection":!0,reconnectionAttempts:"Infinity",timeout:1e4,transports:["websocket"]},a=i.io.connect(s,n);a.onAny(((e,...t)=>{console.log(e,t)})),t.A=a},1727:function(e,t,o){"use strict";e.exports=o.p+"img/success.1c84882e.png"},1769:function(e,t,o){"use strict";const i=o(6425),s="/api/providers",n=async()=>{const e=await i.get(s);return e.data},a=async e=>{const t=await i.get(`${s}/${e}`);return t.data},r=async e=>{const t=await i.get(`${s}/${e}/by-provider-id`);return t.data},l=async e=>{const t=await i.post(`${s}/profession`,e);return t.data},d=async(e,t)=>{const o=await i.post(`${s}/${e}`,t);return o.data},c=async(e,t)=>{const o=await i.put(`${s}/${e}/edit-portfolio`,t);return o.data},u=async(e,t)=>{const o=await i.post(`${s}/${e}/addRoom`,t);return o.data},g=async(e,t)=>{const o=await i.delete(`${s}/${e}/remove-room`,t);return o.data},A=async(e,t)=>{const o=await i.put(`${s}/${e}/editAddress`,t);return o.data},m=async(e,t)=>{const o=await i.put(`${s}/set-availability/${e}`,t);return o.data},h=async(e,t)=>{const o=await i.put(`${s}/${e}/editProfession`,t);return o.data},p=async(e,t)=>{const o=await i.post(`${s}/${e}/addProfession`,t);return o.data},f=async(e,t)=>{const o=await i.put(`${s}/${e}/removeProfession`,t);return o.data},v=async(e,t)=>{const o=await i.post(`${s}/${e}/addRecipient/${t}`);return o.data},k=async(e,t)=>{const o=await i.put(`${s}/${e}`,t);return o.data},y=async(e,t)=>{const o=await i.put(`${s}/${e}/renewCredit`,t);return o.data},_=async(e,t)=>{const o=await i.put(`${s}/${e}/recipient/${t}`);return o.data},b=async(e,t)=>{const o=await i.put(`${s}/${e}/rating-plus`,t);return o.data},w=async e=>{const t=await i.put(`${s}/${e}/rating-minus`);return t.data},B=async(e,t)=>{const o=await i.put(`${s}/${e}/rating-pos`,t);return o.data},C=async(e,t)=>{const o=await i.put(`${s}/${e}/rating-neg`,t);return o.data},I=async(e,t)=>{const o=await i.post(`${s}/${e}/addSlide`,t);return o.data},D=async(e,t)=>{const o=await i.put(`${s}/${e}/updateRange`,t);return o.data},P=async(e,t)=>{const o=await i.put(`${s}/${e}/edit-portfolio`,t);return o.data};t.A={getProviders:n,getProvider:a,getProvByProvId:r,getProvidersMatchingByProfession:l,addProvider:d,updatePortfolio:c,updateProvider:k,updateTimeCredit:y,addRoom:u,removeRoom:g,editAddress:A,setAvailability:m,editProfession:h,additionalProfession:p,removeProfession:f,addProviderBooking:v,removeProviderBooking:_,setPositiveRating:b,setNegativeRating:w,addPositiveFeedback:B,addNegativeFeedback:C,addProSlide:I,editRange:D,editPortfolio:P}},1937:function(e,t,o){"use strict";e.exports=o.p+"img/en.1045d8fa.png"},2456:function(e,t,o){"use strict";const i=o(6425),s="/api/offer",n=async e=>{const t=await i.post(s,e);return t.data},a=async(e,t)=>{const o=await i.put(`${s}/${e}`,t);return o.data},r=async(e,t)=>{await i.delete(`${s}/${e}/remove_by_offerID/${t}`)},l=async e=>{await i.delete(`${s}/${e}`)};t.A={addOffer:n,editStatus:a,removeBookingOffer:r,deleteBookingOffers:l}},2526:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return y}});var i=o(6768);const s={key:0},n=["src"],a={key:1},r=["src"],l={key:2},d=["src"],c=["src"],u=["src"],g=["src"];function A(e,t,A,m,h,p){const f=(0,i.g2)("MDBDropdownToggle"),v=(0,i.g2)("MDBBtn"),k=(0,i.g2)("MDBDropdownItem"),y=(0,i.g2)("MDBDropdownMenu"),_=(0,i.g2)("MDBDropdown");return(0,i.uX)(),(0,i.Wv)(_,{style:{},modelValue:m.dropdownLang,"onUpdate:modelValue":t[4]||(t[4]=e=>m.dropdownLang=e)},{default:(0,i.k6)((()=>[(0,i.bF)(f,{tag:"a",onClick:t[0]||(t[0]=e=>m.dropdownLang=!m.dropdownLang)},{default:(0,i.k6)((()=>["fin"===h.currentLanguage||null===h.currentLanguage?((0,i.uX)(),(0,i.CE)("span",s,[(0,i.Lk)("img",{style:{width:"20px"},src:o(9121),alt:"fin"},null,8,n)])):"est"===h.currentLanguage?((0,i.uX)(),(0,i.CE)("span",a,[(0,i.Lk)("img",{style:{width:"20px"},src:o(6161),alt:"en"},null,8,r)])):"en"===h.currentLanguage?((0,i.uX)(),(0,i.CE)("span",l,[(0,i.Lk)("img",{style:{width:"20px"},src:o(1937),alt:"en"},null,8,d)])):(0,i.Q3)("",!0),t[5]||(t[5]=(0,i.eW)("   "))])),_:1}),(0,i.bF)(y,{dark:"","aria-labelledby":"dropdownMenuLinkx"},{default:(0,i.k6)((()=>[(0,i.bF)(k,null,{default:(0,i.k6)((()=>[(0,i.bF)(v,{color:"dark",block:"",onClick:t[1]||(t[1]=e=>p.setLanguage("fin"))},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{style:{width:"20px"},src:o(9121),alt:"fin"},null,8,c),t[6]||(t[6]=(0,i.eW)("  fin"))])),_:1})])),_:1}),(0,i.bF)(k,null,{default:(0,i.k6)((()=>[(0,i.bF)(v,{color:"dark",block:"",onClick:t[2]||(t[2]=e=>p.setLanguage("en"))},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{style:{width:"20px"},src:o(1937),alt:"en"},null,8,u),t[7]||(t[7]=(0,i.eW)("  en"))])),_:1})])),_:1}),(0,i.bF)(k,null,{default:(0,i.k6)((()=>[(0,i.bF)(v,{color:"dark",block:"",onClick:t[3]||(t[3]=e=>p.setLanguage("est"))},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{style:{width:"20px"},src:o(6161),alt:"est"},null,8,g),t[8]||(t[8]=(0,i.eW)("  est"))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}var m=o(5846),h=o(5384),p=o(144),f={name:"Language",props:{},components:{MDBBtn:m.al,MDBNavbarItem:m.DE,MDBDropdown:m.Zr,MDBDropdownToggle:m.Ho,MDBDropdownMenu:m.IF,MDBDropdownItem:m.Oo},setup(){const e=(0,p.KR)(!1);return{dropdownLang:e}},data(){const{locale:e}=(0,h.s9)();return{currentLanguage:localStorage.getItem("lang")||null,locale:e}},methods:{setLanguage(e){this.dropdownLang=!1,this.locale=e,localStorage.setItem("lang",e),this.currentLanguage=e}}},v=o(1241);const k=(0,v.A)(f,[["render",A]]);var y=k},2842:function(e,t,o){"use strict";o.d(t,{A:function(){return j}});var i=o(6768),s=o(4232),n=o(5130);const a={key:0,class:"chatImageZoomedContainer"},r={style:{display:"flex","justify-content":"right",padding:"20px"}},l=["src"],d={key:0,class:"panel"},c={style:{"overflow-y":"auto"},class:"messages",ref:"chatArea"},u={class:"inner",ref:"refscrollHeight"},g={class:"messagesBody"},A={key:0,class:"messageRow"},m={class:"displayName"},h={class:"messageBlue"},p={key:0},f=["src","onClick"],v={class:"messageContent"},k={class:"messageTimeStampRight"},y={key:1,class:"messageRowRight"},_={class:"messageOrange"},b={key:0},w=["src","onClick"],B={class:"messageContent"},C={class:"messageTimeStampRight"},I={key:1,style:{border:"1px solid blue",padding:"20px"}},D={style:{display:"flex","justify-content":"right"}},P=["src"],x={for:"file-upload",class:"custom-image-upload"},M=["placeholder"],E=["disabled"],R=["src"];function L(e,t,L,S,O,U){const N=(0,i.g2)("MDBIcon");return(0,i.uX)(),(0,i.CE)(i.FK,null,[O.isImageZoom?((0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",r,[(0,i.Lk)("p",{style:{cursor:"pointer"},onClick:t[0]||(t[0]=e=>O.isImageZoom=!1)},"Valmis")]),(0,i.Lk)("img",{class:"chatImageZoomed",src:O.imageToZoom,alt:"zoomed"},null,8,l)])):(0,i.Q3)("",!0),(0,i.Lk)("div",null,[O.userIn?((0,i.uX)(),(0,i.CE)("div",d,[(0,i.Lk)("div",c,[(0,i.Lk)("div",u,[(0,i.Lk)("div",null,[(0,i.Lk)("div",null,[(0,i.Lk)("div",g,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(L.messages,((e,o)=>((0,i.uX)(),(0,i.CE)("div",{key:o},[e.userID!==O.userIn.id?((0,i.uX)(),(0,i.CE)("div",A,[(0,i.Lk)("div",null,[(0,i.Lk)("div",m,[(0,i.bF)(N,{size:"2x"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-user-circle"},null,-1)]))),_:1}),(0,i.eW)(" "+(0,s.v_)(e.username),1)]),(0,i.Lk)("div",h,[(0,i.Lk)("div",null,["file"===e.content.msg_status?((0,i.uX)(),(0,i.CE)("div",p,[(0,i.Lk)("img",{style:{width:"160px",cursor:"pointer"},src:e.image,onClick:t=>U.zoomChatImage(e.image),alt:"chat-img"},null,8,f)])):(0,i.Q3)("",!0),(0,i.Lk)("p",v,(0,s.v_)(e.content.body),1)]),(0,i.Lk)("div",k,(0,s.v_)(e.date),1)])])])):((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("div",_,["file"===e.content.msg_status?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.Lk)("img",{style:{width:"160px"},src:e.image,onClick:t=>U.zoomChatImage(e.image),alt:"chat-img"},null,8,w)])):(0,i.Q3)("",!0),(0,i.Lk)("p",B,(0,s.v_)(e.content.body),1),(0,i.Lk)("div",C,(0,s.v_)(e.date),1)])]))])))),128))])])])],512)],512)])):(0,i.Q3)("",!0),O.files?((0,i.uX)(),(0,i.CE)("div",I,[(0,i.Lk)("div",D,[(0,i.Lk)("h4",{style:{cursor:"pointer"},onClick:t[1]||(t[1]=e=>O.files=null)},"X")]),(0,i.Lk)("img",{style:{width:"300px"},src:O.blob},null,8,P)])):(0,i.Q3)("",!0),(0,i.Lk)("form",{onSubmit:t[5]||(t[5]=(0,n.D$)(((...e)=>U.onSubmit&&U.onSubmit(...e)),["prevent"]))},[(0,i.Lk)("input",{id:"file-upload",type:"file",onChange:t[2]||(t[2]=e=>U.handleImageChange(e))},null,32),(0,i.Lk)("label",x,[(0,i.bF)(N,null,{default:(0,i.k6)((()=>t[7]||(t[7]=[(0,i.Lk)("i",{class:"far fa-image"},null,-1)]))),_:1})]),(0,i.bo)((0,i.Lk)("textarea",{style:{padding:"20px","background-color":"#292424",color:"ghostwhite"},id:"myInput","onUpdate:modelValue":t[3]||(t[3]=e=>O.msg=e),onKeypress:t[4]||(t[4]=(...e)=>U.handleInput&&U.handleInput(...e)),ref:"textarea",placeholder:O.files?"Lisää kuvaan kuvaus...":"Kirjoita viesti..."},"    ",40,M),[[n.Jo,O.msg]]),(0,i.Lk)("button",{disabled:!U.isValid,class:"sender"},[(0,i.Lk)("img",{class:(0,s.C4)({"sender-btn-disabled":!U.isValid}),style:{padding:"3px 13px"},alt:"send",src:o(8802)},null,10,R)],8,E)],32)])],64)}var S=o(5846),O=o(2815),U=(o(4474),o(5570)),N=o(1690),F=o(144),$={name:"MessagePanel",components:{MDBIcon:S.$u,MDBBtnClose:S.uR},props:{test:Boolean,user:Object,messages:Array,initMessages:Array},data(){return{userIn:null,msg:"",files:null,filename:"",blob:null,imageSearch:null,imageToZoom:null,isImageZoom:!1,expand_message:!0}},setup(){let e=(0,F.KR)(null),t=(0,F.KR)(null);const o=()=>{(0,i.dY)((()=>{e.value.scrollTo({behavior:"smooth",top:t.value.clientHeight})}))};return(0,i.$u)(o),{update:o,chatArea:e,refscrollHeight:t}},watch:{messages:async function(){console.log("Watching..."),await this.scrollToEnd()}},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.userIn=t,document.getElementById("myInput").style.height="40px"}},methods:{resize(){let e=this.$refs["textarea"];e.style.height="20px",e.style.height=e.scrollHeight+"px"},btnClick(){this.expand_message=!this.expand_message},handleInput(e){if(console.log("E "+e.key),console.log("xxx "+e.target.style.height),"Enter"===e.key)console.log("Offset"),e.preventDefault(),this.onSubmit(),document.getElementById("myInput").value="";else{let e=this.$refs["textarea"];e.style.height="20px",e.style.height=e.scrollHeight+"px"}},handleImageChange(e){const t=e.target.files[0];t&&(this.files=e.target.files[0],this.filename=e.target.files[0].name,console.log("File name "+this.files.name),this.blob=URL.createObjectURL(t))},async onSubmit(){const e=new Date,t=new FileReader;if(this.files){console.log("Files before - "+this.files.name);const o=new FormData;o.append("file",this.files,this.files.name);const i=await U.A.uploadChatImage(o);console.log("Image key _ "+i.key),console.log("Chat image id "+i.id),t.onload=t=>{const o=new Uint8Array(t.target.result);console.log("Files "+this.files),this.$emit("new:message",{msg_status:"file",body:this.msg},this.blob,(0,O.Ay)(e,"dd-mm-yyyy,  HH:MM")),N.A.emit("private server message",{content:{msg_status:"file",body:this.msg},img:o,imgID:i.id,key:i.key,file:i.imageUrl,date:(0,O.Ay)(e,"dd-mm-yyyy,  HH:MM"),to:this.user.userID}),this.msg=""},t.readAsArrayBuffer(this.files),this.files=null}else{const t={msg_status:"text",body:this.msg};this.$emit("new:message",t,this.blob,(0,O.Ay)(e,"dd-mm-yyyy,  HH:MM")),N.A.emit("private server message",{content:{msg_status:"text",body:this.msg},img:null,file:null,date:(0,O.Ay)(e,"dd-mm-yyyy,  HH:MM"),to:this.user.userID}),this.msg=""}},zoomChatImage(e){console.log("Zooming chat image!"),this.imageToZoom=e,this.isImageZoom=!0},displaySender(e,t){return 0===t||this.user.messages[t-1].fromSelf!==this.user.messages[t].fromSelf},async scrollToEnd(){try{if(this.messages&&this.messages.length>0){console.log(" Is in end ------------ "+this.messages.length);const e=await this.messages[this.messages.length-1].id;document.getElementById(e).scrollIntoView({block:"start"})}}catch(e){console.log(e)}}},computed:{isValid(){return this.msg.length>0}}},Q=o(1241);const T=(0,Q.A)($,[["render",L],["__scopeId","data-v-0035134a"]]);var j=T},3198:function(e,t,o){"use strict";const i=o(5979),s="/api/client_history",n=async()=>{const e=await i.get(s);return e.data},a=async e=>{const t=await i.post(`${s}`,e);return t.data},r=async(e,t)=>{const o=await i.put(`${s}/${e}`,t);return o.data},l=async(e,t)=>{const o=await i.put(`${s}/${e}/update_rating`,t);return o.data};t.A={getClientHistory:n,updateClientHistory:a,updateStatus:r,updateRating:l}},3674:function(e,t,o){"use strict";var i=o(4915);const s=o(6425),n=`${i.A}/login`;console.log("Backend url: "+i.A);const a=async e=>{const t=await s.post(n,e);return t.data},r=async e=>{const t=await s.post(`${n}/${e}`);return t.data};t.A={login:a,verifyToken:r}},3906:function(e,t,o){var i={"./reset.png":5343};function s(e){var t=n(e);return o(t)}function n(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id=3906},4368:function(e,t,o){"use strict";e.exports=o.p+"img/avatar.db2f8c83.png"},4474:function(e,t,o){"use strict";const i=o(6425),s="/api/upload",n=async()=>{const e=await i.get(s);return e.data},a=async(e,t)=>{const o=await i.post(`${s}/${e}/pro-ref-img`,t);return o.data},r=async(e,t)=>{const o=await i.put(`${s}/${e}/edit-pro-ref-image`,t);return o.data},l=async(e,t)=>{await i.delete(`${s}/${e}/del-pro-ref-image/${t}`)},d=async e=>{const t=await i.post(s,e,{});return t.data},c=async(e,t)=>{const o=await i.post(`${s}/${e}/avatar`,t);return o.data},u=async e=>{const t=await i.post(`${s}/chat-img`,e);return t.data},g=async e=>{await i.delete(`${s}/${e}/remove_chat_image`)},A=async(e,t)=>{const o=await i.post(`${s}/${e}/update_avatar`,t);return o.data},m=async(e,t)=>{const o=await i.put(`${s}/${e}`,t);return o.data},h=async(e,t)=>{await i.delete(`${s}/${e}/delClientImg/${t}`)},p=async e=>{await i.delete(`${s}/${e}/delAllClientBookingImages`)};t.A={getAll:n,createProRefImg:a,editProRefImage:r,removeProRefImage:l,create:d,createProfileImage:c,createChatImage:u,removeRoomChatImage:g,newAvatar:A,updateImage:m,remove:h,cleanAllRecipientImages:p}},4589:function(e){class t{constructor(e){this.data=e}response(e){return"Tere "+this.data+" "+e}answer(){return"Tere "+this.data}}e.exports={className:t}},4754:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Z}});o(4114),o(8111),o(3579);var i=o(6768),s=o(4232);const n=["src"],a=["onClick"],r={style:{display:"flex","justify-content":"right",color:"deepskyblue",cursor:"pointer"}},l=["onClick"],d={style:{display:"flex","justify-content":"right",color:"deepskyblue",cursor:"pointer"}},c={key:2};function u(e,t,u,g,A,m){const h=(0,i.g2)("MDBCol"),p=(0,i.g2)("Booking"),f=(0,i.g2)("MDBRow"),v=(0,i.g2)("MDBContainer");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(v,{style:{"margin-top":"100px",position:"relative"}},{default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[(0,i.Lk)("img",{src:o(417),alt:"back",onClick:t[0]||(t[0]=(...e)=>m.backFromProNotifications&&m.backFromProNotifications(...e)),style:{display:"flex","justify-content":"right"}},null,8,n),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(u.bookings,((o,n)=>((0,i.uX)(),(0,i.Wv)(f,{key:n,style:{"margin-bottom":"10px",padding:"20px"}},{default:(0,i.k6)((()=>[(0,i.bF)(h,{style:{background:"#2e2b2b","box-shadow":"0.3em 0.3em 1em rgba(104,101,101,0.6)",padding:"30px","font-size":"18px"},md:"4",class:(0,s.C4)([{activeHeader:n===A.bookingIndex&&A.isBooking}])},{default:(0,i.k6)((()=>[o.visitors.some((e=>e===u.userIsProvider.id))?((0,i.uX)(),(0,i.CE)("span",{key:1,class:(0,s.C4)({"strong-tilt-move-shake":A.isNoLimit&&n===A.bookingIndex})},[(0,i.Lk)("span",{class:"seen_notification",onClick:e=>m.messageSeen(o,n)},[(0,i.Lk)("b",null,(0,s.v_)(o.user.username.length<A.HEADER_LENGTH?o.user.username:o.user.username.substr(0,A.HEADER_LENGTH)+"..."),1),t[4]||(t[4]=(0,i.Lk)("br",null,null,-1)),(0,i.eW)(" "+(0,s.v_)(o.header.length<A.HEADER_LENGTH?o.header:o.header.substr(0,A.HEADER_LENGTH)+"...")+" ",1),(0,i.Lk)("span",d,(0,s.v_)(o.isIncludeOffers?o.offers.some((e=>e.provider.id===u.userIsProvider.id))?"Tarjous lähetetty":"Lähetä tarjous":"Varmista tilaus"),1)],8,l)],2)):((0,i.uX)(),(0,i.CE)("span",{key:0,class:(0,s.C4)({"strong-tilt-move-shake":A.isNoLimit&&n===A.bookingIndex})},[(0,i.Lk)("span",{class:"new_notification",onClick:e=>m.messageSeen(o,n)},[(0,i.Lk)("b",null,(0,s.v_)(o.user.username.length<A.HEADER_LENGTH?o.user.username:o.user.username.substr(0,A.HEADER_LENGTH)+"..."),1),t[3]||(t[3]=(0,i.Lk)("br",null,null,-1)),(0,i.eW)(" "+(0,s.v_)(o.header.length<A.HEADER_LENGTH?o.header:o.header.substr(0,A.HEADER_LENGTH)+"...")+" ",1),(0,i.Lk)("span",r,(0,s.v_)(o.isIncludeOffers?o.offers.some((e=>e.provider.id===u.userIsProvider.id||e.provider.id===u.userIsProvider.id))?"Tarjous lähetetty":"Lähetä tarjous":"Varmista tilaus"),1)],8,a)],2))])),_:2},1032,["class"]),(0,i.bF)(h,{md:"8",class:(0,s.C4)([{activeHeader:n===A.bookingIndex&&A.isBooking}])},{default:(0,i.k6)((()=>[A.isNoLimitText&&n===A.bookingIndex?((0,i.uX)(),(0,i.CE)("h4",{key:0,style:{color:"palevioletred","text-underline":"cornflowerblue",cursor:"pointer","margin-top":"10px"},onClick:t[1]||(t[1]=t=>e.$router.push("/pay-plan"))}," Lataa lisää aikaa täältä ")):(0,i.Q3)("",!0),A.isBooking&&n===A.bookingIndex?((0,i.uX)(),(0,i.Wv)(p,{key:1,booking:o,bookingImages:A.bookingImages,provider:u.userIsProvider,"onSet:room":m.handleSetRoom,onOpenChatPanel:m.handleOpenChatPanel,onInit_offer:m.handleInitOffer,"onCreate:offer":m.handleCreateOffer,selected_room:A.room,chatusers:u.chatusers,messages:u.messages,"onSelect:user":m.selectUser,onNoSelected:m.noSelected,selecteduser:u.selecteduser,"onOn:message":m.onMessage,"onClose:booking":m.handleCloseBooking,"onConfirm:booking":m.handleConfirmBooking,onReject_booking_no_offers:m.handleRejectBookingNoOffers,onRejectFormBooking:m.handleRejectFormBooking},null,8,["booking","bookingImages","provider","onSet:room","onOpenChatPanel","onInit_offer","onCreate:offer","selected_room","chatusers","messages","onSelect:user","onNoSelected","selecteduser","onOn:message","onClose:booking","onConfirm:booking","onReject_booking_no_offers","onRejectFormBooking"])):u.creditLeft<0&&n===A.bookingIndex?((0,i.uX)(),(0,i.CE)("div",c,[t[5]||(t[5]=(0,i.Lk)("h2",null,"Rajoitettu pääsy!",-1)),(0,i.Lk)("p",{style:{color:"orangered",cursor:"pointer"},onClick:t[2]||(t[2]=t=>e.$router.push("/pay-plan"))}," Lataa lisää aikaa ")])):(0,i.Q3)("",!0)])),_:2},1032,["class"])])),_:2},1024)))),128))])])),_:1})])}o(2489);var g=o(5846),A=o(144),m=o(8614),h=o(6765),p=o(407),f=o(1769),v=o(5264),k=o(2842);function y(e,t,o,s,n,a){const r=(0,i.g2)("user"),l=(0,i.g2)("message-panel");return(0,i.uX)(),(0,i.CE)("div",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.users,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t.id,style:{width:"300px",margin:"auto","margin-bottom":"5px","border-radius":"5px"}},[(0,i.Lk)("p",null,[t.self?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(r,{key:0,user:t,firstUser:e.userFirst,selected:n.selectedUser===t,onSelect:e=>a.onSelectUser(t)},null,8,["user","firstUser","selected","onSelect"]))])])))),128)),n.selectedUser?((0,i.uX)(),(0,i.Wv)(l,{key:0,user:n.selectedUser,initMessages:n.initMessages,"onNew:message":a.onMessage},null,8,["user","initMessages","onNew:message"])):(0,i.Q3)("",!0)])}o(7588),o(1701);var _=o(1690),b={name:"chat-io",props:{me:Object,uname:String,rm:String,isUserRemoved:Boolean},components:{User:v.A,MessagePanel:k.A},data(){return{selectedUser:null,users:[],room:"",firstUser:"",user:!0,initMessages:{}}},methods:{onMessage(e,t){this.selectedUser&&(console.log("Selected user: "+this.selectedUser.username),_.A.emit("private message",{content:e,date:t,to:this.selectedUser.userID}),this.selectedUser.messages.push({content:e,date:t,fromSelf:!0}))},onSelectUser(e){e.self||(this.selectedUser=e),e.hasNewMessages=!1}},mounted(){_.A.on("init messages",(e=>{this.initMessages=e.messages}))},beforeMount(){},created(){_.A.on("init messages",(e=>{this.initMessages=e.messages})),_.A.on("connect",(()=>{this.users.forEach((e=>{e.self&&(e.connected=!0)}))})),_.A.on("disconnect",(()=>{this.users.forEach((e=>{e.self&&(e.connected=!1)}))}));const e=e=>{this.initMessages.length>0&&(console.log("Room vvvvvv"+this.initMessages[0].room),this.room=this.initMessages[0].room),e.room===this.room?e.messages=this.initMessages:e.messages=[],e.hasNewMessages=!1};_.A.on("get room users",(t=>{console.log("Room users: "+t.users.map((e=>e.username))),t.users.forEach((t=>{for(let e=0;e<this.users.length;e++){const o=this.users[e];if(o.userID===t.userID)return void(o.connected=t.connected)}t.self=t.userID===_.A.userID,e(t),this.users.push(t)})),this.users.sort(((e,t)=>e.self?-1:t.self?1:e.username<t.username?-1:e.username>t.username?1:0))})),_.A.on("get updated room users",(t=>{this.users=[],t.users.forEach((t=>{for(let e=0;e<this.users.length;e++){const o=this.users[e];if(o.userID===t.userID)return void(o.connected=t.connected)}t.self=t.userID===_.A.userID,t.self||(this.selectedUser=t),e(t),this.users.push(t)})),this.users.sort(((e,t)=>e.self?-1:t.self?1:e.username<t.username?-1:e.username>t.username?1:0))})),_.A.on("user connected",(t=>{for(let e=0;e<this.users.length;e++){const o=this.users[e];if(o.userID===t.userID)return void(o.connected=!0)}e(t),this.users.push(t)})),_.A.on("user disconnected",(e=>{for(let t=0;t<this.users.length;t++){const o=this.users[t];if(o.userID===e){o.connected=!1;break}}})),_.A.on("private message",(({content:e,date:t,from:o,to:i})=>{for(let s=0;s<this.users.length;s++){const n=this.users[s],a=_.A.userID===o;if(n.userID===(a?i:o)){n.messages.push({content:e,date:t,fromSelf:a}),n!==this.selectedUser&&(n.hasNewMessages=!0);break}}}))},unmounted(){_.A.off("connect"),_.A.off("disconnect"),_.A.off("users"),_.A.off("user connected"),_.A.off("user disconnected"),_.A.off("private message")}},w=o(1241);const B=(0,w.A)(b,[["render",y],["__scopeId","data-v-c22e0ffa"]]);var C=B,I=o(6510);const D={key:0,class:"spinner-border",role:"status"},P={key:1},x={style:{border:"solid darkslategrey"}},M={key:0},E={style:{"margin-top":"17px"}},R=["src"],L={key:1,style:{"margin-bottom":"20px"}},S={key:0},O={key:0,style:{padding:"13px","margin-top":"13px","font-size":"14px",border:"1px solid blue","margin-bottom":"20px"}},U={style:{display:"flex","justify-content":"right","margin-bottom":"7px"}},N={style:{"text-align":"left","margin-bottom":"10px"}},F={key:2,style:{"margin-bottom":"20px"}},$={key:1,style:{padding:"13px","margin-top":"13px",border:"1px solid blue"}},Q={style:{display:"flex","justify-content":"right","margin-bottom":"7px"}};function T(e,t,o,n,a,r){const l=(0,i.g2)("MDBBtnClose"),d=(0,i.g2)("date-format"),c=(0,i.g2)("MDBBtn"),u=(0,i.g2)("MDBCol"),g=(0,i.g2)("MDBRow"),A=(0,i.g2)("MDBIcon"),m=(0,i.g2)("MDBTable"),h=(0,i.g2)("live-chat"),p=(0,i.g2)("MDBInput"),f=(0,i.g2)("MDBRadio"),v=(0,i.g2)("MDBTextarea");return a.distance?((0,i.uX)(),(0,i.CE)("div",P,[(0,i.bF)(m,{borderless:"",style:{"font-size":"14px",color:"#dddddd","text-align":"left"}},{default:(0,i.k6)((()=>[(0,i.Lk)("tbody",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,[(0,i.bF)(l,{white:"",class:"closeData",onClick:r.closeBooking},null,8,["onClick"]),(0,i.eW)(" "+(0,s.v_)(o.booking.address),1)])]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null," Distance: "+(0,s.v_)(a.distance)+" km. ",1)]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null," Driving duration: "+(0,s.v_)(a.duration)+". ",1)]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",x,(0,s.v_)(o.booking.description),1)]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,[(0,i.bF)(d,{date:new Date(o.booking.created)},null,8,["date"])])]),(0,i.Lk)("tr",null,[o.booking.image&&o.booking.image.length>0?((0,i.uX)(),(0,i.CE)("td",M,[(0,i.bF)(c,{outline:"success",onClick:t[0]||(t[0]=e=>r.openImagePanel(o.booking.image))},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(a.isImageOpen?"Sulje kuvat tehtävästä!":"Avaa kuvat tehtävästä!"),1)])),_:1}),(0,i.Lk)("div",null,[a.isImageOpen?((0,i.uX)(),(0,i.Wv)(g,{key:0},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.booking.image,(e=>((0,i.uX)(),(0,i.Wv)(u,{key:e._id},{default:(0,i.k6)((()=>[(0,i.Lk)("div",E,[(0,i.Lk)("img",{style:{width:"200px"},src:e.show?e.show:e.imageUrl,alt:"client-image"},null,8,R)])])),_:2},1024)))),128))])),_:1})):(0,i.Q3)("",!0),t[16]||(t[16]=(0,i.Lk)("div",null,null,-1))])])):(0,i.Q3)("",!0)]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,[(0,i.bF)(c,{outline:"info",onClick:t[1]||(t[1]=e=>r.pressOpenChat(o.provider,o.booking)),size:"lg",style:{float:"right"}},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(a.isOpenChat?"Sulje":"Avaa")+"   ",1),(0,i.bF)(A,null,{default:(0,i.k6)((()=>t[17]||(t[17]=[(0,i.Lk)("i",{class:"far fa-comments"},null,-1)]))),_:1})])),_:1})])])])])),_:1}),a.isOpenChat?((0,i.uX)(),(0,i.Wv)(h,{key:0,style:{"margin-bottom":"25px"},chatusers:o.chatusers,messages:o.messages,"onSelect:user":r.selectUser,onNoSelected:r.noSelected,selecteduser:o.selecteduser,"onOn:message":r.onMessage},null,8,["chatusers","messages","onSelect:user","onNoSelected","selecteduser","onOn:message"])):(0,i.Q3)("",!0),o.booking.isIncludeOffers?((0,i.uX)(),(0,i.CE)("div",L,[o.booking.offers.some((e=>e.provider.id===o.provider.id))?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",S,[(0,i.bF)(c,{block:"",outline:"primary",size:"lg",onClick:t[2]||(t[2]=e=>r.makeOfferBtn(o.booking))},{default:(0,i.k6)((()=>t[18]||(t[18]=[(0,i.eW)(" Tee Hintatarjous ")]))),_:1}),a.isOffer?((0,i.uX)(),(0,i.CE)("div",O,[(0,i.Lk)("div",U,[(0,i.bF)(l,{white:"",onClick:t[3]||(t[3]=e=>a.isOffer=!1)})]),(0,i.bF)(p,{white:"",type:"number",label:"Tarjoa hintasi",modelValue:a.priceOffer,"onUpdate:modelValue":t[4]||(t[4]=e=>a.priceOffer=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,i.Lk)("div",N,[(0,i.bF)(f,{label:"Tarjoan palvelu asiakkaan luona",name:"area",modelValue:a.place,"onUpdate:modelValue":t[5]||(t[5]=e=>a.place=e),value:"go"},null,8,["modelValue"]),(0,i.bF)(f,{label:"Tarjoan palvelua paikalla",name:"area",modelValue:a.place,"onUpdate:modelValue":t[6]||(t[6]=e=>a.place=e),value:"here"},null,8,["modelValue"])]),(0,i.bF)(v,{white:"",style:{},label:"Anna tarvittaessa lisäselvityksiä...",rows:"3",modelValue:a.aboutOffer,"onUpdate:modelValue":t[7]||(t[7]=e=>a.aboutOffer=e)},null,8,["modelValue"]),a.priceOffer?((0,i.uX)(),(0,i.Wv)(c,{key:0,label:"Anna hintatarjous",block:"",size:"lg",outline:"success",style:{"margin-top":"12px"},onClick:t[8]||(t[8]=e=>r.createOffer(o.booking))},{default:(0,i.k6)((()=>t[19]||(t[19]=[(0,i.eW)(" Lähetä ")]))),_:1})):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),(0,i.bF)(c,{block:"",outline:"danger",onClick:t[9]||(t[9]=e=>r.rejectFormBooking(o.booking)),size:"lg"},{default:(0,i.k6)((()=>t[20]||(t[20]=[(0,i.eW)("Poista tilaus")]))),_:1})]))])):((0,i.uX)(),(0,i.CE)("div",F,[a.isQuitClientBooking?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(c,{key:0,block:"",outline:"success",size:"lg",onClick:t[10]||(t[10]=e=>r.confirmBooking(o.booking))},{default:(0,i.k6)((()=>t[21]||(t[21]=[(0,i.eW)(" Varmista tilaus ")]))),_:1})),a.isQuitClientBooking?((0,i.uX)(),(0,i.CE)("div",$,[(0,i.Lk)("div",Q,[(0,i.bF)(l,{white:"",onClick:t[11]||(t[11]=e=>a.isQuitClientBooking=!1)})]),(0,i.bF)(v,{white:"",style:{},label:"Anna syy...",rows:"3",modelValue:a.reason,"onUpdate:modelValue":t[12]||(t[12]=e=>a.reason=e)},null,8,["modelValue"]),a.reason.length>1?((0,i.uX)(),(0,i.Wv)(c,{key:0,block:"",size:"lg",outline:"success",style:{"margin-top":"12px"},onClick:t[13]||(t[13]=e=>r.confirmRejectBookingNoOffers(o.booking))},{default:(0,i.k6)((()=>t[22]||(t[22]=[(0,i.eW)(" Varmista ")]))),_:1})):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),a.isQuitClientBooking?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(c,{key:2,block:"",outline:"danger",size:"lg",onClick:t[14]||(t[14]=e=>a.isQuitClientBooking=!0)},{default:(0,i.k6)((()=>t[23]||(t[23]=[(0,i.eW)(" Poista tilaus ")]))),_:1}))])),t[24]||(t[24]=(0,i.Lk)("div",null,null,-1))])):((0,i.uX)(),(0,i.CE)("div",D,t[15]||(t[15]=[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...",-1)])))}var j=o(9614),H=o(907),X=o(5607),W={name:"Booking",props:{booking:Object,provider:Object,bookingImages:Array,selected_room:String,selecteduser:null,chatusers:Array,messages:Array},components:{monthConverter:h.A,dateFormat:H.A,dist_dur:X.A,LiveChat:I["default"],Gallery:j["default"],MDBTable:g.EU,MDBBtn:g.al,MDBBtnClose:g.uR,MDBTextarea:g.QP,MDBInput:g.gk,MDBRadio:g.Zq,MDBIcon:g.$u,MDBRow:g.gU,MDBCol:g.m6},data(){const e=(0,A.KR)("here");return{distance:null,duration:null,isOffer:!1,priceOffer:null,aboutOffer:null,isOpenImage:!1,isImageOpen:!1,srcImg:"",reason:"",place:e,isOpenChat:!1,isQuitClientBooking:!1}},mounted(){window.google,this.calculateDistDur(),console.log("Y "+this.provider.yritys)},methods:{calculateDistDur(){const e=[this.booking.latitude,this.booking.longitude],t=[this.provider.latitude,this.provider.longitude];try{console.log("CXC "+X.A.findDistance(e,t)),X.A.findDistance(e,t).then((e=>{console.log("Distance is "+e.distance),this.distance=e.distance,this.duration=e.duration}))}catch(o){console.log("Tapahtui error")}},async initChatPanel(e,t){console.log("Booking id - "+t.id),console.log("Booking user name "+t.user.username);const o={isActive:!0,bookingID:this.booking.id,same_room_counter:1,isOnline:!1,room:this.selected_room,pro:e.yritys,status:"form",bookerUsername:t.user.username,bookerID:t.user.id,providerUsername:e.user.username,providerID:e.user.id},i={isActive:!0,bookingID:this.booking.id,same_room_counter:1,room:this.selected_room,proID:e.user.id,pro:e.yritys,userID:e.user.id,username:e.user.username};this.$emit("initializeChat",o,i)},pressOpenChat(e,t){console.log("Pro --- "+e.user.username),console.log("Booking "+t.user.username),this.$emit("openChatPanel"),this.isOpenChat=!this.isOpenChat},getBooking(e){console.log("Booking user "+e.booking.id)},selectUser(e){this.$emit("select:user",e)},noSelected(){this.$emit("noSelected")},onMessage(e,t){this.$emit("on:message",e,t)},openImagePanel(e){this.isOpenImage=!0,this.isImageOpen=!this.isImageOpen},closeImagePanel(){this.isOpenImage=!1,this.isImageOpen=!1},makeOfferBtn(e){this.isOffer=!0,this.$emit("init_offer",e)},async createOffer(e){const t=await p.A.getBookingById(e.id);console.log("Test: Booking zone:: "+e.zone),this.isOffer=!1,this.$emit("create:offer",this.priceOffer,this.place,t.zone,this.aboutOffer,t)},confirmBooking(e){console.log("Booking header "+e.header),this.$emit("confirm:booking",e)},closeBooking(){this.$emit("close:booking"),this.noSelected()},rejectFormBooking(e){!0===confirm("Oletko varmaa, että haluat poistaa tilauksen!?")?(this.isQuitClientBooking=!0,console.log("Reject"),this.$emit("rejectFormBooking",e)):console.log("You canceled!")},confirmRejectBookingNoOffers(e){this.$emit("reject_booking_no_offers",e,this.reason),this.noSelected()}}};const V=(0,w.A)(W,[["render",T],["__scopeId","data-v-b58f8eac"]]);var Y=V,G=o(7104),z=o(1414),J=o(2456),q={name:"client-notifications",props:{bookings:Array,chatusers:Array,activeUser:null,selecteduser:null,creditLeft:null,messages:Array,loggedInUser:Object,userIsProvider:Object,room:String},components:{User:v.A,MessagePanel:k.A,PulseLoader:m.A,monthConverter:h.A,TabView:G.A,TabPanel:z.A,chatContent:C,liveChat:I["default"],Booking:Y,MDBContainer:g.Dj,MDBRow:g.gU,MDBCol:g.m6,MDBListGroup:g.lC,MDBListGroupItem:g._N,MDBTabs:g.w6,MDBTabNav:g.E2,MDBTabItem:g.Yc,MDBTabContent:g._1,MDBTabPane:g.Vj,MDBTable:g.EU,MDBBtnClose:g.uR,MDBBtn:g.al},setup(){const e=(0,A.KR)("null");return{activeTabId4:e}},data(){return{HEADER_LENGTH:7,providerTest:null,selectedUser:null,userIn:null,allBookings:[],providerID:null,selectedPro:"",isBooking:!1,isOfferCreated:!1,bookingID:null,pressed:!1,bookingIndex:null,booking:{},drivingDistance:null,drivingDuration:null,bookingImages:[],currentRoom:"",isAccessTerminated:!1,bookingDate:null,isSeen:!1,isOpenImage:!1,isImageOpen:!1,srcImg:"",isChatOpen:!1,isRenderData:!1,loading:!1,id:null,un:"sanna",ri:"",room:"",isChat:!1,isPressedOpenChat:!1,isPressedContactToUser:!1,isConnection:!1,isPressedFinal:!1,count:0,isNoLimit:!1,isNoLimitText:!1}},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.userIn=t,0===this.bookings.length&&this.$router.go(-1)}else this.$router.push("/")},methods:{open(e,t){if(this.bookingIndex=t,this.creditLeft>0){this.isBooking=!0;this.userIsProvider.yritys,e.user.username;e.visitors.includes(this.userIsProvider.id)||(console.log("Visitors array includes user id"),this.createChatPanel(!0)),this.booking=e,this.addVisitor(e.id,{visitor:this.userIsProvider.id})}},backFromProNotifications(){this.$router.go(-1)},selectUser(e){this.$emit("select:user",e)},noSelected(){this.$emit("noSelected")},onMessage(e,t){this.$emit("on:message",e,t)},renderComponent(){this.isChat=!0,_.A.on("get updated room users",(e=>{console.log("xx-notification "+e.users.length),e.users.length>1&&(this.isTwoUsersOnline=!0)}))},async handleBookings(){const e=await f.A.getProvider(this.userIn.id);this.providerID=e.id,this.selectedPro=e.yritys,e&&(this.allBookings=e.booking.filter((e=>"offered"!==e.status&&"completed"!==e.status&&"confirmed"!==e.status)))},createBookingDate(){this.bookingDate=22},async getImageSize(e){let t=new Image;t.src=o(9298)(`./${e}`),await t.decode();let i=t.width,s=t.height;return{width:i,height:s}},handleOpenBooking(e,t){},handleCloseBooking(){this.isBooking=!1},handleSetRoom(e){this.$emit("set:room",e)},createChatPanel(e){this.providerTest=this.userIsProvider,console.log("##pro "+this.userIsProvider.yritys);const t=this.userIsProvider,o={useCounter:e,isActive:!1,bookingID:this.booking.id,same_room_counter:1,isOnline:!1,room:this.room,pro:t.yritys,bookerUsername:this.booking.user.username,bookerID:this.booking.user.id,providerUsername:t.user.username,providerID:t.user.id},i={useCounter:e,isActive:!1,bookingID:this.booking.id,same_room_counter:1,room:this.room,proID:t.user.id,pro:t.yritys,userID:this.booking.user.id,username:this.booking.user.username};this.$emit("initializeChat",{initChatRoom:o,chatData:i})},handleOpenChatPanel(){this.$emit("joinChatPanel",this.room)},async addVisitor(e,t){await p.A.addVisitor(e,t);console.log("VISITOR id is "+t.visitor),this.$emit("join:visitor",e,t.visitor)},messageSeen(e,t){if(this.bookingIndex=t,this.creditLeft>0){this.bookingImages=[],this.isBooking=!0,console.log("booking id "+e.id),console.log("userisprovider "+this.userIsProvider.id),console.log("booking includes you! "+e.visitors.length),e.image||(this.isAccessTerminated=!0),this.isSeen=!0,this.booking=e,this.ri=this.userIsProvider.yritys+e.user.username,console.log("Ri means: "+this.ri);const t=this.userIsProvider.yritys+e.user.username;this.userIn.username;this.room=t,console.log("User is provider here: "+this.userIsProvider.user.id),this.addVisitor(e.id,{visitor:this.userIsProvider.id}),e.visitors.includes(this.userIsProvider.id)||(console.log("Visitors array includes user id"),this.createChatPanel(!0)),this.id=e.id}else this.isNoLimitText=!0,this.isNoLimit=!0,setTimeout((()=>{this.isNoLimit=!1}),3e3)},handleInitOffer(e){this.calculateDistance(e)},async calculateDistance(e){const t=this.userIsProvider,o=(e,t)=>new Promise(((o,i)=>{e.getDistanceMatrix(t,((e,t)=>{"OK"===t?o(e):i(e)}))}));let i=[],s=[],n=t.latitude,a=t.longitude;i=[n,a];let r=e.latitude,l=e.longitude;s=[r,l];const d=async(e,t)=>{const i=new google.maps.LatLng(e[0],e[1]),s=new google.maps.LatLng(t[0],t[1]),n=new google.maps.DistanceMatrixService,a=await o(n,{origins:[i],destinations:[s],travelMode:"DRIVING"});return{distance:(a.rows[0].elements[0].distance.value/1e3).toFixed(1),duration:a.rows[0].elements[0].duration.text}};d(i,s).then((e=>{this.drivingDistance=e.distance,this.drivingDuration=e.duration}))},async handleCreateOffer(e,t,o,i,s){const n=this.userIsProvider;if(console.log("Booking offers length "+s.offers.length),s.offers.length>=3){console.log("Olet myöhässä, tarjoukset ovat yo lähetetty");const e=await p.A.getBookingById(s.id);this.$emit("offer_limit_is_loaded",this.room,s),_.A.emit("offer limit is loaded",this.room,e)}else{console.log("Jaa, saab luua pakkumise!!");const a={bookingID:s.id,room:this.room,name:n.yritys,area:o,isGo:t,distance:this.drivingDistance,duration:this.drivingDuration,price:e,place:t,description:i,provider:n.id},r=await J.A.addOffer(a);r&&(r.provider=n,this.isOfferCreated=!0),this.allBookings=this.allBookings.filter((e=>e.id!==s.id)),this.isBooking=!1;await p.A.createOffer(s.id,r.id);this.$emit("create:offer",r,s);const l=s;console.log("BBBBBBBB booking "+s.user.id),l.offers.concat(r),_.A.emit("send offer",s,r)}},async editStatus(e,t){const o={status:t},i=await p.A.updateRecipient(e,o);console.log("Is status updated: "+i.status),this.$emit("update:status",e)},async handleConfirmBooking(e){console.log("Booking header "+e.header),console.log("confirmed booking id "+e.id),console.log("Confirmed booking user id "+e.user.id),this.editStatus(e.id,"confirmed");const t=await p.A.getBookingById(e.id);this.$emit("confirm_client_booking",e),this.isBooking=!1,_.A.emit("accept recipient booking",{id:t.user.id,booking:t})},closeImagePanel(){this.isOpenImage=!1,this.isImageOpen=!1},async handleRejectFormBooking(e){const t=await p.A.getBookingById(e.id);this.isBooking=!1,this.$emit("reject_pro_form_booking",this.room,e,this.userIsProvider.id),_.A.emit("reject form booking by pro",{id:t.user.id,room:this.room,booking:e})},async handleRejectBookingNoOffers(e,t){const o=await p.A.getBookingById(e.id),i=o.user.id;this.isBooking=!1,this.$emit("reject_bookingByPro_no_offers",o,this.room,this.providerID),_.A.emit("reject map booking by pro",{id:i,room:this.room,pro:this.selectedPro,booking:e,reason:t}),await p.A.removeBooking(e.id),console.log("Test pro id "+i)}}};const K=(0,w.A)(q,[["render",u],["__scopeId","data-v-32830c4e"]]);var Z=K},4915:function(e,t,o){"use strict";var i=o(2717);let s="";const n=!0;s=i.Ii.isNativePlatform()?n?"/api":"https://www.prokeikkatori.fi/api":"/api",t.A=s},5264:function(e,t,o){"use strict";o.d(t,{A:function(){return f}});var i=o(6768),s=o(4232);const n={class:"description"},a={key:0,class:"status"};function r(e,t,o,r,l,d){const c=(0,i.g2)("status-icon");return o.user.self?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,s.C4)(["user",{selected:o.selected}])},[(0,i.Lk)("div",n,[o.user.self?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(c,{user:o.user,connected:o.user.connected},null,8,["user","connected"])]))])],2))}const l={style:{"font-size":"18px",color:"#9ba2a4"}};function d(e,t,o,n,a,r){const d=(0,i.g2)("MDBIcon");return(0,i.uX)(),(0,i.CE)(i.FK,null,[t[1]||(t[1]=(0,i.Lk)("div",null,null,-1)),(0,i.Lk)("p",l,[(0,i.bF)(d,{size:"2x"},{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.Lk)("i",{class:"fas fa-user-circle"},null,-1)]))),_:1}),(0,i.eW)(" "+(0,s.v_)(o.user.username)+" ",1),(0,i.Lk)("i",{class:(0,s.C4)(["icon",{connected:o.connected}]),style:{padding:"10px","margin-left":"10px"}},null,2)])],64)}var c=o(5846),u={name:"StatusIcon",components:{MDBIcon:c.$u},props:{connected:Boolean,user:Object},data(){return{avatar:null,chatavatar:null}},methods:{},async mounted(){}},g=o(1241);const A=(0,g.A)(u,[["render",d],["__scopeId","data-v-06c40d02"]]);var m=A,h={name:"chat-user",components:{StatusIcon:m},props:{user:Object,firstUser:String,selected:Boolean},data(){return{isChatOpen:!1}},methods:{onClick(){this.$emit("select")},setUserNotSelected(){this.$emit("noSelected")}},computed:{status(){return this.user.connected?"Aloita chattailu":"Olen offline-tilassa Jätä viesti"}}};const p=(0,g.A)(h,[["render",r],["__scopeId","data-v-69363984"]]);var f=p},5343:function(e,t,o){"use strict";e.exports=o.p+"img/reset.405c56e2.png"},5570:function(e,t,o){"use strict";const i=o(6425),s="/api/aws_upload",n=async e=>{const t=await i.post(`${s}/upload-client`,e);return t.data},a=async(e,t,o)=>{const n=await i.put(`${s}/update_client/${e}/${t}`,o);return n.data},r=async e=>{const t=await i.post(`${s}/upload-pro`,e);return t.data},l=async(e,t,o)=>{const n=await i.put(`${s}/update_pro/${e}/${t}/`,o);return n.data},d=async e=>{const t=await i.post(`${s}/upload-chat`,e);return t.data},c=async(e,t)=>{const o=await i.post(`${s}/upload-avatar/${e}`,t);return o.data},u=async(e,t,o)=>{const n=await i.put(`${s}/update-avatar/${e}/${t}`,o);return n.data},g=async(e,t)=>{const o=await i.put(`${s}/delete-avatar/${e}/${t}`);return o.data},A=async(e,t)=>{await i.delete(`${s}/delete-image/${e}/${t}`)};t.A={uploadClientImage:n,editClientImage:a,uploadProImage:r,editProImage:l,uploadChatImage:d,uploadAvatarImage:c,editAvatarImage:u,deleteAvatar:g,deleteImage:A}},5607:function(e,t,o){"use strict";var i=o(6768);const s=(e,t)=>new Promise(((o,i)=>{e.getDistanceMatrix(t,((e,t)=>{"OK"===t?o(e):i(e)}))})),n=async(e,t)=>{try{const o=new google.maps.LatLng(e[0],e[1]),i=new google.maps.LatLng(t[0],t[1]),n=new google.maps.DistanceMatrixService,a=await s(n,{origins:[o],destinations:[i],travelMode:"DRIVING"});return{distance:(a.rows[0].elements[0].distance.value/1e3).toFixed(1),duration:a.rows[0].elements[0].duration.text}}catch(o){console.log("Error to find distance!!")}};let a="";const r=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),t=new google.maps.LatLng(60.2767265,24.8575089),o=new google.maps.DistanceMatrixService;o.getDistanceMatrix({origins:[e],destinations:[t],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,durationInTraffic:!0,avoidHighways:!1,avoidTolls:!1},l)},l=(e,t)=>{if(t===google.maps.DistanceMatrixStatus.OK&&"OK"===t)return console.log("Distance "+e.rows[0].elements[0].distance.text),a=e.rows[0].elements[0].distance.text,"aaaaaaaaaaaaa";console.log("Error:",t),alert(t)},d=()=>(console.log("Is it working??"+a),(0,i.bF)("div",null,[(0,i.eW)("Hiiii")])),c=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),t=new google.maps.LatLng(60.2767265,24.8575089);return(google.maps.geometry.spherical.computeDistanceBetween(e,t)/1e3).toFixed(2)};t.A={findDistance:n,distance:r,test:d,theDist:c}},6161:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA3sAAAIKCAYAAACaxFYzAAAACXBIWXMAABcRAAAXEQHKJvM/AAAP+klEQVR42u3d3Y9cZR3A8d+ZOd3ZwuhuVdhuX5Ztd10qLelS6ItUI7QVjDFGEwPGG/VPgHuJd9aSQOKF3Bk1XsmNUcqFKaHUgBRQ11BUyi60VLu7aWuXMvvS7ZlzvIJY3ly1hfaZz+duZ2Yvfs/zzMU3M+dMVlVVAAAAkJaaJQAAABB7AAAAiD0AAADEHgAAAGIPAAAAsQcAACD2AAAAEHsAAACIPQAAAMQeAAAAYg8AAEDsAQAAIPYAAAAQewAAAIg9AAAAxB4AAABiDwAAQOwBAAAg9gAAABB7AAAAiD0AAADEHgAAgNgDAABA7AEAACD2AAAAEHsAAACIPQAAAMQeAACA2AMAAEDsAQAAIPYAAAAQewAAAIg9AAAAsQcAAIDYAwAAQOwBAADwoctTHzDLsjve8dCxqqqOvcfrBiNi0JEAAICONFNV1ZjYu/IDb/C2rVt/8cLzz+/cveeu1vJrmsVbzz1/+OlmlmXvmruvr6/Yun1nyxkHAIDOMj/XyifGX345Im4Te1d26PX29Hz8r6M7dncPfetHMRvLmv/+/NY7P3Ateh11AADoLJ85fSjqeX4stbmSi73tOz77/ZGNW7qn1n/DqQUAAJakq7E8uW/5JXeDlkaj+yufGPmC0woAAHS05GLv0FNPDp1bdr2dBQAAxF5qTmVNOwsAAIg9AAAAxB4AAABiDwAAALEHAACA2AMAAEDsAQAAiD0AAADEHgAAAGIPAAAAsQcAAIDYAwAAEHsAAACIPQAAAMQeAAAAYg8AAACxBwAAgNgDAAAQewAAAIg9AAAAxB4AAABiDwAA4DLoHY5XX/nLqNgDAABA7AEAACD2LonrqpadBQAAxF5Kdu3+4vFr2+fsLAAAIPYAAAAQewAAAIg9AAAAxB4AAABiDwAAALEHAAAg9gAAABB7AAAAiD0AAADEHgAAAGIPAABA7AEAACD2AAAAEHsAAACIPQAAAMQeAAAAYg8AAOCdPnXdyqbYAwAASEye57nYAwAAQOwBAAAg9gAAABB7AAAAiD0AAACxBwAAgNgDAABA7AEAACD2AAAAEHsAAABiDwAAALEHAACA2AMAAEDsAQAAIPYAAAAQewAAAGIPAAAAsQcAAIDYAwAAQOwBAABcDkW9Ea8ff7VX7AEAACTk79knY3x8okfsAQAAIPY+bP88e6ZlWwEAALGXmMWF+cK2AgAAYg8AAACxBwAAgNgDAABA7AEAACD2AAAAEHsAAABiDwAAALEHAACA2AMAAEDsAQAAIPYAAADEHgAAAGIPAAAAsQcAAIDYAwAAQOwBAAAg9gAAAMQeAAAAYg8AAACxBwAAgNgDAABA7AEAACzNmupMDA8PvSH2AAAAEpK3z8fADetnxB4AAABiDwAAALEHAACA2AMAAEDsAQAAiD0AAADEHgAAAGIPAAAAsQcAAIDYAwAAEHsAAACIPQAAgLQURVGIPQAAgMScPjXVEnsAAACIPQAAAMQeAAAAYg8AAACxBwAAIPYAAAAQewAAAFeh+txkXHd9/5TYAwAASEh7cTY+1rNC7AEAACD2AAAAEHsAAACIPQAAAMQeAADAezny5xfcoAUAACA1x44dXxB7AAAAiD0AAADEHgAAAGIPAADg/zM1MRYRMSb2AAAA0jMj9gAAABB7AAAAiD0AAIAP1YXzCy2xBwAAkJh2uyjEHgAAAGIPAADgSjc/18rFHgAAQGKeOPDbZlVVB8UeAAAAYg8AAACxBwAAgNh7t2uubbbyxRk7CwAAiL2UrFw1MF7MnbazAACA2AMAAOhEa6ozMTw89IbYAwAASEjePh8DN6xP8jowsQcAACD2AAAA0jI721oQewAAAIl589yM2AMAAEDsAQAAXNlmxmPNwLpxsQcAAJCYrsbyVopz5akNdObU9M0n9v+8Wr3mUOXYAkBnOPmP12tjf/qjhQD+J7fv/PzmFOfKqiqtJlq2bNlEo9G1vl7LnVoA6BRVFVW7bR2A/z6I6rWYW1h4+sKFC59Lbbbkiqgsy9XLslq0i8LJBQAAPjj2qizKstyU4mzJXbNXlmWj3S6dWgAAYAn90I6yLHvEHgAAQGK6G41WlmV3iD0AAIC0NFMcSuwBAACIPQAAAMQeAAAAYg8AAACxBwAAgNgDAAAQewAAAIg9AAAAxB4AAABiDwAAALEHAAAg9iwBAACA2AMAAEDsAQAAIPYAAAAQewAAAIg9AAAAsQcAAIDYAwAAQOwBAAAg9gAAABB7AAAAYg8AAACxBwAAgNgDAABA7AEAACD2AAAAEHsAAABiDwAAALEHAACA2AMAAEDsAQAAIPYAAADEHgAAAGIPAAAAsQcAAIDYAwAAQOwBAAAg9gAAAMQeAAAAYg8AAACxBwAAgNgDAABA7AEAAIg9AAAAxB4AAABiDwAAALEHAACA2AMAAEDsAQAAiD0AAADEHgAAAGIPAAAAsQcAAIDYAwAAEHsAAACIPQAAAMQeAAAAYg8AAACxBwAAgNgDAAAQewAAAIg9AAAAxB4AAABiDwAAALEHAAAg9gAAABB7AAAAiD0AAADEHgAAAGIPAAAAsQcAACD2AAAAEHsAAACIPQAAAMQeAAAAYg8AAEDsAQAAIPYAAAAQewAAAIg9AAAAxB4AAABiDwAAQOwBAAAg9gAAABB7AAAAiD0AAADEHgAAgNgDAABA7AEAACD2AAAAEHsAAACIPQAAAMQeAACA2AMAAEDsAQAAIPYAAAAQewAAAIg9AAAAsQcAAIDYAwAAQOwBAAAg9gAAABB7AAAAiD0AAACxBwAAgNgDAABA7AEAACD2AAAAEHsAAABiDwAAALEHAACA2AMAAEDsAQAAIPYAAAAQewAAAGIPAAAAsQcAAIDYAwAAQOwBAAAg9gAAAMQeAAAAYg8AAACxBwAAgNgDAABA7AEAACD2AAAAxB4AAABiDwAAALEHAACA2AMAAEDsAQAAiD0AAADEHgAAAGIPAAAAsQcAAIDYAwAAQOwBAAC8bUHsAQAAJKasqkLsXQ0D1Wrn63UNCwAALM3i4mIzIsbE3pUfe8eqyJxYAABgyaqqmhF7V75jF8p2ZHketXo9arW6kwsAAFykXq9FVq/FhbJdRMRcijPmqQ1UFMXeiPjbYixuiIjBsiwHy7Js5Hm+kNfreT1flteyiCwiqioiq13cu0W7iLLddvoBAOAq0NXVuOjvqiqjXZZRFMX84uLi8vf7v1qtdr5Wqx0ry/JnEfFIimuTVVXVEYcgy7LRiOiNiNGurq4NRVHs6unpGd61686qu9GddXd3ZxERAwMDsWbtGu8aAAC4wp07dy6OvHgkIiLa7Xa82XqzPHTod1lf3/W/P3LkpR9UVfVYJ69PsrGXZdnozp23f2f58uUbTp48ufKtx7u7l+evvfba8IYNN9b37Xsw37lzp3cJAAAkYnp6Oh7cty8eevjhGB0dPbm4eP7U+7123bp1z+7f//izEfGrFK/ZSy72siwbXb169YGBgbU999xzT7561er49MjIRa9pNpsxNDTknQAAAImanW3F+PhERERMTU7Gyv7+i55vtVpx9OjL8dhvHmsffOqp4uzZszuqqkrqjpzJxd437733pzfddNO3v/fAA044AACwlIaY+eWjj369qqqDKc2V3N045+bnmq65AwAAOl1ysTcxMTG8ZcutdhYAAFiSRqPRLfYAAAAS09XVJfauBmvXru11XAEAgE7nkz0AAACxBwAAkJaenp6IiEGxBwAAkJCNmzaKPQAAAMQeAAAAYg8AAOCjMTh4Q3I/vyD2AACAjrd92/aVYg8AAACxBwAAgNgDAABA7AEAACD2AAAA3mFk5MZ48ciLo2IPAAAgIc1mM8m5xB4AAIDYAwAAQOwBAAAg9gAAABB7AAAAl0R/f39yd2kRewAAQMfL8zwXewAAAIg9AAAAxB4AAABiDwAAALEHAAAg9gAAABB7AAAAV6mZmZlusQcAAJCQzZs3x+HDz/WJPQAAAMQeAAAAYg8AAACxBwAAgNgDAAAQewAAAIg9AAAAxB4AAABiDwAAALEHAAAg9gAAABB7AAAAiD0AAADEHgAAAGIPAAAAsQcAACD2AAAAEHsAAACIPQAAAMQeAAAAYg8AAEDsAQAAIPYAAAAQewAAAIg9AAAAxB4AAABiDwAAQOwBAAAg9gAAABB7AAAAiD0AAADEHgAAgNgDAABA7AEAACD2AAAAEHsAAACIPQAAAMQeAACA2AMAAEDsAQAAIPYAAAAQewAAAIg9AAAAsQcAAIDYAwAAQOwBAAAg9gAAABB7AAAAiD0AAACxBwAAgNgDAAC4yszOtsQeAABAasbHJ+Luu+86LvYAAAAQewAAAIg9AAAAxB4AAABiDwAAQOwBAAAg9gAAABB7AAAAiD0AAADEHgAAgNgDAABA7AEAACD2AAAAEHsAAACIPQAAAMQeAACA2AMAAEDsAQAAIPYAAAAQewAAAJfLiRMnZsQeAAAAYg8AAACxBwAAgNgDAABA7AEAAIg9AAAAxB4AAABiDwAAALG3ZBMTE73NZtPOAgAAYi8l4+MTPUNDQ3YWAAAQewAAAIg9AAAAxB4AAABiDwAAALEHAACA2AMAABB7AAAAiD0AAADEHgAAAGIPAAAAsQcAALAUU5OTYg8AACA1JydPxs2bbh4TewAAAIlpzbYWxB4AAEBi9u9/fErsAQAAJOSZp5+JiPA1TgAAgJS02+0iImbEHgAAQEKmpqcWUpwrq6oqrYGyrCrL0okFAACWpFarRVVVWXJz2VoAAIAEI9YSAAAAnWp6ejpWrFhxXuwBAAAkZGpqKrZt2zqV4mxiDwAA6GhFURRiDwAAIDGTk5MtsQcAAIDYAwAAQOxdMrOzLTsLAACIvZSMjo6eHB+fsLMAAIDYS0mj0fWHgweftLMAAIDYS8nhw889tHfvDwtf5QQAAP6TgwefjP7+/pdSnC2rqiq5oXbs2P7rVf2rvvzjRx6p9/X1OcEAAMC7zM62YmTkxvbk5OSeqqoOir2rxC233PKTsbGx795/332xcdPG2LLl1refW7lyZVzOCJydbYXrBgEA4Mr1ytGjcd/995dr1qze/+yzh7+a4ozJxl5ERJZlgxHxtT17dn9pfn5+sNlsds/MzHQfPvzcZf24b/v2bdO9vb0L3kIAAPDROnXqdGthYb6IiOjv72/meZ4XRVFkWTZ+4MATe1P8RK8jYg8AAKBT+VF1AAAAsQcAAIDYAwAAQOwBAAAg9gAAABB7AAAAYg8AAACxBwAAgNgDAABA7AEAACD2AAAAxJ4lAAAAEHsAAACIPQAAAMQeAAAAYg8AAACxBwAAIPYAAAAQewAAAIg9AAAAxB4AAABiDwAAQOwBAAAg9gAAABB7AAAAiD0AAADEHgAAAGIPAABA7AEAACD2AAAAEHsAAACIPQAAAMQeAACA2AMAAEDsAQAAIPYAAAAQewAAAFwC/wKaNTwUrgL27gAAAABJRU5ErkJggg=="},6510:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var i=o(6768);const s={key:0};function n(e,t,o,n,a,r){const l=(0,i.g2)("User"),d=(0,i.g2)("MessagePanel"),c=(0,i.g2)("MDBContainer");return(0,i.uX)(),(0,i.Wv)(c,{style:{}},{default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[o.chatusers.length>0?((0,i.uX)(),(0,i.CE)("div",s,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.chatusers,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t},[(0,i.bF)(l,{user:e,selected:o.selecteduser===e,onNoSelected:r.noSelected,onSelect:t=>r.selectUser(e)},null,8,["user","selected","onNoSelected","onSelect"])])))),128)),o.selecteduser?((0,i.uX)(),(0,i.Wv)(d,{key:0,test:o.test,user:o.selecteduser,messages:o.messages,"onNew:message":r.onMessage},null,8,["test","user","messages","onNew:message"])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)])])),_:1})}o(4114);var a=o(5846),r=o(5264),l=o(2842),d=o(1690),c=o(6732),u={name:"live-chat",props:{creditLeft:null,userIsProvider:null,isSelectedByExpiredUser:Boolean,test:Boolean,selecteduser:null,chatusers:Array,isAccessDenied:Boolean,messages:Array,newMessageRoom:String,loggedInUser:Object,bookings:Array,bookingsHistory:Array,un:String,ri:String},components:{User:r.A,MessagePanel:l.A,infoMessage:c.A,MDBContainer:a.Dj},data(){return{tabFocus:!1,user:{},selectedUser:null,users:[],msg:"",messageAboutCredit:"Lataa lisää aikaa!",userId:null,username:"",room:"",count:0}},created(){},watch:{tabFocus(e){console.log("New value:",e)}},methods:{lataa(){this.$router.push("/pay-plan")},sendMessage:function(){""!==this.msg&&(d.A.emit("msg",this.msg),this.msg="")},startChat(){let e="userdialog",t="eka";d.A.emit("credentials",{userID:this.loggedUser.id,username:t,room:e})},submit(){},selectUser(e){this.$emit("select:user",e),this.selectedUser=e},noSelected(){this.$emit("noSelected")},onMessage(e,t,o){this.$emit("on:message",e,t,o)},renderChat(){this.count++},newChat(){console.log("Aaaaaaaa");let e="alla",t="tuba";this.usernameAlreadySelected=!0,d.A.auth={username:e,room:t},d.A.connect()},onUsernameSelection(e,t){this.username=e,this.room=t,this.usernameAlreadySelected=!0,d.A.auth={username:e,room:t},d.A.connect()},updateRoom(){d.A.emit("updateRoom","uus-tuba"),d.A.on("get room users",(e=>{this.users=e})),this.socketResetTest()},removeChatUser(){console.log("Remove chat user"),d.A.emit("unsubscribe"),window.localStorage.removeItem("sessionID"),d.A.on("get room users",(e=>{this.users=e})),location.reload()}},computed:{isValid(){return this.msg.length>0}},mounted(){},unmounted(){"/chat"!==this.currentRouteName&&(this.noSelected(),console.log("Ei ole see router"))}},g=o(1241);const A=(0,g.A)(u,[["render",n],["__scopeId","data-v-5c25fce4"]]);var m=A},6601:function(e,t,o){"use strict";e.exports=o.p+"img/reset.405c56e2.png"},6732:function(e,t,o){"use strict";var i=o(6768);const s=({message:e})=>null===e?null:(0,i.bF)("div",{className:"info"},[e]);t.A=s},6765:function(e,t){"use strict";const o=({num:e})=>{let t="";switch(5===e&&(t="Mis siis"),e){case 0:t="Tammikuu";break;case 1:t="Helmikuu";break;case 2:t="Maaliskuu";break;case 3:t="Huhtikuu";break;case 4:t="Toukokuu";break;case 5:t="Kesäkuu";break;case 6:t="Heinäkuu";break;case 7:t="Elokuu";break;case 8:t="Syyskuu";break;case 9:t="Lokakuu";break;case 10:t="Maaliskuu";break;case 11:t="Joulukuu";break}return t};t.A=o},6975:function(e,t,o){"use strict";e.exports=o.p+"img/avatar.588327cc.png"},7337:function(e,t,o){"use strict";var i=o(6768);const s=({message:e})=>null===e?null:(0,i.bF)("div",{className:"success"},[e,(0,i.bF)("img",{className:"successImg",alt:"error",src:o(1727)},null)]);t.A=s},8269:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var i=o(6768),s=o(4232);const n={key:0,class:"ask-prompt-action"},a={class:"prompt-header"},r={style:{float:"right"}},l={style:{display:"flex","justify-content":"space-around","margin-right":"10px"}};function d(e,t,o,d,c,u){const g=(0,i.g2)("MDBBtn"),A=(0,i.g2)("MDBContainer");return(0,i.uX)(),(0,i.Wv)(A,null,{default:(0,i.k6)((()=>[o.promptPanelContent?((0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("h3",a,(0,s.v_)(o.promptPanelContent),1),(0,i.Lk)("div",r,[(0,i.Lk)("div",l,[(0,i.bF)(g,{class:"btn-yes",color:"success",size:"large",onClick:u.actionYes},{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.eW)("Kyllä")]))),_:1},8,["onClick"]),(0,i.bF)(g,{class:"btn-no",color:"danger",size:"large",onClick:u.actionNo},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.eW)("Poistu")]))),_:1},8,["onClick"])])])])):(0,i.Q3)("",!0)])),_:1})}var c=o(5846),u={name:"ActionPanel",props:{promptPanelContent:null},components:{MDBContainer:c.Dj,MDBBtn:c.al},data(){return{}},methods:{actionNo(){this.$emit("prompt:no")},actionYes(){this.$emit("prompt:yes")}}},g=o(1241);const A=(0,g.A)(u,[["render",d],["__scopeId","data-v-0854ee34"]]);var m=A},8802:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA4QAAAOEBcBgcLgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAUkSURBVFiF7ZddbBRVFMd/987szHaXFkr5ahf5lFq+VlAWKFYBQYn6JBoTH3zQBBMfTCmi8QFs0AdN/AA0EgW/HozRhIQgyEdCiUEDiEi0Fiylgm2B0o/FtaXL7szce30oJSAtNEStD/4f55w55zfn3DP3XmGMYSAlBzT7/wD/BQD7305492vkOy4JoXlES4rFPzkFS94gqgUzFSRyHMqA0oxPYY9dQPPfVoFZGwnldRIXkoRjMc+WlGmLsfkR0lOLEJ4y0cO/dacVAuNIY/xAvH5TFVizBvnNIEqQJCxJqWtx90Wf4qiLVzIKHY8RnThMi7FDA35qgk37bX5Pdy+3XNcwf4LPjlonkIpYvyqwcB3jpCZhSebmhJifGcLUsAW3DsePjyZaPMLI8QWKaEjZnqfwA0VNs81be1zauyTiUpyZsYDHZmTZUu1iS/btrKD1GoDF6xmJIoEgEXVY4AXMdAThCSO5GB9NpGQU9sQCxdCIwvNUOOtrlNIYDy54cLzV4sPvorR0SvIjxji2QWkhnpqdoWyCz4+nbWpbrS5P8R6AvXAts6RmcTTM/ECTkIYhsaGkp8dwpxThFI8wjMpV+L4Keb7C8xUmgFTH1eAnk5IPDuZw5g/J8KjR8UIla1os8nO0WH1fmvyIJuMLTiUlXb4QbogvAWxXssE3JOIxeGIujMnXaKVys77C8xSB0pxP9d2eppRk4/4wjSmLoTlGPzTZkzXNNtXNFmXjfbGsNHPZt6VTUJ+0Awxf7HiWLICdV0RpspEnq0/zxro9Ku+x27Ni0nB1w3XR3CF5/0CYU0mLwWGjHyjxZCSE3PFLSPtayIr5F5kRC65651yH5ES75WvBpp5nl6fgwXdwXamfD4xcNWm4ch6NZ8SYfH1N4rYLko0HwtS1WeS6RpeO9eXowZqaczbfN9kU5mlW3Z8m6lw9XR0ZwbYah72/hs7uLhexawB6tHADg4bA6qyiYmaRH1oa9xiZq0mlJe8dcKltsYk4Rs8Z48tx+RqtYVedo1s6pVxS4vH4HdleK3aizeLTw26mIWW9uqeCl/sE6NHidynIlbyS9c3ThYONbEhKEQ4ZPfuWQE4s6G5RW5dk93FHC2HkygUZikcEvcYyBvbVh/jkh7CvFZOqnqPhhgA9WrSWmAVHpxUGg++8oqc/nLGpPmszvkDx4uI0rtV3jPYuyZZqh0ONocM7y0lcabvhblhVwRlp8W0k1A2qDWz+2dXVZ22W3p6lcsn1kwO0dgiOt9oXPM2Gv9r6tR37ioPtXdIDOHLGpiMjZMQxxAt7L/mVCjQ0nLdIpoWT9dl8UwDGUJ1MywxAw3mpCyIax0JX7ory/v4w12tiW6ekrt3SlmTbty/QeXMAkupURuQYAx1ZIaeMVDw8LSvnjfU52Bgyy74YxLkLvYdq6ZTUtloXfc3G3uz9Avh6OQ0Yo35qtkEIc+uw7ilIpiVaG+Er0bZqezTYftRBX1GOjC+ob7fwFN49Hey5aQADxpbUHWuxyHONOZ+WfPZjWNW1WcogyqtWMMKHOVtrnPpVX0WDppS89PWCE21W1iA+rqzk2r9afwEAlBGHMoFAgNx6zDHZgFpLU7R3BW8DVC3nSCYlJjd3yjWVuyL+50dcTv8uqU9KAsNHfcXt94Hk3jdZIwQvCYEyhpVVK1jXp+96bnPgMymYro05uatclPTl2/8jmc1+FPWW4q7dK2m9nuveco4LmLVoLc8YJWqv5/uPHkr7owG/F/wPMOAAfwKhwkcodKKz1gAAAABJRU5ErkJggg=="},9121:function(e,t,o){"use strict";e.exports=o.p+"img/fin_1.f94527fc.png"},9298:function(e,t,o){var i={"./avatar/avatar.png":6975,"./chat_images/reset.png":6601,"./pro/reset.png":5343};function s(e){var t=n(e);return o(t)}function n(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id=9298},9614:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return y}});var i=o(6768);const s={key:0,style:{"text-align":"center"}},n={key:1},a={key:2},r=["data-lg-size","data-src"],l=["src"];function d(e,t,o,d,c,u){const g=(0,i.g2)("lightgallery"),A=(0,i.g2)("MDBBtn"),m=(0,i.g2)("MDBContainer");return(0,i.uX)(),(0,i.Wv)(m,{style:{"padding-top":"150px"}},{default:(0,i.k6)((()=>[o.inspectingBooking?((0,i.uX)(),(0,i.CE)("h2",n,"Kuvat tehtävästä")):((0,i.uX)(),(0,i.CE)("h2",s,"Kuvia tehtyistä työistä")),o.isPro?((0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("input",{id:"pro-file-upload",type:"file",onChange:t[0]||(t[0]=t=>u.handleFileChange(t,e.i))},null,32),t[1]||(t[1]=(0,i.Lk)("label",{for:"pro-file-upload",class:"pro-file-upload"},[(0,i.Lk)("span",null,"Lataa uusi kuva tehtävästä")],-1))])):(0,i.Q3)("",!0),(0,i.bF)(g,{style:{"text-align":"left"},id:"update",settings:{speed:500,plugins:c.plugins},onInit:u.onInit,onBeforeSlide:u.onBeforeSlide},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.proImages,((e,t)=>((0,i.uX)(),(0,i.CE)("a",{key:t,"data-lg-size":e.size,class:"gallery-item","data-src":e.src},[(0,i.Lk)("img",{style:{"margin-bottom":"10px",width:"140px","margin-left":"0"},class:"img-responsive",alt:"Image",src:e.thumb},null,8,l)],8,r)))),128))])),_:1},8,["settings","onInit","onBeforeSlide"]),c.isImageEdited||c.removedImages.length>0?((0,i.uX)(),(0,i.Wv)(A,{key:3,block:"",color:"success",size:"lg",onClick:u.uploadProSlides},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.eW)("Vahvista tehtyt muokkaukset ja sulje")]))),_:1},8,["onClick"])):(0,i.Q3)("",!0)])),_:1})}o(8111),o(116);var c=o(1769),u=o(5374),g=o.n(u),A=o(9185),m=o(4474),h=o(5846);let p=null;var f={name:"Gallery",props:{isPro:Boolean,inspectingBooking:Boolean,userIsProvider:Object,proImages:Array},components:{Lightgallery:g(),MDBContainer:h.Dj,MDBBtn:h.al},watch:{proImages(e,t){this.$nextTick((()=>{p.refresh()}))}},data(){return{pro:null,showImage:null,file:null,value:null,plugins:[A.A],height:" 100px",id:null,index:1,isImageEdited:!1,images:[],addedSlides:[],removedImages:[],items:[{id:"1",size:"1400-933",src:"https://images.unsplash.com/photo-1542103749-8ef59b94f47e?ixid=MXwxMjA3fDB8MH,xwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1400&q=80",thumb:"https://images.unsplash.com/photo-1542103749-8ef59b94f47e?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=240&q=80",subHtml:'<div class="lightGallery-captions">\n                <h4>Photo by <a href="https://unsplash.com/@dann">Dan</a></h4>\n                <p>Published on November 13, 2018</p>\n            </div>'},{id:"2",size:"1400-933",src:"https://images.unsplash.com/photo-1473876988266-ca0860a443b8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1400&q=80",thumb:"https://images.unsplash.com/photo-1473876988266-ca0860a443b8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=240&q=80",subHtml:'<div class="lightGallery-captions">\n                <h4>Photo by <a href="https://unsplash.com/@kylepyt">Kyle Peyton</a></h4>\n                <p>Published on September 14, 2016</p>\n            </div>'},{id:"3",size:"1400-932",src:"https://images.unsplash.com/photo-1588953936179-d2a4734c5490?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1400&q=80",thumb:"https://images.unsplash.com/photo-1588953936179-d2a4734c5490?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=240&q=80",subHtml:'<div class="lightGallery-captions">\n                <h4>Photo by <a href="https://unsplash.com/@jxnsartstudio">Garrett Jackson</a></h4>\n                <p>Published on May 8, 2020</p>\n            </div>'},{id:"4",size:"1000-400",src:o(4368),thumb:o(4368),subHtml:'<div class="lightGallery-captions">\n\n\n            </div>"'}]}},beforeMount(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.pro=t}},methods:{async handleProvider(e){},async getImageDimensions(e){let t=new Image;t.src=URL.createObjectURL(e),await t.decode();let o=t.width,i=t.height;return{width:o,height:i}},handleFileChange(e,t){console.log("i in file change "+t);try{const t=e.target.files[0];console.log("event target client ",e.target.files[0]);const o=new FormData;if(t){URL.createObjectURL(t);this.showImage=URL.createObjectURL(t);const i=URL.createObjectURL(t);this.file=e.target.files[0];const s=e.target.files[0];o.append("file",s,s.name),this.getImageDimensions(s).then((e=>{const t={width:e.width,height:e.height},s={id:null,size:e.width+"-"+e.height,data:o,src:i,thumb:i,subHtml:'<div class="lightGallery-captions">\n\n\n            </div>"'};this.$emit("add:slide",s,t)})),this.isImageEdited=!0}}catch(o){console.log("Error:",o)}this.value=e.target.files[0]},async updateSlides(e){let t=await m.A.createProRefImg(this.userIsProvider.id,e.data);await c.A.addProSlide(this.userIsProvider.id,{slideID:t.imgCreated._id}),console.log("lkdfanvoöinaeäofvnaespvns ")},uploadProSlides(){this.$router.go(-1),this.$emit("updateGalleryRemove",this.removedImages);for(let e=0;e<this.proImages.length;e++)null===this.proImages[e].id&&this.updateSlides(this.proImages[e])},onInit(e){if(console.log("Details "+e.instance.index),p=e.instance,this.isPro){const e='<button style="margin-left: 100px; color: #ddd; background-color: red;" type="button" aria-label="View source" id="lg-delete">Poista kuva</button>';p.outer.find(".lg-toolbar").append(e),document.getElementById("lg-delete").addEventListener("click",(()=>{console.log("custom button click "+this.index);const e=this.proImages[this.index].id;e&&(this.removedImages=[...this.removedImages,e]),console.log("Image id "+e),this.$emit("remove:slide",e,this.index),console.log("prov id... "+this.userIsProvider.id);const t=p;t.closeGallery(),t.refresh()}))}},onBeforeSlide(e){console.log("calling before slide "+typeof e.index);let t=e.index;console.log("Tasku "+t+typeof t),this.index=t}}},v=o(1241);const k=(0,v.A)(f,[["render",d],["__scopeId","data-v-76c68f62"]]);var y=k}},t={};function o(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,i,s,n){if(!i){var a=1/0;for(c=0;c<e.length;c++){i=e[c][0],s=e[c][1],n=e[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||a>=n)&&Object.keys(o.O).every((function(e){return o.O[e](i[l])}))?i.splice(l--,1):(r=!1,n<a&&(a=n));if(r){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[i,s,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,i){return o.f[i](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/"+e+"."+{25:"2ba3be03",69:"7f79164a",119:"b6d40d41",138:"22469387",153:"52cea184",188:"7e68714e",264:"e9a9facd",286:"e2a27191",351:"fea1de3e",353:"5819d20d",373:"56053795",383:"898304cd",416:"3c526e07",429:"0a84c831",505:"0ad97b2a",506:"925bb8ea",509:"79a4bb57",537:"bcea6059",627:"9de68df7",754:"f2d64e5a",807:"5eca262e",843:"2bbeae84",870:"a08d515a",906:"679b7281",954:"2fa1c7a4",974:"3786c269"}[e]+".js"}}(),function(){o.miniCssF=function(e){return"css/"+e+"."+{25:"ee72db0d",69:"72e7e87e",138:"c9213e3c",188:"c5b34e62",264:"01ba20e3",351:"a3a307e7",383:"af8aa102",416:"63d58289",429:"a1c110e4",505:"38fee4c8",506:"34a3fb84",509:"d76829cd",537:"f81dc240",627:"6e3741bf",655:"ae5022c1",697:"4f977018",754:"a072546f",843:"c00e2c06",870:"638dbce3",906:"5178dff3",954:"afab2ef0",969:"ba95f239",974:"f6eab601"}[e]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="prore-mongo:";o.l=function(i,s,n,a){if(e[i])e[i].push(s);else{var r,l;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+n){r=u;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.setAttribute("data-webpack",t+n),r.src=i),e[i]=[s];var g=function(t,o){r.onerror=r.onload=null,clearTimeout(A);var s=e[i];if(delete e[i],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(e){return e(o)})),t)return t(o)},A=setTimeout(g.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=g.bind(null,r.onerror),r.onload=g.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,i,s,n){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",o.nc&&(a.nonce=o.nc);var r=function(o){if(a.onerror=a.onload=null,"load"===o.type)s();else{var i=o&&o.type,r=o&&o.target&&o.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+": "+r+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=r,a.parentNode&&a.parentNode.removeChild(a),n(l)}};return a.onerror=a.onload=r,a.href=t,i?i.parentNode.insertBefore(a,i.nextSibling):document.head.appendChild(a),a},t=function(e,t){for(var o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var s=o[i],n=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(n===e||n===t))return s}var a=document.getElementsByTagName("style");for(i=0;i<a.length;i++){s=a[i],n=s.getAttribute("data-href");if(n===e||n===t)return s}},i=function(i){return new Promise((function(s,n){var a=o.miniCssF(i),r=o.p+a;if(t(a,r))return s();e(i,r,null,s,n)}))},s={524:0};o.f.miniCss=function(e,t){var o={25:1,69:1,138:1,188:1,264:1,351:1,383:1,416:1,429:1,505:1,506:1,509:1,537:1,627:1,655:1,697:1,754:1,843:1,870:1,906:1,954:1,969:1,974:1};s[e]?t.push(s[e]):0!==s[e]&&o[e]&&t.push(s[e]=i(e).then((function(){s[e]=0}),(function(t){throw delete s[e],t})))}}}(),function(){var e={524:0};o.f.j=function(t,i){var s=o.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else if(/^(655|697|969)$/.test(t))e[t]=0;else{var n=new Promise((function(o,i){s=e[t]=[o,i]}));i.push(s[2]=n);var a=o.p+o.u(t),r=new Error,l=function(i){if(o.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var n=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",r.name="ChunkLoadError",r.type=n,r.request=a,s[1](r)}};o.l(a,l,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,n,a=i[0],r=i[1],l=i[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(l)var c=l(o)}for(t&&t(i);d<a.length;d++)n=a[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},i=self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=o.O(void 0,[504],(function(){return o(737)}));i=o.O(i)})();
//# sourceMappingURL=app.be0a352c.js.map