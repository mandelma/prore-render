(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[179],{4729:function(e){e.exports={}},5118:function(e,o,t){"use strict";var l=t(3396);const a=({message:e})=>null===e?null:(0,l.Wm)("div",{className:"error"},[e,(0,l.Wm)("img",{className:"errorImg",alt:"error",src:t(5551)},null)]);o.Z=a},8179:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return U}});t(7658);var l=t(3396),a=t(7139);const s=(0,l._)("h2",{style:{"margin-top":"50px","margin-bottom":"50px"}},"-TMI panel-",-1),r={autocomplete:"off",style:{"background-color":"#1f3d40",padding:"5px"}},i=(0,l._)("p",{style:{"text-align":"left",color:"deepskyblue","font-size":"18px"}},"jos sädettä ei ole merkitty, se tarkoittaa, että tarjoat palvelua vain määritetyssä osoitteessa",-1),n={style:{"margin-bottom":"20px"}},d={value:"slotProps"},u={key:0},p={key:1},m={style:{},class:"flex align-items-center"},c={style:{margin:"20px 0 20px 0"}};function g(e,o,t,g,h,y){const b=(0,l.up)("ErrorNotification"),_=(0,l.up)("MDBInput"),w=(0,l.up)("Dropdown"),f=(0,l.up)("MDBRadio"),k=(0,l.up)("MDBCheckbox"),v=(0,l.up)("MDBBtn"),V=(0,l.up)("MDBContainer");return(0,l.wg)(),(0,l.iD)("div",null,[s,(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{message:h.errorFormMessage},null,8,["message"]),(0,l._)("form",r,[(0,l.Wm)(_,{label:"Anna yrityksen nimi",modelValue:g.yritys,"onUpdate:modelValue":o[0]||(o[0]=e=>g.yritys=e),white:"",id:"yritys",size:"lg",wrapperClass:"mb-4"},null,8,["modelValue"]),(0,l.Wm)(_,{label:"Anna yrityksen y-tunnus",modelValue:g.ytunnus,"onUpdate:modelValue":o[1]||(o[1]=e=>g.ytunnus=e),white:"",id:"ytunnus",size:"lg",wrapperClass:"mb-4"},null,8,["modelValue"]),(0,l.Wm)(_,{label:"Anna osoitteesi",white:"",id:"osoite",size:"lg",wrapperClass:"mb-4"}),i,(0,l.Wm)(_,{wrapperClass:"mb-4",label:"Anna toiminta-alueen säde - km",white:"",modelValue:g.range,"onUpdate:modelValue":o[2]||(o[2]=e=>g.range=e),size:"lg",type:"number"},null,8,["modelValue"]),(0,l._)("div",n,[(0,l.Wm)(w,{modelValue:h.profession,"onUpdate:modelValue":o[3]||(o[3]=e=>h.profession=e),options:h.prodata,filter:"",optionLabel:"label",optionGroupLabel:"label",showClear:"",optionGroupChildren:"items",placeholder:"Valitse ammattilainen",class:"w-full md:w-100rem"},{optiongroup:(0,l.w5)((e=>[(0,l._)("div",m,[(0,l._)("div",null,(0,a.zw)(e.option.label),1)])])),default:(0,l.w5)((()=>[(0,l._)("template",d,[e.slotProps.value?((0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("div",null,(0,a.zw)(e.slotProps.value.label),1)])):((0,l.wg)(),(0,l.iD)("span",p,(0,a.zw)(e.slotProps.placeholder),1))])])),_:1},8,["modelValue","options"])]),(0,l.Wm)(f,{white:"",label:"Tuntihinta",name:"aboutPrice",modelValue:g.about_price,"onUpdate:modelValue":o[4]||(o[4]=e=>g.about_price=e),value:"hour",wrapperClass:"mb-4"},null,8,["modelValue"]),"hour"===g.about_price?((0,l.wg)(),(0,l.j4)(_,{key:0,label:"Anna tuntihinta",modelValue:g.price,"onUpdate:modelValue":o[5]||(o[5]=e=>g.price=e),white:"",id:"hinta",size:"lg",wrapperClass:"mb-4"},null,8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(f,{white:"",label:"Urakkahinta",name:"aboutPrice",modelValue:g.about_price,"onUpdate:modelValue":o[6]||(o[6]=e=>g.about_price=e),value:"piece",wrapperClass:"mb-4"},null,8,["modelValue"]),(0,l.Wm)(_,{white:"",label:"Anna yrityksen kotisivun osoite jos on",size:"lg",modelValue:g.pro_link,"onUpdate:modelValue":o[7]||(o[7]=e=>g.pro_link=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,l._)("div",c,[(0,l.Wm)(k,{label:"Saatavilla 24/7",modelValue:g.isAvailable24_7,"onUpdate:modelValue":o[8]||(o[8]=e=>g.isAvailable24_7=e)},null,8,["modelValue"])])]),(0,l.Wm)(v,{outline:"success",size:"lg",block:"",onClick:y.addProvider},{default:(0,l.w5)((()=>[(0,l.Uk)("Add provider profile")])),_:1},8,["onClick"]),(0,l.Wm)(v,{outline:"danger",size:"lg",block:"",onClick:o[9]||(o[9]=e=>this.$router.push("/")),style:{"margin-bottom":"50px"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Poistu ")])),_:1})])),_:1})])}var h=t(4870),y=t(3998),b=t(9673),_=t(5118),w=t(4313),f=t(4161);const k=t(7218),v="/api/map",V=async()=>{const e=await k.get(v);return e.data};var C={getLocation:V},M=t(9398);const A=t(4729),B=t(4729);var D={name:"provider-form",data(){return{result:"",errorFormMessage:null,latitude:0,longitude:0,address:"",profession:null,userId:"",prodata:y.Z}},setup(){const e=(0,h.iH)(""),o=(0,h.iH)(""),t=(0,h.iH)(""),l=(0,h.iH)(null),a=(0,h.iH)(null),s=(0,h.iH)("hour"),r=(0,h.iH)(null),i=(0,h.iH)(!1);return{yritys:e,ytunnus:o,date:t,price:l,range:a,about_price:s,pro_link:r,isAvailable24_7:i}},components:{MDBContainer:w.L5,MDBBtn:w.$v,MDBInput:w.u2,MDBCheckbox:w.IH,MDBRadio:w.Xc,Dropdown:b.Z,errorNotification:_.Z},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const o=JSON.parse(e);this.userId=o.id,console.log("User id in Provider: "+o.id)}console.log("Google key is: "+B.google);const o={lat:50.064192,lng:-130.605469},t={north:o.lat+.1,south:o.lat-.1,east:o.lng+.1,west:o.lng-.1},l=document.getElementById("osoite"),a={bounds:t,componentRestrictions:{country:"fi"},fields:["address_components","geometry","icon","name","formatted_address"],strictBounds:!1},s=new google.maps.places.Autocomplete(l,a);s.addListener("place_changed",(()=>{let e=s.getPlace();this.latitude=e.geometry.location.lat(),this.longitude=e.geometry.location.lng(),console.log(e),console.log("Latitude: "+e.geometry.location.lat()),console.log("Full address: "+e.formatted_address),this.address=e.formatted_address}))},methods:{canselSession(){this.$emit("cansel:provider","Test")},getAddress(){f.Z.get("https://maps.googleapis.com/maps/api/geocode/json?address=01620+Raikukuja,+Vantaa&key="+A.googleMap).then((e=>{e.data.error_message?(this.error=e.data.error_message,console.log(e.data.error_message)):(this.address=e.data.results[0].formatted_address,console.log(e.data.results[0].formatted_address),console.log(e.data.results[0].address_components[0].long_name),this.result=e.data.results[0].formatted_address)})).catch((e=>{this.error=e.message,this.spinner=!1,console.log(e.message)}))},async addProvider(){const e={yritys:this.yritys,ytunnus:this.ytunnus,address:this.address,latitude:this.latitude,longitude:this.longitude,profession:this.profession.label,priceByHour:"hour"===this.about_price?this.price:null,range:null===this.range?0:this.range,proLink:this.pro_link,isAvailable24_7:this.isAvailable24_7},o=await M.Z.addProvider(this.userId,e);console.log("Added provider::: "+o),o?(this.$router.push("/provider-panel"),this.$emit("show-created-provider-credit")):(this.errorFormMessage="Tarkista kentat ja yritä uuddelleen!",setTimeout((()=>{this.errorFormMessage=null}),2e3))},testMonth(){},async getTest(){const e=await C.getLocation();console.log("result "+e)}}},W=t(89);const x=(0,W.Z)(D,[["render",g]]);var U=x},5551:function(e,o,t){"use strict";e.exports=t.p+"img/error.9510853e.png"}}]);
//# sourceMappingURL=179.04306a27.js.map