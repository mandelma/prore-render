"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[378],{2283:function(e,t,l){l(2340)},3998:function(e,t){const l=[{label:"Automekaanikko"},{label:"Automaalari"},{label:"Automyyjä"},{label:"Katsastaja"},{label:"Varaosamyyjä"}],i=[{label:"Elintarvikekemisti"},{label:"Elintarviketyöntekijä"},{label:"Hankintapäällikkö, meijeriteollisuus"},{label:"Kondiittori"},{label:"Leipomotyöntekijä"},{label:"Leipuri"},{label:"Lihanleikkaaja"},{label:"Lihavalmistetyöntekijä"},{label:"Mylläri"},{label:"Elintarvikepakkaaja"},{label:"Juomatyöntekijä"},{label:"Säilyketyöntekijä"},{label:"Teurastaja"},{label:"Elintarviketuotannon työnjohtaja"},{label:"Tuotannonsuunnittelija, elintarviketeollisuus"},{label:"Tuotantopäällikkö, meijeriteollisuus"},{label:"Meijeristi, meijerituotteiden valmistaja"}],a=[{label:"Automaatioasentaja"},{label:"Automaatioinsinööri"},{label:"Biotekniikan insinööri"},{label:"Elektroniikka-asentaja"},{label:"Elektroniikkainsinööri"},{label:"Energianeuvoja"},{label:"Energiatekniikan insinööri"},{label:"Hakkurinkuljettaja"},{label:"Huoltopäällikkö, kylmäala"},{label:"Kaukolämpöasentaja"},{label:"Kaukolämpöinsinööri"},{label:"Insinööri, kemiantekniikka"},{label:"Kemisti"},{label:"Kunnossapitoinsinööri"},{label:"Kylmäsuunnittelija"},{label:"Käyttöinsinööri"},{label:"LVI-asentaja"},{label:"LVI-insinööri"},{label:"Laborantti"},{label:"Lämpöyrittäjä"},{label:"Metsuri"},{label:"Metsäkoneenkuljettaja"},{label:"Metsätalouden harjoittaja"},{label:"Metsätalousinsinööri"},{label:"Sähköasentaja"},{label:"Sähköinsinööri"},{label:"Sähkömestari, meriliikenne"},{label:"Sähköverkostoasentaja"},{label:"Tuulivoimainsinööri"},{label:"Voimalaitoksen käyttäjä"},{label:"Voimalaitospäällikkö"},{label:"Huoltoteknikko"}],o=[{group:"Autoala",options:l},{group:"Elintarviketeollisuus",options:i},{group:"Energia-ala",options:a}];t.Z=o},3378:function(e,t,l){l.r(t),l.d(t,{default:function(){return Z}});var i=l(3396),a=l(7139),o=l(9242);const n={id:"test",style:{"background-color":"white"}},s={class:"ui large segment form"},r={class:"field"},p=(0,i._)("option",{value:""},"Valitse ammattisi",-1),u=["label"],m=["value"],g=["value"],c=(0,i._)("option",{disabled:"",value:"1"},"1 kilometriä ympärilläsi",-1),d=(0,i._)("option",{value:"2"},"2 km ympärilläsi",-1),k=(0,i._)("option",{value:"3"},"3 km ympärilläsi",-1),y=(0,i._)("option",{value:"4"},"4 km ympärilläsi",-1),h=(0,i._)("option",{value:"5"},"5 km ympärilläsi",-1),v=(0,i._)("option",{value:"6"},"6 km ympärilläsi",-1),b=(0,i._)("option",{value:"7"},"7 km ympärilläsi",-1),w=(0,i._)("option",{value:"8"},"8 km ympärilläsi",-1),f=(0,i._)("option",{value:"9"},"9 km ympärilläsi",-1),L=(0,i._)("option",{value:"10"},"10 km ympärilläsi",-1),_=(0,i._)("option",{value:"20"},"20 km ympärilläsi",-1),C=(0,i._)("option",{value:"30"},"30 km ympärilläsi",-1),j=(0,i._)("option",{value:"40"},"40 km ympärilläsi",-1),M=(0,i._)("option",{value:"50"},"50 km ympärilläsi",-1),B=(0,i._)("option",{value:"60"},"60 km ympärilläsi",-1),A=(0,i._)("option",{value:"70"},"70 km ympärilläsi",-1),E=(0,i._)("option",{value:"80"},"80 km ympärilläsi",-1),I=(0,i._)("option",{value:"90"},"90 km ympärilläsi",-1),D=(0,i._)("option",{value:"100"},"100 km ympärilläsi",-1),O=(0,i._)("option",{value:"200"},"200 km ympärilläsi",-1),T=(0,i._)("option",{value:"300"},"300 km ympärilläsi",-1),S=[c,d,k,y,h,v,b,w,f,L,_,C,j,M,B,A,E,I,D,O,T],z=(0,i._)("section",{id:"map"},null,-1);function P(e,t,l,c,d,k){const y=(0,i.up)("MDBInput"),h=(0,i.up)("MDBBtn"),v=(0,i.up)("MDBContainer");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(v,{style:{position:"relative","z-index":"1",opacity:"0.8","margin-top":"60px"}},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i.Wm)(y,{label:"Anna osoitteesi",modelValue:d.address,"onUpdate:modelValue":t[0]||(t[0]=e=>d.address=e),id:"autocomplite",size:"lg",wrapperClass:"mb-4"},null,8,["modelValue"])]),(0,i._)("div",s,[(0,i._)("div",r,[(0,i.wy)((0,i._)("select",{id:"listOfProfessions","onUpdate:modelValue":t[1]||(t[1]=e=>d.prof=e)},[p,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(d.prodata,(e=>((0,i.wg)(),(0,i.iD)(i.HY,null,[e.group?((0,i.wg)(),(0,i.iD)("optgroup",{label:e.group,key:e.group},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.options,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e.label,key:e.label},(0,a.zw)(e.label),9,m)))),128))],8,u)):((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.value},(0,a.zw)(e.label),9,g))],64)))),256))],512),[[o.bM,d.prof]])]),(0,i._)("div",{class:(0,a.C_)({hideDistSelectPanel:!d.isDistSelection})},[(0,i.wy)((0,i._)("select",{id:"distanceOfClient","onUpdate:modelValue":t[2]||(t[2]=e=>d.distBtw=e)},S,512),[[o.bM,d.distBtw]])],2),(0,i._)("h3",{class:(0,a.C_)({activeClients:!d.isActiveClients})},(0,a.zw)(d.countOfSelectedClients+" "+d.client)+" tarvitsee palveluasi ",3),d.prof?((0,i.wg)(),(0,i.iD)("h3",{key:0,class:(0,a.C_)({noClients:d.isActiveClients})}," Ei asiakkaita vielä! ",2)):(0,i.kq)("",!0)]),(0,i.Wm)(h,{color:"dark",size:"lg",block:"",onClick:k.provide,style:{position:"relative","z-index":"1",opacity:"1.2"}},{default:(0,i.w5)((()=>[(0,i.Uk)(" Tarjoa omaa palvelua ")])),_:1},8,["onClick"]),(0,i.Wm)(h,{color:"danger",size:"lg",block:"",onClick:t[3]||(t[3]=t=>e.$router.go(-1)),style:{position:"relative","z-index":"1",opacity:"1.0"}},{default:(0,i.w5)((()=>[(0,i.Uk)(" Poistu ")])),_:1})])),_:1}),z])}l(7658);var K=l(2340),U=l(5800),V=(l(9398),l(4313)),x=l(3998),H=(l(2283),{name:"provider-public",props:{userIsProvider:Object,isProviderLoggedIn:Boolean},components:{MDBContainer:V.L5,MDBInput:V.u2,MDBBtn:V.$v},data(){return{prof:"",userId:null,providerId:null,address:null,myLat:null,mylng:null,countOfSelectedClients:0,isActiveClients:!1,client:"",isDistSelection:!1,distBtw:1,currentProfessional:"",prodata:x.Z}},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.userId=t.id}this.resizeMap();new google.maps.Marker({icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"});this.userCurrentLocation();const t=document.getElementById("listOfProfessions");t.addEventListener("change",(e=>{this.isDistSelection=!0,this.currentProfessional=e.target.value,this.showClientLocationOnTheMap(e.target.value,this.distBtw)}));const l=document.getElementById("distanceOfClient");l.addEventListener("change",(e=>{this.distBtw=parseFloat(e.target.value),console.log("Current distance in beginning "+this.distBtw),this.showClientLocationOnTheMap(this.currentProfessional,this.distBtw)}));const i=document.getElementById("autocomplite"),a={lat:50.064192,lng:-130.605469},o={north:a.lat+.1,south:a.lat-.1,east:a.lng+.1,west:a.lng-.1},n={bounds:o,componentRestrictions:{country:"fi"},fields:["address_components","geometry","icon","name","formatted_address"],strictBounds:!1},s=new google.maps.places.Autocomplete(i,n);s.addListener("place_changed",(()=>{let e=s.getPlace();this.myLat=e.geometry.location.lat(),this.myLng=e.geometry.location.lng(),this.getAddressFrom(e.geometry.location.lat(),e.geometry.location.lng()),this.address=e.formatted_address,console.log(e)}))},methods:{resizeMap(){var e=document.getElementById("map");e.style.height="100%",e.style.width="100%"},provide(){this.$router.push("/provider-form")},userCurrentLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:l}=e.coords;this.myLat=t,this.myLng=l,this.showUserLocationOnTheMap(t,l)}))},pinSymbol(e){return{path:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z",fillColor:e,fillOpacity:1,strokeColor:"#000",strokeWeight:2,scale:1}},showUserLocationOnTheMap(e,t){new google.maps.Map(document.getElementById("map"),{zoom:13,center:new google.maps.LatLng(e,t),mapTypeId:google.maps.MapTypeId.ROADMAP,accuracy:50})},getAddressFrom(e,t){K.Z.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&key=AIzaSyBDA2EBoGezJx51wQtxoW3Ecq5Ql8CCAiE").then((l=>{if(l.data.error_message)this.error=l.data.error_message,console.log(l.data.error_message);else{new google.maps.Map(document.getElementById("map"),{zoom:13,center:new google.maps.LatLng(e,t),mapTypeId:google.maps.MapTypeId.ROADMAP});console.log(l.data.results.results[0].formatted_address)}})).catch((e=>{this.error=e.message,console.log(e.message)}))},distanceBtw(e,t,l,i){var a=new google.maps.LatLng(e,t),o=new google.maps.LatLng(l,i);return(google.maps.geometry.spherical.computeDistanceBetween(a,o)/1e3).toFixed(2)},otherUserLocations(e,t,l){let i=new google.maps.Map(document.getElementById("map"),{zoom:9,center:new google.maps.LatLng(this.myLat,this.myLng),mapTypeId:google.maps.MapTypeId.ROADMAP});console.log("Users count: "+e.length),console.log("Current distance "+l);let a=0;if(e.length>0){for(let o=0;o<e.length;o++)e[o].professional.forEach((n=>{n===t&&(console.log("Distance btw "+this.distanceBtw(this.myLat,this.myLng,e[o].latitude,e[o].longitude)),this.isActiveClients=!0,this.distanceBtw(this.myLat,this.myLng,e[o].latitude,e[o].longitude)<=l&&(a++,new google.maps.Marker({position:new google.maps.LatLng(e[o].latitude,e[o].longitude),map:i})))}));this.isActiveClients=a>0,this.countOfSelectedClients=a,this.identifyClientText()}},renderClients(e){console.log("Event value "+e.target.value),e.target.value&&this.showClientLocationOnTheMap(e.target.value),this.prof=e.target.value,e.target.value=""},async showClientLocationOnTheMap(e,t){const l=await U.Z.getRecipients();null!==l&&this.otherUserLocations(l,e,t)},identifyClientText(){console.log("Klientide arv: "+this.countOfSelectedClients),this.countOfSelectedClients>1?this.client="asiakasta":this.client="asiakas"}}}),W=l(89);const R=(0,W.Z)(H,[["render",P]]);var Z=R}}]);
//# sourceMappingURL=378.f174ef5d.js.map