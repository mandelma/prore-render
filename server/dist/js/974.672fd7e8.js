(self["webpackChunkprore_render"]=self["webpackChunkprore_render"]||[]).push([[974],{2451:function(e){e.exports={}},2974:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return k}});var s=t(6768),n=t(4232),r=t(5130);const a={class:"ui two column centered grid",style:{position:"relative","z-index":"1"}},l={class:"column"},i={class:"ui segment large form"},c={class:"ui segment"},d={class:"field"};function g(e,o,t,g,u,p){return(0,s.uX)(),(0,s.CE)("div",null,[o[3]||(o[3]=(0,s.Lk)("h1",null,"User location page",-1)),(0,s.Lk)("section",a,[(0,s.Lk)("div",l,[(0,s.Lk)("form",i,[(0,s.bo)((0,s.Lk)("div",{class:"ui message red"},(0,n.v_)(u.error),513),[[r.aG,u.error]]),(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[(0,s.Lk)("div",{class:(0,n.C4)(["ui right icon input large",{loading:u.spinner}])},[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"Enter your address:","onUpdate:modelValue":o[0]||(o[0]=e=>u.address=e),id:"autocomplete"},null,512),[[r.Jo,u.address]]),(0,s.Lk)("i",{class:"dot circle link icon",onClick:o[1]||(o[1]=(...e)=>p.locatorButtonPressed&&p.locatorButtonPressed(...e))})],2)]),(0,s.Lk)("button",{class:"ui button",onClick:o[2]||(o[2]=(...e)=>p.testPlace&&p.testPlace(...e))},"Go")])])])]),o[4]||(o[4]=(0,s.Lk)("section",{id:"map"},null,-1))])}var u=t(4373);const p=t(2451);var m={name:"user-location",data(){return{address:"",error:"",spinner:!1,lat:"",lng:""}},mounted(){const e={lat:50.064192,lng:-130.605469},o={north:e.lat+.1,south:e.lat-.1,east:e.lng+.1,west:e.lng-.1},t=document.getElementById("autocomplete"),s={bounds:o,componentRestrictions:{country:"fi"},fields:["address_components","geometry","icon","name"],strictBounds:!1},n=new google.maps.places.Autocomplete(t,s);n.addListener("place_changed",(()=>{let e=n.getPlace();this.lat=e.geometry.location.lat(),this.lng=e.geometry.location.lng(),console.log(e),this.showUserLocationOnTheMap(e.geometry.location.lat(),e.geometry.location.lng())}))},methods:{test(){console.log("Key is: "+p.googleMap)},locatorButtonPressed(){this.spinner=!0,console.log("Google maps test"),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{this.getAddressFrom(e.coords.latitude,e.coords.longitude),console.log("pos latitude: "+e.coords.latitude),console.log("Pos longitude: "+e.coords.longitude),this.showUserLocationOnTheMap(e.coords.latitude,e.coords.longitude)}),(e=>{this.error="Locator is unable to find your address. Please type your address!",console.log("Error"+e),this.spinner=!1})):console.log("Your Browser does not support geolocation API")},getAddressFrom(e,o){u.A.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+o+"&key="+p.googleMap).then((e=>{e.data.error_message?(this.error=e.data.error_message,this.spinner=!1,console.log(e.data.error_message)):(this.address=e.data.results[0].formatted_address,console.log(e.data.results.results[0].formatted_address))})).catch((e=>{this.error=e.message,this.spinner=!1,console.log(e.message)}))},showUserLocationOnTheMap(e,o){let t=new google.maps.Map(document.getElementById("map"),{zoom:15,center:new google.maps.LatLng(e,o),mapTypeId:google.maps.MapTypeId.ROADMAP});new google.maps.Marker({position:new google.maps.LatLng(e,o),map:t})},testPlace(){console.log("Lat: "+this.lat),console.log("Lng: "+this.lng)}}},h=t(1241);const L=(0,h.A)(m,[["render",g]]);var k=L}}]);
//# sourceMappingURL=974.672fd7e8.js.map