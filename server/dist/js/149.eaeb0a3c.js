"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[149,255],{8797:function(e,i){const t=(e,i)=>{const t=new Date(e.y,e.m,e.d,e.hour,e.min),s=new Date(i.y,i.m,i.d,i.hour,i.min);return s>=t},s=(e,i,t)=>{const s=new Date(i.y,i.m,i.d,i.hour,i.min),a=new Date(t.y,t.m,t.d,t.hour,t.min);return e>=s&&e<a};i.Z={compare:t,providerMatchingForClient:s}},1840:function(e,i,t){var s=t(3396);let a="";const o=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),i=new google.maps.LatLng(60.2767265,24.8575089),t=new google.maps.DistanceMatrixService;t.getDistanceMatrix({origins:[e],destinations:[i],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,durationInTraffic:!0,avoidHighways:!1,avoidTolls:!1},l)},l=(e,i)=>{if(i===google.maps.DistanceMatrixStatus.OK&&"OK"===i)return console.log("Distance "+e.rows[0].elements[0].distance.text),a=e.rows[0].elements[0].distance.text,"aaaaaaaaaaaaa";console.log("Error:",i),alert(i)},n=()=>(console.log("Is it working??"+a),(0,s.Wm)("div",null,[(0,s.Uk)("Hiiii")])),d=()=>{var e=new google.maps.LatLng(60.233093,24.7531362),i=new google.maps.LatLng(60.2767265,24.8575089);return(google.maps.geometry.spherical.computeDistanceBetween(e,i)/1e3).toFixed(2)};i.Z={distance:o,test:n,theDist:d}},8579:function(e,i,t){const s=t(7218),a="/api/upload",o=async()=>{const e=await s.get(a);return e.data},l=async e=>{const i=await s.post(a,e,{});return i.data},n=async(e,i)=>{const t=await s.post(`${a}/${e}/avatar`,i);return t.data},d=async(e,i)=>{const t=await s.post(`${a}/${e}/update_avatar`,i);return t.data},r=async(e,i)=>{const t=await s.put(`${a}/${e}`,i);return t.data},c=async(e,i)=>{await s.delete(`${a}/${e}/${i}`)};i.Z={getAll:o,create:l,createProfileImage:n,newAvatar:d,updateImage:r,remove:c}},5255:function(e,i,t){t.r(i),t.d(i,{default:function(){return O}});var s=t(3396),a=t(7139);const o=(0,s._)("td",null," Palautteet ",-1),l={key:0},n=(0,s._)("td",null," Y-tunnus ",-1),d=(0,s._)("td",null," Tuntihinta ",-1),r={key:1},c=(0,s._)("br",null,null,-1),u=(0,s._)("br",null,null,-1);function g(e,i,t,g,m,h){const k=(0,s.up)("MDBIcon"),p=(0,s.up)("MDBBadge"),v=(0,s.up)("MDBCol"),f=(0,s.up)("PositiveFeedback"),w=(0,s.up)("NegativeFeedback"),y=(0,s.up)("MDBRow"),b=(0,s.up)("MDBTable"),D=(0,s.up)("MDBBtn"),_=(0,s.up)("live-chat");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,"- "+(0,a.zw)(t.provider.yritys)+" -",1),(0,s.Wm)(b,{style:{"font-size":"18px","text-align":"center"}},{default:(0,s.w5)((()=>[(0,s._)("tbody",null,[(0,s._)("tr",null,[o,(0,s._)("td",null,[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k,{style:{padding:"10px",cursor:"pointer"},i:"",class:"far fa-thumbs-up",size:"2x",onClick:h.getPositiveFeedback},null,8,["onClick"]),(0,s.Wm)(p,{color:"success",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(t.provider.rating.positive),1)])),_:1})])),_:1}),(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k,{style:{padding:"10px",cursor:"pointer"},i:"",class:"far fa-thumbs-down",size:"2x",onClick:h.getNegativeFeedback},null,8,["onClick"]),(0,s.Wm)(p,{color:"danger",class:"translate-middle p-1",pill:"",size:"lg",notification:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(t.provider.rating.negative),1)])),_:1})])),_:1}),m.isPositive?((0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(f,{feedback:t.provider.feedback,"onClose:comments":h.closeComments},null,8,["feedback","onClose:comments"])])):(0,s.kq)("",!0),m.isNegative?((0,s.wg)(),(0,s.j4)(w,{key:1,feedback:t.provider.feedback,"onClose:comments":h.closeComments},null,8,["feedback","onClose:comments"])):(0,s.kq)("",!0)])),_:1})])]),(0,s._)("tr",null,[n,(0,s._)("td",null,(0,a.zw)(t.provider.ytunnus),1)]),(0,s._)("tr",null,[d,(0,s._)("td",null,(0,a.zw)(t.provider.priceByHour)+" euroa ",1)])])])),_:1}),m.isChat?((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("h3",{style:{color:"green",float:"right",cursor:"pointer"},onClick:i[1]||(i[1]=e=>m.isChat=!1)},"Valmis")])):((0,s.wg)(),(0,s.j4)(D,{key:0,block:"",color:"secondary",size:"lg",onClick:i[0]||(i[0]=e=>m.isChat=!0)},{default:(0,s.w5)((()=>[(0,s.Uk)(" Kirjoita palveluntarjoajalle ")])),_:1})),c,u,m.isChat?((0,s.wg)(),(0,s.j4)(_,{key:2,test:h.test,chatusers:t.chatusers,messages:t.messages,selecteduser:t.selecteduser,"onSelect:user":h.selectUser,onNoSelected:h.noSelectUser,"onOn:message":h.onMessage},null,8,["test","chatusers","messages","selecteduser","onSelect:user","onNoSelected","onOn:message"])):(0,s.kq)("",!0),(0,s.Wm)(D,{outline:"info",block:"",size:"lg",onClick:i[2]||(i[2]=e=>h.handleOrder(t.provider))},{default:(0,s.w5)((()=>[(0,s.Uk)(" Tilaa yritys ")])),_:1}),(0,s.Wm)(D,{outline:"secondary",block:"",size:"lg",onClick:h.canselRecipientFinal},{default:(0,s.w5)((()=>[(0,s.Uk)(" Poistu ")])),_:1},8,["onClick"])])}var m=t(4313);const h={key:0,style:{"background-color":"lightgray",padding:"12px"}},k={key:1,style:{"background-color":"lightgray",padding:"12px"}},p=(0,s._)("br",null,null,-1),v=(0,s._)("br",null,null,-1),f=(0,s._)("h3",null,"Ei vielä arvostelua",-1);function w(e,i,t,o,l,n){const d=(0,s.up)("MDBListGroupItem"),r=(0,s.up)("MDBListGroup"),c=(0,s.up)("MDBBtn");return t.feedback.length>0?((0,s.wg)(),(0,s.iD)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.feedback,(e=>((0,s.wg)(),(0,s.j4)(r,{light:"",small:"",style:{"text-align":"left"},key:e.id},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.pos),1)])),_:2},1024)])),_:2},1024)))),128)),(0,s.Wm)(c,{block:"",outline:"secondary",size:"lg",onClick:n.closeFeedback},{default:(0,s.w5)((()=>[(0,s.Uk)("Poistu kommenteistä")])),_:1},8,["onClick"])])):((0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("h3",{style:{color:"green",float:"right",cursor:"pointer"},onClick:i[0]||(i[0]=(...e)=>n.closeFeedback&&n.closeFeedback(...e))},"Valmis"),p,v,f]))}var y={name:"positive-feedback",props:{feedback:Array},components:{MDBListGroup:m.d8,MDBListGroupItem:m.FQ,MDBBtn:m.$v},data(){return{}},methods:{closeFeedback(){this.$emit("close:comments",!1)}}},b=t(89);const D=(0,b.Z)(y,[["render",w]]);var _=D;const C={key:0,style:{"background-color":"lightgray",padding:"12px"}},I={key:0},M={key:1},P=(0,s._)("h3",null,"Ei vielä arvostelua",-1),B=[P],x={key:1,style:{"background-color":"lightgray",padding:"12px"}},U=(0,s._)("br",null,null,-1),F=(0,s._)("br",null,null,-1),E=(0,s._)("h3",null,"Ei vielä arvostelua",-1);function A(e,i,t,o,l,n){const d=(0,s.up)("MDBListGroupItem"),r=(0,s.up)("MDBListGroup"),c=(0,s.up)("MDBBtn");return t.feedback.length>0?((0,s.wg)(),(0,s.iD)("div",C,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.feedback,(e=>((0,s.wg)(),(0,s.j4)(r,{light:"",small:"",style:{"text-align":"left"},key:e.id},{default:(0,s.w5)((()=>[e.neg?((0,s.wg)(),(0,s.iD)("div",I,[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.neg),1)])),_:2},1024)])):((0,s.wg)(),(0,s.iD)("div",M,B))])),_:2},1024)))),128)),(0,s.Wm)(c,{block:"",outline:"secondary",size:"lg",onClick:n.closeFeedback},{default:(0,s.w5)((()=>[(0,s.Uk)("Poistu kommenteistä")])),_:1},8,["onClick"])])):((0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("h3",{style:{color:"green",float:"right",cursor:"pointer"},onClick:i[0]||(i[0]=(...e)=>n.closeFeedback&&n.closeFeedback(...e))},"Valmis"),U,F,E]))}var W={name:"negative-feedback",props:{feedback:Array},components:{MDBListGroup:m.d8,MDBListGroupItem:m.FQ,MDBBtn:m.$v},data(){return{}},methods:{closeFeedback(){this.$emit("close:comments",!1)}}};const S=(0,b.Z)(W,[["render",A]]);var z=S,Z=t(4336),$=t(4058),T=t(3467),j=t(1426),L={name:"recipient-final",props:{test:Boolean,chatusers:Array,selecteduser:null,messages:Array,provider:Object,room:String,roomUserCount:Number,available:String,booking:Array},components:{User:T.Z,MessagePanel:j.Z,PositiveFeedback:_,NegativeFeedback:z,liveChat:Z["default"],MDBBtn:m.$v,MDBTable:m.re,MDBRow:m.uZ,MDBCol:m.TK,MDBIcon:m.vm,MDBBadge:m.m_},data(){return{selectedUser:null,isPositive:!1,isNegative:!1,isChat:!1,isPressedOpenChat:!1,isPressedContactToUser:!1,isConnection:!1,isTwoUsers:!1,feedback:this.provider.feedback,isPressedFinal:!1,count:0,userCount:0}},mounted(){},methods:{chatCredentials(){},sendToApp(){console.log("Pressed"),this.$emit("finalinfo","Tere siit finaalist")},selectUser(e){this.$emit("select",e)},noSelectUser(){this.$emit("noSelect")},onMessage(e,i){this.$emit("message",e,i)},test(e){console.log("From chat: "+e)},openChat(){this.isChat=!0,this.count++,console.log("this room is "+this.room)},contactToUser(){this.isPressedContactToUser=!0,$.Z.emit("updateRoom",this.room),$.Z.on("get updated room users",(e=>{console.log("New users update "+e.users.length),e.users.length>1?this.isConnection=!0:this.isConnection=!1})),this.isPressedFinal=!0,this.isChat=!0},handleOrder(e){this.$emit("provider:ordered",e)},getPositiveFeedback(){this.isPositive=!0,this.isNegative=!1},getNegativeFeedback(){this.isNegative=!0,this.isPositive=!1},closeComments(e){this.isPositive=this.isNegative=e,console.log("result "+e)},canselRecipientFinal(){this.isChat=!1,this.$emit("cansel:final",!1),this.noSelectUser()}}};const R=(0,b.Z)(L,[["render",g]]);var O=R},3149:function(e,i,t){t.r(i),t.d(i,{default:function(){return ne}});var s=t(3396),a=t(7139),o=t(9242);const l=e=>((0,s.dD)("data-v-6761e0a5"),e=e(),(0,s.Cn)(),e),n=l((()=>(0,s._)("i",{class:"fas fa-undo"},null,-1))),d={key:0},r={key:1},c={key:0},u={key:1},g={key:0},m={key:1},h=["src","alt"],k={key:1,class:"edit-panel"},p=["onChange"],v={for:"file-upload",class:"custom-file-upload"},f={key:0},w={key:1},y=["src"],b={key:1,class:"add-panel"},D={for:"file-upload-x",class:"custom-file-upload"},_={key:0},C={key:1},I=["src"],M={key:0},P={class:"ui large form"},B={class:"field"},x=l((()=>(0,s._)("option",{disabled:"",value:""},"Suodatin...",-1))),U=l((()=>(0,s._)("option",{value:"distance"},"Etäisyyden mukaan",-1))),F=l((()=>(0,s._)("option",{value:"rating"},"positiivisen palauteen mukaan",-1))),E=[x,U,F],A=l((()=>(0,s._)("br",null,null,-1))),W={key:0},S=l((()=>(0,s._)("br",null,null,-1))),z={style:{"font-size":"14px"}},Z={style:{padding:"12px"}},$=["src"],T={key:1},j=l((()=>(0,s._)("br",null,null,-1))),L={style:{"font-size":"14px"}},R=l((()=>(0,s._)("h4",{style:{padding:"12px"}},"Sovittaessa",-1))),O=l((()=>(0,s._)("tr",null,null,-1))),N={key:1},V=l((()=>(0,s._)("h2",{style:{width:"100%"}},"Yrityksiä hetkellä ei löytyy",-1))),q=[V];function Y(e,i,l,x,U,F){const V=(0,s.up)("recipientFinal"),Y=(0,s.up)("MDBContainer"),K=(0,s.up)("MDBIcon"),G=(0,s.up)("successMessage"),H=(0,s.up)("MDBTextarea"),Q=(0,s.up)("MDBCol"),J=(0,s.up)("MDBBtnClose"),X=(0,s.up)("MDBRow"),ee=(0,s.up)("MDBBtn"),ie=(0,s.up)("VueDatePicker"),te=(0,s.up)("MDBTable"),se=(0,s.up)("MDBBadge");return U.isProviderSelected?((0,s.wg)(),(0,s.j4)(Y,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{"onCansel:final":F.handleCanselFinal,"onProvider:ordered":F.orderSuccess,test:l.test,provider:U.selectedProvider,room:U.room,available:U.availability,booking:l.booking,chatusers:l.chatusers,selecteduser:l.selecteduser,messages:l.messages,onMessage:F.onMessage,onSelect:F.selectUser,onNoSelect:F.noSelectUser,onFinalinfo:F.finalinfo},null,8,["onCansel:final","onProvider:ordered","test","provider","room","available","booking","chatusers","selecteduser","messages","onMessage","onSelect","onNoSelect","onFinalinfo"])])),_:1})):((0,s.wg)(),(0,s.j4)(Y,{key:1},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{style:{float:"right",cursor:"pointer"},onClick:F.canselResult,size:"3x"},{default:(0,s.w5)((()=>[n])),_:1},8,["onClick"]),(0,s._)("h2",null,"Tarvin tässä osaaja - "+(0,a.zw)(l.line),1),(0,s.Wm)(G,{message:U.orderMessage},null,8,["message"]),(0,s.Wm)(X,{style:{"margin-top":"50px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(te,{border:"primary",style:{"font-size":"18px","text-align":"left"}},{default:(0,s.w5)((()=>[(0,s._)("tbody",null,[(0,s._)("tr",null,[U.isEditDescription?((0,s.wg)(),(0,s.iD)("td",r,[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(H,{label:"Muokkaa tehtävän kuvausta...",rows:"4",modelValue:U.description,"onUpdate:modelValue":i[0]||(i[0]=e=>U.description=e),style:{"font-size":"14px",padding:"20px"}},null,8,["modelValue"])])),_:1}),(0,s.Wm)(Q,{col:"1"},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{onClick:i[1]||(i[1]=e=>U.isEditDescription=!1),style:{float:"right",cursor:"pointer"}})])),_:1})])),_:1})])):((0,s.wg)(),(0,s.iD)("td",d,(0,a.zw)(l.booking.description),1))]),(0,s._)("tr",null,[U.isEditDescription?((0,s.wg)(),(0,s.iD)("td",u,[(0,s.Wm)(ee,{outline:"info",block:"",size:"lg",onClick:F.saveEditedDescription},{default:(0,s.w5)((()=>[(0,s.Uk)("Tallenna tehtävän kuvaus")])),_:1},8,["onClick"])])):((0,s.wg)(),(0,s.iD)("td",c,[(0,s.Wm)(ee,{outline:"info",block:"",size:"lg",onClick:F.pressedEditDescription},{default:(0,s.w5)((()=>[(0,s.Uk)("Muokkaa tehtävän kuvausta")])),_:1},8,["onClick"])]))]),(0,s._)("tr",null,[U.isEditDate?((0,s.wg)(),(0,s.iD)("td",m,[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s._)("h3",null,(0,a.zw)(U.bookingDateToDisplay),1),(0,s.Wm)(ie,{style:{"margin-bottom":"20px"},modelValue:U.bookingDate,"onUpdate:modelValue":i[2]||(i[2]=e=>U.bookingDate=e),"min-date":new Date,placeholder:"Valitse sopivaa päivä milloin haluaisit ammattilaista!",onInternalModelChange:F.handleInternalDate,state:!e.isNoDate&&null},null,8,["modelValue","min-date","onInternalModelChange","state"])])),_:1}),(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(J,{onClick:i[3]||(i[3]=e=>U.isEditDate=!1),style:{float:"right",cursor:"pointer"}})])),_:1})])),_:1})])):((0,s.wg)(),(0,s.iD)("td",g,[(0,s._)("h3",null,(0,a.zw)(U.bookingDateToDisplay),1),(0,s.Wm)(ee,{block:"",size:"lg",outline:"info",onClick:F.editDate},{default:(0,s.w5)((()=>[(0,s.Uk)("Muokkaa päivämäärä")])),_:1},8,["onClick"])]))])])])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.images,((e,i)=>((0,s.wg)(),(0,s.iD)("div",{key:i},[(0,s._)("img",{class:"loading",style:{width:"100%"},src:e.blob?e.blob:t(7752)(`./${e.name}`),alt:e.name},null,8,h),U.isEditPanel?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(ee,{key:0,block:"",outline:"success",onClick:e=>F.pressEditPanel(i)},{default:(0,s.w5)((()=>[(0,s.Uk)("Muokkaa kuva")])),_:2},1032,["onClick"])),U.isEditPanel&&U.imageIndex===i?((0,s.wg)(),(0,s.iD)("div",k,[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[U.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(J,{key:0,class:"close-btn",style:{float:"right"},onClick:F.closeEditPanel},null,8,["onClick"])),(0,s._)("input",{id:"file-upload",type:"file",onChange:e=>F.handleFileChange(e,i)},null,40,p),(0,s._)("label",v,[U.value?((0,s.wg)(),(0,s.iD)("span",f," Muokka tehtävän kuvausta: "+(0,a.zw)(U.value.name),1)):((0,s.wg)(),(0,s.iD)("span",w,"Valitse uusi kuva tehtävästä"))]),U.isEditImage?((0,s.wg)(),(0,s.j4)(ee,{key:1,block:"",color:"success",onClick:e=>F.uploadEditedImage(i)},{default:(0,s.w5)((()=>[(0,s.Uk)("Upload edited image")])),_:2},1032,["onClick"])):(0,s.kq)("",!0),(0,s.Wm)(ee,{class:"btn",block:"",size:"lg",color:"danger",onClick:e=>F.removeImg(i)},{default:(0,s.w5)((()=>[(0,s.Uk)("Poista kuva")])),_:2},1032,["onClick"])])),_:2},1024),U.value?((0,s.wg)(),(0,s.j4)(Q,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{class:"close-btn",style:{float:"right"},onClick:F.closeEditPanel},null,8,["onClick"]),(0,s._)("img",{style:{width:"100px","padding-top":"20px"},src:this.showImage,alt:"addEdit"},null,8,y)])),_:1})):(0,s.kq)("",!0)])),_:2},1024)])):(0,s.kq)("",!0)])))),128)),U.isPressedAddlmage?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(ee,{key:0,block:"",color:"info",onClick:F.pressedAddImage},{default:(0,s.w5)((()=>[(0,s.Uk)("Lisää uusi kuva tehtävästä")])),_:1},8,["onClick"])),U.isPressedAddlmage&&U.isAddImagePanel?((0,s.wg)(),(0,s.iD)("div",b,[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[U.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(J,{key:0,class:"close-btn",onClick:F.closeAddPanel},null,8,["onClick"])),(0,s._)("input",{id:"file-upload-x",type:"file",onChange:i[4]||(i[4]=i=>F.handleFileChange(i,e.i))},null,32),(0,s._)("label",D,[U.value?((0,s.wg)(),(0,s.iD)("span",_," Muokka tehtävän kuvausta: "+(0,a.zw)(U.value.name)+" + ",1)):((0,s.wg)(),(0,s.iD)("span",C,"Valitse lisää kuva tehtävästä"))]),U.isAddImage?((0,s.wg)(),(0,s.j4)(ee,{key:1,block:"",outline:"primary",onClick:F.addAdditionalImage},{default:(0,s.w5)((()=>[(0,s.Uk)("Tallenna kuva")])),_:1},8,["onClick"])):(0,s.kq)("",!0)])),_:1}),U.value?((0,s.wg)(),(0,s.j4)(Q,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{class:"close-btn",onClick:F.closeAddPanel},null,8,["onClick"]),(0,s._)("img",{style:{width:"100px"},src:this.showImage,alt:"addShow"},null,8,I)])),_:1})):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0)])),_:1}),U.isOrdered?((0,s.wg)(),(0,s.j4)(Q,{key:0})):((0,s.wg)(),(0,s.j4)(Q,{key:1,lg:"6"},{default:(0,s.w5)((()=>[l.providers.length>0?((0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("div",P,[(0,s._)("div",B,[(0,s.wy)((0,s._)("select",{style:{padding:"20px","font-size":"18px"},id:"listOfProviders","onUpdate:modelValue":i[5]||(i[5]=e=>U.filterResult=e),onClick:i[6]||(i[6]=(...e)=>F.addFilter&&F.addFilter(...e))},E,512),[[o.bM,U.filterResult]])])]),A,(0,s.Wm)(te,{style:{"font-size":"18px","text-align":"center"}},{default:(0,s.w5)((()=>[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.providers,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[e.timeoffer.map((e=>U.datetime.providerMatchingForClient(l.bookingTime,{y:e.yearFrom,m:e.monthFrom,d:e.dayFrom,hour:e.hoursFrom,min:e.minutesFrom},{y:e.yearTo,m:e.monthTo,d:e.dayTo,hour:e.hoursTo,min:e.minutesTo}))).includes(!0)?((0,s.wg)(),(0,s.iD)("td",W,[(0,s.Wm)(ee,{class:"provider-selection",outline:"info",size:"lg",onClick:i=>F.getProviderInfo(e,"green")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.yritys),1),S,(0,s._)("span",z,"Etäisyys: "+(0,a.zw)(e.distance)+" km",1)])),_:2},1032,["onClick"]),(0,s.Wm)(se,{color:"success",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.w5)((()=>[(0,s._)("h4",Z,[(0,s.Uk)(" Saatavilla   "),(0,s._)("img",{style:{width:"50px"},src:t(6080),alt:"ok"},null,8,$)])])),_:1})])):((0,s.wg)(),(0,s.iD)("td",T,[(0,s.Wm)(ee,{class:"provider-selection",size:"lg",onClick:i=>F.getProviderInfo(e,"orange")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.yritys)+" ",1),j,(0,s._)("span",L,"Etäisyys: "+(0,a.zw)(e.distance)+" km",1)])),_:2},1032,["onClick"]),(0,s.Wm)(se,{color:"info",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.w5)((()=>[R])),_:1})]))])))),128)),O])])),_:1})])):((0,s.wg)(),(0,s.iD)("div",N,q))])),_:1})),(0,s.Wm)(ee,{block:"",outline:"danger",size:"lg",onClick:F.removeBooking},{default:(0,s.w5)((()=>[(0,s.Uk)("Poista tilaus")])),_:1},8,["onClick"])])),_:1})])),_:1}))}t(2062),t(7658);var K=t(4313),G=t(8797),H=t(5255),Q=t(8033),J=t(1840),X=t(9398),ee=t(8579),ie=t(4912),te=t(5800),se=t(4058),ae={name:"recipient-panel-result",props:{test:Boolean,chatusers:Array,selecteduser:null,messages:Array,loggedInUser:Object,booking:null,images:Array,bookingTime:null,providers:Array,confirmedBookings:Array,line:String},data(){return{count:0,datetime:G.Z,distance:J.Z,selectedProvider:null,isProviderSelected:!1,availability:"",orderMessage:null,isOrdered:!1,isEditDescription:!1,description:this.booking.description,isEditDate:!1,bookingDate:null,bookingDateToDisplay:this.booking.date,isAddFirstImage:!1,isPressedAddlmage:!1,isAddImage:!1,isAddImagePanel:!1,isEditImage:!1,isUploadImage:!1,isUploaded:!1,isImageCreated:!1,isAddNewImage:!1,isEditPanel:!1,value:null,imageIndex:0,file:null,isImageSelected:!1,isAdditionalImageSelected:!1,showImage:null,tempImages:[],imagesx:[],imagesxxx:[],room:"",roomUserCount:0,filterResult:""}},components:{successMessage:Q.Z,VueDatePicker:ie.Z,dist:J.Z,recipientFinal:H["default"],MDBBtn:K.$v,MDBBtnClose:K.Ok,MDBContainer:K.L5,MDBTable:K.re,MDBRow:K.uZ,MDBCol:K.TK,MDBTextarea:K.uj,MDBIcon:K.vm,MDBBadge:K.m_},methods:{editDate(){this.isEditDate=!0},async handleInternalDate(){if(this.bookingDate){this.bookingDateToDisplay=this.bookingDate.getMonth()+1+"/"+this.bookingDate.getDate()+"/"+this.bookingDate.getFullYear(),console.log("eeeeee "+(this.bookingDate.getMonth()+1)+"/"+this.bookingDate.getDate()+"/"+this.bookingDate.getFullYear()),await te.Z.newDate(this.booking[0].id,{year:this.bookingDate.getFullYear(),month:this.bookingDate.getMonth(),day:this.bookingDate.getDate(),hours:this.bookingDate.getHours(),minutes:this.bookingDate.getMinutes()});const e={year:this.bookingDate.getFullYear(),month:this.bookingDate.getMonth(),day:this.bookingDate.getDate(),hours:this.bookingDate.getHours(),minutes:this.bookingDate.getMinutes()};this.$emit("updateBookingDate",e)}console.log("Date is handled")},handleFileChange(e,i){console.log("i in file change "+i),this.imageIndex=i;try{const i=e.target.files[0];if(console.log("event target client ",e.target.files[0]),i){const t=URL.createObjectURL(i);this.tempImages.push(t),this.showImage=URL.createObjectURL(i),this.file=e.target.files[0],this.isAddImage=!0,this.isEditImage=!0}}catch(t){console.log("Error:",t)}this.value=e.target.files[0]},pressedAddImage(){this.isAddImage=!1,this.isEditImage=!1,this.isEditPanel=!1,this.isPressedAddlmage=!0,this.isAddImagePanel=!0},async addImage(){},pressEditPanel(e){this.isEditImage=!1,this.value=null,this.imageIndex=e,this.isEditPanel=!0,this.isAddImagePanel=!1},closeEditPanel(){this.isAddImagePanel=!1,this.isEditPanel=!1,this.isEditImage=!1,this.value=null},closeAddPanel(){this.isAddImagePanel=!1,this.isPressedAddlmage=!1,this.value=null},async uploadEditedImage(e,i){console.log("Edited image index is: "+e),this.isEditPanel=!1,this.isEditImage=!1;const t=new FormData;t.append("file",this.file,this.file.name),console.log("Image id "+this.images[e]._id);const s=await ee.Z.updateImage(this.images[e]._id,t);s&&(this.images[this.imageIndex]={_id:this.images[e]._id,blob:this.showImage},this.images.forEach((e=>{console.log("Image name "+e._id)})),console.log("New image id is "+s._id),this.imgId=s._id,this.file=null,this.isEditPanel=!1)},async addAdditionalImage(){this.value=null,this.isAddImagePanel=!1,this.isAddImage=!1,this.isPressedAddlmage=!1;const e=new FormData;e.append("file",this.file,this.file.name);const i=await ee.Z.create(e);await te.Z.addImage(this.booking[0].id,i.imgCreated._id);const t={_id:i.imgCreated._id,blob:this.showImage};this.$emit("addImage",t)},async removeImg(e){this.images[e].blob||console.log("removed image is blob"),console.log("removable image id is "+this.images[e]._id),await te.Z.removeImage(this.booking[0].id,this.images[e]._id),await ee.Z.remove(this.images[e]._id,this.booking[0].id),this.$emit("removeImage",e),this.isEditPanel=!1},getDistance(){console.log("sss "+J.Z.test())},selectUser(e){this.$emit("select",e)},noSelectUser(){this.$emit("noSelect")},onMessage(e,i){this.$emit("message",e,i)},finalinfo(e){console.log("Final info in result pressed "),this.$emit("finalinfo",e)},getChatCredentials(){},async pressAddFirstImage(){this.isAddFirstImage=!0,this.imageIndex=0},pressAdditionalImage(e){this.isAddImage=!0,this.imageIndex=this.images.length,console.log("Images index = "+this.imageIndex),this.isAddImage=!0},async uploadFirstImage(e){const i=new FormData;this.isUploadImage=!0,this.imageIndex=0,i.append("file",this.file,this.file.name);const t=await ee.Z.create(i);if(await te.Z.addImage(this.booking[0].id,t.imgCreated._id),t){this.file=null;const e={_id:t.imgCreated._id,image:t.imgCreated.image,name:t.imgCreated.name};this.$emit("addImage",e),this.imageIndex=0,this.isImageSelected=!1,this.isUploaded=!0}},async uploadAdditionalImage(){this.isAdditionalImageSelected=!1,this.isAddImage=!1,this.value=null,console.log("Image index index "+this.imageIndex);const e=new FormData;this.isUploadImage=!0,this.isUploaded=!0,e.append("file",this.file,this.file.name);const i=await ee.Z.create(e);if(await te.Z.addImage(this.booking[0].id,i.imgCreated._id),i){this.file=null;const e={_id:i.imgCreated._id,image:i.imgCreated.image,name:i.imgCreated.name};this.$emit("addImage",e),this.isImageSelected=!1,this.isUploaded=!0}},pressedEditDescription(){this.isEditDescription=!0,console.log("Descripton: "+this.description)},saveEditedDescription(){this.isEditDescription=!1;const e={description:this.description};this.$emit("editDescription",this.description),te.Z.editDescription(this.booking[0].id,e)},cancelEditDescription(){console.log("Is here something happening??")},providerGetBooking(e,i){console.log("Sended to user id... "+e),se.Z.emit("accept provider",{id:e,booking:i})},async orderSuccess(e){this.isProviderSelected=!1,console.log("Provider id "+e.id),console.log("Recpient id: "+this.booking.id);this.selectedProvider.id;await te.Z.addProviderData(this.booking.id,this.selectedProvider.id);const i=await te.Z.updateRecipient(this.booking.id,{status:"notSeen"});console.log("Is status updated: "+i.status);const t=this.booking.id,s=await X.Z.addProviderBooking(e.id,t);if("Recipient is added!"===s){const i={status:"",userID:e.user.id,name:e.yritys,room:this.room};this.$emit("remove:confirmed:provider",e.id,this.booking,i),this.$emit("set:order:to:send",this.booking),this.roomToDb(e.id,{userID:this.booking.user.id,client:this.booking.user.username,room:this.room});const t=e.user.id;se.Z.emit("accept provider",{id:t,booking:this.booking}),this.orderMessage="Tilaus on lähetetty vahvistettavaksi! Kiitos!",console.log("Booking made - id: "+s.id),this.isOrdered=!0,setTimeout((()=>{this.orderMessage=null}),3e3)}else this.orderMessage="Olet lähetänyt tilauksen!",setTimeout((()=>{this.orderMessage=null}),3e3)},getProviderInfo(e,i){this.selectedProvider=e,this.availability=i,this.isProviderSelected=!0,this.room=e.yritys+this.booking.user.username,se.Z.emit("room users count"),se.Z.on("get room users count",(e=>{console.log("Can we get users data from backend in recipient final??? "+e.users.length),this.roomUserCount=e.users.length}));const t=this.booking.user.username,s=e.yritys+this.booking.user.username,a={room:s,userID:this.chatUser.id,username:t},o={userID:e.user.id,username:e.user.username,room:s};this.$emit("provider",o);e.user.id,e.user.username;this.$emit("chatCredentials",a),se.Z.emit("create room users",{room:s,username:t,providerUsername:e.user.username,providerID:e.user.id})},async roomToDb(e,i){await X.Z.addRoom(e,i)},addFilter(){const e=document.getElementById("listOfProviders");e.addEventListener("change",(e=>{console.log("Filtered provider: "+e.target.value),this.$emit("filter_provider",e.target.value)}))},handleCanselFinal(e){this.isProviderSelected=e},canselResult(){this.$emit("cansel:result",!1)},async removeBooking(){console.log("In start booking id "+this.booking.id),!0===confirm("Oletko varmaa, että haluat poistaa tilauksen!?")?(console.log("You pressed OK!"),this.$emit("remove:booking",this.booking.id)):console.log("You canceled!")}},async mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const i=JSON.parse(e);this.chatUser=i}}},oe=t(89);const le=(0,oe.Z)(ae,[["render",Y],["__scopeId","data-v-6761e0a5"]]);var ne=le},6080:function(e,i,t){e.exports=t.p+"img/ok.c97d8292.png"}}]);
//# sourceMappingURL=149.eaeb0a3c.js.map