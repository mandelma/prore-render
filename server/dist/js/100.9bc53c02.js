"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[100],{5118:function(e,t,i){var a=i(3396);const s=({message:e})=>null===e?null:(0,a.Wm)("div",{className:"error"},[e,(0,a.Wm)("img",{className:"errorImg",alt:"error",src:i(5551)},null)]);t.Z=s},4100:function(e,t,i){i.r(t),i.d(t,{default:function(){return B}});var a=i(3396),s=i(7139);const n=e=>((0,a.dD)("data-v-f248a302"),e=e(),(0,a.Cn)(),e),o={style:{display:"flex","justify-content":"right",padding:"13px"}},l={style:{"font-size":"16px"}},r=n((()=>(0,a._)("h3",null,"Voit antaa palautetta painamalla valitsemasi kuvaketta!",-1))),u={style:{"min-width":"33px"}},g={style:{"min-width":"33px"}},d=["src"],c={key:0},m={key:0},p={key:1},h={style:{color:"deepskyblue"}};function v(e,t,n,v,k,w){const f=(0,a.up)("MDBBtnClose"),R=(0,a.up)("MDBCol"),y=(0,a.up)("MDBRow"),b=(0,a.up)("warning-message"),M=(0,a.up)("error-message"),W=(0,a.up)("MDBIcon"),_=(0,a.up)("MDBBadge"),D=(0,a.up)("MDBTextarea"),C=(0,a.up)("MDBBtn"),B=(0,a.up)("MDBContainer");return(0,a.wg)(),(0,a.j4)(B,{style:{"padding-top":"70px"}},{default:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a.Wm)(f,{white:"",onClick:w.backFromFeedbackClient},null,8,["onClick"])]),(0,a.Wm)(y,{style:{"padding-bottom":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(R),(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[(0,a._)("p",l,[(0,a._)("b",null,(0,s.zw)(n.customer.company),1),(0,a.Uk)(" odottaa palautetta tarjoamastaan palvelusta "),(0,a._)("b",null,' "'+(0,s.zw)(n.customer.header)+'" - '+(0,s.zw)(n.customer.date),1)])])),_:1})])),_:1}),(0,a.Wm)(b,{message:k.rateWarning},null,8,["message"]),(0,a.Wm)(M,{message:k.ratingError},null,8,["message"]),r,(0,a.Wm)(y,{style:{position:"relative"}},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{style:{padding:"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"rating"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W,{style:{padding:"10px",cursor:"pointer"},i:"",class:"fas fa-smile",size:"3x",onClick:w.ratePlus},null,8,["onClick"]),(0,a.Wm)(_,{color:"success",class:"translate-middle p-1",pill:"",notification:""},{default:(0,a.w5)((()=>[(0,a._)("h2",u,(0,s.zw)(k.positiveRating),1)])),_:1})])),_:1}),(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W,{style:{padding:"10px",cursor:"pointer"},class:"far fa-frown",size:"3x",onClick:w.rateMinus},null,8,["onClick"]),(0,a.Wm)(_,{color:"danger",class:"translate-middle p-1",pill:"",notification:""},{default:(0,a.w5)((()=>[(0,a._)("h3",g,(0,s.zw)(k.negativeRating),1)])),_:1})])),_:1}),(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[(0,a._)("img",{style:{width:"300px"},src:i(3266),alt:"rating-time"},null,8,d)])),_:1})])),_:1}),k.isRatingGiven?((0,a.wg)(),(0,a.iD)("div",c,[k.isReview?((0,a.wg)(),(0,a.iD)("h2",p,"Arvostelee!")):((0,a.wg)(),(0,a.iD)("h2",m,"Kiitos palautteesta!")),k.isReview?((0,a.wg)(),(0,a.j4)(D,{key:2,white:"",style:{"margin-bottom":"20px"},label:"Message",rows:"4",modelValue:k.feedback,"onUpdate:modelValue":t[0]||(t[0]=e=>k.feedback=e)},null,8,["modelValue"])):(0,a.kq)("",!0),(0,a.Wm)(C,{outline:"info",size:"lg",onClick:t[1]||(t[1]=e=>k.isReview=!k.isReview)},{default:(0,a.w5)((()=>[(0,a._)("p",h,(0,s.zw)(k.isReview?"Poistu arvostelusta":"Kirjoittaa halutessasi arvostelu"),1)])),_:1})])):(0,a.kq)("",!0)])),_:1})])),_:1}),k.isRatingGiven?((0,a.wg)(),(0,a.j4)(C,{key:0,outline:"info",size:"lg",block:"",onClick:t[2]||(t[2]=e=>w.reload())},{default:(0,a.w5)((()=>[(0,a.Uk)("Muokkaa antamasi palautesi!")])),_:1})):(0,a.kq)("",!0),k.isRatingGiven?((0,a.wg)(),(0,a.j4)(C,{key:1,style:{"margin-bottom":"20px"},block:"",color:"success",size:"lg",onClick:w.confirmFeedback},{default:(0,a.w5)((()=>[(0,a.Uk)("Lähettää palaute")])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1})}i(7658);var k=i(4313),w=i(5253);const f=({message:e})=>null===e?null:(0,a.Wm)("div",{className:"warning"},[e]);var R=f,y=i(5118),b=(i(5800),i(9398)),M=i(65),W=i(4045),_={name:"Feedback",props:{customer:Object},components:{monthConverter:w.Z,warningMessage:R,errorMessage:y.Z,MDBContainer:k.L5,MDBBtn:k.$v,MDBRow:k.uZ,MDBCol:k.TK,MDBIcon:k.vm,MDBBadge:k.m_,MDBTextarea:k.uj,MDBTable:k.re,MDBBtnClose:k.Ok},data(){return{author:null,fbc:{},isRatingGiven:!1,isReview:!1,ratedTimes:0,isRatedPos:!1,isRatedMinus:!1,positiveRating:0,negativeRating:0,feedback:"",rateWarning:null,ratingError:null}},methods:{reload(){location.reload()},async getClient(e){const t=await M.Z.getClientHistory(),i=t.find((e=>"no rated"===e.status));this.positiveRating=i.rating.positive,this.negativeRating=i.rating.negative,this.fbc=i},ratePlus(){this.isRated=!0,console.log("Pos rating before "+this.positiveRating),this.isRatedMinus?(console.log("Not, only one time is allowed!"),this.rateWarning="Arvostella saa vain kerran!",setTimeout((()=>{this.rateWarning=null}),3e3)):(this.ratedTimes+=1,1===this.ratedTimes?(this.positiveRating=this.positiveRating+1,console.log("Pos rating after "+this.positiveRating),this.isRatingGiven=!0):(console.log("Not, only one time is allowed!"),this.rateWarning="Arvostella saa vain kerran!",setTimeout((()=>{this.rateWarning=null}),3e3)),this.isRatedPlus=!0,this.isRatedMinus=!1)},rateMinus(){this.isRated=!0,this.isRatedPlus?(this.rateWarning="Arvostella saa vain kerran, negatiivisen tai positiivisen!",setTimeout((()=>{this.rateWarning=null}),3e3)):(this.ratedTimes+=1,1===this.ratedTimes?(this.negativeRating=this.negativeRating+1,this.isRatingGiven=!0):(this.rateWarning="Arvostella saa vain kerran, negatiivisen tai positiivisen!",setTimeout((()=>{this.rateWarning=null}),3e3)),this.isRatedPlus=!1,this.isRatedMinus=!0)},async confirmFeedback(){const e=this.customer.proID,t=new Date,i=(0,W.ZP)(t,"dd-mm-yyyy,  HH:MM"),a={pos:i+": ( "+this.author.username+" ) "+this.feedback},s={neg:i+": ( "+this.author.username+" ) "+this.feedback};this.feedback.length>0&&(this.isRatedPlus&&(await b.Z.addPositiveFeedback(e,a),this.feedback=""),this.isRatedMinus&&(await b.Z.addNegativeFeedback(e,s),this.feedback="")),this.isRatedPlus&&(await b.Z.setPositiveRating(e),this.$emit("isRated",this.customer.proID,"positiivista",this.customer.company),this.$router.go(-1)),this.isRatedMinus&&(await b.Z.setNegativeRating(e),this.$emit("isRated",this.customer.proID,"negatiivista",this.customer.company))},backFromFeedbackClient(){this.$router.go(-1)}},mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.author=t,this.positiveRating=this.customer.rating.positive,this.negativeRating=this.customer.rating.negative}else this.$router.push("/")}},D=i(89);const C=(0,D.Z)(_,[["render",v],["__scopeId","data-v-f248a302"]]);var B=C},5551:function(e,t,i){e.exports=i.p+"img/error.9510853e.png"},3266:function(e,t,i){e.exports=i.p+"img/is_feedback.77929104.png"}}]);
//# sourceMappingURL=100.9bc53c02.js.map