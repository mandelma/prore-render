"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[406],{5118:function(e,s,n){var t=n(3396);const a=({message:e})=>null===e?null:(0,t.Wm)("div",{className:"error"},[e]);s.Z=a},5081:function(e,s,n){const t=n(7218),a="/api/reset_pw",o=async e=>{const s=await t.post(`${a}/forgot_auth`,e);return s.data},r=async e=>{const s=await t.get(`${a}/reset_auth/${e}`);return s.data},l=async e=>{const s=await t.post(`${a}/reset_auth`,e);return s.data};s.Z={forgot:o,reset:r,resetAuth:l}},9406:function(e,s,n){n.r(s),n.d(s,{default:function(){return p}});var t=n(3396),a=n(9242);function o(e,s,n,o,r,l){const u=(0,t.up)("MDBBtn"),i=(0,t.up)("MDBInput"),c=(0,t.up)("success-message"),m=(0,t.up)("error-message"),w=(0,t.up)("MDBContainer");return(0,t.wg)(),(0,t.j4)(w,null,{default:(0,t.w5)((()=>[r.isToken?((0,t.wg)(),(0,t.iD)("form",{key:1,style:{"margin-top":"100px"},onSubmit:s[2]||(s[2]=(0,a.iM)(((...e)=>l.handleSubmitReset&&l.handleSubmitReset(...e)),["prevent"]))},[(0,t.Wm)(i,{type:"password",size:"lg",label:"Uusi salasana",white:"",modelValue:r.newPw,"onUpdate:modelValue":s[0]||(s[0]=e=>r.newPw=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.Wm)(i,{type:"password",size:"lg",label:"Toista salasana",white:"",modelValue:r.confirmNewPw,"onUpdate:modelValue":s[1]||(s[1]=e=>r.confirmNewPw=e),wrapperClass:"mb-4"},null,8,["modelValue"])],32)):((0,t.wg)(),(0,t.j4)(u,{key:0,block:"",outline:"warning",onClick:l.handleOpenForm},{default:(0,t.w5)((()=>[(0,t.Uk)("Aloita salasanan vaihtamista")])),_:1},8,["onClick"])),(0,t.Wm)(c,{message:r.successInfo},null,8,["message"]),(0,t.Wm)(m,{message:r.errorInfo},null,8,["message"])])),_:1})}n(7658);var r=n(5081),l=n(8033),u=n(5118),i=n(4313),c={name:"Reset",components:{successMessage:l.Z,errorMessage:u.Z,MDBContainer:i.L5,MDBInput:i.u2,MDBBtn:i.$v},data(){return{newPw:"",confirmNewPw:"",isToken:!1,token:this.$route.params.token,successInfo:null,errorInfo:null}},methods:{async handleOpenForm(){const e=await r.Z.reset(this.token);"valid"===e?(console.log("Token "+e),this.isToken=!0):(console.log("Token "+e),this.errorInfo=e,setTimeout((()=>{this.errorInfo=null,this.$router.push("/forgot_auth")}),3e3))},async handleSubmitReset(){if(this.newPw!==this.confirmNewPw)this.errorInfo="Salasana on oltava sama!",setTimeout((()=>{this.errorInfo=null}),3e3);else{const e=await r.Z.resetAuth({token:this.token,password:this.newPw});console.log("Auth--- "+e),e&&(this.successInfo="Salasanan luonti onnistui!",setTimeout((()=>{this.successInfo=null,this.$router.push("/login")}),3e3))}}}},m=n(89);const w=(0,m.Z)(c,[["render",o],["__scopeId","data-v-59d5e1d8"]]);var p=w}}]);
//# sourceMappingURL=406.fefaa3d1.js.map