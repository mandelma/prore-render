"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[920],{1644:function(e,s,r){e.exports=r.p+"img/error.9510853e.png"},1920:function(e,s,r){r.r(s),r.d(s,{default:function(){return b}});var t=r(6768),a=r(5130),i=r(4232);const l={key:0,style:{color:"palevioletred"}};function o(e,s,r,o,n,g){const m=(0,t.g2)("registerError"),u=(0,t.g2)("register-error"),d=(0,t.g2)("MDBInput"),p=(0,t.g2)("MDBCheckbox"),w=(0,t.g2)("MDBBtn"),h=(0,t.g2)("MDBContainer");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(h,{style:{"margin-top":"50px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{message:n.registerErrorMessage},null,8,["message"]),(0,t.bF)(m,{message:n.usernameExisting},null,8,["message"]),(0,t.bF)(m,{message:n.registerEmailErrorMessage},null,8,["message"]),(0,t.bF)(u,{message:n.registerPwRepeatErrorMessage},null,8,["message"]),(0,t.Lk)("form",{class:"register",onSubmit:s[8]||(s[8]=(0,a.D$)(((...e)=>g.userData&&g.userData(...e)),["prevent"])),autocomplete:"off"},[(0,t.bF)(d,{type:"text",size:"lg",label:"Etunimi",white:"",id:"registerFirstName",modelValue:o.registerFirstName,"onUpdate:modelValue":s[0]||(s[0]=e=>o.registerFirstName=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.bF)(d,{type:"text",size:"lg",label:"Sukunimi",white:"",id:"registerLastName",modelValue:o.registerLastName,"onUpdate:modelValue":s[1]||(s[1]=e=>o.registerLastName=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.bF)(d,{type:"text",size:"lg",label:"käyttäjätunnus",white:"",id:"registerUsername",modelValue:o.registerUsername,"onUpdate:modelValue":s[2]||(s[2]=e=>o.registerUsername=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.bF)(d,{type:"text",size:"lg",label:"Email",white:"",id:"registerEmail",modelValue:o.registerEmail,"onUpdate:modelValue":s[3]||(s[3]=e=>o.registerEmail=e),wrapperClass:"mb-4"},null,8,["modelValue"]),s[10]||(s[10]=(0,t.Lk)("i",{class:"far fa-eye"},null,-1)),s[11]||(s[11]=(0,t.Lk)("i",{class:"far fa-eye-slash"},null,-1)),(0,t.bF)(d,{type:o.showPassword?"text":"password",size:"lg",label:"Salasana",white:"",id:"registerPassword",modelValue:o.registerPassword,"onUpdate:modelValue":s[4]||(s[4]=e=>o.registerPassword=e),onInput:o.validatePassword,wrapperClass:"mb-4"},null,8,["type","modelValue","onInput"]),(0,t.Lk)("button",{type:"button",onClick:s[5]||(s[5]=(...e)=>o.togglePassword&&o.togglePassword(...e))},"Toggle password"),o.pwValidateError?((0,t.uX)(),(0,t.CE)("p",l,(0,i.v_)(o.pwValidateError),1)):(0,t.Q3)("",!0),(0,t.bF)(d,{type:"password",size:"lg",label:"Toista salasana",white:"",id:"registerPasswordRepeat",modelValue:o.registerPasswordRepeat,"onUpdate:modelValue":s[6]||(s[6]=e=>o.registerPasswordRepeat=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,t.bF)(p,{label:"Muista minut",white:"",size:"lg",id:"registerSubscribeCheck",modelValue:o.registerSubscribeCheck,"onUpdate:modelValue":s[7]||(s[7]=e=>o.registerSubscribeCheck=e),wrapperClass:"d-flex justify-content-center mb-4"},null,8,["modelValue"]),(0,t.bF)(w,{outline:"primary",size:"lg",type:"submit",block:"",class:"mb-4",disabled:!!o.pwValidateError},{default:(0,t.k6)((()=>s[9]||(s[9]=[(0,t.eW)(" Luo tili ")]))),_:1},8,["disabled"])],32)])),_:1})])}var n=r(5846),g=r(144),m=r(683);r(6425);var u=r(3674),d=r(4482),p={name:"app-register",components:{registerError:d.A,MDBContainer:n.Dj,MDBInput:n.gk,MDBCheckbox:n.lR,MDBBtn:n.al,MDBIcon:n.$u},data(){return{registerErrorMessage:null,registerEmailErrorMessage:null,registerPwRepeatErrorMessage:null,usernameExisting:null}},setup(){const e=(0,g.KR)(""),s=(0,g.KR)(""),r=(0,g.KR)(""),a=(0,g.KR)(""),i=(0,g.KR)(""),l=(0,g.KR)(""),o=(0,g.KR)(!0),n=(0,g.KR)(!1),m=(0,g.KR)(""),u=()=>{console.log("Password is toggled"),n.value=!n.value},d=()=>{const e=/^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_\-+=\[\]{};':"\\|,.<>/?]).{8,}$/;e.test(i.value)?m.value="":m.value="Salasanan on oltava vähintään 8 merkkiä pitkä ja sen on sisällettävä iso kirjain, numero ja erikoismerkki."};return(0,t.wB)(i,(e=>{d(e)})),{registerLastName:s,registerFirstName:e,registerUsername:r,registerEmail:a,registerPassword:i,registerPasswordRepeat:l,registerSubscribeCheck:o,pwValidateError:m,showPassword:n,togglePassword:u,validatePassword:d}},computed:{isValidEmail(){return/^[^@]+@\w+(\.\w+)+\w$/.test(this.registerEmail)}},methods:{emailValidation(){},validateEmail(){/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.email)?this.msg["email"]="Please enter a valid email address":this.msg["email"]=""},async userData(){const e={firstName:this.registerFirstName,lastName:this.registerLastName,username:this.registerUsername,email:this.registerEmail,password:this.registerPassword};if(""!==this.registerFirstName&&""!==this.registerLastName&&""!==this.registerUsername&&""!==this.registerPassword&&""!==this.registerEmail)if(this.registerUsername.length<4)this.registerErrorMessage="Username must be longer than 4 characters!",setTimeout((()=>{this.registerErrorMessage=null}),2e3);else if(/^[^@]+@\w+(\.\w+)+\w$/.test(this.registerEmail))if(this.registerPassword!==this.registerPasswordRepeat)this.registerPwRepeatErrorMessage="Salasana on oltava sama!",setTimeout((()=>{this.registerPwRepeatErrorMessage=null}),2e3);else{console.log("Uus kasutaja");const s=await m.A.addUser(e);if("username existing"===s.error)this.usernameExisting="Käyttäjätunnus on jo olemassa! Vaihda käyttäjätunnus",setTimeout((()=>{this.usernameExisting=null}),2e3);else if("email existing"===s.error)this.registerEmailErrorMessage="Antamasi sähköpostiosoite on jo olemassa!",setTimeout((()=>{this.registerEmailErrorMessage=null}),2e3);else{const e=await u.A.login({username:this.registerUsername,password:this.registerPassword});"login error"!==e.error?this.$emit("register:data",e):console.log("Error with login! "+e.error)}}else this.registerEmailErrorMessage="Anna kelvollinen sähköpostiosoite!",setTimeout((()=>{this.registerEmailErrorMessage=null}),2e3);else this.registerErrorMessage="Kaikki kentät ovat täytettävä!!",setTimeout((()=>{this.registerErrorMessage=null}),2e3)}}},w=r(1241);const h=(0,w.A)(p,[["render",o]]);var b=h},4482:function(e,s,r){var t=r(6768);const a=({message:e})=>null===e?null:(0,t.bF)("div",{className:"error"},[e,(0,t.bF)("img",{className:"errorImg",alt:"error",src:r(1644)},null)]);s.A=a}}]);
//# sourceMappingURL=920.99269db7.js.map