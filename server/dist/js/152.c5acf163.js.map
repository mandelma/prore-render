{"version":3,"file":"js/152.c5acf163.js","mappings":"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","sources":["webpack://prore-mongo/./src/components/notifications/errorMessage.js","webpack://prore-mongo/./src/pages/ProGallery.vue","webpack://prore-mongo/./src/pages/ProGallery.vue?115c"],"sourcesContent":["const ErrorMessage = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n\n    return (\n\n        <div className=\"error\">\n            {message}\n            <img className={'errorImg'} alt={'error'} src={require('@/assets/error.png')}/>\n\n        </div>\n\n    )\n}\n\nexport default ErrorMessage","<template>\r\n  <MDBContainer>\r\n    <h2 style=\"margin-bottom: 27px;\">Kuvat omista palveluista!</h2>\r\n\r\n    <MDBRow>\r\n      <MDBCol lg=\"4\" v-for=\"(img, i) in proImages\" :key=\"i\">\r\n        img.name {{img.name}}<br>\r\n        img.image {{img.image}}\r\n\r\n        <img :src=\"img.image\" alt=\"test\"/>\r\n\r\n        <div class=\"panel\">\r\n          <img\r\n              class=\"proRefLoading\"\r\n              :src=\"img.blob ? img.blob : require(`/server/uploads/${img.name}`)\"\r\n              :alt=\"img.name\"\r\n          />\r\n          <button class=\"img_btn\" @click=\"pressEditPanel(i)\">Muokkaa</button>\r\n        </div>\r\n\r\n\r\n<!--        <MDBBtn v-if=\"!isEdit\" block outline=\"success\" @click=\"pressEditPanel(i)\">Muokkaa</MDBBtn>-->\r\n        <div class=\"edit-panel\" v-if=\"isEditPanel && imgIndex === i\">\r\n          <error-message :message = wrongSizeTypeMessage />\r\n          <MDBRow>\r\n            <MDBCol>\r\n              <MDBBtnClose\r\n                  v-if=\"!value\"\r\n                  white\r\n                  class=\"close-btn\"\r\n                  style=\"float: right;\"\r\n                  @click=\"closeEditPanel\"\r\n              />\r\n              <input  id=\"pro-upload\" type=\"file\" @change=\"handleFileChange($event, i)\"/>\r\n              <label  for=\"pro-upload\" class=\"pro-file-upload\">\r\n                  <span v-if=\"value\">\r\n                  Muokka tehtävän kuvausta: {{value.name}}\r\n\r\n                   </span>\r\n                <span v-else>Valitse uusi kuva tehtävästä</span>\r\n              </label>\r\n              <MDBBtn v-if=\"isEdit\" block color=\"success\" @click=\"editRefImage(i)\">Upload edited image</MDBBtn>\r\n              <MDBBtn class=\"btn\" block size=\"lg\" color=\"danger\" @click=\"removeRefImage(i, img._id)\">Poista kuva</MDBBtn>\r\n            </MDBCol>\r\n            <MDBCol v-if=\"value\">\r\n              <MDBBtnClose\r\n                  white\r\n                  class=\"close-btn\"\r\n                  style=\"float: right;\"\r\n                  @click=\"closeEditPanel\"\r\n              />\r\n              <img\r\n                  style=\"width:100px; padding-top: 20px;\"\r\n                  :src=\"this.showImage\"\r\n                  alt=\"addEdit\"\r\n              />\r\n            </MDBCol>\r\n          </MDBRow>\r\n\r\n        </div>\r\n\r\n      </MDBCol>\r\n    </MDBRow>\r\n\r\n\r\n    <MDBBtn v-if=\"!isPressedAdd\" block color=\"warning\" @click=\"pressAddImage\" style=\"margin-top: 13px;\">Lisää uusi kuva tehtävästä</MDBBtn>\r\n    <div class=\"add-panel\" v-if=\"isPressedAdd && isAddPanel\">\r\n\r\n      <error-message :message = wrongSizeTypeMessage />\r\n      <MDBRow>\r\n\r\n        <MDBCol>\r\n          <MDBBtnClose\r\n              v-if=\"!value\"\r\n              white\r\n              class=\"close-btn\"\r\n              @click=\"closeAddPanel\"\r\n          />\r\n          <input   id=\"add-upload\" type=\"file\" @change=\"handleFileChange($event, i)\"/>\r\n          <label  for=\"add-upload\" class=\"pro-file-upload\">\r\n                  <span v-if=\"value\">\r\n                  Muokka tehtävän kuvausta: {{value.name}}\r\n                   </span>\r\n            <span v-else>Valitse lisää kuva tehtävästä</span>\r\n          </label>\r\n          <MDBBtn v-if=\"isAdd\" block outline=\"primary\" @click=\"addRefImage\">Tallenna kuva</MDBBtn>\r\n        </MDBCol>\r\n        <MDBCol v-if=\"value\">\r\n          <MDBBtnClose\r\n              class=\"close-btn\"\r\n              white\r\n              @click=\"closeAddPanel\"\r\n          />\r\n          <img\r\n              style=\"width:100px\"\r\n              :src=\"this.showImage\"\r\n              alt=\"addShow\"\r\n          />\r\n        </MDBCol>\r\n      </MDBRow>\r\n\r\n    </div>\r\n\r\n\r\n\r\n    PROIMAGES {{proImages}}\r\n\r\n\r\n<!--    <MDBBtn color=\"success\" @click=\"getUser\">Get provider booking</MDBBtn>-->\r\n\r\n\r\n\r\n<!--    pro images: {{proImages}}<br>-->\r\n<!--    error message {{wrongSizeTypeMessage}}-->\r\n  </MDBContainer>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\nimport {\r\n  MDBContainer,\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBBtn,\r\n    MDBBtnClose\r\n} from 'mdb-vue-ui-kit'\r\nimport imageService from \"@/service/image\";\r\nimport providerService from \"@/service/providers\";\r\nimport errorMessage from '../components/notifications/errorMessage'\r\nimport socket from \"@/socket\";\r\nimport recipientService from \"@/service/recipients\";\r\n//import socket from \"@/socket\";\r\nexport default {\r\n  name: \"ProGallery\",\r\n  props: {\r\n    provider: null,\r\n    proImages: Array\r\n  },\r\n  components: {\r\n    errorMessage,\r\n    MDBContainer,\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBBtn,\r\n    MDBBtnClose,\r\n\r\n  },\r\n  data () {\r\n    return {\r\n\r\n      IMAGE_SIZE: 1000000,\r\n      value: null,\r\n      showImage: null,\r\n      files: null,\r\n      imgIndex: null,\r\n      isAdd: false,\r\n      isEdit: false,\r\n      isEditPanel: false,\r\n      isPressedAdd: false,\r\n      isAddPanel: false,\r\n      wrongSizeTypeMessage: null\r\n    }\r\n  },\r\n  methods: {\r\n    // getUser () {\r\n    //   this.provider.booking.forEach(b => {\r\n    //     console.log(\"Booking info \" + b.user.username);\r\n    //\r\n    //   })\r\n    // },\r\n    async sendReadableFileToRecipients (imageID, action) {\r\n      let recipients = [];\r\n      this.provider.booking.forEach(b => {\r\n        console.log(\"Booking info \" + b.user.username);\r\n        recipients = [\r\n            ...recipients,\r\n            b.user.id\r\n        ]\r\n      })\r\n      const data = new FormData();\r\n      data.append('file', this.files, this.files.name);\r\n\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = (e) => {\r\n        const bytes = new Uint8Array(e.target.result);\r\n        console.log(\"FILES IN gallery.... \" + this.files)\r\n\r\n        // const imgBytes = {\r\n        //   id: ,\r\n        //   bytes: bytes\r\n        // }\r\n\r\n        socket.emit(\"created file for recipients\", imageID, bytes, this.provider.id, recipients, action);\r\n      };\r\n      reader.readAsArrayBuffer(this.files);\r\n    },\r\n    handleFileChange(e, i) {\r\n      this.imgIndex = i;\r\n      try {\r\n\r\n        const files = e.target.files[0]\r\n        console.log('event target client ', e.target.files[0])\r\n\r\n        if (files) {\r\n          //const tempImage = URL.createObjectURL(files)\r\n          //this.tempImages.push(tempImage);\r\n          this.showImage = URL.createObjectURL(files)\r\n          //this.file = e.target.files[0];\r\n          this.files = e.target.files[0];\r\n\r\n          this.isAdd = true;\r\n          this.isEdit = true;\r\n        }\r\n\r\n      } catch (err) {\r\n        console.log('Error:', err)\r\n      }\r\n\r\n      this.value = e.target.files[0]\r\n\r\n    },\r\n    pressAddImage () {\r\n      this.isAdd = false\r\n      this.isEdit = false;\r\n      this.isEditPanel = false;\r\n      this.isPressedAdd = true;\r\n      this.isAddPanel = true;\r\n    },\r\n    pressEditPanel (index) {\r\n      this.isEdit = false;\r\n      this.value = null;\r\n      this.imgIndex = index;\r\n      this.isPressedAdd = false;\r\n      this.isEditPanel = true;\r\n      this.isAddPanel = false\r\n    },\r\n    closeEditPanel () {\r\n      this.isAddPanel = false\r\n      this.isEditPanel = false\r\n      this.isEdit = false;\r\n      this.value = null;\r\n    },\r\n    closeAddPanel () {\r\n      this.isAddPanel = false\r\n      this.isPressedAdd = false;\r\n      this.value = null;\r\n    },\r\n    async addRefImage () {\r\n      this.value = null;\r\n      this.isAddPanel = false;\r\n      this.isAdd = false;\r\n      this.isPressedAdd = false;\r\n      const data = new FormData();\r\n\r\n      data.append('file', this.files, this.files.name)\r\n      console.log(\"IMG pro size - \" + this.files.size);\r\n\r\n      console.log(\"Image pro type_ \" + this.files.type);\r\n      console.log(\"AAA \" + this.provider.user.id)\r\n      const type = this.files.type;\r\n      if (type ===\"image/jpeg\" || type === \"image/jpg\" || type === \"image/png\" || type === \"image/gif\") {\r\n        console.log(\"Pildi formaat on OK\")\r\n        if (this.files.size <= this.IMAGE_SIZE) {\r\n\r\n          //const reader = new FileReader();\r\n\r\n          const img = await imageService.createProRefImg(this.provider.user.id, data);\r\n\r\n          if (img) {\r\n            //await recipientService.addImage(this.booking.id, img.imgCreated._id)\r\n            await providerService.addProSlide(this.provider.id, {slideID: img.imgCreated._id});\r\n            //\r\n            const _image = {\r\n              _id: img.imgCreated._id,\r\n              blob: this.showImage\r\n            }\r\n\r\n\r\n\r\n\r\n            this.$emit(\"addProImage\", _image);\r\n\r\n            this.sendReadableFileToRecipients(img.imgCreated._id, 'add');\r\n\r\n\r\n            this.isEdit = false;\r\n\r\n\r\n            // console.log(\"ORDRED pikkus \" + this.booking.ordered.length)\r\n            // let ordered = [];\r\n            // this.booking.ordered.forEach(b => {\r\n            //   console.log(\"CVCVCV \" + b.user.username);\r\n            //   ordered = ordered.concat(b.user.id);\r\n            // })\r\n\r\n            // reader.onload = (e) => {\r\n            //   const bytes = new Uint8Array(e.target.result);\r\n            //   console.log(\"FILES IN UPLOAD.... \" + this.files)\r\n            //\r\n            //   const image_bytes = {\r\n            //     id: img.imgCreated._id,\r\n            //     bytes: bytes\r\n            //   }\r\n            //   socket.emit(\"display booking image\", image_bytes, this.booking.id, ordered)\r\n            //\r\n            // };\r\n            // reader.readAsArrayBuffer(this.files);\r\n\r\n          }\r\n        } else {\r\n\r\n          console.log(\"Pildi suurus peab olema väiksem kui 1 MB\");\r\n          this.isAddPanel = true\r\n          this.isPressedAdd = true;\r\n          this.wrongSizeTypeMessage = \"Kuvan maximi koko on 3 MB.\";\r\n\r\n          setTimeout(() => {\r\n            this.wrongSizeTypeMessage = null;\r\n          }, 3000);\r\n        }\r\n      }\r\n      else {\r\n        console.log(\"Pildi formaat on FAKE\")\r\n        this.isAddPanel = true\r\n        this.isPressedAdd = true;\r\n        this.wrongSizeTypeMessage = \"Väärä formaati. Kuva pitäisi olla jpeg, jpg, png tai gif formaatissa!\";\r\n        setTimeout(() => {\r\n          this.wrongSizeTypeMessage = null;\r\n        }, 3000);\r\n      }\r\n\r\n    },\r\n    async editRefImage (index, img) {\r\n\r\n      // imgIndex: null,\r\n      //     isAdd: false,\r\n      //     isEdit: false,\r\n      //     isEditPanel: false,\r\n      //     isPressedAdd: false,\r\n      //     isAddPanel: false,\r\n      //     wrongSizeTypeMessage: null\r\n\r\n      console.log(\"Edited image index is: \" + index);\r\n\r\n      this.isEditPanel = false;\r\n      this.isEdit = false;\r\n\r\n      const data = new FormData();\r\n      data.append('file', this.files, this.files.name)\r\n\r\n      console.log(\"Image id \" + this.proImages[index]._id)\r\n      const imgType = this.files.type;\r\n      if (imgType ===\"image/jpeg\" || imgType === \"image/jpg\" || imgType === \"image/png\" || imgType === \"image/gif\") {\r\n        if (this.files.size <= this.IMAGE_SIZE) {\r\n          // -----------------------------------------------\r\n          //const image = await imageService.updateImage(this.images[index]._id, data);\r\n          console.log(\"Image id to edit \" + this.proImages[index]._id);\r\n          const changeImg = await imageService.editProRefImage(this.proImages[index]._id, data);\r\n\r\n          if (changeImg) {\r\n            this.$emit(\"editProRefImage\", index, changeImg._id,  this.showImage);\r\n\r\n            await this.sendReadableFileToRecipients(changeImg._id, 'edit');\r\n\r\n            // this.images[this.imageIndex] = {_id: this.images[index]._id, blob: this.showImage}\r\n            //\r\n            // this.images.forEach(img => {\r\n            //   console.log(\"Image name \" + img._id)\r\n            // })\r\n\r\n            // console.log(\"ORDRED in EDIT pikkus \" + this.booking.ordered.length)\r\n            // let ordered = [];\r\n            // this.booking.ordered.forEach(b => {\r\n            //   console.log(\"CVCVCV \" + b.user.username);\r\n            //   ordered = ordered.concat(b.user.id);\r\n            // })\r\n            //\r\n            // const reader = new FileReader();\r\n            //\r\n            // if (this.file) {\r\n            //   reader.onload = (e) => {\r\n            //     const bytes = new Uint8Array(e.target.result);\r\n            //     console.log(\"FILES.... \" + this.files)\r\n            //\r\n            //     const image_id = image._id;\r\n            //\r\n            //     socket.emit(\"display edited booking image\", image_id, bytes, this.booking.id, ordered)\r\n            //\r\n            //   };\r\n            //   reader.readAsArrayBuffer(this.files);\r\n            // }\r\n\r\n            // console.log(\"New image id is \" + image._id)\r\n            // this.imgId = image._id;\r\n            this.file = null;\r\n\r\n            this.isEditPanel = false;\r\n\r\n\r\n            this.closeAddPanel();\r\n\r\n          }\r\n        } else {\r\n          this.isEditPanel = true;\r\n          this.closeAddPanel();\r\n          this.wrong_SizeType_Message = \"Väärä formaati. Kuva pitäisi olla jpeg, jpg, png tai gif formaatissa!\";\r\n          setTimeout(() => {\r\n            this.wrong_SizeType_Message = null;\r\n          }, 3000);\r\n        }\r\n\r\n      }else {\r\n        this.isEditPanel = true;\r\n        this.closeAddPanel();\r\n        this.wrong_SizeType_Message = \"Kuvan maximi koko on oltava 3 MB!\";\r\n        setTimeout(() => {\r\n          this.wrong_SizeType_Message = null;\r\n        }, 3000);\r\n      }\r\n\r\n\r\n    },\r\n    async removeRefImage (index, imageID) {\r\n      //this.value = null;\r\n      if (!this.proImages[index].blob) {\r\n        console.log(\"removed image is blob\")\r\n\r\n      }\r\n\r\n      let clients = [];\r\n      this.provider.booking.forEach(pb => {\r\n        console.log(\"Booking info -- removing \" + pb.user.username);\r\n        clients = [\r\n          ...clients,\r\n          pb.user.id\r\n        ]\r\n      })\r\n\r\n      console.log(\"removable image id is \" + this.proImages[index]._id)\r\n\r\n      await imageService.removeProRefImage(this.proImages[index]._id, this.provider.id);\r\n\r\n      // await recipientService.removeImage(this.booking.id, this.images[id]._id);\r\n      // await imageService.remove(this.images[id]._id, this.booking.id);\r\n\r\n\r\n\r\n      //socket.emit(\"stop display booking image\", this.images[id]._id, this.booking, bIDs);\r\n\r\n      this.$emit(\"removeProRefImage\", index);\r\n      socket.emit(\"remove recipient side pro ref image\", imageID, this.provider.id, clients);\r\n\r\n      this.isEditPanel = false;\r\n\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nimg.proRefLoading {\r\n  width: 100%;\r\n  margin: 0 13px 13px 0;\r\n  background: transparent url(https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif) no-repeat scroll center center;\r\n}\r\ninput[type=\"file\"] {\r\n  display: none;\r\n}\r\n.pro-file-upload {\r\n  width: 100%;\r\n\r\n  color: white;\r\n  font-size: 18px;\r\n  background-color: #87958e;\r\n  border: 1px solid #ccc;\r\n  display: inline-block;\r\n  padding: 20px 12px;\r\n  margin-bottom: 0;\r\n  cursor: pointer;\r\n}\r\n.edit-panel {\r\n  border: solid grey;\r\n  padding: 20px;\r\n  margin: 20px 0 20px 0;\r\n}\r\n.add-panel {\r\n  border: solid grey;\r\n  padding: 20px;\r\n  margin: 20px 0 20px 0;\r\n}\r\n.btn {\r\n  padding: 20px;\r\n  margin: 20px 0 20px 0;\r\n}\r\n.close-btn {\r\n  float: right;\r\n  padding: 20px;\r\n}\r\n\r\n\r\n/* Container needed to position the button. Adjust the width as needed */\r\n.panel {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\n/* Make the image responsive */\r\n.panel img {\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n\r\n/* Style the button and place it in the middle of the container/image */\r\n.panel .img_btn {\r\n  position: absolute;\r\n  top: 85%;\r\n  left: 85%;\r\n  transform: translate(-50%, -50%);\r\n  -ms-transform: translate(-50%, -50%);\r\n  background-color: #555;\r\n  opacity: 0.5;\r\n  color: white;\r\n  font-size: 16px;\r\n  padding: 12px 24px;\r\n  border: none;\r\n  cursor: pointer;\r\n  border-radius: 5px;\r\n}\r\n\r\n.panel .btn:hover {\r\n  background-color: black;\r\n}\r\n</style>","import { render } from \"./ProGallery.vue?vue&type=template&id=8498f3fe&scoped=true\"\nimport script from \"./ProGallery.vue?vue&type=script&lang=js\"\nexport * from \"./ProGallery.vue?vue&type=script&lang=js\"\n\nimport \"./ProGallery.vue?vue&type=style&index=0&id=8498f3fe&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8498f3fe\"]])\n\nexport default __exports__"],"names":["ErrorMessage","message","_createVNode","require","class","key","for","_createBlock","_component_MDBContainer","default","_withCtx","_createElementVNode","style","_component_MDBRow","_createElementBlock","_Fragment","_renderList","$props","proImages","img","i","_component_MDBCol","lg","_createTextVNode","_toDisplayString","name","image","src","alt","_hoisted_1","_hoisted_2","blob","_hoisted_3","onClick","$event","$options","pressEditPanel","_hoisted_4","$data","isEditPanel","imgIndex","_hoisted_5","_component_error_message","wrongSizeTypeMessage","value","_createCommentVNode","_component_MDBBtnClose","white","closeEditPanel","id","type","onChange","handleFileChange","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","isEdit","_component_MDBBtn","block","color","editRefImage","_cache","_","size","removeRefImage","_id","showImage","_hoisted_10","isPressedAdd","pressAddImage","isAddPanel","_hoisted_11","closeAddPanel","_ctx","_hoisted_12","_hoisted_13","_hoisted_14","isAdd","outline","addRefImage","_hoisted_15","props","provider","Array","components","errorMessage","MDBContainer","MDBRow","MDBCol","MDBBtn","MDBBtnClose","data","IMAGE_SIZE","files","methods","sendReadableFileToRecipients","imageID","action","recipients","this","booking","forEach","b","console","log","user","username","FormData","append","reader","FileReader","onload","e","bytes","Uint8Array","target","result","socket","emit","readAsArrayBuffer","URL","createObjectURL","err","index","imageService","createProRefImg","providerService","addProSlide","slideID","imgCreated","_image","$emit","setTimeout","imgType","changeImg","editProRefImage","file","wrong_SizeType_Message","clients","pb","removeProRefImage","__exports__","render"],"sourceRoot":""}