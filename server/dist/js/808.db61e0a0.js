"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[269,808],{4482:function(e,i,t){var s=t(6768);const o=({message:e})=>null===e?null:(0,s.bF)("div",{className:"error"},[e,(0,s.bF)("img",{className:"errorImg",alt:"error",src:t(1644)},null)]);i.A=o},2216:function(e,i,t){t.r(i),t.d(i,{default:function(){return Te}});t(4114);var s=t(6768),o=t(4232);const r={class:"pro-panel-header"},n={class:"header-content"},a={key:0,class:"spinner-border",role:"status"},l={key:1,class:"pro-panel"},d={key:0},u={key:1},c={style:{border:"solid #ddd","margin-bottom":"10px",padding:"7px"}},m={style:{display:"flex","justify-content":"right",padding:"10px"}},h={key:0,colspan:"2"},g={key:1},p={style:{"min-width":"19px","font-size":"14px"}},k={style:{"min-width":"19px","font-size":"14px"}},f={key:0},v={key:1},y={key:0,colspan:"2"},T={key:1},D={key:0,colspan:"2"},b={key:1};function E(e,i,t,E,P,M){const C=(0,s.g2)("MDBCol"),F=(0,s.g2)("MDBRow"),w=(0,s.g2)("calendar"),A=(0,s.g2)("error-notification"),R=(0,s.g2)("errorNotification"),L=(0,s.g2)("successNotification"),x=(0,s.g2)("MDBBtn"),B=(0,s.g2)("MDBBtnClose"),I=(0,s.g2)("MDBInput"),_=(0,s.g2)("feedback-list"),K=(0,s.g2)("MDBIcon"),X=(0,s.g2)("MDBBadge"),N=(0,s.g2)("edit-profession"),z=(0,s.g2)("editPrice"),S=(0,s.g2)("MDBTable"),O=(0,s.g2)("MDBContainer");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(F,{style:{"margin-top":"17px"}},{default:(0,s.k6)((()=>[(0,s.bF)(C,{class:"proPanelHeader",md:"4"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",r,[(0,s.Lk)("div",n,[(0,s.Lk)("h2",null,(0,o.v_)(E.provider.yritys),1),(0,s.Lk)("h2",null,(0,o.v_)(E.provider.address),1)])])])),_:1})])),_:1}),(0,s.bF)(O,{style:{"margin-bottom":"50px"}},{default:(0,s.k6)((()=>[E.isProviderCalendar?((0,s.uX)(),(0,s.Wv)(w,{key:0,userIsProvider:t.userIsProvider,bookings:t.bookings,filled_days:t.filled_days,filled:t.filled,bookingsConfirmed:t.bookingsConfirmed},null,8,["userIsProvider","bookings","filled_days","filled","bookingsConfirmed"])):(0,s.Q3)("",!0),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.bF)(C,null,{default:(0,s.k6)((()=>[E.provider.profession?((0,s.uX)(),(0,s.CE)("div",l,[(0,s.bF)(A,{message:E.rangeErrorMessage},null,8,["message"]),(0,s.bF)(R,{message:E.errorMessage},null,8,["message"]),(0,s.bF)(L,{message:E.successMessage},null,8,["message"]),(0,s.bF)(S,{responsive:"",borderless:"",style:{position:"relative",color:"#ddd","font-size":"14px","text-align":"left"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,o.v_)(0===E.provider.range?"Tarjoan palvelua paikalla":"Palvelun säde: "+E.provider.range+" km"),1),E.isEditRange?((0,s.uX)(),(0,s.CE)("td",u,[(0,s.Lk)("div",c,[(0,s.Lk)("div",m,[(0,s.bF)(B,{white:"",onClick:i[1]||(i[1]=e=>E.isEditRange=!1)})]),(0,s.Lk)("div",null,[(0,s.bF)(I,{white:"",label:"Säde - km",modelValue:E.range,"onUpdate:modelValue":i[2]||(i[2]=e=>E.range=e),size:"sm",type:"number"},null,8,["modelValue"]),i[8]||(i[8]=(0,s.Lk)("br",null,null,-1))]),E.range.length>0?((0,s.uX)(),(0,s.Wv)(x,{key:0,outline:"info",block:"",size:"sm",onClick:M.saveNewRange},{default:(0,s.k6)((()=>i[9]||(i[9]=[(0,s.eW)("Tallenna uusi säde")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0)])])):((0,s.uX)(),(0,s.CE)("td",d,[(0,s.bF)(x,{outline:"info",block:"",size:"sm",onClick:i[0]||(i[0]=e=>E.isEditRange=!0)},{default:(0,s.k6)((()=>i[7]||(i[7]=[(0,s.eW)("Muokkaa toimintaalueetta")]))),_:1})]))]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",{class:(0,o.C4)({hide:E.isFeedback})}," Palaute ",2),E.isFeedback?((0,s.uX)(),(0,s.CE)("td",h,[(0,s.bF)(_,{feedback:E.provider.feedback,onCloseFeedbackList:M.handleCloseFeedbackList},null,8,["feedback","onCloseFeedbackList"])])):((0,s.uX)(),(0,s.CE)("td",g,[(0,s.bF)(F,{class:"rating"},{default:(0,s.k6)((()=>[(0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.bF)(K,{style:{padding:"10px",color:"limegreen"},i:"",class:"far fa-thumbs-up",size:"2x"}),(0,s.bF)(X,{color:"success",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.k6)((()=>[(0,s.Lk)("h2",p,(0,o.v_)(E.provider.rating.positive),1)])),_:1})])),_:1}),(0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.bF)(K,{style:{padding:"10px",color:"palevioletred"},i:"",class:"far fa-thumbs-down",size:"2x"}),(0,s.bF)(X,{color:"danger",class:"translate-middle p-1",pill:"",notification:""},{default:(0,s.k6)((()=>[(0,s.Lk)("h2",k,(0,o.v_)(E.provider.rating.negative),1)])),_:1})])),_:1}),(0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.bF)(x,{block:"",color:"secondary",onClick:M.getFeedbackListData},{default:(0,s.k6)((()=>i[10]||(i[10]=[(0,s.eW)("Katso oma arvostelua")]))),_:1},8,["onClick"])])),_:1})])),_:1})]))]),E.isProviderCalendar?((0,s.uX)(),(0,s.CE)("tr",v,[i[14]||(i[14]=(0,s.Lk)("td",null," Päätän, koska tarjoan palvelua ",-1)),(0,s.Lk)("td",null,[(0,s.bF)(x,{outline:"info",block:"",size:"sm",onClick:i[4]||(i[4]=e=>E.isProviderCalendar=!1)},{default:(0,s.k6)((()=>i[13]||(i[13]=[(0,s.eW)("Vaihda 24/7")]))),_:1})])])):((0,s.uX)(),(0,s.CE)("tr",f,[i[12]||(i[12]=(0,s.Lk)("td",null," Tarjoan palvelua 24/7 ",-1)),(0,s.Lk)("td",null,[(0,s.bF)(x,{outline:"info",size:"sm",onClick:i[3]||(i[3]=e=>E.isProviderCalendar=!0)},{default:(0,s.k6)((()=>i[11]||(i[11]=[(0,s.eW)("Vaihda kalenteriin")]))),_:1})])])),(0,s.Lk)("tr",null,[(0,s.Lk)("td",{class:(0,o.C4)({hide:E.isEditProfession})},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(E.provider.profession,((e,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i},(0,o.v_)(e),1)))),128))],2),E.isEditProfession?((0,s.uX)(),(0,s.CE)("td",y,[(0,s.bF)(N,{provider:E.provider,onAdditionalProfession:M.handleAddProfession,onEditProfession:M.handleEditProfession,onRemoveProfession:M.handleRemoveProfession,"onCancel:editProfession":M.handleCancelEditProfession},null,8,["provider","onAdditionalProfession","onEditProfession","onRemoveProfession","onCancel:editProfession"])])):((0,s.uX)(),(0,s.CE)("td",T,[(0,s.bF)(x,{outline:"info",block:"",size:"sm",onClick:M.editProfessionPro},{default:(0,s.k6)((()=>i[15]||(i[15]=[(0,s.eW)("Muokkaa osaamista")]))),_:1},8,["onClick"])]))]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",{class:(0,o.C4)({hide:E.isEditPrice})},(0,o.v_)(E.provider.priceByHour)+" Euroa ",3),E.isEditPrice?((0,s.uX)(),(0,s.CE)("td",D,[(0,s.bF)(z,{currentPrice:E.provider.priceByHour,"onCancel:editPrice":M.cancelEditPrice,"onSave:editedPrice":M.saveEditedPrice},null,8,["currentPrice","onCancel:editPrice","onSave:editedPrice"])])):((0,s.uX)(),(0,s.CE)("td",b,[(0,s.bF)(x,{outline:"info",block:"",size:"sm",onClick:M.editPrice},{default:(0,s.k6)((()=>i[16]||(i[16]=[(0,s.eW)("Muokkaa tuntihinta")]))),_:1},8,["onClick"])]))]),(0,s.Lk)("tr",null,[i[18]||(i[18]=(0,s.Lk)("td",null," Katso kartalta ",-1)),(0,s.Lk)("td",null,[(0,s.bF)(x,{outline:"info",block:"",size:"sm",onClick:i[5]||(i[5]=e=>this.$router.push("/pro-public-search"))},{default:(0,s.k6)((()=>i[17]||(i[17]=[(0,s.eW)("Kartalta")]))),_:1})])])])])),_:1})])):((0,s.uX)(),(0,s.CE)("div",a,i[6]||(i[6]=[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1)])))])),_:1})])),_:1})])),_:1})])}t(8111),t(2489),t(7588),t(1701),t(3579);var P=t(8068),M=t(1769);const C={class:"edit-price"},F={style:{display:"flex","justify-content":"right"}};function w(e,i,t,o,r,n){const a=(0,s.g2)("error-msg"),l=(0,s.g2)("MDBBtnClose"),d=(0,s.g2)("MDBInput"),u=(0,s.g2)("MDBBtn"),c=(0,s.g2)("MDBContainer");return(0,s.uX)(),(0,s.Wv)(c,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",C,[(0,s.bF)(a,{message:o.priceErrorMessage},null,8,["message"]),(0,s.Lk)("div",F,[(0,s.bF)(l,{white:"",style:{padding:"13px",cursor:"pointer"},onClick:n.cancelEdit},null,8,["onClick"])]),(0,s.bF)(d,{type:"Number",label:"Uusi tuntihinta",size:"lg",white:"",modelValue:o.price,"onUpdate:modelValue":i[0]||(i[0]=e=>o.price=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,s.bF)(u,{outline:"success",block:"",size:"lg",style:{"margin-bottom":"20px"},onClick:n.handleEditPrice},{default:(0,s.k6)((()=>i[1]||(i[1]=[(0,s.eW)("Kinnita")]))),_:1},8,["onClick"])])])),_:1})}var A=t(5846),R=t(144),L=t(4482),x={name:"edit-price",props:{currentPrice:Number},setup(){const e=(0,R.KR)(null),i=(0,R.KR)(null);return{price:e,priceErrorMessage:i}},components:{errorMsg:L.A,MDBContainer:A.Dj,MDBBtn:A.al,MDBInput:A.gk,MDBBtnClose:A.uR},data(){return{errorMessage:null}},methods:{handleEditPrice(){const e=parseInt(this.price);this.price?e>0?(console.log("Pos"),this.$emit("save:editedPrice",this.price)):(this.price=null,this.priceErrorMessage="Hinta ei voi olla negatiivinen numero!",setTimeout((()=>{this.priceErrorMessage=null}),3e3)):(this.priceErrorMessage="Tuntihinta puuttuu!",setTimeout((()=>{this.priceErrorMessage=null}),3e3))},cancelEdit(){this.$emit("cancel:editPrice",!1),this.errorMessage="Here is some error!"}}},B=t(1241);const I=(0,B.A)(x,[["render",w]]);var _=I,K=t(5130);const X={class:"edit-profession"},N={key:0},z={style:{color:"#ddd"}},S={style:{"margin-bottom":"20px"}},O={value:"slotProps"},V={key:0},W={key:1},H={style:{},class:"flex align-items-center"},$={key:1},j={key:2,style:{"margin-top":"13px","margin-bottom":"20px"}},U={value:"slotProps"},G={key:0},Y={key:1},Q={style:{},class:"flex align-items-center"};function J(e,i,t,r,n,a){const l=(0,s.g2)("MDBBtnClose"),d=(0,s.g2)("MDBCol"),u=(0,s.g2)("Dropdown"),c=(0,s.g2)("MDBRow"),m=(0,s.g2)("MDBTable"),h=(0,s.g2)("MDBBtn"),g=(0,s.g2)("MDBContainer");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",X,[(0,s.bF)(l,{white:"",style:{float:"right",cursor:"pointer"},onClick:a.cancelEditProfession},null,8,["onClick"]),t.provider&&1===t.provider.profession.length?((0,s.uX)(),(0,s.CE)("div",N,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.provider.profession,((t,n)=>((0,s.uX)(),(0,s.Wv)(c,{key:n},{default:(0,s.k6)((()=>[(0,s.bF)(d,{col:"12"},{default:(0,s.k6)((()=>[(0,s.Lk)("p",z,(0,o.v_)(t),1)])),_:2},1024),(0,s.bF)(d,{col:"12"},{default:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:i[1]||(i[1]=(0,K.D$)(((...i)=>e.submit&&e.submit(...i)),["prevent"]))},[(0,s.Lk)("div",S,[(0,s.bF)(u,{onChange:e=>a.changeCurrentProfession(n),modelValue:r.selected,"onUpdate:modelValue":i[0]||(i[0]=e=>r.selected=e),options:r.proList,filter:"",optionLabel:"label",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"Valitse ammattilainen",class:"w-full md:w-100rem"},{optiongroup:(0,s.k6)((e=>[(0,s.Lk)("div",H,[(0,s.Lk)("div",null,(0,o.v_)(e.option.label),1)])])),default:(0,s.k6)((()=>[(0,s.Lk)("template",O,[e.slotProps.value?((0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("div",null,(0,o.v_)(e.slotProps.value.label),1)])):((0,s.uX)(),(0,s.CE)("span",W,(0,o.v_)(e.slotProps.placeholder),1))])])),_:2},1032,["onChange","modelValue","options"])])],32)])),_:2},1024)])),_:2},1024)))),128))])):((0,s.uX)(),(0,s.CE)("div",$,[(0,s.bF)(m,{borderless:"",style:{"font-size":"18px","text-align":"left"}},{default:(0,s.k6)((()=>[(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.provider.profession,((e,i)=>((0,s.uX)(),(0,s.CE)("tr",{key:i},[(0,s.Lk)("td",null,(0,o.v_)(e),1),(0,s.Lk)("td",null,[(0,s.bF)(l,{white:"",onClick:t=>a.removeProfession(i,e)},null,8,["onClick"])])])))),128))])])),_:1})])),(0,s.bF)(h,{block:"",color:"primary",size:"lg",style:{"margin-bottom":"20px"},onClick:a.addProfessionPressed},{default:(0,s.k6)((()=>i[3]||(i[3]=[(0,s.eW)("Lisää ammatti")]))),_:1},8,["onClick"]),r.isAddProfession?((0,s.uX)(),(0,s.CE)("div",j,[(0,s.bF)(u,{onChange:a.changeNewProfession,modelValue:r.selectedNewProfession,"onUpdate:modelValue":i[2]||(i[2]=e=>r.selectedNewProfession=e),options:r.proList,filter:"",optionLabel:"label",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"Valitse ammattilainen",class:"w-full md:w-100rem"},{optiongroup:(0,s.k6)((e=>[(0,s.Lk)("div",Q,[(0,s.Lk)("div",null,(0,o.v_)(e.option.label),1)])])),default:(0,s.k6)((()=>[(0,s.Lk)("template",U,[e.slotProps.value?((0,s.uX)(),(0,s.CE)("div",G,[(0,s.Lk)("div",null,(0,o.v_)(e.slotProps.value.label),1)])):((0,s.uX)(),(0,s.CE)("span",Y,(0,o.v_)(e.slotProps.placeholder),1))])])),_:1},8,["onChange","modelValue","options"])])):(0,s.Q3)("",!0),r.additionalProfession.length>2?((0,s.uX)(),(0,s.Wv)(h,{key:3,outline:"success",block:"",size:"lg",onClick:e.handleAddAdditionalProfession},{default:(0,s.k6)((()=>i[4]||(i[4]=[(0,s.eW)("Kinnita uus amet")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0)])])),_:1})])}var q=t(3076),Z=t(2436),ee={name:"editProfession",props:{provider:Object},components:{Dropdown:Z.A,MDBContainer:A.Dj,MDBBtn:A.al,MDBRow:A.gU,MDBCol:A.m6,MDBTable:A.EU,MDBBtnClose:A.uR},setup(){const e=(0,R.KR)(""),i=(0,R.KR)(null),t=(0,R.KR)(null),s=(0,R.KR)(!1),o=(0,R.KR)(""),r=(0,R.KR)(q.A);return{profession:e,selected:i,selectedNewProfession:t,isAddProfession:s,additionalProfession:o,proList:r}},methods:{changeCurrentProfession(e){console.log("Selected xx "+e+" "+this.selected.label),this.$emit("editProfession",e,this.selected.label),this.selected=null},changeNewProfession(){console.log("New new "+this.selectedNewProfession.label),this.isAddProfession=!1,this.$emit("additionalProfession",this.selectedNewProfession.label),this.selectedNewProfession=null},addProfessionPressed(){this.selectedNewProfession="",this.isAddProfession=!0},addNewProfession(){this.selectedNewProfession="";const e=document.getElementById("new_profession");e.addEventListener("change",(e=>{this.isAddProfession=!1,this.$emit("additionalProfession",e.target.value)})),this.selectedNewProfession=""},editProfession(e){this.isAddProfession=!1;const i=document.getElementById("edit_profession");i.addEventListener("change",(i=>{this.$emit("editProfession",e,i.target.value)})),this.selected=""},removeProfession(e,i){this.isAddProfession=!1,this.$emit("removeProfession",e,i),this.selected=null},cancelEditProfession(){this.$emit("cancel:editProfession")}}};const ie=(0,B.A)(ee,[["render",J]]);var te=ie,se=t(7337),oe=t(2946),re=t(8038),ne=t(1690),ae=t(7533),le=t(2782);const de={class:"pro-panel-feedback"},ue={key:0},ce={style:{"margin-bottom":"10px"}},me={key:1};function he(e,i,t,r,n,a){return(0,s.uX)(),(0,s.CE)("div",de,[(0,s.Lk)("p",{style:{"text-align":"right",cursor:"pointer",color:"green"},onClick:i[0]||(i[0]=i=>e.$emit("closeFeedbackList"))},"Valmis"),t.feedback.length>0?((0,s.uX)(),(0,s.CE)("div",ue,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.feedback,(e=>((0,s.uX)(),(0,s.CE)("div",{style:{"text-align":"left"},key:e.id},[(0,s.Lk)("p",ce,(0,o.v_)(e.neg?e.neg:e.pos),1)])))),128))])):((0,s.uX)(),(0,s.CE)("div",me,i[1]||(i[1]=[(0,s.Lk)("p",null,"Ei arvostelua vielä!",-1)])))])}var ge={name:"FeedbackList",props:{feedback:Array}};const pe=(0,B.A)(ge,[["render",he]]);var ke=pe,fe=t(222),ve={name:"Provider-panel",props:{userIsProvider:Object,bookings:Array,filled_days:Array,filled:Array,bookingsConfirmed:Array},components:{Gallery:fe["default"],FeedbackList:ke,calendar:oe["default"],info:re.A,errorNotification:L.A,successNotification:se.A,editPrice:_,editProfession:te,MDBContainer:A.Dj,MDBIcon:A.$u,MDBRow:A.gU,MDBCol:A.m6,MDBTable:A.EU,MDBBtn:A.al,MDBBtnClose:A.uR,MDBBadge:A.nf,MDBInput:A.gk,VueDatePicker:P.A},data(){const e=()=>{(0,ae.A)(new Date,1)},i=(0,R.KR)(),t=(0,R.KR)([{hours:(new Date).getHours(),minutes:(new Date).getMinutes()},{hours:(new Date).getHours(),minutes:(new Date).getMinutes()}]);return{dateForTimeEdit:null,date:i,startTime:t,editMarkedTimeID:null,editMarketIndex:null,activeDate:null,setMarkers:null,dayMarkerData:[],isEditTime:!1,selfProvider:this.userIsProvider,confirmedBookings:[],testi:{},un:"",ri:"",rooms:[],close:!0,isGallery:!1,proImages:[],isCalendarVisible:!1,filledTimes:[],dayPanelIndex:null,isHandleTask:!1,watchEffect:e}},setup(){const e=(0,R.KR)(!1),i=(0,R.KR)(null),t=(0,R.KR)(""),o=(0,R.KR)(null),r=(0,R.KR)(null),n=(0,R.KR)(""),a=(0,R.KR)(!1),l=(0,R.KR)(!1),d=(0,R.KR)(!1),u=(0,R.KR)(!1),c=(0,R.KR)(!1),m=(0,R.KR)(null),h=(0,R.KR)(null),g=(0,R.KR)([]),p=(0,R.KR)([]),k=(0,R.KR)(!1),f=(0,R.KR)([]),v=(0,R.KR)({}),y=(0,R.KR)(!1),T=(0,R.KR)([]),D=(0,R.KR)({}),b=(0,R.KR)(""),E=(0,R.KR)({}),P=(0,R.KR)(null),M=(0,R.KR)([]),C=(0,R.KR)(null),F=(0,R.KR)(null),w=(0,R.KR)(null),A=(0,R.KR)(null),L=(0,R.KR)(null),x=(0,R.KR)(null),B=(0,R.KR)({}),I=(0,R.KR)(!1),_=(0,R.KR)([]),K=(0,R.KR)(null),X=(0,R.KR)(!1),N=(0,R.KR)([(0,ae.A)(new Date,1),(0,ae.A)(new Date,2),(0,ae.A)(new Date,7)]);return{isProviderCalendar:e,testii:i,weekDay:t,timerange:o,datee:r,range:n,isRangeSelected:a,isEditRange:l,isEditPrice:d,isFeedback:u,isEditProfession:c,clearTime:m,dateTest:h,markers:g,contents:p,isContents:k,markedDays:f,time:v,isConfirmTime:y,times:T,datetime:D,userId:b,provider:E,creditLeft:P,providerTimes:M,errorMessage:C,timeEditSuccessMessage:w,timeEditErrorMessage:A,rangeErrorMessage:L,oblicationInfoMessage:x,successMessage:F,editTime:B,isTimeToEdit:I,editArr:_,timeToEdit:K,watchEffect:s.nT,highlightedDates:N,isDisplayConfirmed:X}},mounted(){},beforeMount(){const e=window.localStorage.getItem("loggedAppUser");if(e){const i=JSON.parse(e);this.userId=i.id,this.providerData()}else this.$router.push("/")},methods:{openTask(e){this.dayPanelIndex=e,this.isHandleTask=!0,this.isDisplayConfirmed=!0,console.log("Index in open - "+e)},closeTask(e){this.dayPanelIndex=null,this.isHandletask=!1,this.isDisplayConfirmed=!1,console.log("Index in close - "+e)},closeDayPanel(){this.isTimeToEdit=!1,this.isEditTime=!1,this.isDisplayConfirmed=!1,this.dayPanelIndex=null},goToMap(){this.$router.push("/provider-public")},getDate(){const e=(new Date).getTime(),i=(new Date).getTime()+6048e5,t=864e5;console.log("and now "+e),console.log("week_ms added  is: "+i);const s=(i-e)/t;console.log("Days between - "+s)},saveNewRange(){const e=parseInt(this.range);e>0?this.range.includes(",")?(this.range="",this.rangeErrorMessage="Pilkku (,) ei ole sallittu merkki, laita piste (.)!",setTimeout((()=>{this.rangeErrorMessage=null}),3e3)):(this.isEditRange=!1,M.A.editRange(this.provider.id,{range:this.range}),this.provider.range=this.range):(this.range="",this.rangeErrorMessage="Säde tulee olla positiivinen numero!",setTimeout((()=>{this.rangeErrorMessage=null}),3e3))},getIt(){let e="aaa",i="room";ne.A.auth={username:e,room:i},ne.A.connect();let t="Oopersama";ne.A.emit("updateRoom",t)},joinAllRooms(){const e=["111","222"];ne.A.emit("joinAllClientRooms",e)},handleRemoveProConfirmed(e){console.log("Info closed here?? "+e.header),this.$emit("removeProBookingConfirmed",e),this.confirmedBookings=this.confirmedBookings.filter((i=>i.id!==e.id)),this.successMessage="Siit saab kustutada selle teavituse soovi korral!",setTimeout((()=>{this.successMessage=null}),3e3)},socketResetTest(){ne.A.disconnect(),ne.A.connect()},openChatPanel(e){e.preventDefault(),console.log("Will chat open...");const i=localStorage.getItem("sessionID");i&&(this.usernameAlreadySelected=!0,ne.A.auth={sessionID:i},ne.A.connect()),ne.A.on("session",(({sessionID:e,userID:i,roomName:t})=>{ne.A.auth={sessionID:e},localStorage.setItem("sessionID",e),ne.A.userID=i,ne.A.roomName=t}))},createOrdered(e){},handleInternal(e){this.editArr=[];let i=[];if(this.dayMarkerData=[],this.editTime={},this.isTimeToEdit=!1,e){console.log("DATE"+e[0].getDate()),this.activeDate=e[0].getDate(),this.dateForTimeEdit=e,console.log("get date "+this.activeDate);let t=e.toString().substring(8,10),s=parseInt(t);this.weekDay=e.toString().substring(0,3);let o={};console.log("length xxxxxxxx "+this.markers.length),this.filled_days.forEach((e=>{s===e.day?(console.log("On"),this.isTimeToEdit=!0,i.push({type:"highlight",day:s,weekDay:this.weekDay,hours:e.hours,minutes:e.minutes,booking:this.bookingsConfirmed.filter((e=>e.onTime[0].day===s))})):console.log("Ei ole")}));let r=!1;const n=[];this.markers.forEach((e=>{e.date.getDate()===s&&(r=!0,this.isTimeToEdit=!0,o={type:"marker",day:s,weekDay:this.weekDay,time:e.content},n.push(e.content),this.editArr.push(o))})),r&&(this.dayMarkerData=this.dayMarkerData.concat({type:"marker",day:s,weekday:this.weekDay,time:n})),this.times=[],this.providerTimes&&this.providerTimes.forEach((e=>{this.initializeTime(e)})),this.editArr=this.editArr.concat(i),this.dayMarkerData=this.dayMarkerData.concat(i)}},onTimePickerOpen(e){console.log("Timepicker open! ")},onTimePickerClose(){console.log("Timepicker is closed!")},onOverlayToggle(e){console.log(`Overlay ${e.overlay} is ${e.open?"opened":"closed"}`)},editPrice(){this.isEditPrice=!0},async saveEditedPrice(e){const i={priceByHour:e},t=await M.A.updateProvider(this.provider.id,i);t&&(this.provider.priceByHour=e,console.log("Price: "+this.provider.priceByHour),this.isEditPrice=!1,this.successMessage="Tuntihinta on muokattu!",setTimeout((()=>{this.successMessage=null}),2e3))},cancelEditPrice(e){this.isEditPrice=e},getFeedbackListData(){this.isFeedback=!0},handleCloseFeedbackList(){this.isFeedback=!1},editProfessionPro(){this.isEditProfession=!0},handleEditProfession(e,i){console.log("Profession is "+i+" and index "+e),this.provider.profession[0]=i,M.A.editProfession(this.provider.id,{index:e,pro:i})},handleAddProfession(e){console.log("Uus amet on "+e),M.A.additionalProfession(this.provider.id,{profession:e}),this.provider.profession.includes(e)||this.provider.profession.push(e)},handleRemoveProfession(e,i){console.log("Profession index is "+e+" and profession is "+i),M.A.removeProfession(this.provider.id,{profession:i}),this.provider.profession.splice(e,1)},handleCancelEditProfession(){this.isEditProfession=!1},async editTimeTest(){const e={hoursFrom:1};await le.A.updateOffer("6431407f53469b1f48eeb2f0",e)},updateTimesAndMarkers(){this.providerTimes.forEach((e=>{console.log("Provider times: "+e.hoursFrom),this.setTimeMarkers(e)})),this.providerTimes.forEach((e=>{this.initializeTime(e)}))},async delTimeRange(e,i){await le.A.removeTimeOffer(this.provider.id,e),console.log("Id argumendina? "+e),this.times.splice(i,1),this.providerTimes=this.providerTimes.filter((i=>i.id!==e)),this.markers=this.markers.filter((i=>i.content.timeId!==e)),console.log("MARKERS LEN "+this.markers.length),this.dayMarkerData=this.dayMarkerData.filter((e=>"marker"===e.type)),this.dayMarkerData.length>1?this.dayMarkerData=this.dayMarkerData.filter((i=>i.time.some((i=>i.timeId!==e)))):(console.log("Something else!!"),this.dayMarkerData[0].time=this.dayMarkerData[0].time.filter((i=>i.timeId!==e))),0===this.dayMarkerData[0].time.length&&(this.isTimeToEdit=!1)},onClose(){console.log("On close...")},async handleDate(){console.log("Date handled!");const e={yearFrom:this.date[0].getFullYear(),monthFrom:this.date[0].getMonth(),dayFrom:this.date[0].getDate(),hoursFrom:this.date[0].getHours(),minutesFrom:this.date[0].getMinutes(),yearTo:this.date[1].getFullYear(),monthTo:this.date[1].getMonth(),dayTo:this.date[1].getDate(),hoursTo:this.date[1].getHours(),minutesTo:this.date[1].getMinutes()},i=await le.A.addAdditionalOffer(this.provider.id,e);console.log("Provider times "+this.providerTimes),this.providerTimes=this.providerTimes.concat(i),this.times=[],this.markers=[],this.providerTimes.forEach(((e,i)=>{this.setTimeMarkers(e,i),this.initializeTime(e)}));let t=[],s={};this.editArr=[],this.dayMarkerData=[],console.log("------------- PT -------- "+this.providerTimes.length),console.log("------------- ML --------- "+this.markers.length),this.filled_days.forEach((e=>{this.date[0].getDate()===e.day?(console.log("On"),this.isTimeToEdit=!0,t.push({type:"highlight",day:this.date[0].getDate(),weekDay:this.weekDay,hours:e.hours,minutes:e.minutes,booking:this.bookingsConfirmed.filter((e=>e.onTime[0].day===this.date[0].getDate()))})):console.log("Ei ole")}));const o=[];this.markers.forEach((e=>{e.date.getDate()===i.dayFrom&&(this.isTimeToEdit=!0,s={day:i.dayFrom,weekDay:this.weekDay,time:e.content},o.push(e.content))})),this.dayMarkerData=this.dayMarkerData.concat({type:"marker",day:i.dayFrom,weekday:this.weekDay,time:o}),this.dayMarkerData=this.dayMarkerData.concat(t)},async confirmEditedTime(e){let i;console.log("Confirmed??? "+e+" hours edited: "+this.t);const t=this.timeToEdit;if(t){i={hoursFrom:t[0].hours,minutesFrom:t[0].minutes,hoursTo:t[1].hours,minutesTo:t[1].minutes};const s=await le.A.updateOffer(e,i);console.log("Offer edited: "+s),this.timeEditSuccessMessage="Aika muokattu onnistuneesti!",this.isEditTime=!1,setTimeout((()=>{this.timeEditSuccessMessage=null}),2e3),this.isTimeToEdit=!1}else this.timeEditErrorMessage="Ensin on vaihdettava kellonaika!",setTimeout((()=>{this.timeEditErrorMessage=null}),2e3);this.timeToEdit=null},onEdit(e,i){console.log("Editing time id "+e),console.log("Index on "+i),this.editMarkedTimeID=e,this.editMarketIndex=i,this.isEditTime=!0},async handleTime(e){this.xxx=e,console.log("Time is handled "+e[0].hours+" "+e[1].hours),console.log("ID NOW HERE"+this.editMarkedTimeID);const i={hoursFrom:e[0].hours,minutesFrom:e[0].minutes,hoursTo:e[1].hours,minutesTo:e[1].minutes};this.times[this.editMarketIndex]=[{hours:e[0].hours,minutes:e[0].minutes},{hours:e[1].hours,minutes:e[1].minutes}];const t=await le.A.updateOffer(this.editMarkedTimeID,i);console.log("Offer edited: "+t),this.timeEditSuccessMessage="Aika muokattu onnistuneesti!",setTimeout((()=>{this.timeEditSuccessMessage=null}),2e3),this.isTimeToEdit=!1,this.providerTimes=this.providerTimes.filter((e=>e.id!==this.editMarkedTimeID?e:t));const s=e[0].hours>=10?e[0].hours:"0"+e[0].hours,o=e[1].hours>=10?e[1].hours:"0"+e[1].hours,r=e[0].minutes>=10?e[0].minutes:"0"+e[0].minutes,n=e[1].minutes>=10?e[1].minutes:"0"+e[1].minutes;let a=s+" : "+r+" - "+o+" : "+n;this.markers.map((e=>e.content.timeId===this.editMarkedTimeID?e.content.text=a:e)),this.isEditTime=!1,this.timeToEdit=e},setMarkedDay(e){const i=e-(new Date).getDate();this.markedDays.push(e),console.log("Day to set_ "+i)},cancelTime(){console.log("Time cancelled!")},async addAvailableDate(){const e={yearFrom:this.date[0].getFullYear(),monthFrom:this.date[0].getMonth(),dayFrom:this.date[0].getDate(),hoursFrom:this.date[0].getHours(),minutesFrom:this.date[0].getMinutes(),yearTo:this.date[1].getFullYear(),monthTo:this.date[1].getMonth(),dayTo:this.date[1].getDate(),hoursTo:this.date[1].getHours(),minutesTo:this.date[1].getMinutes()},i=await le.A.addAdditionalOffer(this.provider.id,e);console.log("Saved? "+i)},async setTimeMarkers(e,i){console.log("KERTA "+e.id);let t=null;this.contents=[],t=e.monthFrom===(new Date).getMonth()?(0,ae.A)(new Date,e.dayFrom-(new Date).getDate()):(0,ae.A)(new Date(e.yearFrom,e.monthFrom,0),e.dayFrom),console.log("MAKKED DAY "+t.getDate()),console.log("Test markers: "+new Date(e.yearFrom,e.monthFrom,e.dayFrom,e.hoursFrom,e.minutesFrom));const s=new Date(e.yearFrom,e.monthFrom,e.dayFrom,e.hoursFrom,e.minutesFrom),o=new Date(e.yearTo,e.monthTo,e.dayTo,e.hoursTo,e.minutesTo),r=e.hoursFrom>=10?e.hoursFrom:"0"+e.hoursFrom,n=e.hoursTo>=10?e.hoursTo:"0"+e.hoursTo,a=e.minutesFrom>=10?e.minutesFrom:"0"+e.minutesFrom,l=e.minutesTo>=10?e.minutesTo:"0"+e.minutesTo;let d=r+" : "+a+" - "+n+" : "+l,u={text:d,index:i,timeId:e.id,date:s,color:"red"};this.contents.push({text:d,index:i,timeId:e.id,color:"red"});e.id;console.log("Marker added "+e.id),this.markers&&(o>=new Date?this.markers=this.markers.concat({dFrom:e.dayFrom,date:t,type:"line",color:"orange",content:u}):await le.A.removeTimeOffer(this.provider.id,e.id)),console.log("Time pikkus "+this.times.length),this.times.forEach(((e,i)=>{}))},async providerData(){const e=await M.A.getProvider(this.userId);e&&(this.provider=e,this.creditLeft=((e.proTime-(new Date).getTime())/864e5).toFixed()<0?0:((e.proTime-(new Date).getTime())/864e5).toFixed(),this.providerTimes=e.timeoffer,e.isAvailable24_7||(this.isProviderCalendar=!0),this.rooms=e.room),this.times=[],this.providerTimes&&(this.providerTimes.forEach((e=>{this.initializeTime(e)})),this.providerTimes.forEach(((e,i)=>{this.setTimeMarkers(e,i)}))),console.log("Provider times pikkus "+this.providerTimes.length),console.log("Markerite pikkus "+this.markers.length)},createFilledTimes(){let e={};this.filled_days.forEach((i=>{e={day:i.day,time:i}}))},initializeTime(e){let i=[];const t=new Date(e.yearFrom,e.monthFrom,e.dayFrom,e.hoursFrom,e.minutesFrom);i.push({day:e.dayFrom,hours:e.hoursFrom,minutes:e.minutesFrom},{day:e.dayTo,hours:e.hoursTo,minutes:e.minutesTo}),t>=new Date&&this.times.push(i)},test(e){console.log("What ever: "+e)}}};const ye=(0,B.A)(ve,[["render",E]]);var Te=ye},1644:function(e,i,t){e.exports=t.p+"img/error.9510853e.png"}}]);
//# sourceMappingURL=808.db61e0a0.js.map