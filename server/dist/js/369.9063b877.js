"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[369],{4482:function(e,t,i){var o=i(6768);const s=({message:e})=>null===e?null:(0,o.bF)("div",{className:"error"},[e,(0,o.bF)("img",{className:"errorImg",alt:"error",src:i(1644)},null)]);t.A=s},4416:function(e,t,i){i.d(t,{A:function(){return P}});var o=i(6768),s=i(4232);const n={key:0},l={class:"waiting-info"},r={key:0},a={key:1},d={key:1},u={class:"pro-info"},c={style:{float:"right"}},m={key:0},h={key:1},g={key:0,colspan:"2"},k={key:1,colspan:"2"};function p(e,t,i,p,f,v){const y=(0,o.g2)("monthConverter"),b=(0,o.g2)("MDBBtn"),C=(0,o.g2)("MDBTable");return"for-recipient"===i.status?((0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",l,[t[2]||(t[2]=(0,o.eW)(" ( ")),(0,o.Lk)("b",null,(0,s.v_)(i.msg.ordered[0].yritys),1),(0,o.eW)(" ) - "+(0,s.v_)(i.msg.header),1),t[3]||(t[3]=(0,o.Lk)("br",null,null,-1)),(0,o.bF)(y,{num:i.msg.onTime[0].month},null,8,["num"]),(0,o.eW)(" "+(0,s.v_)(i.msg.onTime[0].day)+" / "+(0,s.v_)(i.msg.onTime[0].year),1),t[4]||(t[4]=(0,o.Lk)("br",null,null,-1)),(0,o.eW)(" klo "+(0,s.v_)(i.msg.onTime[0].hours)+" : "+(0,s.v_)(i.msg.onTime[0].minutes),1),t[5]||(t[5]=(0,o.Lk)("br",null,null,-1)),0===i.msg.ordered[0].range?((0,o.uX)(),(0,o.CE)("p",r,(0,s.v_)(i.msg.ordered[0].yritys)+" odottaa sinua osoitteseen: "+(0,s.v_)(i.msg.ordered[0].address),1)):((0,o.uX)(),(0,o.CE)("p",a,(0,s.v_)(i.msg.ordered[0].yritys)+" tulossa sovittuun osoitteeseen!",1)),(0,o.bF)(b,{block:"",outline:"warning",onClick:t[0]||(t[0]=e=>v.removeComplitedBookingPanel(i.msg))},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)(" (Kustub muidu kui aeg läbi saab) - Saab eemaldada kohe (ajutine lahendus) ")]))),_:1})])])):((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",u,[(0,o.Lk)("div",c,[(0,o.bF)(y,{num:i.msg.onTime[0].month},null,8,["num"]),(0,o.eW)(" "+(0,s.v_)(i.msg.onTime[0].day)+" / "+(0,s.v_)(i.msg.onTime[0].year),1),t[6]||(t[6]=(0,o.Lk)("br",null,null,-1)),(0,o.eW)(" klo "+(0,s.v_)(i.msg.onTime[0].hours>=10?i.msg.onTime[0].hours:"0"+i.msg.onTime[0].hours)+" : "+(0,s.v_)(i.msg.onTime[0].minutes>=10?i.msg.onTime[0].minutes:"0"+i.msg.onTime[0].minutes),1)]),"for-provider"===i.status?((0,o.uX)(),(0,o.Wv)(C,{key:0,borderless:"",style:{"font-size":"18px",color:"#ddd","text-align":"left",padding:"10px",width:"100%"}},{default:(0,o.k6)((()=>[(0,o.Lk)("tbody",null,[(0,o.Lk)("tr",null,[t[7]||(t[7]=(0,o.Lk)("td",null," Sovittu: ",-1)),(0,o.Lk)("td",null,(0,s.v_)(i.msg.header),1)]),(0,o.Lk)("tr",null,[t[8]||(t[8]=(0,o.Lk)("td",null," Paikka: ",-1)),0===i.provider.range?((0,o.uX)(),(0,o.CE)("td",m,(0,s.v_)(i.provider.address),1)):((0,o.uX)(),(0,o.CE)("td",h,(0,s.v_)(i.msg.address),1))]),(0,o.Lk)("tr",null,[0===i.provider.range?((0,o.uX)(),(0,o.CE)("td",g,t[9]||(t[9]=[(0,o.Lk)("p",{style:{color:"deepskyblue"}}," Asiakas tulossa! ",-1)]))):((0,o.uX)(),(0,o.CE)("td",k,t[10]||(t[10]=[(0,o.Lk)("p",{style:{color:"deepskyblue"}}," Meno asiakkaan luonna! ",-1)])))])])])),_:1})):(0,o.Q3)("",!0)])]))}var f=i(5846),v=i(6765),y={name:"Info",props:{status:String,msg:Object,provider:Object},components:{MDBBtn:f.al,MDBTable:f.EU,monthConverter:v.A},methods:{removeCompletedBookingPro(e){this.$emit("remove:proConfirmed",e)},removeComplitedBookingPanel(e){this.$emit("remove:complitedBookingPanel",e)}}},b=i(1241);const C=(0,b.A)(y,[["render",p],["__scopeId","data-v-7d10ba66"]]);var P=C},1369:function(e,t,i){i.r(t),i.d(t,{default:function(){return be}});i(4114);var o=i(6768),s=i(4232);const n={style:{position:"relative","text-align":"center"}},l={key:0,style:{border:"solid orange","padding-bottom":"20px","padding-top":"20px","margin-bottom":"10px"}},r=["onClick"],a={key:0,class:"table-dark"},d={key:1,class:"table-dark"},u={colspan:"4"},c={class:"flex flex-wrap align-items-center justify-content-center"},m={style:{display:"flex","justify-content":"right",padding:"20px"}},h={key:0,class:"spinner-border",role:"status"},g={key:1},k={key:0},p={key:1},f={style:{border:"solid green","margin-bottom":"10px",padding:"7px"}},v={style:{display:"flex","justify-content":"right",padding:"10px"}},y={style:{width:"33px"}},b={style:{width:"33px"}},C={key:0},P={key:1};function E(e,t,i,E,T,F){const D=(0,o.g2)("MDBCol"),L=(0,o.g2)("MDBRow"),_=(0,o.g2)("errorNotification"),w=(0,o.g2)("successNotification"),M=(0,o.g2)("MDBIcon"),A=(0,o.g2)("VueDatePicker"),R=(0,o.g2)("MDBBtnClose"),B=(0,o.g2)("MDBBtn"),x=(0,o.g2)("info"),K=(0,o.g2)("MDBTable"),X=(0,o.g2)("MDBContainer"),I=(0,o.g2)("editPrice"),W=(0,o.g2)("edit-profession"),z=(0,o.g2)("feedback-list"),V=(0,o.g2)("MDBInput"),$=(0,o.g2)("MDBBadge");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(L,null,{default:(0,o.k6)((()=>[(0,o.bF)(D),(0,o.bF)(D,{col:"7",style:{position:"relative"}})])),_:1}),(0,o.bF)(L,null,{default:(0,o.k6)((()=>[(0,o.bF)(D,{class:"proPanelHeader",md:"4"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",n,[(0,o.Lk)("h2",null,(0,s.v_)(E.provider.yritys),1),(0,o.Lk)("h2",null,(0,s.v_)(E.provider.address),1)])])),_:1}),i.bookingsConfirmed.length>0?((0,o.uX)(),(0,o.Wv)(D,{key:0,md:"8"})):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(X,null,{default:(0,o.k6)((()=>[(0,o.bF)(L,null,{default:(0,o.k6)((()=>[E.isProviderCalendar?((0,o.uX)(),(0,o.Wv)(D,{key:0},{default:(0,o.k6)((()=>[(0,o.bF)(X,null,{default:(0,o.k6)((()=>[(0,o.bF)(_,{message:E.timeEditErrorMessage},null,8,["message"]),(0,o.bF)(w,{message:E.timeEditSuccessMessage},null,8,["message"]),E.isTimeToEdit?((0,o.uX)(),(0,o.CE)("div",l,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(E.editArr,((e,n)=>((0,o.uX)(),(0,o.CE)("div",{key:n},[(0,o.bF)(K,{borderless:"",style:{"margin-right":"2px","font-size":"14px",color:"#ddd","text-align":"left"}},{default:(0,o.k6)((()=>[(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.time,((e,i)=>((0,o.uX)(),(0,o.CE)("tr",{key:i},[(0,o.Lk)("td",null," testin "+(0,s.v_)(e.text),1),(0,o.Lk)("td",null,[(0,o.bF)(A,{dark:"true",modelValue:E.times[e.index],"onUpdate:modelValue":[t=>E.times[e.index]=t,F.handleTime],"time-picker":"",range:""},{trigger:(0,o.k6)((()=>[(0,o.bF)(M,{class:"clickable-text"},{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.Lk)("i",{class:"fas fa-edit",size:"lg",style:{cursor:"pointer"}},null,-1)]))),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])]),(0,o.Lk)("td",null,[(0,o.bF)(M,null,{default:(0,o.k6)((()=>[(0,o.Lk)("i",{class:"far fa-save",size:"lg",onClick:t=>F.confirmEditedTime(e.timeId),style:{cursor:"pointer"}},null,8,r)])),_:2},1024)]),(0,o.Lk)("td",null,[(0,o.bF)(R,{white:"",onClick:t=>F.delTimeRange(e.timeId)},null,8,["onClick"])])])))),128)),"highlight"===e.type?((0,o.uX)(),(0,o.CE)("tr",a,[(0,o.Lk)("td",null,(0,s.v_)(e.hours>=10?e.hours:"0"+e.hours)+" : "+(0,s.v_)(e.minutes>=10?e.minutes:"0"+e.minutes),1),(0,o.Lk)("td",null,[(0,o.bF)(B,{block:"",color:"dark",onClick:t[0]||(t[0]=e=>E.isDisplayConfirmed=!E.isDisplayConfirmed)},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(E.isDisplayConfirmed?"Sulje":"Katso tiedot!"),1)])),_:1})])])):(0,o.Q3)("",!0),E.isDisplayConfirmed&&"highlight"===e.type?((0,o.uX)(),(0,o.CE)("tr",d,[(0,o.Lk)("td",u,[(0,o.Lk)("div",c,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.bookingsConfirmed,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"scalein animation-duration-3000 animation-iteration flex align-items-center justify-content-center font-bold w-full"},[t.onTime[0].day===e.day?((0,o.uX)(),(0,o.Wv)(x,{key:0,style:{width:"100%"},status:"for-provider",msg:t,provider:E.provider,"onRemove:proConfirmed":F.handleRemoveProConfirmed},null,8,["msg","provider","onRemove:proConfirmed"])):(0,o.Q3)("",!0)])))),128))])])])):(0,o.Q3)("",!0)])])),_:2},1024)])))),128)),(0,o.Lk)("div",m,[(0,o.Lk)("span",{style:{color:"greenyellow",cursor:"pointer"},onClick:t[1]||(t[1]=e=>E.isTimeToEdit=!1)},"Valmis")])])):(0,o.Q3)("",!0),t[10]||(t[10]=(0,o.Lk)("div",null,null,-1)),(0,o.Lk)("div",null,[(0,o.bF)(A,{dark:"true",class:(0,s.C4)({datepicker_opacity:e.isMapSearchActive}),style:{"margin-bottom":"50px","justify-content":"center"},onInternalModelChange:F.handleInternal,range:"","auto-range":"0",modelValue:E.date,"onUpdate:modelValue":[t[2]||(t[2]=e=>E.date=e),F.handleDate],inline:"",locale:"fi",selectText:"Valitse","min-date":new Date,markers:E.markers,highlight:T.filled,"teleport-center":"","month-change-on-scroll":!1},null,8,["class","onInternalModelChange","modelValue","onUpdate:modelValue","min-date","markers","highlight"])])])),_:1})])),_:1})):(0,o.Q3)("",!0),E.isEditPrice?((0,o.uX)(),(0,o.Wv)(D,{key:1},{default:(0,o.k6)((()=>[(0,o.bF)(I,{"onCancel:editPrice":F.cancelEditPrice,"onSave:editedPrice":F.saveEditedPrice},null,8,["onCancel:editPrice","onSave:editedPrice"])])),_:1})):E.isEditProfession?((0,o.uX)(),(0,o.Wv)(D,{key:2},{default:(0,o.k6)((()=>[(0,o.bF)(W,{provider:E.provider,onAdditionalProfession:F.handleAddProfession,onEditProfession:F.handleEditProfession,onRemoveProfession:F.handleRemoveProfession,"onCancel:editProfession":F.handleCancelEditProfession},null,8,["provider","onAdditionalProfession","onEditProfession","onRemoveProfession","onCancel:editProfession"])])),_:1})):E.isFeedback?((0,o.uX)(),(0,o.Wv)(D,{key:3},{default:(0,o.k6)((()=>[(0,o.bF)(z,{feedback:E.provider.feedback,onCloseFeedbackList:F.handleCloseFeedbackList},null,8,["feedback","onCloseFeedbackList"])])),_:1})):((0,o.uX)(),(0,o.Wv)(D,{key:4},{default:(0,o.k6)((()=>[E.provider.profession?((0,o.uX)(),(0,o.CE)("div",g,[(0,o.bF)(_,{message:E.errorMessage},null,8,["message"]),(0,o.bF)(w,{message:E.successMessage},null,8,["message"]),(0,o.bF)(K,{borderless:"",style:{position:"relative",color:"#ddd","font-size":"18px","text-align":"left"}},{default:(0,o.k6)((()=>[(0,o.Lk)("tbody",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("td",null,(0,s.v_)(0===E.provider.range?"Tarjoan palvelua paikalla":"Palvelun säde: "+E.provider.range+" km"),1),E.isEditRange?((0,o.uX)(),(0,o.CE)("td",p,[(0,o.Lk)("div",f,[(0,o.Lk)("div",v,[(0,o.bF)(R,{white:"",onClick:t[4]||(t[4]=e=>E.isEditRange=!1)})]),(0,o.Lk)("div",null,[(0,o.bF)(V,{white:"",label:"Säde - km",modelValue:E.range,"onUpdate:modelValue":t[5]||(t[5]=e=>E.range=e),size:"lg",type:"number"},null,8,["modelValue"]),t[13]||(t[13]=(0,o.Lk)("br",null,null,-1))]),E.range.length>0?((0,o.uX)(),(0,o.Wv)(B,{key:0,outline:"info",block:"",size:"lg",onClick:F.saveNewRange},{default:(0,o.k6)((()=>t[14]||(t[14]=[(0,o.eW)("Tallenna uusi säde")]))),_:1},8,["onClick"])):(0,o.Q3)("",!0)])])):((0,o.uX)(),(0,o.CE)("td",k,[(0,o.bF)(B,{outline:"info",block:"",size:"lg",onClick:t[3]||(t[3]=e=>E.isEditRange=!0)},{default:(0,o.k6)((()=>t[12]||(t[12]=[(0,o.eW)("Muokkaa toimintaalueetta")]))),_:1})]))]),(0,o.Lk)("tr",null,[t[16]||(t[16]=(0,o.Lk)("td",null," Palaute ",-1)),(0,o.Lk)("td",null,[(0,o.bF)(L,{class:"rating"},{default:(0,o.k6)((()=>[(0,o.bF)(D,null,{default:(0,o.k6)((()=>[(0,o.bF)(M,{style:{padding:"10px",color:"limegreen"},i:"",class:"far fa-thumbs-up",size:"2x"}),(0,o.bF)($,{color:"success",class:"translate-middle p-1",pill:"",notification:""},{default:(0,o.k6)((()=>[(0,o.Lk)("h2",y,(0,s.v_)(E.provider.rating.positive),1)])),_:1})])),_:1}),(0,o.bF)(D,null,{default:(0,o.k6)((()=>[(0,o.bF)(M,{style:{padding:"10px",color:"palevioletred"},i:"",class:"far fa-thumbs-down",size:"2x"}),(0,o.bF)($,{color:"danger",class:"translate-middle p-1",pill:"",notification:""},{default:(0,o.k6)((()=>[(0,o.Lk)("h2",b,(0,s.v_)(E.provider.rating.negative),1)])),_:1})])),_:1}),(0,o.bF)(D,null,{default:(0,o.k6)((()=>[(0,o.bF)(B,{block:"",color:"primary",onClick:F.getFeedbackListData},{default:(0,o.k6)((()=>t[15]||(t[15]=[(0,o.eW)("Katso oma arvostelua")]))),_:1},8,["onClick"])])),_:1})])),_:1})])]),E.isProviderCalendar?((0,o.uX)(),(0,o.CE)("tr",P,[t[20]||(t[20]=(0,o.Lk)("td",null," Päätän, koska tarjoan palvelua ",-1)),(0,o.Lk)("td",null,[(0,o.bF)(B,{outline:"info",block:"",size:"lg",onClick:t[7]||(t[7]=e=>E.isProviderCalendar=!1)},{default:(0,o.k6)((()=>t[19]||(t[19]=[(0,o.eW)("Vaihda 24/7")]))),_:1})])])):((0,o.uX)(),(0,o.CE)("tr",C,[t[18]||(t[18]=(0,o.Lk)("td",null," Tarjoan palvelua 24/7 ",-1)),(0,o.Lk)("td",null,[(0,o.bF)(B,{outline:"info",size:"lg",onClick:t[6]||(t[6]=e=>E.isProviderCalendar=!0)},{default:(0,o.k6)((()=>t[17]||(t[17]=[(0,o.eW)("Vaihda kalenteriin")]))),_:1})])])),(0,o.Lk)("tr",null,[(0,o.Lk)("td",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(E.provider.profession,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t},(0,s.v_)(e),1)))),128))]),(0,o.Lk)("td",null,[(0,o.bF)(B,{outline:"info",block:"",size:"lg",onClick:F.editProfessionPro},{default:(0,o.k6)((()=>t[21]||(t[21]=[(0,o.eW)("Muokkaa osaamista")]))),_:1},8,["onClick"])])]),(0,o.Lk)("tr",null,[(0,o.Lk)("td",null,(0,s.v_)(E.provider.priceByHour)+" Euroa ",1),(0,o.Lk)("td",null,[(0,o.bF)(B,{outline:"info",block:"",size:"lg",onClick:F.editPrice},{default:(0,o.k6)((()=>t[22]||(t[22]=[(0,o.eW)("Muokkaa tuntihinta")]))),_:1},8,["onClick"])])]),(0,o.Lk)("tr",null,[t[24]||(t[24]=(0,o.Lk)("td",null," Katso kartalta ",-1)),(0,o.Lk)("td",null,[(0,o.bF)(B,{outline:"info",block:"",size:"lg",onClick:t[8]||(t[8]=e=>this.$router.push("/pro-public-search"))},{default:(0,o.k6)((()=>t[23]||(t[23]=[(0,o.eW)("Kartalta")]))),_:1})])])])])),_:1})])):((0,o.uX)(),(0,o.CE)("div",h,t[11]||(t[11]=[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...",-1)])))])),_:1}))])),_:1}),(0,o.eW)(" ---------------------------- editArr "+(0,s.v_)(E.editArr)+" ------------------- times "+(0,s.v_)(E.times),1)])),_:1})])}var T=i(8068),F=i(1769);function D(e,t,i,s,n,l){const r=(0,o.g2)("MDBInput"),a=(0,o.g2)("MDBBtn"),d=(0,o.g2)("MDBContainer");return(0,o.uX)(),(0,o.Wv)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(r,{label:"Uusi tuntihinta",size:"lg",white:"",modelValue:s.price,"onUpdate:modelValue":t[0]||(t[0]=e=>s.price=e),wrapperClass:"mb-4"},null,8,["modelValue"]),(0,o.bF)(a,{outline:"success",block:"",size:"lg",onClick:l.handleEditPrice},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("Kinnita")]))),_:1},8,["onClick"]),(0,o.bF)(a,{outline:"danger",block:"",size:"lg",onClick:l.cancelEdit},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("Poistu")]))),_:1},8,["onClick"])])),_:1})}var L=i(5846),_=i(144),w={name:"edit-price",setup(){const e=(0,_.KR)(null);return{price:e}},components:{MDBContainer:L.Dj,MDBBtn:L.al,MDBInput:L.gk},data(){return{errorMessage:null}},methods:{handleEditPrice(){this.$emit("save:editedPrice",this.price)},cancelEdit(){this.$emit("cancel:editPrice",!1),this.errorMessage="Here is some error!"}}},M=i(1241);const A=(0,M.A)(w,[["render",D]]);var R=A,B=i(5130);const x={key:0},K={style:{"margin-bottom":"20px"}},X={value:"slotProps"},I={key:0},W={key:1},z={style:{},class:"flex align-items-center"},V={key:1},$={key:2,style:{"margin-bottom":"20px"}},N={value:"slotProps"},S={key:0},O={key:1},j={style:{},class:"flex align-items-center"};function U(e,t,i,n,l,r){const a=(0,o.g2)("MDBIcon"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("MDBTable"),c=(0,o.g2)("MDBBtnClose"),m=(0,o.g2)("MDBBtn"),h=(0,o.g2)("MDBContainer");return(0,o.uX)(),(0,o.Wv)(h,null,{default:(0,o.k6)((()=>[(0,o.bF)(a,{style:{float:"right",cursor:"pointer"},onClick:r.cancelEditProfession,size:"3x"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.Lk)("i",{class:"fas fa-undo"},null,-1)]))),_:1},8,["onClick"]),i.provider&&1===i.provider.profession.length?((0,o.uX)(),(0,o.CE)("div",x,[(0,o.bF)(u,{borderless:"",style:{"font-size":"18px","text-align":"left"}},{default:(0,o.k6)((()=>[(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.provider.profession,((i,l)=>((0,o.uX)(),(0,o.CE)("tr",{key:l},[(0,o.Lk)("td",null,(0,s.v_)(i),1),(0,o.Lk)("td",null,[(0,o.Lk)("form",{onSubmit:t[1]||(t[1]=(0,B.D$)(((...t)=>e.submit&&e.submit(...t)),["prevent"]))},[(0,o.Lk)("div",K,[(0,o.bF)(d,{onChange:e=>r.changeCurrentProfession(l),modelValue:n.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selected=e),options:n.proList,filter:"",optionLabel:"label",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"Valitse ammattilainen",class:"w-full md:w-100rem"},{optiongroup:(0,o.k6)((e=>[(0,o.Lk)("div",z,[(0,o.Lk)("div",null,(0,s.v_)(e.option.label),1)])])),default:(0,o.k6)((()=>[(0,o.Lk)("template",X,[e.slotProps.value?((0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("div",null,(0,s.v_)(e.slotProps.value.label),1)])):((0,o.uX)(),(0,o.CE)("span",W,(0,s.v_)(e.slotProps.placeholder),1))])])),_:2},1032,["onChange","modelValue","options"])])],32)])])))),128))])])),_:1})])):((0,o.uX)(),(0,o.CE)("div",V,[(0,o.bF)(u,{borderless:"",style:{"font-size":"18px","text-align":"left"}},{default:(0,o.k6)((()=>[(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.provider.profession,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",null,(0,s.v_)(e),1),(0,o.Lk)("td",null,[(0,o.bF)(c,{white:"",onClick:i=>r.removeProfession(t,e)},null,8,["onClick"])])])))),128))])])),_:1})])),(0,o.bF)(m,{block:"",color:"primary",size:"lg",onClick:r.addProfessionPressed},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)("Lisää ammatti")]))),_:1},8,["onClick"]),n.isAddProfession?((0,o.uX)(),(0,o.CE)("div",$,[(0,o.bF)(d,{onChange:r.changeNewProfession,modelValue:n.selectedNewProfession,"onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedNewProfession=e),options:n.proList,filter:"",optionLabel:"label",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"Valitse ammattilainen",class:"w-full md:w-100rem"},{optiongroup:(0,o.k6)((e=>[(0,o.Lk)("div",j,[(0,o.Lk)("div",null,(0,s.v_)(e.option.label),1)])])),default:(0,o.k6)((()=>[(0,o.Lk)("template",N,[e.slotProps.value?((0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("div",null,(0,s.v_)(e.slotProps.value.label),1)])):((0,o.uX)(),(0,o.CE)("span",O,(0,s.v_)(e.slotProps.placeholder),1))])])),_:1},8,["onChange","modelValue","options"])])):(0,o.Q3)("",!0),n.additionalProfession.length>2?((0,o.uX)(),(0,o.Wv)(m,{key:3,outline:"success",block:"",size:"lg",onClick:e.handleAddAdditionalProfession},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("Kinnita uus amet")]))),_:1},8,["onClick"])):(0,o.Q3)("",!0),(0,o.bF)(m,{outline:"danger",block:"",size:"lg",style:{"margin-top":"20px"},onClick:r.cancelEditProfession},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Poistu")]))),_:1},8,["onClick"])])),_:1})}var H=i(3076),Q=i(2436),G={name:"editProfession",props:{provider:Object},components:{Dropdown:Q.A,MDBContainer:L.Dj,MDBBtn:L.al,MDBTable:L.EU,MDBIcon:L.$u,MDBBtnClose:L.uR},setup(){const e=(0,_.KR)(""),t=(0,_.KR)(null),i=(0,_.KR)(null),o=(0,_.KR)(!1),s=(0,_.KR)(""),n=(0,_.KR)(H.A);return{profession:e,selected:t,selectedNewProfession:i,isAddProfession:o,additionalProfession:s,proList:n}},methods:{changeCurrentProfession(e){console.log("Selected xx "+e+" "+this.selected.label),this.$emit("editProfession",e,this.selected.label),this.selected=null},changeNewProfession(){console.log("New new "+this.selectedNewProfession.label),this.isAddProfession=!1,this.$emit("additionalProfession",this.selectedNewProfession.label),this.selectedNewProfession=null},addProfessionPressed(){this.selectedNewProfession="",this.isAddProfession=!0},addNewProfession(){this.selectedNewProfession="";const e=document.getElementById("new_profession");e.addEventListener("change",(e=>{this.isAddProfession=!1,this.$emit("additionalProfession",e.target.value)})),this.selectedNewProfession=""},editProfession(e){this.isAddProfession=!1;const t=document.getElementById("edit_profession");t.addEventListener("change",(t=>{this.$emit("editProfession",e,t.target.value)})),this.selected=""},removeProfession(e,t){this.isAddProfession=!1,this.$emit("removeProfession",e,t),this.selected=null},cancelEditProfession(){this.$emit("cancel:editProfession")}}};const Y=(0,M.A)(G,[["render",U]]);var J=Y,q=i(4482),Z=i(7337),ee=i(4416),te=i(1690),ie=i(7533);const oe=i(6425),se="/api/offers",ne=async()=>{const e=await oe.get(se);return e.data},le=async e=>{const t=await oe.post(`${se}`,e);return t.data},re=async(e,t)=>{const i=await oe.post(`${se}/${e}`,t);return i.data},ae=async(e,t)=>{const i=await oe.delete(`${se}/${e}/timeoffer/${t}`);return i.data},de=async(e,t)=>{const i=await oe.put(`${se}/${e}`,t);return i.data};var ue={getOffers:ne,addFirstOffer:le,addAdditionalOffer:re,removeTimeOffer:ae,updateOffer:de};const ce={style:{border:"1px solid #999",padding:"10px"}},me={style:{"margin-bottom":"10px"}};function he(e,t,i,n,l,r){return(0,o.uX)(),(0,o.CE)("div",ce,[(0,o.Lk)("h4",{style:{"text-align":"right",cursor:"pointer",color:"green"},onClick:t[0]||(t[0]=t=>e.$emit("closeFeedbackList"))},"Valmis"),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.feedback,(e=>((0,o.uX)(),(0,o.CE)("div",{style:{"text-align":"left"},key:e.id},[(0,o.Lk)("h2",me,(0,s.v_)(e.pos),1)])))),128)),(0,o.Lk)("h3",null,(0,s.v_)(i.feedback.length>0?i.feedback.pos:"Ei arvostelua vielä!"),1)])}var ge={name:"FeedbackList",props:{feedback:Array}};const ke=(0,M.A)(ge,[["render",he]]);var pe=ke,fe=i(222),ve={name:"Provider-panel",props:{userIsProvider:Object,bookings:Array,filled_days:Array,bookingsConfirmed:Array},components:{Gallery:fe["default"],FeedbackList:pe,info:ee.A,errorNotification:q.A,successNotification:Z.A,editPrice:R,editProfession:J,MDBContainer:L.Dj,MDBIcon:L.$u,MDBRow:L.gU,MDBCol:L.m6,MDBTable:L.EU,MDBBtn:L.al,MDBBtnClose:L.uR,MDBBadge:L.nf,MDBInput:L.gk,VueDatePicker:T.A},data(){const e=()=>{(0,ie.A)(new Date,1)};return{selfProvider:this.userIsProvider,confirmedBookings:[],testi:{},un:"",ri:"",rooms:[],close:!0,isGallery:!1,proImages:[],filled:[],filledTimes:[],watchEffect:e}},setup(){const e=(0,_.KR)(!1),t=(0,_.KR)(null),i=(0,_.KR)(""),s=(0,_.KR)(null),n=(0,_.KR)(null),l=(0,_.KR)(!1),r=(0,_.KR)(!1),a=(0,_.KR)(!1),d=(0,_.KR)(!1),u=(0,_.KR)(!1),c=(0,_.KR)(!1),m=(0,_.KR)(null),h=(0,_.KR)(null),g=(0,_.KR)(null),k=(0,_.KR)([]),p=(0,_.KR)([]),f=(0,_.KR)(!1),v=(0,_.KR)([]),y=(0,_.KR)({}),b=(0,_.KR)(!1),C=(0,_.KR)([]),P=(0,_.KR)({}),E=(0,_.KR)(""),T=(0,_.KR)({}),F=(0,_.KR)(null),D=(0,_.KR)([]),L=(0,_.KR)(null),w=(0,_.KR)(null),M=(0,_.KR)(null),A=(0,_.KR)(null),R=(0,_.KR)(null),B=(0,_.KR)({}),x=(0,_.KR)(!1),K=(0,_.KR)([]),X=(0,_.KR)(null),I=(0,_.KR)(!1),W=(0,_.KR)([(0,ie.A)(new Date,1),(0,ie.A)(new Date,2),(0,ie.A)(new Date,7)]);return{isProviderCalendar:e,testii:t,weekDay:i,timerange:s,datee:n,range:l,isRangeSelected:r,isEditRange:a,isEditPrice:d,isFeedback:u,isEditProfession:c,clearTime:m,dateTest:h,date:g,markers:k,contents:p,isContents:f,markedDays:v,time:y,isConfirmTime:b,times:C,datetime:P,userId:E,provider:T,creditLeft:F,providerTimes:D,errorMessage:L,timeEditSuccessMessage:M,timeEditErrorMessage:A,oblicationInfoMessage:R,successMessage:w,editTime:B,isTimeToEdit:x,editArr:K,timeToEdit:X,watchEffect:o.nT,highlightedDates:W,isDisplayConfirmed:I}},beforeMount(){const e=window.localStorage.getItem("loggedAppUser");if(e){const t=JSON.parse(e);this.userId=t.id,console.log("User token in provider: "+t.token),this.providerData()}else this.$router.push("/")},methods:{goToMap(){this.$router.push("/provider-public")},getDate(){const e=(new Date).getTime(),t=(new Date).getTime()+6048e5,i=864e5;console.log("and now "+e),console.log("week_ms added  is: "+t);const o=(t-e)/i;console.log("Days between - "+o)},saveNewRange(){this.isEditRange=!1,F.A.editRange(this.provider.id,{range:this.range}),this.provider.range=this.range},getIt(){let e="aaa",t="room";te.A.auth={username:e,room:t},te.A.connect();let i="Oopersama";te.A.emit("updateRoom",i)},joinAllRooms(){const e=["111","222"];te.A.emit("joinAllClientRooms",e)},handleRemoveProConfirmed(e){console.log("Info closed here?? "+e.header),this.$emit("removeProBookingConfirmed",e),this.confirmedBookings=this.confirmedBookings.filter((t=>t.id!==e.id)),this.successMessage="Siit saab kustutada selle teavituse soovi korral!",setTimeout((()=>{this.successMessage=null}),3e3)},socketResetTest(){te.A.disconnect(),te.A.connect()},openChatPanel(e){e.preventDefault(),console.log("Will chat open...");const t=localStorage.getItem("sessionID");t&&(this.usernameAlreadySelected=!0,te.A.auth={sessionID:t},te.A.connect()),te.A.on("session",(({sessionID:e,userID:t,roomName:i})=>{te.A.auth={sessionID:e},localStorage.setItem("sessionID",e),te.A.userID=t,te.A.roomName=i}))},handleInternal(e){this.editArr=[];let t=[];if(this.editTime={},this.isTimeToEdit=!1,e){console.log("get date "+(new Date).getDate());let i=e.toString().substring(8,10),o=parseInt(i);this.weekDay=e.toString().substring(0,3);let s={};this.confirmedBookings.forEach((e=>{})),console.log("length "+this.bookingsConfirmed.length),this.filled_days.forEach((e=>{o===e.day?(console.log("On"),this.isTimeToEdit=!0,t.push({type:"highlight",day:o,weekDay:this.weekDay,hours:e.hours,minutes:e.minutes})):console.log("Ei ole")})),this.markers.forEach((e=>{e.date.getDate()===o&&(this.isTimeToEdit=!0,s={type:"marker",day:o,weekDay:this.weekDay,time:e.content})})),t.push(s),this.editArr=this.editArr.concat(t)}},editPrice(){this.isEditPrice=!0},async saveEditedPrice(e){const t={priceByHour:e},i=await F.A.updateProvider(this.provider.id,t);i&&(this.provider.priceByHour=e,console.log("Price: "+this.provider.priceByHour),this.isEditPrice=!1,this.successMessage="Tuntihinta on muokattu!",setTimeout((()=>{this.successMessage=null}),2e3))},cancelEditPrice(e){this.isEditPrice=e},getFeedbackListData(){this.isFeedback=!0},handleCloseFeedbackList(){this.isFeedback=!1},editProfessionPro(){this.isEditProfession=!0},handleEditProfession(e,t){console.log("Profession is "+t+" and index "+e),this.provider.profession[0]=t,F.A.editProfession(this.provider.id,{index:e,pro:t})},handleAddProfession(e){console.log("Uus amet on "+e),F.A.additionalProfession(this.provider.id,{profession:e}),this.provider.profession.includes(e)||this.provider.profession.push(e)},handleRemoveProfession(e,t){console.log("Profession index is "+e+" and profession is "+t),F.A.removeProfession(this.provider.id,{profession:t}),this.provider.profession.splice(e,1)},handleCancelEditProfession(){this.isEditProfession=!1},removeExpiredDateTime(){this.providerTimes.forEach((e=>{let t=e.yearFrom,i=e.monthFrom,o=e.dayFrom,s=e.hoursFrom,n=e.minutesFrom;new Date(t,i,o,s,n).getTime()<(new Date).getTime()&&this.delTimeRange(e.id)}))},async editTimeTest(){const e={hoursFrom:1};await ue.updateOffer("6431407f53469b1f48eeb2f0",e)},updateTimesAndMarkers(){this.providerTimes.forEach((e=>{console.log("Provider times: "+e.hoursFrom),this.setTimeMarkers(e)})),this.providerTimes.forEach((e=>{this.initializeTime(e)}))},async delTimeRange(e){console.log("Id argumendina? "+e)},onTimePickerOpen(){console.log("Timepicker opened")},alertFn(e){console.log("Opened "+e)},onClose(){console.log("On close...")},async handleDate(){console.log("Date handled!");const e={yearFrom:this.date[0].getFullYear(),monthFrom:this.date[0].getMonth(),dayFrom:this.date[0].getDate(),hoursFrom:this.date[0].getHours(),minutesFrom:this.date[0].getMinutes(),yearTo:this.date[1].getFullYear(),monthTo:this.date[1].getMonth(),dayTo:this.date[1].getDate(),hoursTo:this.date[1].getHours(),minutesTo:this.date[1].getMinutes()},t=await ue.addAdditionalOffer(this.provider.id,e);console.log("Provider times "+this.providerTimes),this.providerTimes=this.providerTimes.concat(t),this.times=[],this.markers=[],this.editArr=this.editArr.filter((e=>"highlight"===e.type)),this.providerTimes.forEach((e=>{this.initializeTime(e)})),this.providerTimes.forEach((e=>{this.setTimeMarkers(e)}));let i={};this.markers.forEach((e=>{e.date.getDate()===t.dayFrom&&(this.isTimeToEdit=!0,i={day:t.dayFrom,weekDay:this.weekDay,time:e.content})})),this.editArr.push(i)},async confirmEditedTime(e){let t;console.log("Confirmed??? "+e+" hours edited: "+this.t);const i=this.timeToEdit;if(i){t={hoursFrom:i[0].hours,minutesFrom:i[0].minutes,hoursTo:i[1].hours,minutesTo:i[1].minutes};const o=await ue.updateOffer(e,t);console.log("Offer edited: "+o),this.timeEditSuccessMessage="Aika muokattu onnistuneesti!",this.providerTimes=this.providerTimes.map((t=>t.id!==e?t:o)),this.testii=o,setTimeout((()=>{this.timeEditSuccessMessage=null}),2e3),this.isTimeToEdit=!1}else this.timeEditErrorMessage="Ensin on vaihdettava kellonaika!",setTimeout((()=>{this.timeEditErrorMessage=null}),2e3);this.timeToEdit=null},handleTime(e){this.timeToEdit=e},setMarkedDay(e){const t=e-(new Date).getDate();this.markedDays.push(e),console.log("Day to set_ "+t)},cancelTime(){console.log("Time cancelled!")},async addAvailableDate(){const e={yearFrom:this.date[0].getFullYear(),monthFrom:this.date[0].getMonth(),dayFrom:this.date[0].getDate(),hoursFrom:this.date[0].getHours(),minutesFrom:this.date[0].getMinutes(),yearTo:this.date[1].getFullYear(),monthTo:this.date[1].getMonth(),dayTo:this.date[1].getDate(),hoursTo:this.date[1].getHours(),minutesTo:this.date[1].getMinutes()},t=await ue.addAdditionalOffer(this.provider.id,e);console.log("Saved? "+t)},setTimeMarkers(e){let t=null;this.contents=[],t=e.monthFrom===(new Date).getMonth()?(0,ie.A)(new Date,e.dayFrom-(new Date).getDate()):(0,ie.A)(new Date(e.yearFrom,e.monthFrom,0),e.dayFrom),console.log("Test markers: "+new Date(e.yearFrom,e.monthFrom,e.dayFrom)),this.times.forEach(((i,o)=>{if(i[0].day===e.dayFrom){let s=i[0].hours+" : "+i[0].minutes+" - "+i[1].hours+" : "+i[1].minutes;this.contents.push({text:s,index:o,timeId:this.providerTimes[o].id,color:"red"}),this.markers=this.markers.concat({dFrom:e.dayFrom,date:t,type:"line",color:"orange",content:this.contents})}}))},async providerData(){const e=await F.A.getProvider(this.userId);this.filled_days.forEach((e=>{this.filled=[...this.filled,(0,ie.A)(new Date,e.day-(new Date).getDate())]})),e&&(this.provider=e,this.creditLeft=((e.proTime-(new Date).getTime())/864e5).toFixed()<0?0:((e.proTime-(new Date).getTime())/864e5).toFixed(),e.reference.forEach(((e,t)=>{this.proImages=[...this.proImages,{id:t,size:"1400-933",src:i(3906)(`./${e.name}`),thumb:i(3906)(`./${e.name}`),subHtml:'<div class="lightGallery-captions">\n\n\n          </div>"'}]})),e.isAvailable24_7||(this.isProviderCalendar=!0),console.log("Provider rooms are: "+e.room.map((e=>e))),this.rooms=e.room),this.times=[],this.providerTimes&&(this.providerTimes.forEach((e=>{this.initializeTime(e)})),this.removeExpiredDateTime(),this.providerTimes.forEach((e=>{this.setTimeMarkers(e)})))},createFilledTimes(){let e={};this.filled_days.forEach((t=>{e={day:t.day,time:t}}))},initializeTime(e){let t=[];t.push({day:e.dayFrom,hours:e.hoursFrom,minutes:e.minutesFrom},{day:e.dayTo,hours:e.hoursTo,minutes:e.minutesTo}),this.times.push(t)},test(e){console.log("What ever: "+e)}}};const ye=(0,M.A)(ve,[["render",E]]);var be=ye},1644:function(e,t,i){e.exports=i.p+"img/error.9510853e.png"}}]);
//# sourceMappingURL=369.9063b877.js.map