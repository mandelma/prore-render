"use strict";(self["webpackChunkprore_mongo"]=self["webpackChunkprore_mongo"]||[]).push([[89],{3998:function(e,l){const a=[{label:"Automekaanikko"},{label:"Automaalari"},{label:"Automyyjä"},{label:"Katsastaja"},{label:"Varaosamyyjä"}],t=[{label:"Elintarvikekemisti"},{label:"Elintarviketyöntekijä"},{label:"Hankintapäällikkö, meijeriteollisuus"},{label:"Kondiittori"},{label:"Leipomotyöntekijä"},{label:"Leipuri"},{label:"Lihanleikkaaja"},{label:"Lihavalmistetyöntekijä"},{label:"Mylläri"},{label:"Elintarvikepakkaaja"},{label:"Juomatyöntekijä"},{label:"Säilyketyöntekijä"},{label:"Teurastaja"},{label:"Elintarviketuotannon työnjohtaja"},{label:"Tuotannonsuunnittelija, elintarviketeollisuus"},{label:"Tuotantopäällikkö, meijeriteollisuus"},{label:"Meijeristi, meijerituotteiden valmistaja"}],i=[{label:"Automaatioasentaja"},{label:"Automaatioinsinööri"},{label:"Biotekniikan insinööri"},{label:"Elektroniikka-asentaja"},{label:"Elektroniikkainsinööri"},{label:"Energianeuvoja"},{label:"Energiatekniikan insinööri"},{label:"Hakkurinkuljettaja"},{label:"Huoltopäällikkö, kylmäala"},{label:"Kaukolämpöasentaja"},{label:"Kaukolämpöinsinööri"},{label:"Insinööri, kemiantekniikka"},{label:"Kemisti"},{label:"Kunnossapitoinsinööri"},{label:"Kylmäsuunnittelija"},{label:"Käyttöinsinööri"},{label:"LVI-asentaja"},{label:"LVI-insinööri"},{label:"Laborantti"},{label:"Lämpöyrittäjä"},{label:"Metsuri"},{label:"Metsäkoneenkuljettaja"},{label:"Metsätalouden harjoittaja"},{label:"Metsätalousinsinööri"},{label:"Sähköasentaja"},{label:"Sähköinsinööri"},{label:"Sähkömestari, meriliikenne"},{label:"Sähköverkostoasentaja"},{label:"Tuulivoimainsinööri"},{label:"Voimalaitoksen käyttäjä"},{label:"Voimalaitospäällikkö"},{label:"Huoltoteknikko"}],o=[{group:"Autoala",options:a},{group:"Elintarviketeollisuus",options:t},{group:"Energia-ala",options:i}];l.Z=o},5089:function(e,l,a){a.r(l),a.d(l,{default:function(){return T}});a(7658);var t=a(3396),i=a(7139),o=a(9242);const n={id:"brow"},s=["label"],r=["value"],d=["value"],u=(0,t._)("h3",{style:{"margin-top":"10px"}},"Täytä alla oleva tilaus",-1),g=(0,t._)("h3",{style:{"margin-top":"20px","margin-bottom":"20px"}},"--- TAI ---",-1),p={key:0,style:{"text-align":"left",color:"deepskyblue"}},c={class:"ui form"},m={class:"field"},k=(0,t._)("option",{value:""},"Valitse ammattilainen",-1),h=["label"],b=["value"],w=["value"],y=(0,t._)("option",{value:""},"Valitse ammattilainen",-1),v=["label"],f=["value"],D=["value"],j=(0,t._)("p",{style:{"text-align":"left"}},"Missä ajalla haluaisit ammattilaista?",-1),I={style:{color:"#fff"}},_=["src"],M={key:1,for:"file-upload",class:"custom-file-upload"},x={key:0},B={key:1},C={class:"message-counter"};function H(e,l,a,H,V,S){const F=(0,t.up)("MDBBtnClose"),U=(0,t.up)("MDBInput"),W=(0,t.up)("MDBCol"),z=(0,t.up)("MDBBtn"),E=(0,t.up)("MDBRow"),K=(0,t.up)("VueDatePicker"),A=(0,t.up)("MDBTextarea"),L=(0,t.up)("MDBContainer");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(L,{style:{"padding-top":"70px",position:"relative"}},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{white:"",class:"close_btn",onClick:l[0]||(l[0]=l=>e.$router.go(-1))}),(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,{white:"",size:"lg",list:"brow",label:"Valitse ammattilainen"}),(0,t._)("datalist",n,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(V.prodata,(e=>((0,t.wg)(),(0,t.iD)(t.HY,null,[e.group?((0,t.wg)(),(0,t.iD)("optgroup",{style:{"background-color":"darkgrey"},label:e.group,key:e.group},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.options,(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.label,key:e.label},(0,i.zw)(e.label),9,r)))),128))],8,s)):((0,t.wg)(),(0,t.iD)("option",{value:e,key:e.value},(0,i.zw)(e.label),9,d))],64)))),256))]),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[u])),_:1}),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[g])),_:1}),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(z,{outline:"success",block:"",size:"lg",onClick:l[1]||(l[1]=e=>this.$router.push("/recipient-public")),style:{"margin-top":"5px","margin-bottom":"20px"}},{default:(0,t.w5)((()=>[(0,t.Uk)("Etsi kartalta")])),_:1})])),_:1})])),_:1}),(0,t._)("form",{class:"g-3 needs-validation",novalidate:"",onSubmit:l[10]||(l[10]=(0,o.iM)(((...e)=>S.checkForm&&S.checkForm(...e)),["prevent"]))},[(0,t.Wm)(U,{counter:"",maxlength:30,label:"Anna otsikko",white:"",modelValue:V.header,"onUpdate:modelValue":l[2]||(l[2]=e=>V.header=e),id:"header",size:"lg",invalidFeedback:"Ole hyvä ja kirjoita otsikko.",validFeedback:"Ok!",required:"",wrapperClass:"mb-4"},null,8,["modelValue"]),a.recipientBookings.length>0?((0,t.wg)(),(0,t.iD)("p",p,"Osoite: "+(0,i.zw)(a.recipientBookings[0].address),1)):(0,t.kq)("",!0),(0,t.Wm)(U,{label:a.recipientBookings.length>0?"Anna toinen osoitteesi":"Anna osoite",white:"",modelValue:V.address,"onUpdate:modelValue":l[3]||(l[3]=e=>V.address=e),id:"osoite",size:"lg",invalidFeedback:"Ole hyvä ja kirjoita osoite.",validFeedback:"Ok!",required:"",wrapperClass:"mb-4"},null,8,["label","modelValue"]),(0,t._)("div",c,[(0,t._)("div",m,[H.isNotSelected?(0,t.wy)(((0,t.wg)(),(0,t.iD)("select",{key:0,id:"noSelected",style:{"border-color":"red",color:"red","margin-bottom":"20px","background-color":"#221a16"},"onUpdate:modelValue":l[4]||(l[4]=e=>V.professional=e),onChange:l[5]||(l[5]=e=>H.isNotSelected=!1)},[k,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(V.prodata,(e=>((0,t.wg)(),(0,t.iD)(t.HY,null,[e.group?((0,t.wg)(),(0,t.iD)("optgroup",{label:e.group,key:e.group},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.options,(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.label,key:e.label},(0,i.zw)(e.label),9,b)))),128))],8,h)):((0,t.wg)(),(0,t.iD)("option",{value:e,key:e.value},(0,i.zw)(e.label),9,w))],64)))),256))],544)),[[o.bM,V.professional]]):(0,t.wy)(((0,t.wg)(),(0,t.iD)("select",{key:1,"onUpdate:modelValue":l[6]||(l[6]=e=>V.professional=e),style:{"margin-bottom":"20px","background-color":"#221a16",border:"1px solid #ddd",color:"#ddd"}},[y,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(V.prodata,(e=>((0,t.wg)(),(0,t.iD)(t.HY,null,[e.group?((0,t.wg)(),(0,t.iD)("optgroup",{label:e.group,key:e.group},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.options,(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.label,key:e.label},(0,i.zw)(e.label),9,f)))),128))],8,v)):((0,t.wg)(),(0,t.iD)("option",{value:e,key:e.value},(0,i.zw)(e.label),9,D))],64)))),256))],512)),[[o.bM,V.professional]])])]),j,(0,t._)("div",I,[(0,t.Wm)(K,{style:{"margin-bottom":"20px"},modelValue:H.date,"onUpdate:modelValue":l[7]||(l[7]=e=>H.date=e),dark:"","min-date":new Date,onInternalModelChange:S.handleInternalDate,state:!V.isNoDate&&null},null,8,["modelValue","min-date","onInternalModelChange","state"])]),(0,t.Wm)(L,{style:{"margin-bottom":"20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{md:"4"},{default:(0,t.w5)((()=>[H.showImage?((0,t.wg)(),(0,t.iD)("img",{key:0,src:H.showImage,style:{width:"200px","margin-bottom":"20px"},alt:"..."},null,8,_)):(0,t.kq)("",!0),H.isUploaded?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("label",M,[V.value?((0,t.wg)(),(0,t.iD)("span",x," Muokkaa kuva: "+(0,i.zw)(V.value.name),1)):((0,t.wg)(),(0,t.iD)("span",B,"Valitse kuva tehtävästä"))])),(0,t._)("input",{id:"file-upload",type:"file",onChange:l[8]||(l[8]=(...e)=>S.handleFileChange&&S.handleFileChange(...e))},null,32),H.isImageSelected?((0,t.wg)(),(0,t.j4)(z,{key:2,outline:"danger",size:"lg",block:"",onClick:S.removeFile},{default:(0,t.w5)((()=>[(0,t.Uk)("Poista valitsettu kuva")])),_:1},8,["onClick"])):(0,t.kq)("",!0),H.isImageSelected?((0,t.wg)(),(0,t.j4)(z,{key:3,outline:"success",size:"lg",block:"",style:{"margin-bottom":"10px"},onClick:S.uploadImage},{default:(0,t.w5)((()=>[(0,t.Uk)("Lataa valitsettu kuva")])),_:1},8,["onClick"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(W,{md:"8"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{maxlength:"70",label:"Tehtävän kuvaus...",white:"",rows:"3",modelValue:H.explanation,"onUpdate:modelValue":l[9]||(l[9]=e=>H.explanation=e),invalidFeedback:"Ole hyvä ja kirjoita tehtävän kuvaus.",validFeedback:"Ok!",required:""},null,8,["modelValue"]),(0,t._)("span",C,(0,i.zw)(H.explanation.length)+" / 70",1)])),_:1})])),_:1}),(0,t.Wm)(z,{outline:"success",size:"lg",block:"",onClick:S.addRecipient,style:{"margin-top":"5px","margin-bottom":"20px"},type:"submit"},{default:(0,t.w5)((()=>[(0,t.Uk)("Vahvista tilaus")])),_:1},8,["onClick"])])),_:1})],32)])),_:1})])}a(2062);var V=a(4912),S=a(4313),F=a(5800),U=a(8579),W=a(3998),z=a(7514),E=a(4870),K={name:"recipient-form",props:{recipientBookings:Array},components:{MDBBtn:S.$v,MDBContainer:S.L5,MDBInput:S.u2,MDBRow:S.uZ,MDBCol:S.TK,MDBTextarea:S.uj,MDBBtnClose:S.Ok,VueDatePicker:V.Z},data(){return{recipientId:null,header:"",address:null,lat:null,lng:null,isNoDate:!1,professional:"",addFile:null,dateTest:null,calendarTooltips:[],value:null,aaa:"",file:null,f:null,prodata:W.Z}},setup(){const e=(0,E.iH)(null),l=(0,E.iH)(""),a=(0,E.iH)(!1),t=(0,E.iH)(null),i=(0,E.iH)(null),o=(0,E.iH)(!1),n=(0,E.iH)(!1),s=(0,E.iH)(!1);return{date:e,explanation:l,isImageSelected:a,imgId:t,showImage:i,isShowImage:o,isUploaded:n,isNotSelected:s}},computed:{currentRouteName(){return this.$route.name}},async mounted(){const e=window.localStorage.getItem("loggedAppUser");if(e){const l=JSON.parse(e);this.recipientId=l.id,console.log("User id in recipient: "+l.id)}const l={lat:50.064192,lng:-130.605469},a={north:l.lat+.1,south:l.lat-.1,east:l.lng+.1,west:l.lng-.1},t=document.getElementById("osoite"),i={bounds:a,componentRestrictions:{country:"fi"},fields:["address_components","geometry","icon","name","formatted_address"],strictBounds:!1},o=new google.maps.places.Autocomplete(t,i);o.addListener("place_changed",(()=>{let e=o.getPlace();this.lat=e.geometry.location.lat(),this.lng=e.geometry.location.lng(),this.address=e.formatted_address,console.log(e)}))},methods:{cancelRecipientForm(){this.$router.go(-1)},async findRecipients(){const e=await F.Z.getOwnBookings(this.recipientId);console.log("Recipients "+e.length)},async remFile(){await U.Z.remove("644cff805261bf7d9943c5da","644cff875261bf7d9943c5dd")},handleFileChange(e){try{const l=e.target.files[0];console.log("event target client ",e.target.files[0]),l&&(this.showImage=URL.createObjectURL(l),this.file=e.target.files[0])}catch(l){console.log("Error:",l)}this.value=e.target.files[0],e.target.files[0]?this.isImageSelected=!0:this.isImageSelected=!1},async uploadImage(){const e=new FormData;e.append("file",this.file,this.file.name);const l=await U.Z.create(e);l&&(this.imgId=l.imgCreated._id,this.file=null,this.isImageSelected=!1,this.isUploaded=!0)},removeFile(){this.value=null,this.isImageSelected=!1,this.showImage=null},formatDate(e=Date){return e?(0,z.Z)(e,"dd.MM.yyyy, HH:mm"):null},backToDashboard(){},getDate(){console.log("selected date: "+this.date.getDate())},handleInternalDate(){console.log("Handled"),this.isNoDate=!1},async addRecipient(){let e;if(""===this.professional&&(this.isNotSelected=!0),this.date||(this.isNoDate=!0),this.date){let l=this.date.getFullYear(),a=this.date.getMonth(),t=this.date.getDate(),i=this.date.getHours(),o=this.date.getMinutes();const n=new Date(l,a,t,i,o).getTime();e={created:this.date,created_ms:n,header:this.header,address:this.address,latitude:this.lat,longitude:this.lng,professional:this.professional,year:this.date.getFullYear(),month:this.date.getMonth(),day:this.date.getDate(),hours:this.date.getHours(),minutes:this.date.getMinutes(),description:this.explanation,status:"notSeen",imageId:this.imgId}}if(this.header&&this.address&&this.professional&&this.date&&this.explanation){const l=await F.Z.addRecipient(this.recipientId,e);this.$emit("booking:update",l),console.log("Booking--- "+l),this.$router.push("/received")}else console.log("Something went wrong"),console.log("Aadress "+this.address),console.log("header "+this.header),console.log("Explanation "+this.explanation),console.log("Profession "+this.professional),console.log("Date "+this.date)},checkForm(e=Event){e.target.classList.add("was-validated")}}},A=a(89);const L=(0,A.Z)(K,[["render",H]]);var T=L}}]);
//# sourceMappingURL=89.4ff3ce99.js.map